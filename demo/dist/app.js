!function(e){function t(t){for(var n,i,l=t[0],s=t[1],u=t[2],d=0,p=[];d<l.length;d++)i=l[d],a[i]&&p.push(a[i][0]),a[i]=0;for(n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n]);for(c&&c(t);p.length;)p.shift()();return o.push.apply(o,u||[]),r()}function r(){for(var e,t=0;t<o.length;t++){for(var r=o[t],n=!0,l=1;l<r.length;l++){var s=r[l];0!==a[s]&&(n=!1)}n&&(o.splice(t--,1),e=i(i.s=r[0]))}return e}var n={},a={0:0},o=[];function i(t){if(n[t])return n[t].exports;var r=n[t]={i:t,l:!1,exports:{}};return e[t].call(r.exports,r,r.exports,i),r.l=!0,r.exports}i.m=e,i.c=n,i.d=function(e,t,r){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(i.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)i.d(r,n,function(t){return e[t]}.bind(null,n));return r},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="";var l=window.webpackJsonp=window.webpackJsonp||[],s=l.push.bind(l);l.push=t,l=l.slice();for(var u=0;u<l.length;u++)t(l[u]);var c=s;o.push([161,1]),r()}([,,function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=t.NEW_PROJECT="NEW_PROJECT",a=t.LOAD_PROJECT="LOAD_PROJECT",o=t.SAVE_PROJECT="SAVE_PROJECT",i=t.OPEN_CATALOG="OPEN_CATALOG",l=t.SELECT_TOOL_EDIT="SELECT_TOOL_EDIT",s=t.UNSELECT_ALL="UNSELECT_ALL",u=t.SET_PROPERTIES="SET_PROPERTIES",c=t.SET_ITEMS_ATTRIBUTES="SET_ITEMS_ATTRIBUTES",d=t.SET_LINES_ATTRIBUTES="SET_LINES_ATTRIBUTES",p=t.SET_HOLES_ATTRIBUTES="SET_HOLES_ATTRIBUTES",f=t.REMOVE="REMOVE",h=t.UNDO="UNDO",y=t.ROLLBACK="ROLLBACK",m=t.SET_PROJECT_PROPERTIES="SET_PROJECT_PROPERTIES",g=t.OPEN_PROJECT_CONFIGURATOR="OPEN_PROJECT_CONFIGURATOR",v=t.INIT_CATALOG="INIT_CATALOG",E=t.UPDATE_MOUSE_COORDS="UPDATE_MOUSE_COORDS",_=t.UPDATE_ZOOM_SCALE="UPDATE_ZOOM_SCALE",O=t.TOGGLE_SNAP="TOGGLE_SNAP",b=t.CHANGE_CATALOG_PAGE="CHANGE_CATALOG_PAGE",w=t.GO_BACK_TO_CATALOG_PAGE="GO_BACK_TO_CATALOG_PAGE",I=t.THROW_ERROR="THROW_ERROR",S=t.THROW_WARNING="THROW_WARNING",M=t.COPY_PROPERTIES="COPY_PROPERTIES",x=t.PASTE_PROPERTIES="PASTE_PROPERTIES",R=t.PUSH_LAST_SELECTED_CATALOG_ELEMENT_TO_HISTORY="PUSH_LAST_SELECTED_CATALOG_ELEMENT_TO_HISTORY",P=t.ALTERATE_STATE="ALTERATE_STATE",D=t.SET_MODE="SET_MODE",T=t.ADD_HORIZONTAL_GUIDE="ADD_HORIZONTAL_GUIDE",A=t.ADD_VERTICAL_GUIDE="ADD_VERTICAL_GUIDE",G=t.ADD_CIRCULAR_GUIDE="ADD_CIRCULAR_GUIDE",L=t.REMOVE_HORIZONTAL_GUIDE="REMOVE_HORIZONTAL_GUIDE",C=t.REMOVE_VERTICAL_GUIDE="REMOVE_VERTICAL_GUIDE",N=t.REMOVE_CIRCULAR_GUIDE="REMOVE_CIRCULAR_GUIDE",j=t.SELECT_TOOL_ZOOM_IN="SELECT_TOOL_ZOOM_IN",k=t.SELECT_TOOL_ZOOM_OUT="SELECT_TOOL_ZOOM_OUT",U=t.SELECT_TOOL_PAN="SELECT_TOOL_PAN",V=t.UPDATE_2D_CAMERA="UPDATE_2D_CAMERA",F=t.SELECT_TOOL_DRAWING_ITEM="SELECT_TOOL_DRAWING_ITEM",H=t.UPDATE_DRAWING_ITEM="UPDATE_DRAWING_ITEM",B=t.END_DRAWING_ITEM="END_DRAWING_ITEM",z=t.BEGIN_DRAGGING_ITEM="BEGIN_DRAGGING_ITEM",q=t.UPDATE_DRAGGING_ITEM="UPDATE_DRAGGING_ITEM",W=t.END_DRAGGING_ITEM="END_DRAGGING_ITEM",Y=t.BEGIN_ROTATING_ITEM="BEGIN_ROTATING_ITEM",Z=t.UPDATE_ROTATING_ITEM="UPDATE_ROTATING_ITEM",J=t.END_ROTATING_ITEM="END_ROTATING_ITEM",X=t.ADD_GROUP="ADD_GROUP",K=t.ADD_GROUP_FROM_SELECTED="ADD_GROUP_FROM_SELECTED",Q=t.SELECT_GROUP="SELECT_GROUP",$=t.UNSELECT_GROUP="UNSELECT_GROUP",ee=t.ADD_TO_GROUP="ADD_TO_GROUP",te=t.REMOVE_FROM_GROUP="REMOVE_FROM_GROUP",re=t.SET_GROUP_PROPERTIES="SET_GROUP_PROPERTIES",ne=t.SET_GROUP_ATTRIBUTES="SET_GROUP_ATTRIBUTES",ae=t.SET_GROUP_BARYCENTER="SET_GROUP_BARYCENTER",oe=t.REMOVE_GROUP="REMOVE_GROUP",ie=t.REMOVE_GROUP_AND_DELETE_ELEMENTS="REMOVE_GROUP_AND_DELETE_ELEMENTS",le=t.GROUP_TRANSLATE="GROUP_TRANSLATE",se=t.GROUP_ROTATE="GROUP_ROTATE",ue=t.SELECT_HOLE="SELECT_HOLE",ce=t.SELECT_AREA="SELECT_AREA",de=t.SELECT_ITEM="SELECT_ITEM",pe=t.SELECT_LINE="SELECT_LINE",fe=t.SELECT_TOOL_DRAWING_LINE="SELECT_TOOL_DRAWING_LINE",he=t.BEGIN_DRAWING_LINE="BEGIN_DRAWING_LINE",ye=t.UPDATE_DRAWING_LINE="UPDATE_DRAWING_LINE",me=t.END_DRAWING_LINE="END_DRAWING_LINE",ge=t.SELECT_TOOL_DRAWING_HOLE="SELECT_TOOL_DRAWING_HOLE",ve=t.UPDATE_DRAWING_HOLE="UPDATE_DRAWING_HOLE",Ee=t.END_DRAWING_HOLE="END_DRAWING_HOLE",_e=t.BEGIN_DRAGGING_LINE="BEGIN_DRAGGING_LINE",Oe=t.UPDATE_DRAGGING_LINE="UPDATE_DRAGGING_LINE",be=t.END_DRAGGING_LINE="END_DRAGGING_LINE",we=(t.SELECT_TOOL_UPLOAD_IMAGE="SELECT_TOOL_UPLOAD_IMAGE",t.BEGIN_UPLOADING_IMAGE="BEGIN_UPLOADING_IMAGE",t.END_UPLOADING_IMAGE="END_UPLOADING_IMAGE",t.BEGIN_FITTING_IMAGE="BEGIN_FITTING_IMAGE",t.END_FITTING_IMAGE="END_FITTING_IMAGE",t.BEGIN_DRAGGING_HOLE="BEGIN_DRAGGING_HOLE"),Ie=t.UPDATE_DRAGGING_HOLE="UPDATE_DRAGGING_HOLE",Se=t.END_DRAGGING_HOLE="END_DRAGGING_HOLE",Me=t.BEGIN_DRAGGING_VERTEX="BEGIN_DRAGGING_VERTEX",xe=t.UPDATE_DRAGGING_VERTEX="UPDATE_DRAGGING_VERTEX",Re=t.END_DRAGGING_VERTEX="END_DRAGGING_VERTEX",Pe=t.SET_LAYER_PROPERTIES="SET_LAYER_PROPERTIES",De=t.ADD_LAYER="ADD_LAYER",Te=t.SELECT_LAYER="SELECT_LAYER",Ae=t.REMOVE_LAYER="REMOVE_LAYER",Ge=(t.PROJECT_ACTIONS={NEW_PROJECT:n,LOAD_PROJECT:a,SAVE_PROJECT:o,OPEN_CATALOG:i,SELECT_TOOL_EDIT:l,UNSELECT_ALL:s,SET_PROPERTIES:u,SET_ITEMS_ATTRIBUTES:c,SET_LINES_ATTRIBUTES:d,SET_HOLES_ATTRIBUTES:p,REMOVE:f,UNDO:h,ROLLBACK:y,SET_PROJECT_PROPERTIES:m,OPEN_PROJECT_CONFIGURATOR:g,INIT_CATALOG:v,UPDATE_MOUSE_COORDS:E,UPDATE_ZOOM_SCALE:_,TOGGLE_SNAP:O,CHANGE_CATALOG_PAGE:b,GO_BACK_TO_CATALOG_PAGE:w,THROW_ERROR:I,THROW_WARNING:S,COPY_PROPERTIES:M,PASTE_PROPERTIES:x,PUSH_LAST_SELECTED_CATALOG_ELEMENT_TO_HISTORY:R,ALTERATE_STATE:P,SET_MODE:D,ADD_HORIZONTAL_GUIDE:T,ADD_VERTICAL_GUIDE:A,ADD_CIRCULAR_GUIDE:G,REMOVE_HORIZONTAL_GUIDE:L,REMOVE_VERTICAL_GUIDE:C,REMOVE_CIRCULAR_GUIDE:N},t.VIEWER2D_ACTIONS={SELECT_TOOL_ZOOM_IN:j,SELECT_TOOL_ZOOM_OUT:k,SELECT_TOOL_PAN:U,UPDATE_2D_CAMERA:V},t.ITEMS_ACTIONS={SELECT_ITEM:de,SELECT_TOOL_DRAWING_ITEM:F,UPDATE_DRAWING_ITEM:H,END_DRAWING_ITEM:B,BEGIN_DRAGGING_ITEM:z,UPDATE_DRAGGING_ITEM:q,END_DRAGGING_ITEM:W,BEGIN_ROTATING_ITEM:Y,UPDATE_ROTATING_ITEM:Z,END_ROTATING_ITEM:J},t.HOLE_ACTIONS={SELECT_HOLE:ue,SELECT_TOOL_DRAWING_HOLE:ge,UPDATE_DRAWING_HOLE:ve,END_DRAWING_HOLE:Ee,BEGIN_DRAGGING_HOLE:we,UPDATE_DRAGGING_HOLE:Ie,END_DRAGGING_HOLE:Se},t.LINE_ACTIONS={SELECT_LINE:pe,SELECT_TOOL_DRAWING_LINE:fe,BEGIN_DRAWING_LINE:he,UPDATE_DRAWING_LINE:ye,END_DRAWING_LINE:me,BEGIN_DRAGGING_LINE:_e,UPDATE_DRAGGING_LINE:Oe,END_DRAGGING_LINE:be},t.AREA_ACTIONS={SELECT_AREA:ce},t.GROUP_ACTIONS={ADD_GROUP:X,ADD_GROUP_FROM_SELECTED:K,SELECT_GROUP:Q,UNSELECT_GROUP:$,ADD_TO_GROUP:ee,REMOVE_FROM_GROUP:te,SET_GROUP_PROPERTIES:re,SET_GROUP_ATTRIBUTES:ne,SET_GROUP_BARYCENTER:ae,REMOVE_GROUP:oe,REMOVE_GROUP_AND_DELETE_ELEMENTS:ie,GROUP_TRANSLATE:le,GROUP_ROTATE:se},t.SCENE_ACTIONS={ADD_LAYER:De,SET_LAYER_PROPERTIES:Pe,SELECT_LAYER:Te,REMOVE_LAYER:Ae},t.VERTEX_ACTIONS={BEGIN_DRAGGING_VERTEX:Me,UPDATE_DRAGGING_VERTEX:xe,END_DRAGGING_VERTEX:Re},t.MODE_IDLE="MODE_IDLE"),Le=t.MODE_2D_ZOOM_IN="MODE_2D_ZOOM_IN",Ce=t.MODE_2D_ZOOM_OUT="MODE_2D_ZOOM_OUT",Ne=t.MODE_2D_PAN="MODE_2D_PAN",je=(t.MODE_3D_VIEW="MODE_3D_VIEW",t.MODE_3D_FIRST_PERSON="MODE_3D_FIRST_PERSON",t.MODE_WAITING_DRAWING_LINE="MODE_WAITING_DRAWING_LINE"),ke=t.MODE_DRAGGING_LINE="MODE_DRAGGING_LINE",Ue=t.MODE_DRAGGING_VERTEX="MODE_DRAGGING_VERTEX",Ve=t.MODE_DRAGGING_ITEM="MODE_DRAGGING_ITEM",Fe=t.MODE_DRAGGING_HOLE="MODE_DRAGGING_HOLE",He=t.MODE_DRAWING_LINE="MODE_DRAWING_LINE",Be=t.MODE_DRAWING_HOLE="MODE_DRAWING_HOLE",ze=t.MODE_DRAWING_ITEM="MODE_DRAWING_ITEM",qe=t.MODE_ROTATING_ITEM="MODE_ROTATING_ITEM",We=t.MODE_UPLOADING_IMAGE="MODE_UPLOADING_IMAGE",Ye=t.MODE_FITTING_IMAGE="MODE_FITTING_IMAGE",Ze=(t.MODE_VIEWING_CATALOG="MODE_VIEWING_CATALOG",t.MODE_CONFIGURING_PROJECT="MODE_CONFIGURING_PROJECT",t.MODE_SNAPPING=[Ge,Le,Ce,Ne,je,He,Be,ze,ke,Ue,Ve,Fe,Ye,We,qe],t.UNIT_MILLIMETER="mm"),Je=t.UNIT_CENTIMETER="cm",Xe=t.UNIT_METER="m",Ke=t.UNIT_INCH="in",Qe=t.UNIT_FOOT="ft",$e=t.UNIT_MILE="mi";t.UNITS_LENGTH=[Ze,Je,Xe,Ke,Qe,$e],t.EPSILON=1e-6,t.KEYBOARD_BUTTON_CODE={DELETE:46,BACKSPACE:8,ESC:27,Z:90,ALT:18,C:67,V:86,CTRL:17,ENTER:13,TAB:9}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=t.COLORS={white:"#FFF",black:"#000"},a=(t.MATERIAL_COLORS={500:{amber:"#FFC107",blue_grey:"#607D8B",blue:"#2196F3",brown:"#795548",cyan:"#00BCD4",deep_orange:"#FF5722",deep_purple:"#673AB7",green:"#4CAF50",grey:"#9E9E9E",indigo:"#3F51B5",light_blue:"#03A9F4",light_green:"#8BC34A",lime:"#CDDC39",orange:"#FF9800",pink:"#E91E63",purple:"#9C27B0",red:"#F44336",teal:"#009688",yellow:"#FFEB3B"}},t.PRIMARY_COLOR={main:"#28292D",alt:"#2E2F33",icon:"#C2C2C2",border:"1px solid #555",text_main:n.white,text_alt:"#EBEBEB",input:"#55595C"},t.SECONDARY_COLOR={main:"#1CA6FC",alt:"#005FAF",icon:"#1CA6FC",border:"1px solid #FFF"},t.MESH_SELECTED="#99C3FB");t.AREA_MESH_COLOR={selected:a,unselected:"#F5F4F4"},t.LINE_MESH_COLOR={selected:a,unselected:"#8E9BA2"}},,,,,function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.VerticalGuide=t.HorizontalGuide=t.Item=t.Area=t.Vertex=t.Hole=t.Line=t.Layer=t.Group=t.Project=void 0;var n=p(r(307)),a=p(r(331)),o=p(r(332)),i=p(r(333)),l=p(r(334)),s=p(r(335)),u=p(r(336)),c=p(r(337)),d=r(338);function p(e){return e&&e.__esModule?e:{default:e}}t.Project=n.default,t.Group=a.default,t.Layer=o.default,t.Line=i.default,t.Hole=l.default,t.Vertex=s.default,t.Area=u.default,t.Item=c.default,t.HorizontalGuide=d.HorizontalGuide,t.VerticalGuide=d.VerticalGuide,t.default={Project:n.default,Group:a.default,Layer:o.default,Line:i.default,Hole:l.default,Vertex:s.default,Area:u.default,Item:c.default,HorizontalGuide:d.HorizontalGuide,VerticalGuide:d.VerticalGuide}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ObjectUtils=t.NameGenerator=t.IDBroker=t.history=t.SnapSceneUtils=t.SnapUtils=t.MathUtils=t.GraphInnerCycles=t.GeometryUtils=void 0;var n=f(r(42)),a=f(r(308)),o=f(r(86)),i=f(r(41)),l=f(r(312)),s=f(r(313)),u=f(r(141)),c=p(r(320)),d=p(r(330));function p(e){return e&&e.__esModule?e:{default:e}}function f(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}t.GeometryUtils=n,t.GraphInnerCycles=a,t.MathUtils=o,t.SnapUtils=i,t.SnapSceneUtils=l,t.history=s,t.IDBroker=c.default,t.NameGenerator=d.default,t.ObjectUtils=u,t.default={GeometryUtils:n,GraphInnerCycles:a,MathUtils:o,SnapUtils:i,SnapSceneUtils:l,history:s,IDBroker:c.default,NameGenerator:d.default,ObjectUtils:u}},,function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FormTextInput=t.FormSubmitButton=t.FormSlider=t.FormSelect=t.FormNumberInput=t.FormLabel=t.FormColorInput=t.FormBlock=t.DeleteButton=t.ContentTitle=t.ContentContainer=t.CancelButton=t.Button=void 0;var n=m(r(47)),a=m(r(184)),o=m(r(96)),i=m(r(97)),l=m(r(185)),s=m(r(186)),u=m(r(187)),c=m(r(188)),d=m(r(98)),p=m(r(190)),f=m(r(191)),h=m(r(262)),y=m(r(48));function m(e){return e&&e.__esModule?e:{default:e}}t.Button=n.default,t.CancelButton=a.default,t.ContentContainer=o.default,t.ContentTitle=i.default,t.DeleteButton=l.default,t.FormBlock=s.default,t.FormColorInput=u.default,t.FormLabel=c.default,t.FormNumberInput=d.default,t.FormSelect=p.default,t.FormSlider=f.default,t.FormSubmitButton=h.default,t.FormTextInput=y.default,t.default={Button:n.default,CancelButton:a.default,ContentContainer:o.default,ContentTitle:i.default,DeleteButton:l.default,FormBlock:s.default,FormColorInput:u.default,FormLabel:c.default,FormNumberInput:d.default,FormSelect:p.default,FormSlider:f.default,FormSubmitButton:h.default,FormTextInput:y.default}},,,,,,,,,,,,,function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n={tableStyle:{width:"100%",borderSpacing:"2px 0",marginBottom:"2px"},firstTdStyle:{width:"6em",textTransform:"capitalize"}};t.default=n},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},a=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o=r(0),i=c(o),l=c(r(1)),s=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}(r(3)),u=r(18);function c(e){return e&&e.__esModule?e:{default:e}}var d={borderTop:"1px solid #222",borderBottom:"1px solid #48494E",userSelect:"none"},p={fontSize:"11px",color:s.PRIMARY_COLOR.text_alt,padding:"5px 15px 8px 15px",backgroundColor:s.PRIMARY_COLOR.alt,textShadow:"-1px -1px 2px rgba(0, 0, 0, 1)",boxShadow:"inset 0px -3px 19px 0px rgba(0,0,0,0.5)",margin:"0px",cursor:"pointer"},f={fontSize:"11px",color:s.PRIMARY_COLOR.text_alt,border:"1px solid #222",padding:"0px",backgroundColor:s.PRIMARY_COLOR.alt,textShadow:"-1px -1px 2px rgba(0, 0, 0, 1)"},h={float:"right"},y=function(e){function t(e,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,r));return n.state={opened:!!e.hasOwnProperty("opened")&&e.opened,hover:!1},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),a(t,[{key:"toggleOpen",value:function(){this.setState({opened:!this.state.opened})}},{key:"toggleHover",value:function(){this.setState({hover:!this.state.hover})}},{key:"render",value:function(){var e=this,t=this.props,r=t.name,a=t.headComponents,o=t.children,l=this.state,c=l.opened,y=l.hover;return i.default.createElement("div",{style:d},i.default.createElement("h3",{style:n({},p,{color:y?s.SECONDARY_COLOR.main:s.PRIMARY_COLOR.text_alt}),onMouseEnter:function(){return e.toggleHover()},onMouseLeave:function(){return e.toggleHover()},onClick:function(){return e.toggleOpen()}},r,a,c?i.default.createElement(u.FaAngleUp,{style:h}):i.default.createElement(u.FaAngleDown,{style:h})),i.default.createElement("div",{style:n({},f,{display:c?"block":"none"})},o))}}]),t}(o.Component);t.default=y,y.propTypes={name:l.default.string.isRequired,headComponents:l.default.array,opened:l.default.bool}},,,,,,function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.State=t.HistoryStructure=t.Catalog=t.CatalogElement=t.Scene=t.DefaultLayers=t.Group=t.Layer=t.Item=t.Area=t.Hole=t.Line=t.Vertex=t.ElementsSet=t.DefaultGrids=t.Grid=void 0;var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},o=r(5),i=r(2),l=r(41);function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function c(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var d=function(e,t,r){return e?new o.Map(e).map((function(e){return new t(e)})).toMap():r||new o.Map},p=t.Grid=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return s(this,t),u(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,a({},e,{properties:(0,o.fromJS)(e.properties||{})})))}return c(t,e),t}((0,o.Record)({id:"",type:"",properties:(0,o.Map)()},"Grid")),f=t.DefaultGrids=new o.Map({h1:new p({id:"h1",type:"horizontal-streak",properties:{step:20,colors:["#808080","#ddd","#ddd","#ddd","#ddd"]}}),v1:new p({id:"v1",type:"vertical-streak",properties:{step:20,colors:["#808080","#ddd","#ddd","#ddd","#ddd"]}})}),h=t.ElementsSet=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return s(this,t),u(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,{vertices:new o.List(e.vertices||[]),lines:new o.List(e.lines||[]),holes:new o.List(e.holes||[]),areas:new o.List(e.areas||[]),items:new o.List(e.items||[])}))}return c(t,e),t}((0,o.Record)({vertices:new o.List,lines:new o.List,holes:new o.List,areas:new o.List,items:new o.List},"ElementsSet")),y={id:"",type:"",prototype:"",name:"",misc:new o.Map,selected:!1,properties:new o.Map,visible:!0},m=t.Vertex=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return s(this,t),u(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,a({},e,{lines:new o.List(e.lines||[]),areas:new o.List(e.areas||[])})))}return c(t,e),t}((0,o.Record)(a({},y,{x:-1,y:-1,prototype:"vertices",lines:new o.List,areas:new o.List}),"Vertex")),g=t.Line=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return s(this,t),u(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,a({},e,{properties:(0,o.fromJS)(e.properties||{}),vertices:new o.List(e.vertices||[]),holes:new o.List(e.holes||[])})))}return c(t,e),t}((0,o.Record)(a({},y,{prototype:"lines",vertices:new o.List,holes:new o.List}),"Line")),v=t.Hole=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return s(this,t),u(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,a({},e,{properties:(0,o.fromJS)(e.properties||{})})))}return c(t,e),t}((0,o.Record)(a({},y,{prototype:"holes",offset:-1,line:""}),"Hole")),E=t.Area=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return s(this,t),u(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,a({},e,{properties:(0,o.fromJS)(e.properties||{}),vertices:new o.List(e.vertices||[])})))}return c(t,e),t}((0,o.Record)(a({},y,{prototype:"areas",vertices:new o.List,holes:new o.List}),"Area")),_=t.Item=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return s(this,t),u(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,a({},e,{properties:(0,o.fromJS)(e.properties||{})})))}return c(t,e),t}((0,o.Record)(a({},y,{prototype:"items",x:0,y:0,rotation:0}),"Item")),O=t.Layer=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return s(this,t),u(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,a({},e,{vertices:d(e.vertices,m),lines:d(e.lines,g),holes:d(e.holes,v),areas:d(e.areas,E),items:d(e.items,_),selected:new h(e.selected)})))}return c(t,e),t}((0,o.Record)({id:"",altitude:0,order:0,opacity:1,name:"",visible:!0,vertices:new o.Map,lines:new o.Map,holes:new o.Map,areas:new o.Map,items:new o.Map,selected:new h},"Layer")),b=t.Group=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return s(this,t),u(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,a({},e,{properties:(0,o.fromJS)(e.properties||{}),elements:(0,o.fromJS)(e.elements||{})})))}return c(t,e),t}((0,o.Record)(a({},y,{prototype:"groups",x:0,y:0,rotation:0,elements:new o.Map}),"Group")),w=t.DefaultLayers=new o.Map({"layer-1":new O({id:"layer-1",name:"default"})}),I=t.Scene=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};s(this,t);var r=d(e.layers,O,w);return u(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,a({},e,{grids:d(e.grids,p,f),layers:r,selectedLayer:r.first().id,groups:d(e.groups||{},b),meta:e.meta?(0,o.fromJS)(e.meta):new o.Map,guides:e.guides?(0,o.fromJS)(e.guides):new o.Map({horizontal:new o.Map,vertical:new o.Map,circular:new o.Map})})))}return c(t,e),t}((0,o.Record)({unit:"cm",layers:new o.Map,grids:new o.Map,selectedLayer:null,groups:new o.Map,width:3e3,height:2e3,meta:new o.Map,guides:new o.Map},"Scene")),S=t.CatalogElement=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return s(this,t),u(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,a({},e,{info:(0,o.fromJS)(e.info),properties:(0,o.fromJS)(e.properties)})))}return c(t,e),t}((0,o.Record)({name:"",prototype:"",info:new o.Map,properties:new o.Map},"CatalogElement")),M=t.Catalog=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};s(this,t);var r=d(e.elements,S);return u(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,{elements:r,ready:!r.isEmpty()}))}return c(t,e),n(t,[{key:"factoryElement",value:function(e,t,r){if(!this.elements.has(e)){var n=this.elements.map((function(e){return e.name})).toArray();throw new Error("Element "+e+" does not exist in catalog "+n)}var a=this.elements.get(e),o=a.properties.map((function(e,t){return r&&r.has(t)?r.get(t):e.get("defaultValue")}));switch(a.prototype){case"lines":return new g(t).merge({properties:o});case"holes":return new v(t).merge({properties:o});case"areas":return new E(t).merge({properties:o});case"items":return new _(t).merge({properties:o});default:throw new Error("prototype not valid")}}}]),t}((0,o.Record)({ready:!1,page:"root",path:new o.List,elements:new o.Map},"Catalog")),x=t.HistoryStructure=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return s(this,t),u(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,{list:(0,o.fromJS)(e.list||[]),first:new I(e.scene),last:new I(e.last||e.scene)}))}return c(t,e),t}((0,o.Record)({list:new o.List,first:null,last:null},"HistoryStructure"));t.State=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return s(this,t),u(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,a({},e,{scene:new I(e.scene),sceneHistory:new x(e),catalog:new M(e.catalog||{}),viewer2D:new o.Map(e.viewer2D||{}),drawingSupport:new o.Map(e.drawingSupport||{}),draggingSupport:new o.Map(e.draggingSupport||{}),rotatingSupport:new o.Map(e.rotatingSupport||{}),misc:e.misc?(0,o.fromJS)(e.misc):new o.Map})))}return c(t,e),t}((0,o.Record)({mode:i.MODE_IDLE,scene:new I,sceneHistory:new x,catalog:new M,viewer2D:new o.Map,mouse:new o.Map({x:0,y:0}),zoom:0,snapMask:l.SNAP_MASK,snapElements:new o.List,activeSnapElement:null,drawingSupport:new o.Map,draggingSupport:new o.Map,rotatingSupport:new o.Map,errors:new o.List,warnings:new o.List,clipboardProperties:new o.Map,selectedElementsHistory:new o.List,misc:new o.Map,alterate:!1},"State"))},,,function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ReactPlannerUtils=t.ElementsFactories=t.ReactPlannerClasses=t.ReactPlannerReducers=t.ReactPlannerActions=t.ReactPlannerComponents=t.ReactPlannerSharedStyle=t.ReactPlannerConstants=t.Plugins=t.ReactPlanner=t.reducer=t.Models=t.Translator=t.Catalog=void 0;var n=v(r(94)),a=v(r(59)),o=g(r(31)),i=v(r(305)),l=v(r(348)),s=v(r(399)),u=g(r(2)),c=g(r(3)),d=v(r(142)),p=v(r(87)),f=v(r(140)),h=v(r(8)),y=v(r(403)),m=v(r(9));function g(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function v(e){return e&&e.__esModule?e:{default:e}}t.Catalog=n.default,t.Translator=a.default,t.Models=o,t.reducer=i.default,t.ReactPlanner=l.default,t.Plugins=s.default,t.ReactPlannerConstants=u,t.ReactPlannerSharedStyle=c,t.ReactPlannerComponents=d.default,t.ReactPlannerActions=p.default,t.ReactPlannerReducers=f.default,t.ReactPlannerClasses=h.default,t.ElementsFactories=y.default,t.ReactPlannerUtils=m.default},,,,,,,function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SNAP_MASK=t.SNAP_GUIDE=t.SNAP_GRID=t.SNAP_SEGMENT=t.SNAP_LINE=t.SNAP_POINT=void 0;var n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},a=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}();t.nearestSnap=function(e,t,r,n){var a={point:n.get(c),line:n.get(d),"line-segment":n.get(p),grid:n.get(f)};return e.valueSeq().filter((function(e){return a[e.type]&&e.isNear(t,r,e.radius)})).map((function(e){return{snap:e,point:e.nearestPoint(t,r)}})).filter((function(e){var t=e.snap.radius;return e.point.distance<t})).min((function(e,t){var r=e.snap.priority,n=e.point.distance,a=t.snap.priority,o=t.point.distance;return r===a?n<o?-1:1:r>a?-1:1}))},t.addPointSnap=v,t.addLineSnap=function(e,t,r,n,a,l,s){return s=new o.List([s]),e.withMutations((function(e){if(e.some((function(e){return"line"===e.type&&t===e.a&&r===e.b&&n===e.c})))return e;e.valueSeq().filter((function(e){return"line"===e.type})).map((function(e){return i.twoLinesIntersection(e.a,e.b,e.c,t,r,n)})).filter((function(e){return void 0!==e})).forEach((function(t){var r=t.x,n=t.y;return v(e,r,n,20,40)}));e.push(new y({a:t,b:r,c:n,radius:a,priority:l,related:s}))}))},t.addLineSegmentSnap=function(e,t,r,n,a,i,l,s){return s=new o.List([s]),e.push(new m({x1:t,y1:r,x2:n,y2:a,radius:i,priority:l,related:s}))},t.addGridSnap=function(e,t,r,n,a,i){return i=new o.List([i]),e.push(new g({x:t,y:r,radius:n,priority:a,related:i}))};var o=r(5),i=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}(r(42));function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var c=t.SNAP_POINT="SNAP_POINT",d=t.SNAP_LINE="SNAP_LINE",p=t.SNAP_SEGMENT="SNAP_SEGMENT",f=t.SNAP_GRID="SNAP_GRID",h=(t.SNAP_GUIDE="SNAP_GUIDE",t.SNAP_MASK=new o.Map({SNAP_POINT:!0,SNAP_LINE:!0,SNAP_SEGMENT:!0,SNAP_GRID:!1,SNAP_GUIDE:!0}),function(e){function t(){return l(this,t),s(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return u(t,e),a(t,[{key:"nearestPoint",value:function(e,t){return{x:this.x,y:this.y,distance:i.pointsDistance(this.x,this.y,e,t)}}},{key:"isNear",value:function(e,t,r){return 1+~(this.x-e)<r&&1+~(this.y-t)<r}}]),t}((0,o.Record)({type:"point",x:-1,y:-1,radius:1,priority:1,related:new o.List}))),y=function(e){function t(){return l(this,t),s(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return u(t,e),a(t,[{key:"nearestPoint",value:function(e,t){return n({},i.closestPointFromLine(this.a,this.b,this.c,e,t),{distance:i.distancePointFromLine(this.a,this.b,this.c,e,t)})}},{key:"isNear",value:function(e,t,r){return!0}}]),t}((0,o.Record)({type:"line",a:-1,b:-1,c:-1,radius:1,priority:1,related:new o.List})),m=function(e){function t(){return l(this,t),s(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return u(t,e),a(t,[{key:"nearestPoint",value:function(e,t){return n({},i.closestPointFromLineSegment(this.x1,this.y1,this.x2,this.y2,e,t),{distance:i.distancePointFromLineSegment(this.x1,this.y1,this.x2,this.y2,e,t)})}},{key:"isNear",value:function(e,t,r){return!0}}]),t}((0,o.Record)({type:"line-segment",x1:-1,y1:-1,x2:-1,y2:-1,radius:1,priority:1,related:new o.List})),g=function(e){function t(){return l(this,t),s(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return u(t,e),a(t,[{key:"nearestPoint",value:function(e,t){return{x:this.x,y:this.y,distance:i.pointsDistance(this.x,this.y,e,t)}}},{key:"isNear",value:function(e,t,r){return 1+~(this.x-e)<r&&1+~(this.y-t)<r}}]),t}((0,o.Record)({type:"grid",x:-1,y:-1,radius:1,priority:1,related:new o.List}));function v(e,t,r,n,a,i){return i=new o.List([i]),e.push(new h({x:t,y:r,radius:n,priority:a,related:i}))}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var r=[],n=!0,a=!1,o=void 0;try{for(var i,l=e[Symbol.iterator]();!(n=(i=l.next()).done)&&(r.push(i.value),!t||r.length!==t);n=!0);}catch(e){a=!0,o=e}finally{try{!n&&l.return&&l.return()}finally{if(a)throw o}}return r}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")};t.compareVertices=i,t.minVertex=function(e,t){return i(e,t)>0?t:e},t.maxVertex=function(e,t){return i(e,t)>0?e:t},t.orderVertices=function(e){return e.sort(i)},t.pointsDistance=l,t.verticesDistance=function(e,t){var r=e.x,n=e.y,a=t.x,o=t.y;return l(r,n,a,o)},t.horizontalLine=s,t.verticalLine=u,t.linePassingThroughTwoPoints=function(e,t,r,n){if(e===r&&t==n)throw new Error("Geometry error");return e===r?u(x):t===n?s(t):{a:t-n,b:r-e,c:n*e-r*t}},t.distancePointFromLine=function(e,t,r,n,o){return(0,a.fAbs)(e*n+t*o+r)/Math.sqrt(e*e+t*t)},t.closestPointFromLine=function(e,t,r,n,a){var o=e*e+t*t;return{x:(t*(t*n-e*a)-e*r)/o,y:(e*-t*n+e*a-t*r)/o}},t.twoLinesIntersection=function(e,t,r,n,a,o){var i=t*n-e*a;return 0===i?void 0:{x:(r*a-t*o)/i,y:(e*o-r*n)/i}},t.twoLineSegmentsIntersection=function(e,t,r,i){var l=e.x,s=e.y,u=t.x,c=t.y,d=r.x,p=r.y,f=i.x,h=i.y,y=(h-p)*(u-l)-(f-d)*(c-s),m=(f-d)*(s-p)-(h-p)*(l-d),g=(u-l)*(s-p)-(c-s)*(l-d);if((0,a.fAbs)(y)<=o.EPSILON){if((0,a.fAbs)(m)<=o.EPSILON&&(0,a.fAbs)(g)<=o.EPSILON){var v=function(e,t){return e.x===t.x?e.y-t.y:e.x-t.x},E=[e,t].sort(v),_=[r.toJS(),i.toJS()].sort(v),O=[E,_].sort((function(e,t){return v(e[0],t[0])})),b=n(O,2),w=b[0],I=b[1];return w[1].x===I[0].x?{type:I[0].y<=w[1].y?"colinear":"none"}:{type:I[0].x<=w[1].x?"colinear":"none"}}return{type:"parallel"}}var S=m/y,M=g/y;if(S>=0-o.EPSILON&&S<=1+o.EPSILON&&M>=0-o.EPSILON&&M<=1+o.EPSILON){return{type:"intersecting",point:{x:l+S*(u-l),y:s+S*(c-s)}}}return{type:"none"}},t.distancePointFromLineSegment=c,t.isPointOnLineSegment=function(e,t,r,n,a,i){var l=arguments.length>6&&void 0!==arguments[6]?arguments[6]:o.EPSILON;return c(e,t,r,n,a,i)<=l},t.closestPointFromLineSegment=function(e,t,r,n,a,o){if(e===r)return{x:e,y:o};if(t===n)return{x:a,y:t};var i=(n-t)/(r-e),l=t-i*e,s=-1/i,u=(o-s*a-l)/(i-s);return{x:u,y:i*u+l}},t.pointPositionOnLineSegment=function(e,t,r,n,a,o){var i=l(e,t,r,n),s=l(e,t,a,o)/i;e>r&&(s=d(s,0,1,1,0));return s},t.mapRange=d,t.angleBetweenTwoPointsAndOrigin=function(e,t,r,n){return 180*-Math.atan2(t-n,r-e)/Math.PI},t.angleBetweenTwoPoints=p,t.absAngleBetweenTwoPoints=function(e,t,r,n){return Math.atan2(Math.abs(n-t),Math.abs(r-e))},t.samePoints=function(e,t){var r=e.x,n=e.y,i=t.x,l=t.y;return(0,a.fAbs)(r-i)<=o.EPSILON&&(0,a.fAbs)(n-l)<=o.EPSILON},t.extendLine=function(e,t,r,n,o){var i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:6,l=p(e,t,r,n);return{x:(0,a.toFixedFloat)(e+Math.cos(l)*o,i),y:(0,a.toFixedFloat)(t+Math.sin(l)*o,i)}},t.roundVertex=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:6;return e.set("x",(0,a.toFixedFloat)(e.get("x"),t)),e.set("y",(0,a.toFixedFloat)(e.get("y"),t)),e},t.ContainsPoint=function(e,t,r){var n=e.length>>1,a=void 0,o=void 0,i=e[2*n-3]-r,l=e[2*n-2]-t,s=e[2*n-1]-r;if(0===l&&0===s)return!1;for(var u=0;u<n;u++){if(a=l,i=s,l=e[2*u]-t,s=e[2*u+1]-r,0===l&&0===s)return!1;i!==s&&(o=s>i)}for(var c=0,d=0;d<n;d++)if(a=l,i=s,l=e[2*d]-t,s=e[2*d+1]-r,!(i<0&&s<0||i>0&&s>0||a<0&&l<0)){if(i===s&&Math.min(a,l)<0)return!0;if(i!==s){var p=a+(l-a)*-i/(s-i);if(0===p)return!1;p>0&&c++,0===i&&o&&s>i&&c--,0===i&&!o&&s<i&&c--,o=s>i}}return 1==(1&c)},t.cosWithThreshold=function(e,t){var r=Math.cos(e);return r<t?0:r},t.sinWithThreshold=function(e,t){var r=Math.sin(e);return r<t?0:r},t.midPoint=function(e,t,r,n){return{x:(e+r)/2,y:(t+n)/2}},t.verticesMidPoint=function(e){var t=e.reduce((function(e,t){return{x:e.x+t.x,y:e.y+t.y}}),{x:0,y:0});return{x:t.x/e.length,y:t.y/e.length}},t.rotatePointAroundPoint=function(e,t,r,n,a){var o=a*Math.PI/180,i=Math.cos(o),l=Math.sin(o),s=e-r,u=t-n;return{x:i*s-l*u+r,y:l*s+i*u+n}};var a=r(86),o=r(2);function i(e,t){return e.x===t.x?e.y-t.y:e.x-t.x}function l(e,t,r,n){var a=e-r,o=t-n;return Math.sqrt(a*a+o*o)}function s(e){return{a:0,b:1,c:-e}}function u(e){return{a:1,b:0,c:-e}}function c(e,t,r,n,a,o){var i=r-e,l=n-t,s=i*i+l*l,u=-1;0!=s&&(u=((a-e)*i+(o-t)*l)/s);var c=void 0,d=void 0;u<0?(c=e,d=t):u>1?(c=r,d=n):(c=e+u*i,d=t+u*l);var p=a-c,f=o-d;return Math.sqrt(p*p+f*f)}function d(e,t,r,n,a){return n+(a-n)*(e-t)/(r-t)}function p(e,t,r,n){return Math.atan2(n-t,r-e)}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=i;var n=o(r(0)),a=o(r(1));function o(e){return e&&e.__esModule?e:{default:e}}function i(e){var t=e.condition,r=e.style,a=e.children;return t?Array.isArray(a)?n.default.createElement("div",{style:r},a):a:null}i.propTypes={condition:a.default.bool.isRequired,style:a.default.object}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.loadObjWithMaterial=function(e,t,r){var o=new n.default;o.setTexturePath(r);var i=e;return new Promise((function(e,r){o.load(i,(function(r){r.preload();var n=new a.default;n.setMaterials(r),n.load(t,(function(t){return e(t)}))}))}))};var n=o(r(424)),a=o(r(425));function o(e){return e&&e.__esModule?e:{default:e}}},,,function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},a=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o=r(0),i=s(o),l=s(r(1));function s(e){return e&&e.__esModule?e:{default:e}}var u={display:"inline-block",fontWeight:"400",lineHeight:"1.25",textAlign:"center",whiteSpace:"nowrap",verticalAlign:"middle",cursor:"pointer",WebkitUserSelect:"none",MozUserSelect:"none",MsUserSelect:"none",userSelect:"none",padding:"5px 14px",fontSize:"14px",color:function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}(r(3)).COLORS.black,fonWeight:"400px",transition:"background-color 175ms ease, border 175ms ease",outline:"none",borderRadius:"2px",borderWidth:"1px",borderType:"solid",width:"100%"},c={small:{fontSize:"12px",padding:"3px 8px"},normal:{},large:{padding:"8px 20px"}},d=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return r.state={hover:!1},r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),a(t,[{key:"render",value:function(){var e=this,t=this.state.hover,r=this.props,a=r.type,o=r.style,l=r.styleHover,s=r.children,d=r.size,p=function(e,t){var r={};for(var n in e)t.indexOf(n)>=0||Object.prototype.hasOwnProperty.call(e,n)&&(r[n]=e[n]);return r}(r,["type","style","styleHover","children","size"]),f=Object.assign({},u,c[d],t?l:o);return i.default.createElement("button",n({type:a,onMouseEnter:function(t){return e.setState({hover:!0})},onMouseLeave:function(t){return e.setState({hover:!1})},style:f},p),s)}}]),t}(o.Component);t.default=d,d.defaultProps={type:"button",size:"normal",style:{backgroundColor:"#e6e6e6",borderColor:"#adadad"},styleHover:{backgroundColor:"#d4d4d4",borderColor:"#8c8c8c"}},d.propTypes={type:l.default.string,style:l.default.object,styleHover:l.default.object,size:l.default.oneOf(["large","normal","small"])}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n,a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),i=r(0),l=(n=i)&&n.__esModule?n:{default:n},s=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}(r(3));var u={display:"block",width:"100%",padding:"0 2px",fontSize:"13px",lineHeight:"1.25",color:s.PRIMARY_COLOR.input,backgroundColor:s.COLORS.white,backgroundImage:"none",border:"1px solid rgba(0,0,0,.15)",outline:"none",height:"30px"},c=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return r.state={focus:!1},r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),o(t,[{key:"render",value:function(){var e=this,t=this.props,r=t.style,n=function(e,t){var r={};for(var n in e)t.indexOf(n)>=0||Object.prototype.hasOwnProperty.call(e,n)&&(r[n]=e[n]);return r}(t,["style"]),o=a({},u,r);return this.state.focus&&(o.border="1px solid "+s.SECONDARY_COLOR.main),l.default.createElement("input",a({onFocus:function(t){return e.setState({focus:!0})},onBlur:function(t){return e.setState({focus:!1})},style:o,type:"text"},n))}}]),t}(i.Component);t.default=c,c.defaultProps={style:{}}},,,,,,,,,,,function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),a=l(r(302)),o=l(r(303)),i=l(r(304));function l(e){return e&&e.__esModule?e:{default:e}}var s="en",u=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.locale=null,this.translations={},this.registerTranslation("en",a.default),this.registerTranslation("it",o.default),this.registerTranslation("ru",i.default);for(var t=null,r=e.getBrowserLanguages(),n=0;n<r.length;n++){var l=r[n];if(this.translations.hasOwnProperty(l)){t=l;break}}t=t||s,this.setLocale(t)}return n(e,[{key:"t",value:function(e){for(var t=arguments.length,r=Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];return this.translate.apply(this,[e].concat(r))}},{key:"translate",value:function(e){for(var t=arguments.length,r=Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];var a=this.locale,o=this.translations[a];if(!o.hasOwnProperty(e))return console.warn("translation '"+e+"' not found in language '"+a+"'"),e;var i=o[e];return i=i.replace(/{(\d+)}/g,(function(e,t){return void 0!==r[t]?r[t]:e}))}},{key:"setLocale",value:function(e){e=e.toLowerCase(),this.translations.hasOwnProperty(e)?this.locale=e:(console.warn("locale '"+e+"' not available, switch to "+s),this.locale=s.toLowerCase())}},{key:"registerTranslation",value:function(e,t){this.translations.hasOwnProperty(e)?Object.assign(this.translations[e],t):this.translations[e]=t}}],[{key:"getBrowserLanguages",value:function(){return navigator.languages?navigator.languages:[navigator.language||navigator.userLanguage]}}]),e}();t.default=u},,function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),a=r(0),o=s(a),i=s(r(1)),l=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}(r(3));function s(e){return e&&e.__esModule?e:{default:e}}var u={width:"30px",height:"30px",display:"flex",alignItems:"center",justifyContent:"center",marginBottom:"5px",fontSize:"25px",position:"relative",cursor:"pointer"},c={position:"absolute",width:"140px",color:l.COLORS.white,background:l.COLORS.black,height:"30px",lineHeight:"30px",textAlign:"center",visibility:"visible",borderRadius:"6px",opacity:"0.8",left:"100%",top:"50%",marginTop:"-15px",marginLeft:"15px",zIndex:"999",fontSize:"12px"},d={position:"absolute",top:"50%",right:"100%",marginTop:"-8px",width:"0",height:"0",borderRight:"8px solid #000000",borderTop:"8px solid transparent",borderBottom:"8px solid transparent"},p=function(e){function t(e,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,r));return n.state={active:!1},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),n(t,[{key:"render",value:function(){var e=this,t=this.state,r=this.props,n=r.active||t.active?l.SECONDARY_COLOR.icon:l.PRIMARY_COLOR.icon;return o.default.createElement("div",{style:u,onMouseOver:function(t){return e.setState({active:!0})},onMouseOut:function(t){return e.setState({active:!1})}},o.default.createElement("div",{style:{color:n},onClick:r.onClick},r.children),t.active?o.default.createElement("div",{style:c},o.default.createElement("span",{style:d}),r.tooltip):null)}}]),t}(a.Component);t.default=p,p.propTypes={active:i.default.bool.isRequired,tooltip:i.default.string.isRequired,onClick:i.default.func.isRequired}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RulerY=t.RulerX=t.Group=t.Grids=t.Area=t.Item=t.Layer=t.Line=t.Ruler=t.Scene=t.Snap=t.State=t.Vertex=t.Viewer2D=void 0;var n=g(r(146)),a=g(r(361)),o=g(r(147)),i=g(r(149)),l=g(r(148)),s=g(r(150)),u=g(r(362)),c=g(r(363)),d=g(r(364)),p=g(r(365)),f=g(r(369)),h=g(r(372)),y=g(r(373)),m=g(r(374));function g(e){return e&&e.__esModule?e:{default:e}}t.Viewer2D=n.default,t.Vertex=a.default,t.State=o.default,t.Snap=i.default,t.Scene=l.default,t.Ruler=s.default,t.Line=u.default,t.Layer=c.default,t.Item=d.default,t.Area=p.default,t.Grids=f.default,t.Group=h.default,t.RulerX=y.default,t.RulerY=m.default,t.default={Viewer2D:n.default,Vertex:a.default,State:o.default,Snap:i.default,Scene:l.default,Ruler:s.default,Line:u.default,Layer:c.default,Item:d.default,Area:p.default,Grids:f.default,Group:h.default,RulerX:y.default,RulerY:m.default}},,,,,,,,,,,,,,,,,,,,,,,,function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.toFixedFloat=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:6;if(e&&t)return parseFloat(parseFloat(e).toFixed(t));return 0};t.fAbs=function(e){var t=e;return t<0&&(t=1+~t),t},t.multiplyMatrices=function(e,t){for(var r=[],n=0;n<e.length;n++){r[n]=[];for(var a=0;a<t[0].length;a++){for(var o=0,i=0;i<e[0].length;i++)o+=e[n][i]*t[i][a];r[n][a]=o}}return r}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.groupsActions=t.areaActions=t.itemsActions=t.verticesActions=t.sceneActions=t.holesActions=t.linesActions=t.viewer2DActions=t.projectActions=void 0;var n=p(r(88)),a=p(r(349)),o=p(r(350)),i=p(r(351)),l=p(r(352)),s=p(r(353)),u=p(r(354)),c=p(r(355)),d=p(r(356));function p(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}t.projectActions=n,t.viewer2DActions=a,t.linesActions=o,t.holesActions=i,t.sceneActions=l,t.verticesActions=s,t.itemsActions=u,t.areaActions=c,t.groupsActions=d,t.default={projectActions:n,viewer2DActions:a,linesActions:o,holesActions:i,sceneActions:l,verticesActions:s,itemsActions:u,areaActions:c,groupsActions:d}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.loadProject=function(e){return{type:n.LOAD_PROJECT,sceneJSON:e}},t.newProject=function(){return{type:n.NEW_PROJECT}},t.saveProject=function(){return{type:n.SAVE_PROJECT}},t.openCatalog=function(){return{type:n.OPEN_CATALOG}},t.changeCatalogPage=function(e,t){return{type:n.CHANGE_CATALOG_PAGE,newPage:e,oldPage:t}},t.goBackToCatalogPage=function(e){return{type:n.GO_BACK_TO_CATALOG_PAGE,newPage:e}},t.selectToolEdit=function(){return{type:n.SELECT_TOOL_EDIT}},t.unselectAll=function(){return{type:n.UNSELECT_ALL}},t.setProperties=function(e){return{type:n.SET_PROPERTIES,properties:e}},t.setItemsAttributes=function(e){return e=e.set("rotation",parseFloat(e.get("rotation"))),{type:n.SET_ITEMS_ATTRIBUTES,itemsAttributes:e}},t.setLinesAttributes=function(e){return e=e.withMutations((function(t){t.setIn(["vertexOne","x"],parseFloat(e.getIn(["vertexOne","x"]))),t.setIn(["vertexOne","y"],parseFloat(e.getIn(["vertexOne","y"]))),t.setIn(["vertexTwo","x"],parseFloat(e.getIn(["vertexTwo","x"]))),t.setIn(["vertexTwo","y"],parseFloat(e.getIn(["vertexTwo","y"])))})),{type:n.SET_LINES_ATTRIBUTES,linesAttributes:e}},t.setHolesAttributes=function(e){return e=e.set("offset",parseFloat(e.get("offset"))),{type:n.SET_HOLES_ATTRIBUTES,holesAttributes:e}},t.remove=function(){return{type:n.REMOVE}},t.undo=function(){return{type:n.UNDO}},t.rollback=function(){return{type:n.ROLLBACK}},t.openProjectConfigurator=function(){return{type:n.OPEN_PROJECT_CONFIGURATOR}},t.setProjectProperties=function(e){return{type:n.SET_PROJECT_PROPERTIES,properties:e}},t.initCatalog=function(e){return{type:n.INIT_CATALOG,catalog:e}},t.updateMouseCoord=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{x:x,y:y};return{type:n.UPDATE_MOUSE_COORDS,coords:e}},t.updateZoomScale=function(e){return{type:n.UPDATE_ZOOM_SCALE,scale:e}},t.toggleSnap=function(e){return{type:n.TOGGLE_SNAP,mask:e}},t.throwError=function(e){return{type:n.THROW_ERROR,error:e}},t.throwWarning=function(e){return{type:n.THROW_WARNING,warning:e}},t.copyProperties=function(e){return{type:n.COPY_PROPERTIES,properties:e}},t.pasteProperties=function(){return{type:n.PASTE_PROPERTIES}},t.pushLastSelectedCatalogElementToHistory=function(e){return{type:n.PUSH_LAST_SELECTED_CATALOG_ELEMENT_TO_HISTORY,element:e}},t.setAlterateState=function(){return{type:n.ALTERATE_STATE}},t.setMode=function(e){return{type:n.SET_MODE,mode:e}},t.addHorizontalGuide=function(e){return{type:n.ADD_HORIZONTAL_GUIDE,coordinate:e}},t.addVerticalGuide=function(e){return{type:n.ADD_VERTICAL_GUIDE,coordinate:e}},t.addCircularGuide=function(e,t,r){return{type:n.ADD_CIRCULAR_GUIDE,x:e,y:t,radius:r}},t.removeHorizontalGuide=function(e){return{type:n.REMOVE_HORIZONTAL_GUIDE,guideID:e}},t.removeVerticalGuide=function(e){return{type:n.REMOVE_VERTICAL_GUIDE,guideID:e}},t.removeCircularGuide=function(e){return{type:n.REMOVE_CIRCULAR_GUIDE,guideID:e}};var n=r(2)},,,,,,function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),a=r(95),o=r(2);var i=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:o.UNIT_CENTIMETER;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.elements={},this.categories={root:{name:"root",label:"/",elements:[],categories:[]}},this.propertyTypes={},this.unit=t,this.registerMultiplePropertyType([["color",a.PropertyColor,a.PropertyColor],["enum",a.PropertyEnum,a.PropertyEnum],["string",a.PropertyString,a.PropertyString],["number",a.PropertyNumber,a.PropertyNumber],["length-measure",a.PropertyLengthMeasure,a.PropertyLengthMeasure],["toggle",a.PropertyToggle,a.PropertyToggle],["checkbox",a.PropertyCheckbox,a.PropertyCheckbox],["hidden",a.PropertyHidden,a.PropertyHidden],["read-only",a.PropertyReadOnly,a.PropertyReadOnly]])}return n(e,[{key:"getElement",value:function(e){if(this.hasElement(e))return this.elements[e];throw new Error("Element "+e+" does not exist in catalog")}},{key:"getCategory",value:function(e){if(this.hasCategory(e))return this.categories[e];throw new Error("Category "+e+" does not exist in catalog")}},{key:"getPropertyType",value:function(e){if(this.propertyTypes.hasOwnProperty(e))return this.propertyTypes[e];throw new Error("Element "+e+" does not exist in catalog")}},{key:"registerElement",value:function(e){e.properties=e.properties||{},this.validateElement(e)&&(this.elements[e.name]=e,this.categories.root.elements.push(this.elements[e.name]))}},{key:"registerMultipleElements",value:function(e){var t=this;e.forEach((function(e){return t.registerElement(e)}))}},{key:"registerPropertyType",value:function(e,t,r){this.propertyTypes[e]={type:e,Viewer:t,Editor:r}}},{key:"registerMultiplePropertyType",value:function(e){var t=this;e.forEach((function(e){return t.registerPropertyType.apply(t,function(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}return Array.from(e)}(e))}))}},{key:"validateElement",value:function(e){if(!e.hasOwnProperty("name"))throw new Error("Element not valid");var t=e.name;if(!e.hasOwnProperty("prototype"))throw new Error("Element "+t+" doesn't have prototype");if(!e.hasOwnProperty("info"))throw new Error("Element "+t+" doesn't have info");if(!e.info.hasOwnProperty("tag"))throw new Error("Element "+t+" doesn't have tag");if(!e.info.hasOwnProperty("description"))throw new Error("Element "+t+" doesn't have description");if(!e.info.hasOwnProperty("image"))throw new Error("Element "+t+" doesn't have image");if(!e.hasOwnProperty("render2D"))throw new Error("Element "+t+" doesn't have render2D handler");if(!e.hasOwnProperty("render3D"))throw new Error("Element "+t+" doesn't have render3D handler");if(!e.hasOwnProperty("properties"))throw new Error("Element "+t+" doesn't have properties");for(var r in e.properties){var n=e.properties[r];if(!n.hasOwnProperty("type"))throw new Error("Element "+t+", Property "+r+" doesn't have type");if(!n.hasOwnProperty("defaultValue"))throw new Error("Element "+t+", Property "+r+" doesn't have defaultValue")}return!0}},{key:"hasElement",value:function(e){return this.elements.hasOwnProperty(e)}},{key:"registerCategory",value:function(e,t,r){var n=this;return this.validateCategory(e,t)?(this.categories[e]={name:e,label:t,categories:[],elements:[]},this.categories.root.categories.push(this.categories[e]),r&&r.length&&r.forEach((function(t){return n.addToCategory(e,t)})),this.categories[e]):null}},{key:"addToCategory",value:function(e,t){if(this.hasElement(t.name))this.categories[e].elements.push(t),this.categories.root.elements.splice(this.categories.root.elements.indexOf(t),1);else{if(!this.hasCategory(t.name))throw new Error("child "+t+" is either category nor element");this.categories[e].categories.push(t),this.categories.root.categories.splice(this.categories.root.categories.indexOf(t),1)}}},{key:"categoryHasElement",value:function(e,t){return this.hasCategory(e)&&this.categories[e].elements.some((function(e){return e.name===t}))}},{key:"validateCategory",value:function(e,t){if(!e)throw new Error("Category has undefined name");if(""===e)throw new Error("Category has empty name");if(this.hasCategory(e))throw new Error("Category has already been registered");return!0}},{key:"hasCategory",value:function(e){return this.categories.hasOwnProperty(e)}}]),e}();t.default=i},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PropertyReadOnly=t.PropertyHidden=t.PropertyCheckbox=t.PropertyToggle=t.PropertyLengthMeasure=t.PropertyNumber=t.PropertyString=t.PropertyEnum=t.PropertyColor=void 0;var n=p(r(183)),a=p(r(263)),o=p(r(132)),i=p(r(264)),l=p(r(133)),s=p(r(298)),u=p(r(299)),c=p(r(300)),d=p(r(301));function p(e){return e&&e.__esModule?e:{default:e}}t.PropertyColor=n.default,t.PropertyEnum=a.default,t.PropertyString=o.default,t.PropertyNumber=i.default,t.PropertyLengthMeasure=l.default,t.PropertyToggle=s.default,t.PropertyCheckbox=u.default,t.PropertyHidden=c.default,t.PropertyReadOnly=d.default,t.default={PropertyColor:n.default,PropertyEnum:a.default,PropertyString:o.default,PropertyNumber:i.default,PropertyLengthMeasure:l.default,PropertyToggle:s.default,PropertyCheckbox:u.default,PropertyHidden:c.default,PropertyReadOnly:d.default}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e};t.default=s;var a=i(r(0)),o=i(r(1));function i(e){return e&&e.__esModule?e:{default:e}}var l={padding:"0 20px",overflowY:"auto"};function s(e){var t=e.children,r=e.width,o=e.height,i=e.style,s=void 0===i?{}:i;return a.default.createElement("div",{style:n({width:r,height:o},l,s),onWheel:function(e){return e.stopPropagation()}},t)}s.propsType={width:o.default.number.isRequired,height:o.default.number.isRequired,style:o.default.object}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e};t.default=s;var a=i(r(0)),o=i(r(1));function i(e){return e&&e.__esModule?e:{default:e}}var l={color:function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}(r(3)).PRIMARY_COLOR.alt,fontWeight:300};function s(e){var t=e.children,r=e.style,o=void 0===r?{}:r,i=function(e,t){var r={};for(var n in e)t.indexOf(n)>=0||Object.prototype.hasOwnProperty.call(e,n)&&(r[n]=e[n]);return r}(e,["children","style"]);return a.default.createElement("h1",n({style:n({},l,o)},i),t)}s.propsType={style:o.default.object}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},a=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o=r(0),i=d(o),l=d(r(1)),s=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}(r(3)),u=r(19),c=r(2);function d(e){return e&&e.__esModule?e:{default:e}}var p={display:"block",width:"100%",padding:"0 2px",fontSize:"13px",lineHeight:"1.25",color:s.PRIMARY_COLOR.input,backgroundColor:s.COLORS.white,backgroundImage:"none",border:"1px solid rgba(0,0,0,.15)",outline:"none",height:"30px"},f={position:"absolute",cursor:"pointer",width:"2em",height:"2em",right:"0.35em",top:"0.35em",backgroundColor:s.SECONDARY_COLOR.main,color:"#FFF",transition:"all 0.1s linear"},h=function(e){function t(e,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,r));return n.state={focus:!1,valid:!0,showedValue:e.value},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),a(t,[{key:"componentWillReceiveProps",value:function(e){this.props.value!==e.value&&this.setState({showedValue:e.value})}},{key:"render",value:function(){var e=this,t=this.props,r=(t.value,t.min),a=t.max,o=t.precision,l=t.onChange,d=t.onValid,h=t.onInvalid,y=t.style,m=t.placeholder,g=n({},p,y);this.state.focus&&(g.border="1px solid "+s.SECONDARY_COLOR.main);var v=new RegExp("^-?([0-9]+)?\\.?([0-9]{0,"+o+"})?$");!isNaN(r)&&isFinite(r)&&this.state.showedValue<r&&this.setState({showedValue:r}),!isNaN(a)&&isFinite(a)&&this.state.showedValue>a&&this.setState({showedValue:a});var E=v.test(this.state.showedValue)?this.state.showedValue:parseFloat(this.state.showedValue).toFixed(o),_=parseFloat(this.props.value).toFixed(o)!==parseFloat(this.state.showedValue).toFixed(o),O=function(t){if(t.stopPropagation(),e.state.valid){var r=""!==e.state.showedValue&&"-"!==e.state.showedValue?parseFloat(e.state.showedValue):0;e.setState({showedValue:r}),l({target:{value:r}})}};return i.default.createElement("div",{style:{position:"relative"}},i.default.createElement("input",{type:"text",value:E,style:g,onChange:function(t){var r=v.test(t.nativeEvent.target.value);r?(e.setState({showedValue:t.nativeEvent.target.value}),d&&d(t.nativeEvent)):h&&h(t.nativeEvent),e.setState({valid:r})},onFocus:function(t){return e.setState({focus:!0})},onBlur:function(t){return e.setState({focus:!1})},onKeyDown:function(e){var t=e.keyCode||e.which;t!=c.KEYBOARD_BUTTON_CODE.ENTER&&t!=c.KEYBOARD_BUTTON_CODE.TAB||!_||O(e)},placeholder:m}),i.default.createElement("div",{onClick:function(e){_&&O(e)},title:this.context.translator.t("Confirm"),style:n({},f,{visibility:_?"visible":"hidden",opacity:_?"1":"0"})},i.default.createElement(u.MdUpdate,{style:{width:"100%",height:"100%",padding:"0.2em",color:"#FFF"}})))}}]),t}(o.Component);t.default=h,h.propTypes={value:l.default.oneOfType([l.default.number,l.default.string]),style:l.default.object,onChange:l.default.func.isRequired,onValid:l.default.func,onInvalid:l.default.func,min:l.default.number,max:l.default.number,precision:l.default.number,placeholder:l.default.string},h.contextTypes={translator:l.default.object.isRequired},h.defaultProps={value:0,style:{},min:Number.MIN_SAFE_INTEGER,max:Number.MAX_SAFE_INTEGER,precision:3}},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=s;var n=l(r(0)),a=l(r(1)),o=r(11),i=l(r(24));function l(e){return e&&e.__esModule?e:{default:e}}function s(e){var t=e.value,r=e.onUpdate,a=e.configs,l=e.sourceElement,s=e.internalState,u=e.state;return n.default.createElement("table",{className:"PropertyString",style:i.default.tableStyle},n.default.createElement("tbody",null,n.default.createElement("tr",null,n.default.createElement("td",{style:i.default.firstTdStyle},n.default.createElement(o.FormLabel,null,a.label)),n.default.createElement("td",null,n.default.createElement(o.FormTextInput,{value:t,onChange:function(e){return t=e.target.value,a.hook?a.hook(t,l,s,u).then((function(e){return r(e)})):r(t);var t}})))))}s.propTypes={value:a.default.any.isRequired,onUpdate:a.default.func.isRequired,configs:a.default.object.isRequired,sourceElement:a.default.object,internalState:a.default.object,state:a.default.object.isRequired}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e};t.default=m;var a=p(r(0)),o=p(r(1)),i=r(2),l=p(r(134)),s=r(11),u=r(5),c=r(86),d=p(r(24));function p(e){return e&&e.__esModule?e:{default:e}}var f={borderCollapse:"collapse"},h={padding:0},y={width:"5em"};function m(e,t){var r=e.value,o=e.onUpdate,u=e.onValid,p=e.configs,m=e.sourceElement,g=e.internalState,v=e.state,E=(t.catalog,r.get("length")||0),_=r.get("_length")||E,O=r.get("_unit")||i.UNIT_CENTIMETER,b=p.hook,w=p.label,I=function(e,t){var r={};for(var n in e)t.indexOf(n)>=0||Object.prototype.hasOwnProperty.call(e,n)&&(r[n]=e[n]);return r}(p,["hook","label"]),S=function(e,t){var n=(0,c.toFixedFloat)(e),a=r.merge({length:t!==i.UNIT_CENTIMETER?(0,l.default)(n).from(t).to(i.UNIT_CENTIMETER):n,_length:e,_unit:t});return b?b(a,m,g,v).then((function(e){return o(e)})):o(a)};return a.default.createElement("table",{className:"PropertyLengthMeasure",style:d.default.tableStyle},a.default.createElement("tbody",null,a.default.createElement("tr",null,a.default.createElement("td",{style:d.default.firstTdStyle},a.default.createElement(s.FormLabel,null,w)),a.default.createElement("td",{style:h},a.default.createElement("table",{style:f},a.default.createElement("tbody",null,a.default.createElement("tr",null,a.default.createElement("td",null,a.default.createElement(s.FormNumberInput,n({value:_,onChange:function(e){return S(e.target.value,O)},onValid:u},I))),a.default.createElement("td",{style:y},a.default.createElement(s.FormSelect,{value:O,onChange:function(e){return S(_,e.target.value)}},i.UNITS_LENGTH.map((function(e){return a.default.createElement("option",{key:e,value:e},e)})))))))))))}m.propTypes={value:o.default.instanceOf(u.Map).isRequired,onUpdate:o.default.func.isRequired,onValid:o.default.func,configs:o.default.object.isRequired,sourceElement:o.default.object,internalState:o.default.object,state:o.default.object.isRequired},m.contextTypes={catalog:o.default.object.isRequired}},,,,,,,function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ReactPlannerViewer3dReducer=t.ReactPlannerViewer2dReducer=t.ReactPlannerVerticesReducer=t.ReactPlannerSceneReducer=t.ReactPlannerProjectReducer=t.ReactPlannerGroupsReducer=t.ReactPlannerLinesReducer=t.ReactPlannerItemsReducer=t.ReactPlannerHolesReducer=t.ReactPlannerAreasReducer=void 0;var n=f(r(306)),a=f(r(339)),o=f(r(340)),i=f(r(341)),l=f(r(342)),s=f(r(343)),u=f(r(344)),c=f(r(345)),d=f(r(346)),p=f(r(347));function f(e){return e&&e.__esModule?e:{default:e}}t.ReactPlannerAreasReducer=n.default,t.ReactPlannerHolesReducer=a.default,t.ReactPlannerItemsReducer=o.default,t.ReactPlannerLinesReducer=i.default,t.ReactPlannerGroupsReducer=l.default,t.ReactPlannerProjectReducer=s.default,t.ReactPlannerSceneReducer=u.default,t.ReactPlannerVerticesReducer=c.default,t.ReactPlannerViewer2dReducer=d.default,t.ReactPlannerViewer3dReducer=p.default,t.default={ReactPlannerAreasReducer:n.default,ReactPlannerHolesReducer:a.default,ReactPlannerItemsReducer:o.default,ReactPlannerLinesReducer:i.default,ReactPlannerGroupsReducer:l.default,ReactPlannerProjectReducer:s.default,ReactPlannerSceneReducer:u.default,ReactPlannerVerticesReducer:c.default,ReactPlannerViewer2dReducer:d.default,ReactPlannerViewer3dReducer:p.default}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};t.objectsMap=function(e,t){var r={};for(var n in e)r[n]=t(n,r[n]);return r},t.objectsCompare=function e(t,r){if(t===r)return!0;if(!(t instanceof Object&&r instanceof Object))return!1;if(t.constructor!==r.constructor)return!1;for(var a in t)if(t.hasOwnProperty(a)){if(!r.hasOwnProperty(a))return!1;if(t[a]!==r[a]){if("object"!==n(t[a]))return!1;if(!e(t[a],r[a]))return!1}}for(var o in r)if(r.hasOwnProperty(o)&&!t.hasOwnProperty(o))return!1;return!0}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.StyleComponents=t.Viewer2DComponents=t.FooterBarComponents=t.SidebarComponents=t.Content=t.ToolbarComponents=void 0;var n=u(r(357)),a=u(r(359)),o=u(r(381)),i=u(r(392)),l=u(r(62)),s=u(r(11));function u(e){return e&&e.__esModule?e:{default:e}}t.ToolbarComponents=n.default,t.Content=a.default,t.SidebarComponents=o.default,t.FooterBarComponents=i.default,t.Viewer2DComponents=l.default,t.StyleComponents=s.default,t.default={ToolbarComponents:n.default,Content:a.default,SidebarComponents:o.default,FooterBarComponents:i.default,Viewer2DComponents:l.default,StyleComponents:s.default}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=c;var n=u(r(0)),a=u(r(1)),o=r(18),i=u(r(61)),l=r(144),s=r(8);function u(e){return e&&e.__esModule?e:{default:e}}function c(e,t){var r=e.state,a=t.translator;return n.default.createElement(i.default,{active:!1,tooltip:a.t("Save project"),onClick:function(e){e.preventDefault(),r=s.Project.unselectAll(r).updatedState,(0,l.browserDownload)(r.get("scene").toJS())}},n.default.createElement(o.FaSave,null))}c.propTypes={state:a.default.object.isRequired},c.contextTypes={translator:a.default.object.isRequired}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.browserDownload=function(e){var t=document.createElement("a"),r="output"+Date.now()+".json";if(!(r=window.prompt("Insert output filename",r)))return;var n=JSON.stringify(e),a=new Blob([n],{type:"text/plain"}),o=window.URL.createObjectURL(a);t.setAttribute("download",r),t.href=o,t.style.display="none",document.body.appendChild(t),t.click(),document.body.removeChild(t)},t.browserUpload=function(){return new Promise((function(e,t){var r=document.createElement("input");r.type="file",r.addEventListener("change",(function(t){var r=t.target.files[0],n=new FileReader;n.addEventListener("load",(function(t){var r=t.target.result;e(r)})),n.readAsText(r)})),r.click()}))}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=u;var n=s(r(0)),a=s(r(1)),o=r(18),i=s(r(61)),l=r(144);function s(e){return e&&e.__esModule?e:{default:e}}function u(e,t){e.state;var r=t.translator,a=t.projectActions;return n.default.createElement(i.default,{active:!1,tooltip:r.t("Load project"),onClick:function(e){e.preventDefault(),(0,l.browserUpload)().then((function(e){a.loadProject(JSON.parse(e))}))}},n.default.createElement(o.FaFolderOpen,null))}u.propTypes={state:a.default.object.isRequired},u.contextTypes={projectActions:a.default.object.isRequired,translator:a.default.object.isRequired}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=g;var n=d(r(0)),a=d(r(1)),o=r(360),i=c(r(2)),l=d(r(147)),s=c(r(3)),u=r(62);function c(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function d(e){return e&&e.__esModule?e:{default:e}}function p(e){switch(e){case i.MODE_2D_PAN:return o.TOOL_PAN;case i.MODE_2D_ZOOM_IN:return o.TOOL_ZOOM_IN;case i.MODE_2D_ZOOM_OUT:return o.TOOL_ZOOM_OUT;case i.MODE_IDLE:return o.TOOL_AUTO;default:return o.TOOL_NONE}}function f(e){switch(e){case i.MODE_DRAWING_LINE:case i.MODE_DRAWING_HOLE:case i.MODE_DRAWING_ITEM:case i.MODE_DRAGGING_HOLE:case i.MODE_DRAGGING_ITEM:case i.MODE_DRAGGING_LINE:case i.MODE_DRAGGING_VERTEX:return{pointerEvents:"none"};default:return{}}}function h(e){switch(e){case i.MODE_DRAGGING_HOLE:case i.MODE_DRAGGING_LINE:case i.MODE_DRAGGING_VERTEX:case i.MODE_DRAGGING_ITEM:return{cursor:"move"};case i.MODE_ROTATING_ITEM:return{cursor:"ew-resize"};case i.MODE_WAITING_DRAWING_LINE:case i.MODE_DRAWING_LINE:return{cursor:"crosshair"};default:return{cursor:"default"}}}function y(e){switch(e){case i.MODE_DRAWING_LINE:case i.MODE_DRAGGING_LINE:case i.MODE_DRAGGING_VERTEX:case i.MODE_DRAGGING_HOLE:case i.MODE_DRAGGING_ITEM:case i.MODE_DRAWING_HOLE:case i.MODE_DRAWING_ITEM:return!0;default:return!1}}function m(e){for(;!e.attributes.getNamedItem("data-element-root")&&"svg"!==e.tagName;)e=e.parentNode;return"svg"===e.tagName?null:{part:e.attributes.getNamedItem("data-part")?e.attributes.getNamedItem("data-part").value:void 0,layer:e.attributes.getNamedItem("data-layer").value,prototype:e.attributes.getNamedItem("data-prototype").value,selected:"true"===e.attributes.getNamedItem("data-selected").value,id:e.attributes.getNamedItem("data-id").value}}function g(e,t){var r=e.state,a=e.width,c=e.height,d=t.viewer2DActions,g=t.linesActions,v=t.holesActions,E=t.verticesActions,_=t.itemsActions,O=t.areaActions,b=t.projectActions,w=t.catalog,I=r.viewer2D,S=r.mode,M=r.scene,x=M.selectedLayer,R=function(e){return{x:e.x,y:-e.y+M.height}},P=r.get("viewer2D").toJS(),D=P.e,T=P.f,A=P.SVGWidth,G=P.SVGHeight,L=s.PRIMARY_COLOR.main,C=s.COLORS.white,N=s.SECONDARY_COLOR.main,j=A||r.getIn(["scene","width"]),k=G||r.getIn(["scene","height"]),U=r.zoom||1,V=Math.ceil(j/100)+1,F=Math.ceil(k/100)+1;return n.default.createElement("div",{style:{margin:0,padding:0,display:"grid",gridRowGap:"0",gridColumnGap:"0",gridTemplateColumns:"15px "+(a-15)+"px",gridTemplateRows:"15px "+(c-15)+"px",position:"relative"}},n.default.createElement("div",{style:{gridColumn:1,gridRow:1,backgroundColor:L}}),n.default.createElement("div",{style:{gridRow:1,gridColumn:2,position:"relative",overflow:"hidden"},id:"rulerX"},j?n.default.createElement(u.RulerX,{unitPixelSize:100,zoom:U,mouseX:r.mouse.get("x"),width:a-15,zeroLeftPosition:D||0,backgroundColor:L,fontColor:C,markerColor:N,positiveUnitsNumber:V,negativeUnitsNumber:0}):null),n.default.createElement("div",{style:{gridColumn:1,gridRow:2,position:"relative",overflow:"hidden"},id:"rulerY"},k?n.default.createElement(u.RulerY,{unitPixelSize:100,zoom:U,mouseY:r.mouse.get("y"),height:c-15,zeroTopPosition:k*U+T||0,backgroundColor:L,fontColor:C,markerColor:N,positiveUnitsNumber:F,negativeUnitsNumber:0}):null),n.default.createElement(o.ReactSVGPanZoom,{style:{gridColumn:2,gridRow:2},width:a-15,height:c-15,value:I.isEmpty()?null:I.toJS(),onChangeValue:function(e){return b.updateZoomScale(e.a),d.updateCameraView(e)},tool:p(S),onChangeTool:function(e){switch(e){case o.TOOL_NONE:b.selectToolEdit();break;case o.TOOL_PAN:d.selectToolPan();break;case o.TOOL_ZOOM_IN:d.selectToolZoomIn();break;case o.TOOL_ZOOM_OUT:d.selectToolZoomOut()}},detectAutoPan:y(S),onMouseDown:function(e){var t=e.originalEvent,n=new Event("mousedown-planner-event");n.viewerEvent=e,document.dispatchEvent(n);var a=R(e),o=a.x,l=a.y;if(S===i.MODE_IDLE){var s=m(t.target);if(!s||!s.selected)return;switch(s.prototype){case"lines":g.beginDraggingLine(s.layer,s.id,o,l,r.snapMask);break;case"vertices":E.beginDraggingVertex(s.layer,s.id,o,l,r.snapMask);break;case"items":"rotation-anchor"===s.part?_.beginRotatingItem(s.layer,s.id,o,l):_.beginDraggingItem(s.layer,s.id,o,l);break;case"holes":v.beginDraggingHole(s.layer,s.id,o,l)}}t.stopPropagation()},onMouseMove:function(e){var t=new Event("mousemove-planner-event");t.viewerEvent=e,document.dispatchEvent(t);var n=R(e),a=n.x,o=n.y;switch(b.updateMouseCoord({x:a,y:o}),S){case i.MODE_DRAWING_LINE:g.updateDrawingLine(a,o,r.snapMask);break;case i.MODE_DRAWING_HOLE:v.updateDrawingHole(x,a,o);break;case i.MODE_DRAWING_ITEM:_.updateDrawingItem(x,a,o);break;case i.MODE_DRAGGING_HOLE:v.updateDraggingHole(a,o);break;case i.MODE_DRAGGING_LINE:g.updateDraggingLine(a,o,r.snapMask);break;case i.MODE_DRAGGING_VERTEX:E.updateDraggingVertex(a,o,r.snapMask);break;case i.MODE_DRAGGING_ITEM:_.updateDraggingItem(a,o);break;case i.MODE_ROTATING_ITEM:_.updateRotatingItem(a,o)}e.originalEvent.stopPropagation()},onMouseUp:function(e){var t=e.originalEvent,n=new Event("mouseup-planner-event");n.viewerEvent=e,document.dispatchEvent(n);var a=R(e),o=a.x,l=a.y;switch(S){case i.MODE_IDLE:var s=m(t.target);if(s&&s.selected)return;switch(s?s.prototype:"none"){case"areas":O.selectArea(s.layer,s.id);break;case"lines":g.selectLine(s.layer,s.id);break;case"holes":v.selectHole(s.layer,s.id);break;case"items":_.selectItem(s.layer,s.id);break;case"none":b.unselectAll()}break;case i.MODE_WAITING_DRAWING_LINE:g.beginDrawingLine(x,o,l,r.snapMask);break;case i.MODE_DRAWING_LINE:g.endDrawingLine(o,l,r.snapMask),g.beginDrawingLine(x,o,l,r.snapMask);break;case i.MODE_DRAWING_HOLE:v.endDrawingHole(x,o,l);break;case i.MODE_DRAWING_ITEM:_.endDrawingItem(x,o,l);break;case i.MODE_DRAGGING_LINE:g.endDraggingLine(o,l,r.snapMask);break;case i.MODE_DRAGGING_VERTEX:E.endDraggingVertex(o,l,r.snapMask);break;case i.MODE_DRAGGING_ITEM:_.endDraggingItem(o,l);break;case i.MODE_DRAGGING_HOLE:v.endDraggingHole(o,l);break;case i.MODE_ROTATING_ITEM:_.endRotatingItem(o,l)}t.stopPropagation()},miniaturePosition:"none",toolbarPosition:"none"},n.default.createElement("svg",{width:M.width,height:M.height},n.default.createElement("defs",null,n.default.createElement("pattern",{id:"diagonalFill",patternUnits:"userSpaceOnUse",width:"4",height:"4",fill:"#FFF"},n.default.createElement("rect",{x:"0",y:"0",width:"4",height:"4",fill:"#000"}),n.default.createElement("path",{d:"M-1,1 l2,-2 M0,4 l4,-4 M3,5 l2,-2",style:{stroke:"#000",strokeWidth:1}}))),n.default.createElement("g",{style:Object.assign(h(S),f(S))},n.default.createElement(l.default,{state:r,catalog:w})))),n.default.createElement("svg",{width:0,height:0},n.default.createElement("defs",null,n.default.createElement("pattern",{id:"diagonalFillInvisible",patternUnits:"userSpaceOnUse",width:"4",height:"4",fill:"#FFF"},n.default.createElement("rect",{x:"0",y:"0",width:"4",height:"4",fill:"#FFF"}),n.default.createElement("path",{d:"M-1,1 l2,-2 M0,4 l4,-4 M3,5 l2,-2",style:{stroke:"#FFF",strokeWidth:1}}))),n.default.createElement("g",{style:Object.assign(h(S),f(S))},n.default.createElement(l.default,{state:r,catalog:w}))))}g.propTypes={state:a.default.object.isRequired,width:a.default.number.isRequired,height:a.default.number.isRequired},g.contextTypes={viewer2DActions:a.default.object.isRequired,linesActions:a.default.object.isRequired,holesActions:a.default.object.isRequired,verticesActions:a.default.object.isRequired,itemsActions:a.default.object.isRequired,areaActions:a.default.object.isRequired,projectActions:a.default.object.isRequired,catalog:a.default.object.isRequired}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var r=[],n=!0,a=!1,o=void 0;try{for(var i,l=e[Symbol.iterator]();!(n=(i=l.next()).done)&&(r.push(i.value),!t||r.length!==t);n=!0);}catch(e){a=!0,o=e}finally{try{!n&&l.return&&l.return()}finally{if(a)throw o}}return r}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")};t.default=d;var a=u(r(0)),o=u(r(1)),i=u(r(148)),l=u(r(149)),s=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}(r(3));function u(e){return e&&e.__esModule?e:{default:e}}var c={stroke:s.SECONDARY_COLOR.main,strokewidth:"2.5px"};function d(e){var t=e.state,r=e.catalog,o=t.activeSnapElement,u=(t.snapElements,t.scene),d=u.width,p=u.height;return o=o?a.default.createElement(l.default,{snap:o,width:u.width,height:u.height}):null,null,a.default.createElement("g",null,a.default.createElement("rect",{x:"0",y:"0",width:d,height:p,fill:s.COLORS.white}),a.default.createElement("g",{transform:"translate(0, "+u.height+") scale(1, -1)",id:"svg-drawing-paper"},a.default.createElement(i.default,{scene:u,catalog:r}),u.getIn(["guides","horizontal"]).entrySeq().map((function(e){var t=n(e,2),r=t[0],o=t[1];return a.default.createElement("line",{id:"hGuide"+r,key:r,x1:0,y1:o,x2:d,y2:o,style:c})})),u.getIn(["guides","vertical"]).entrySeq().map((function(e){var t=n(e,2),r=t[0],o=t[1];return a.default.createElement("line",{key:r,x1:o,y1:0,x2:o,y2:p,style:c})})),o,null))}d.propTypes={state:o.default.object.isRequired,catalog:o.default.object.isRequired}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var r=[],n=!0,a=!1,o=void 0;try{for(var i,l=e[Symbol.iterator]();!(n=(i=l.next()).done)&&(r.push(i.value),!t||r.length!==t);n=!0);}catch(e){a=!0,o=e}finally{try{!n&&l.return&&l.return()}finally{if(a)throw o}}return r}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},a=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o=r(0),i=u(o),l=u(r(1)),s=r(62);function u(e){return e&&e.__esModule?e:{default:e}}var c=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),a(t,[{key:"shouldComponentUpdate",value:function(e,t){return this.props.scene.hashCode()!==e.scene.hashCode()}},{key:"render",value:function(){var e=this.props,t=e.scene,r=e.catalog,a=(t.height,t.layers),o=a.get(t.selectedLayer);return i.default.createElement("g",null,i.default.createElement(s.Grids,{scene:t}),i.default.createElement("g",{style:{pointerEvents:"none"}},a.entrySeq().filter((function(e){var r=n(e,2),a=r[0],o=r[1];return a!==t.selectedLayer&&o.visible})).map((function(e){var a=n(e,2),o=a[0],l=a[1];return i.default.createElement(s.Layer,{key:o,layer:l,scene:t,catalog:r})}))),i.default.createElement(s.Layer,{key:o.id,layer:o,scene:t,catalog:r}))}}]),t}(o.Component);t.default=c,c.propTypes={scene:l.default.object.isRequired,catalog:l.default.object.isRequired}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=s;var n=i(r(0)),a=i(r(1)),o=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}(r(42));function i(e){return e&&e.__esModule?e:{default:e}}var l={stroke:"#D32F2F",strokeWidth:"1px"};function s(e){var t=e.snap,r=e.width,a=e.height;switch(t.type){case"point":return n.default.createElement("g",{transform:"translate("+t.x+" "+t.y+")"},n.default.createElement("line",{x1:"0",y1:"-70",x2:"0",y2:"70",style:l}),n.default.createElement("line",{x1:"-70",y1:"0",x2:"70",y2:"0",style:l}));case"line":var i=o.horizontalLine(0),s=o.horizontalLine(a),u=o.twoLinesIntersection(t.a,t.b,t.c,i.a,i.b,i.c),c=o.twoLinesIntersection(t.a,t.b,t.c,s.a,s.b,s.c),d=o.verticalLine(0),p=o.verticalLine(r),f=o.twoLinesIntersection(t.a,t.b,t.c,d.a,d.b,d.c),h=o.twoLinesIntersection(t.a,t.b,t.c,p.a,p.b,p.c);return u&&c?n.default.createElement("line",{x1:u.x,y1:u.y,x2:c.x,y2:c.y,style:l}):f&&h?n.default.createElement("line",{x1:f.x,y1:f.y,x2:h.x,y2:h.y,style:l}):null;case"line-segment":return n.default.createElement("line",{x1:t.x1,y1:t.y1,x2:t.x2,y2:t.y2,style:l});default:return null}}s.propTypes={snap:a.default.object.isRequired,width:a.default.number.isRequired,height:a.default.number.isRequired}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=s;var n=o(r(0)),a=o(r(1));function o(e){return e&&e.__esModule?e:{default:e}}var i={stroke:"#0096fd",strokeWidth:"1px"},l={textAnchor:"middle",fontSize:"12px",fontFamily:"'Courier New', Courier, monospace",pointerEvents:"none",fontWeight:"bold",WebkitTouchCallout:"none",WebkitUserSelect:"none",MozUserSelect:"none",MsUserSelect:"none",userSelect:"none"};function s(e){var t=e.length,r=e.unit,a=e.transform,o=t.toFixed(2)+" "+r;return n.default.createElement("g",{transform:a},n.default.createElement("text",{x:t/2,y:"-3",transform:"scale(1, -1)",style:l},o),n.default.createElement("line",{x1:"0",y1:"-5",x2:"0",y2:"5",style:i}),n.default.createElement("line",{x1:t,y1:"-5",x2:t,y2:"5",style:i}),n.default.createElement("line",{x1:"0",y1:"0",x2:t,y2:"0",style:i}))}s.propTypes={length:a.default.number.isRequired,unit:a.default.string.isRequired,transform:a.default.string.isRequired}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var r=[],n=!0,a=!1,o=void 0;try{for(var i,l=e[Symbol.iterator]();!(n=(i=l.next()).done)&&(r.push(i.value),!t||r.length!==t);n=!0);}catch(e){a=!0,o=e}finally{try{!n&&l.return&&l.return()}finally{if(a)throw o}}return r}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},a=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},i=r(0),l=m(i),s=m(r(1)),u=r(5),c=m(r(25)),d=r(152),p=r(18),f=r(11),h=r(2),y=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}(r(3));function m(e){return e&&e.__esModule?e:{default:e}}var g={MODE_IDLE:h.MODE_IDLE,MODE_2D_ZOOM_IN:h.MODE_2D_ZOOM_IN,MODE_2D_ZOOM_OUT:h.MODE_2D_ZOOM_OUT,MODE_2D_PAN:h.MODE_2D_PAN,MODE_3D_VIEW:h.MODE_3D_VIEW,MODE_3D_FIRST_PERSON:h.MODE_3D_FIRST_PERSON,MODE_WAITING_DRAWING_LINE:h.MODE_WAITING_DRAWING_LINE,MODE_DRAWING_LINE:h.MODE_DRAWING_LINE,MODE_DRAWING_HOLE:h.MODE_DRAWING_HOLE,MODE_DRAWING_ITEM:h.MODE_DRAWING_ITEM,MODE_DRAGGING_LINE:h.MODE_DRAGGING_LINE,MODE_DRAGGING_VERTEX:h.MODE_DRAGGING_VERTEX,MODE_DRAGGING_ITEM:h.MODE_DRAGGING_ITEM,MODE_DRAGGING_HOLE:h.MODE_DRAGGING_HOLE,MODE_ROTATING_ITEM:h.MODE_ROTATING_ITEM,MODE_UPLOADING_IMAGE:h.MODE_UPLOADING_IMAGE,MODE_FITTING_IMAGE:h.MODE_FITTING_IMAGE},v={cursor:"pointer",marginLeft:"5px",border:"0px",background:"none",color:y.COLORS.white,fontSize:"14px",outline:"0px"},E={width:"100%",cursor:"pointer",overflowY:"auto",maxHeight:"20em",display:"block",padding:"0 1em",marginLeft:"1px"},_={width:"2em"},O={color:y.SECONDARY_COLOR.main},b=o({},v,O),w={fontSize:"10px",marginLeft:"5px"},I={fontSize:"1.25em"},S=o({},I,{color:"#a5a1a1"}),M={width:"6em"},x={margin:"0.5em 0",fontSize:"1.3em",cursor:"pointer",textAlign:"center"},R=o({},x,O),P={width:"100%",borderSpacing:"2px 0",padding:"5px 15px"},D={float:"right",marginTop:"0.5em",borderSpacing:"0"},T=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return r.state={headHovered:!1,layerAddUIVisible:!1,editingLayer:new u.Map},r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),a(t,[{key:"shouldComponentUpdate",value:function(e,t){return this.props.state.scene.layers.size!==e.state.scene.layers.size||t.layerAddUIVisible!=this.state.layerAddUIVisible||this.state.editingLayer.hashCode()!==t.editingLayer.hashCode()||this.props.state.sceneHistory.hashCode()!==e.state.sceneHistory.hashCode()}},{key:"addLayer",value:function(e){e.stopPropagation(),this.state.layerAddUIVisible?this.setState({layerAddUIVisible:!this.state.layerAddUIVisible}):(this.context.sceneActions.addLayer("",0),this.setState({layerAddUIVisible:!1}))}},{key:"resetLayerMod",value:function(e){e.stopPropagation(),this.setState({layerAddUIVisible:!1,editingLayer:new u.Map})}},{key:"updateLayer",value:function(e,t){e.stopPropagation();var r=t.toJS(),n=r.id,a=r.name,o=r.opacity,i=r.altitude,l=r.order;i=parseInt(i),this.context.sceneActions.setLayerProperties(n,{name:a,opacity:o,altitude:i,order:l}),this.setState({layerAddUIVisible:!1,editingLayer:new u.Map})}},{key:"delLayer",value:function(e,t){e.stopPropagation(),this.context.sceneActions.removeLayer(t),this.setState({layerAddUIVisible:!1,editingLayer:new u.Map})}},{key:"render",value:function(){var e=this;if(!g[this.props.state.mode])return null;var t=this.props.state.scene,r=1===t.layers.size;return l.default.createElement(c.default,{name:this.context.translator.t("Layers")},l.default.createElement("table",{style:E},l.default.createElement("thead",null,l.default.createElement("tr",null,l.default.createElement("th",{colSpan:"3"}),l.default.createElement("th",null,this.context.translator.t("Altitude")),l.default.createElement("th",null,this.context.translator.t("Name")))),l.default.createElement("tbody",null,t.layers.entrySeq().map((function(a){var o=n(a,2),i=o[0],s=o[1],u=function(t){return e.setState({editingLayer:s,layerAddUIVisible:!0})},c=i===t.selectedLayer;return l.default.createElement("tr",{key:i,onClick:function(t){return e.context.sceneActions.selectLayer(i)},onDoubleClick:u,style:c?O:null},l.default.createElement("td",{style:_},c?null:l.default.createElement(p.FaEye,{onClick:function(t){t.stopPropagation(),e.context.sceneActions.setLayerProperties(i,{visible:!s.visible})},style:s.visible?I:S})),l.default.createElement("td",{style:_},l.default.createElement(p.FaPencilAlt,{onClick:u,style:c?b:v,title:e.context.translator.t("Configure layer")})),l.default.createElement("td",{style:_},r?null:l.default.createElement(p.FaTrash,{onClick:function(t){return e.delLayer(t,i)},style:c?b:v,title:e.context.translator.t("Delete layer")})),l.default.createElement("td",{style:{width:"6em",textAlign:"center"}},"[ h : ",s.altitude," ]"),l.default.createElement("td",null,s.name))})))),l.default.createElement("p",{style:this.state.headHovered?R:x,onMouseOver:function(){return e.setState({headHovered:!0})},onMouseOut:function(){return e.setState({headHovered:!1})},onClick:function(t){return e.addLayer(t)}},this.state.layerAddUIVisible?l.default.createElement(d.TiDelete,null):l.default.createElement(d.TiPlus,null),l.default.createElement("b",{style:w},this.context.translator.t("New layer"))),this.state.layerAddUIVisible&&this.state.editingLayer?l.default.createElement("table",{style:P},l.default.createElement("tbody",null,l.default.createElement("tr",{style:{marginTop:"1em"}},l.default.createElement("td",{style:M},this.context.translator.t("Name"),":"),l.default.createElement("td",null,l.default.createElement(f.FormTextInput,{value:this.state.editingLayer.get("name"),onChange:function(t){return e.setState({editingLayer:e.state.editingLayer.merge({name:t.target.value})})}}))),l.default.createElement("tr",null,l.default.createElement("td",{style:M},this.context.translator.t("opacity"),":"),l.default.createElement("td",null,l.default.createElement(f.FormSlider,{min:0,max:100,value:Math.round(100*this.state.editingLayer.get("opacity")),onChange:function(t){return e.setState({editingLayer:e.state.editingLayer.merge({opacity:t.target.value/100})})}}))),l.default.createElement("tr",null,l.default.createElement("td",{style:M},this.context.translator.t("altitude"),":"),l.default.createElement("td",null,l.default.createElement(f.FormNumberInput,{value:this.state.editingLayer.get("altitude"),onChange:function(t){return e.setState({editingLayer:e.state.editingLayer.merge({altitude:t.target.value})})}}))),l.default.createElement("tr",null,l.default.createElement("td",{style:M},this.context.translator.t("order"),":"),l.default.createElement("td",null,l.default.createElement(f.FormNumberInput,{value:this.state.editingLayer.get("order"),onChange:function(t){return e.setState({editingLayer:e.state.editingLayer.merge({order:t.target.value})})}}))),l.default.createElement("tr",null,l.default.createElement("td",{colSpan:"2"},l.default.createElement("table",{style:D},l.default.createElement("tbody",null,l.default.createElement("tr",null,l.default.createElement("td",null,l.default.createElement(f.CancelButton,{size:"small",onClick:function(t){e.resetLayerMod(t)}},this.context.translator.t("Reset"))),l.default.createElement("td",null,l.default.createElement(f.FormSubmitButton,{size:"small",onClick:function(t){e.updateLayer(t,e.state.editingLayer)}},this.context.translator.t("Save")))))))))):null)}}]),t}(i.Component);t.default=T,T.propTypes={state:s.default.object.isRequired},T.contextTypes={sceneActions:s.default.object.isRequired,translator:s.default.object.isRequired}},,function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var r=[],n=!0,a=!1,o=void 0;try{for(var i,l=e[Symbol.iterator]();!(n=(i=l.next()).done)&&(r.push(i.value),!t||r.length!==t);n=!0);}catch(e){a=!0,o=e}finally{try{!n&&l.return&&l.return()}finally{if(a)throw o}}return r}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},a=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o=r(0),i=p(o),l=p(r(1)),s=p(r(25)),u=(function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);t.default=e}(r(3)),r(460)),c=r(18),d=r(11);function p(e){return e&&e.__esModule?e:{default:e}}var f={margin:"1em"},h={fontSize:"14px",margin:"2px",cursor:"pointer"},y={cursor:"pointer",height:"2em"},m={width:"100%",textAlign:"center"},g=function(e){function t(e,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,r));return n.state={addHGVisible:!0,addVGVisible:!0,addCGVisible:!0},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),a(t,[{key:"shouldComponentUpdate",value:function(e,t){return this.state.addHGVisible!==t.addHGVisible||this.state.addVGVisible!==t.addVGVisible||this.state.addCGVisible!==t.addCGVisible||this.props.state.getIn(["scene","guides"]).hashCode()!==e.state.getIn(["scene","guides"]).hashCode()}},{key:"render",value:function(){var e=this,t=this.props.state,r=this.context,a=r.projectActions,o=r.translator,l=t.scene.guides;return i.default.createElement(s.default,{name:o.t("Guides")},i.default.createElement(u.Tabs,{id:"guidesTabs",style:f},i.default.createElement(u.TabList,null,i.default.createElement(u.Tab,null,o.t("Horizontal")),i.default.createElement(u.Tab,null,o.t("Vertical"))),i.default.createElement(u.TabPanel,null,i.default.createElement("table",{style:m},i.default.createElement("tbody",null,l.get("horizontal").entrySeq().map((function(e,t){var r=n(e,2),o=r[0],l=r[1];return i.default.createElement("tr",{key:o},i.default.createElement("td",{style:{width:"2em"}},t+1),i.default.createElement("td",null,l),i.default.createElement("td",{style:{width:"5em"}},i.default.createElement(c.FaTrash,{style:h,onClick:function(e){return a.removeHorizontalGuide(o)}})))})),this.state.addHGVisible?i.default.createElement("tr",null,i.default.createElement("td",{colSpan:"3",style:y,onClick:function(t){return e.setState({addHGVisible:!1})}},o.t("+ Add Horizontal Giude"))):i.default.createElement("tr",null,i.default.createElement("td",{colSpan:"2"},i.default.createElement(d.FormNumberInput,{value:0,onChange:function(t){return a.addHorizontalGuide(t.target.value),e.setState({addHGVisible:!0})},min:0,max:this.props.state.getIn(["scene","height"])})),i.default.createElement("td",null,i.default.createElement(c.FaTimes,{style:h,onClick:function(t){return e.setState({addHGVisible:!0})}})))))),i.default.createElement(u.TabPanel,null,i.default.createElement("table",{style:m},i.default.createElement("tbody",null,l.get("vertical").entrySeq().map((function(e,t){var r=n(e,2),o=r[0],l=r[1];return i.default.createElement("tr",{key:o},i.default.createElement("td",{style:{width:"2em"}},t+1),i.default.createElement("td",null,l),i.default.createElement("td",{style:{width:"5em"}},i.default.createElement(c.FaTrash,{style:h,onClick:function(e){return a.removeVerticalGuide(o)}})))})),this.state.addVGVisible?i.default.createElement("tr",null,i.default.createElement("td",{colSpan:"3",style:y,onClick:function(t){return e.setState({addVGVisible:!1})}},o.t("+ Add Vertical Giude"))):i.default.createElement("tr",null,i.default.createElement("td",{colSpan:"2"},i.default.createElement(d.FormNumberInput,{value:0,onChange:function(t){return a.addVerticalGuide(t.target.value),e.setState({addVGVisible:!0})},min:0,max:this.props.state.getIn(["scene","height"])})),i.default.createElement("td",null,i.default.createElement(c.FaTimes,{style:h,onClick:function(t){return e.setState({addVGVisible:!0})}}))))))))}}]),t}(o.Component);t.default=g,g.propTypes={state:l.default.object.isRequired},g.contextTypes={translator:l.default.object.isRequired,projectActions:l.default.object.isRequired}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var r=[],n=!0,a=!1,o=void 0;try{for(var i,l=e[Symbol.iterator]();!(n=(i=l.next()).done)&&(r.push(i.value),!t||r.length!==t);n=!0);}catch(e){a=!0,o=e}finally{try{!n&&l.return&&l.return()}finally{if(a)throw o}}return r}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},a=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},i=r(0),l=f(i),s=f(r(1)),u=f(r(25)),c=r(2),d=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}(r(3)),p=r(19);function f(e){return e&&e.__esModule?e:{default:e}}var h={MODE_IDLE:c.MODE_IDLE,MODE_2D_ZOOM_IN:c.MODE_2D_ZOOM_IN,MODE_2D_ZOOM_OUT:c.MODE_2D_ZOOM_OUT,MODE_2D_PAN:c.MODE_2D_PAN,MODE_3D_VIEW:c.MODE_3D_VIEW,MODE_3D_FIRST_PERSON:c.MODE_3D_FIRST_PERSON,MODE_WAITING_DRAWING_LINE:c.MODE_WAITING_DRAWING_LINE,MODE_DRAWING_LINE:c.MODE_DRAWING_LINE,MODE_DRAWING_HOLE:c.MODE_DRAWING_HOLE,MODE_DRAWING_ITEM:c.MODE_DRAWING_ITEM,MODE_DRAGGING_LINE:c.MODE_DRAGGING_LINE,MODE_DRAGGING_VERTEX:c.MODE_DRAGGING_VERTEX,MODE_DRAGGING_ITEM:c.MODE_DRAGGING_ITEM,MODE_DRAGGING_HOLE:c.MODE_DRAGGING_HOLE,MODE_FITTING_IMAGE:c.MODE_FITTING_IMAGE,MODE_UPLOADING_IMAGE:c.MODE_UPLOADING_IMAGE,MODE_ROTATING_ITEM:c.MODE_ROTATING_ITEM},y={height:"auto",maxHeight:"15em",overflowY:"auto",padding:"0.25em 1.15em",cursor:"pointer",marginBottom:"1em",userSelect:"none"},m={width:"auto",height:"2.5em",margin:"0.25em 0.25em 0 0",padding:"0.5em",textAlign:"center",display:"inline-block",border:"1px solid #CCC",borderRadius:"0.2em"},g=o({},m,{color:d.SECONDARY_COLOR.main,borderColor:d.SECONDARY_COLOR.main}),v={paddingBottom:"0.5em",borderBottom:"1px solid #888"},E={width:"100%",marginTop:"0.8em"},_={fontSize:"1.5em"},O={fontSize:"1em",width:"100%",height:"1em",padding:"1em 0.5em"},b=function(e){function t(e,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,r)),a=e.layers.get(e.selectedLayer),o={lines:a.lines,holes:a.holes,items:a.items};return n.state={elements:o,matchString:"",matchedElements:o},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),a(t,[{key:"shouldComponentUpdate",value:function(e,t){if(this.state.matchString!==t.matchString)return!0;var r=this.state.elements,n=t.elements;return r.lines.hashCode()!==n.lines.hashCode()||r.holes.hashCode()!==n.holes.hashCode()||r.items.hashCode()!==n.items.hashCode()}},{key:"componentWillReceiveProps",value:function(e){var t=e.layers.get(e.selectedLayer);if(this.props.layers.hashCode()!==e.layers.hashCode()){var r={lines:t.lines,holes:t.holes,items:t.items};if(""!==this.state.matchString){var n=new RegExp(this.state.matchString,"i"),a=function(e){return n.test(e.get("name"))};this.setState({matchedElements:{elements:r,lines:r.lines.filter(a),holes:r.holes.filter(a),items:r.items.filter(a)}})}else this.setState({elements:r,matchedElements:r})}}},{key:"matcharray",value:function(e){if(""!==e){var t=new RegExp(e,"i"),r=function(e){return t.test(e.get("name"))};this.setState({matchString:e,matchedElements:{lines:this.state.elements.lines.filter(r),holes:this.state.elements.holes.filter(r),items:this.state.elements.items.filter(r)}})}else this.setState({matchString:"",matchedElements:this.state.elements})}},{key:"render",value:function(){var e=this;if(!h[this.props.mode])return null;var t=this.props.layers.get(this.props.selectedLayer);return l.default.createElement(u.default,{name:this.context.translator.t("Elements on layer {0}",t.name)},l.default.createElement("div",{style:y,onWheel:function(e){return e.stopPropagation()}},l.default.createElement("table",{style:E},l.default.createElement("tbody",null,l.default.createElement("tr",null,l.default.createElement("td",null,l.default.createElement(p.MdSearch,{style:_})),l.default.createElement("td",null,l.default.createElement("input",{type:"text",style:O,onChange:function(t){e.matcharray(t.target.value)}}))))),this.state.matchedElements.lines.count()?l.default.createElement("div",null,l.default.createElement("p",{style:v},this.context.translator.t("Lines")),this.state.matchedElements.lines.entrySeq().map((function(r){var a=n(r,2),o=a[0],i=a[1];return l.default.createElement("div",{key:o,onClick:function(r){return e.context.linesActions.selectLine(t.id,i.id)},style:i.selected?g:m},i.name)}))):null,this.state.matchedElements.holes.count()?l.default.createElement("div",null,l.default.createElement("p",{style:v},this.context.translator.t("Holes")),this.state.matchedElements.holes.entrySeq().map((function(r){var a=n(r,2),o=a[0],i=a[1];return l.default.createElement("div",{key:o,onClick:function(r){return e.context.holesActions.selectHole(t.id,i.id)},style:i.selected?g:m},i.name)}))):null,this.state.matchedElements.items.count()?l.default.createElement("div",null,l.default.createElement("p",{style:v},this.context.translator.t("Items")),this.state.matchedElements.items.entrySeq().map((function(r){var a=n(r,2),o=a[0],i=a[1];return l.default.createElement("div",{key:o,onClick:function(r){return e.context.itemsActions.selectItem(t.id,i.id)},style:i.selected?g:m},i.name)}))):null))}}]),t}(i.Component);t.default=b,b.propTypes={mode:s.default.string.isRequired,layers:s.default.object.isRequired},b.contextTypes={catalog:s.default.object.isRequired,translator:s.default.object.isRequired,itemsActions:s.default.object.isRequired,linesActions:s.default.object.isRequired,holesActions:s.default.object.isRequired,projectActions:s.default.object.isRequired}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},o=r(0),i=u(o),l=u(r(1)),s=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}(r(3));function u(e){return e&&e.__esModule?e:{default:e}}var c={width:"5.5em",color:"#CCC",textAlign:"center",cursor:"pointer",userSelect:"none",border:"1px solid transparent",margin:"-1px 5px 0 5px",borderRadius:"2px",display:"inline-block"},d=a({},c,{backgroundColor:"#1c82c6",border:"1px solid #FFF",color:s.COLORS.white}),p=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return r.state={over:!1,active:r.props.toggleState||!1},r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),n(t,[{key:"toggleOver",value:function(e){this.setState({over:!0})}},{key:"toggleOut",value:function(e){this.setState({over:!1})}},{key:"toggle",value:function(e){var t=!this.state.active;this.setState({active:t}),t?this.props.toggleOn():this.props.toggleOff()}},{key:"shouldComponentUpdate",value:function(e,t){return this.state.over!=t.over||(this.state.active!=t.active||this.props.toggleState!=e.toggleState)}},{key:"componentWillReceiveProps",value:function(e){e.toggleState!=this.props.toggleState&&(this.state.active=e.toggleState)}},{key:"render",value:function(){var e=this;return i.default.createElement("div",{style:this.state.over||this.state.active?d:c,onMouseOver:function(t){return e.toggleOver(t)},onMouseOut:function(t){return e.toggleOut(t)},onClick:function(t){return e.toggle(t)},title:this.props.title},this.props.text)}}]),t}(o.Component);t.default=p,p.propTypes={state:l.default.object.isRequired,toggleOn:l.default.func.isRequired,toggleOff:l.default.func.isRequired,text:l.default.string.isRequired,toggleState:l.default.bool,title:l.default.string},p.contextTypes={projectActions:l.default.object.isRequired,viewer2DActions:l.default.object.isRequired,linesActions:l.default.object.isRequired,holesActions:l.default.object.isRequired,itemsActions:l.default.object.isRequired,translator:l.default.object.isRequired}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},o=r(0),i=c(o),l=c(r(1)),s=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}(r(3)),u=r(18);function c(e){return e&&e.__esModule?e:{default:e}}var d={width:"auto",display:"inline-block",margin:0,padding:"0px 5px 0px 0px"},p={color:"#CCC",textAlign:"center",cursor:"pointer",userSelect:"none"},f=a({},p,{color:s.COLORS.white}),h={position:"fixed",width:"calc( 100% - 2px )",height:"40%",left:0,bottom:20,backgroundColor:s.PRIMARY_COLOR.alt,borderTop:s.PRIMARY_COLOR.border,zIndex:0,padding:0,margin:0,transition:"all 300ms ease"},y=a({},h,{visibility:"hidden",height:0}),m={position:"relative",width:"100%",height:"2em",top:0,left:0,borderBottom:s.PRIMARY_COLOR.border},g={position:"relative",height:"2em",lineHeight:"2em",marginLeft:"1em"},v={position:"relative",width:"100%",height:"calc( 100% - 2em )",padding:"1em",overflowY:"auto"},E={position:"absolute",width:"2em",height:"2em",right:0,top:0,padding:"0.5em",borderLeft:s.PRIMARY_COLOR.border,cursor:"pointer"},_=a({},E,{color:s.COLORS.white,backgroundColor:s.SECONDARY_COLOR.alt}),O={width:"15px",height:"15px",marginTop:"-2px",marginRight:"2px"},b={position:"relative"},w=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return r.state={over:!1,closeOver:!1,active:r.props.toggleState||!1},r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),n(t,[{key:"toggleOver",value:function(e){this.setState({over:!0})}},{key:"toggleOut",value:function(e){this.setState({over:!1})}},{key:"toggle",value:function(e){var t=!this.state.active;this.setState({active:t})}},{key:"shouldComponentUpdate",value:function(e,t){return this.state.over!=t.over||(this.state.closeOver!=t.closeOver||(this.state.active!=t.active||(this.props.content.length!=e.content.length||this.props.toggleState!=e.toggleState)))}},{key:"componentWillReceiveProps",value:function(e){e.toggleState!=this.props.toggleState&&(this.state.active=e.toggleState)}},{key:"render",value:function(){var e=this,t=this.state,r=this.props,n=r.icon||null,o=r.iconStyle||{},l=r.textStyle||{},s=r.titleStyle||{};return i.default.createElement("div",{style:d},i.default.createElement("div",{style:t.over||t.active?f:p,onClick:function(t){return e.toggle(t)},title:r.title},i.default.createElement(n,{style:a({},o,O)}),i.default.createElement("span",{style:a({},b,l)},r.text)),i.default.createElement("div",{style:t.active?h:y},i.default.createElement("div",{style:m},i.default.createElement("b",{style:a({},g,s)},r.title),i.default.createElement(u.FaTimes,{style:t.closeOver?_:E,onMouseOver:function(t){return e.setState({closeOver:!0})},onMouseOut:function(t){return e.setState({closeOver:!1})},onClick:function(t){return e.toggle(t)}})),i.default.createElement("div",{style:v},r.content)))}}]),t}(o.Component);t.default=w,w.propTypes={state:l.default.object.isRequired,text:l.default.string.isRequired,textStyle:l.default.object,icon:l.default.func,iconStyle:l.default.object,content:l.default.array.isRequired,toggleState:l.default.bool,title:l.default.string,titleStyle:l.default.object},w.contextTypes={projectActions:l.default.object.isRequired,viewer2DActions:l.default.object.isRequired,linesActions:l.default.object.isRequired,holesActions:l.default.object.isRequired,itemsActions:l.default.object.isRequired,translator:l.default.object.isRequired}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.VERSION="2.0.5"},,,,function(e,t,r){"use strict";var n=p(r(0)),a=p(r(63)),o=p(r(166)),i=r(5),l=(p(i),p(r(180)),r(45)),s=r(89),u=p(r(182)),c=p(r(459)),d=r(34);function p(e){return e&&e.__esModule?e:{default:e}}var f=(0,i.Map)({"react-planner":new d.Models.State});var h=(0,l.createStore)((function(e,t){return e=(e=e||f).update("react-planner",(function(e){return(0,d.reducer)(e,t)}))}),null,(function(e){return e})),y=[d.Plugins.Keyboard(),d.Plugins.Autosave("react-planner_v0"),d.Plugins.ConsoleDebugger()],m=[c.default];a.default.render(n.default.createElement(s.Provider,{store:h},n.default.createElement(o.default,null,(function(e){var t=e.width,r=e.height;return n.default.createElement(d.ReactPlanner,{catalog:u.default,width:t,height:r,plugins:y,toolbarButtons:m,stateExtractor:function(e){return e.get("react-planner")}})}))),document.getElementById("app"))},,,,,,,,,,,,,,,,,,,,,function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(34),a=m(r(409)),o=m(r(415)),i=m(r(421)),l=m(r(423)),s=m(r(431)),u=m(r(433)),c=m(r(435)),d=m(r(437)),p=m(r(442)),f=m(r(444)),h=m(r(449)),y=m(r(454));function m(e){return e&&e.__esModule?e:{default:e}}var g=new n.Catalog,v={area:a.default};Object.freeze(v);var E={wall:o.default};Object.freeze(E);var _={doorDouble:i.default,door:l.default,gate:s.default,panicDoorDouble:u.default,panicDoor:c.default,sashWindow:d.default,slidingDoor:p.default,venetianBlindWindow:f.default,windowCurtain:h.default,window:y.default};Object.freeze(_);var O={};for(var b in Object.freeze(O),v)g.registerElement(v[b]);for(var w in E)g.registerElement(E[w]);for(var I in _)g.registerElement(_[I]);for(var S in O)g.registerElement(O[S]);g.registerCategory("windows","Windows",[_.window,_.sashWindow,_.venetianBlindWindow,_.windowCurtain]),g.registerCategory("doors","Doors",[_.door,_.doorDouble,_.panicDoor,_.panicDoorDouble,_.slidingDoor]),t.default=g},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=s;var n=l(r(0)),a=l(r(1)),o=r(11),i=l(r(24));function l(e){return e&&e.__esModule?e:{default:e}}function s(e){var t=e.value,r=e.onUpdate,a=e.configs,l=e.sourceElement,s=e.internalState,u=e.state;return n.default.createElement("table",{className:"PropertyColor",style:i.default.tableStyle},n.default.createElement("tbody",null,n.default.createElement("tr",null,n.default.createElement("td",{style:i.default.firstTdStyle},n.default.createElement(o.FormLabel,null,a.label)),n.default.createElement("td",null,n.default.createElement(o.FormColorInput,{value:t,onChange:function(e){return t=e.target.value,a.hook?a.hook(t,l,s,u).then((function(e){return r(e)})):r(t);var t}})))))}s.propTypes={value:a.default.any.isRequired,onUpdate:a.default.func.isRequired,configs:a.default.object.isRequired,sourceElement:a.default.object,internalState:a.default.object,state:a.default.object.isRequired}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e};t.default=function(e){var t=e.children,r=function(e,t){var r={};for(var n in e)t.indexOf(n)>=0||Object.prototype.hasOwnProperty.call(e,n)&&(r[n]=e[n]);return r}(e,["children"]);return a.default.createElement(o.default,n({style:l,styleHover:s},r),t)};var a=i(r(0)),o=i(r(47));function i(e){return e&&e.__esModule?e:{default:e}}var l={borderColor:"#adadad",backgroundColor:"#e6e6e6"},s={backgroundColor:"#d4d4d4",borderColor:"#8c8c8c"}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e};t.default=function(e){var t=e.children,r=function(e,t){var r={};for(var n in e)t.indexOf(n)>=0||Object.prototype.hasOwnProperty.call(e,n)&&(r[n]=e[n]);return r}(e,["children"]);return a.default.createElement(o.default,n({style:s,styleHover:u},r),t)};var a=l(r(0)),o=l(r(47)),i=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}(r(3));function l(e){return e&&e.__esModule?e:{default:e}}var s={borderColor:"#c12e2a",backgroundColor:"#c9302c",color:i.COLORS.white},u={backgroundColor:"#972726",borderColor:"#c12e2a",color:i.COLORS.white}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e};t.default=function(e){var t=e.children,r=e.style,a=function(e,t){var r={};for(var n in e)t.indexOf(n)>=0||Object.prototype.hasOwnProperty.call(e,n)&&(r[n]=e[n]);return r}(e,["children","style"]);return i.default.createElement("div",n({style:n({},l,{style:r})},a),t)};var a,o=r(0),i=(a=o)&&a.__esModule?a:{default:a};var l={marginBottom:"16px"}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e};t.default=function(e){var t=e.onChange,r=function(e,t){var r={};for(var n in e)t.indexOf(n)>=0||Object.prototype.hasOwnProperty.call(e,n)&&(r[n]=e[n]);return r}(e,["onChange"]);return a.default.createElement(o.default,n({type:"color",style:l,onChange:function(e){var r=e.target.value;s.test(r)&&t(e)},autoComplete:"off"},r))};var a=i(r(0)),o=i(r(48));function i(e){return e&&e.__esModule?e:{default:e}}var l={padding:0,border:0},s=/^.*$/},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e};t.default=function(e){var t=e.children,r=e.style,a=function(e,t){var r={};for(var n in e)t.indexOf(n)>=0||Object.prototype.hasOwnProperty.call(e,n)&&(r[n]=e[n]);return r}(e,["children","style"]);return i.default.createElement("label",n({style:n({},l,{style:r})},a),t)};var a,o=r(0),i=(a=o)&&a.__esModule?a:{default:a};var l={display:"block",marginBottom:"5px"}},,function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e};t.default=function(e){var t=e.children,r=e.style,a=function(e,t){var r={};for(var n in e)t.indexOf(n)>=0||Object.prototype.hasOwnProperty.call(e,n)&&(r[n]=e[n]);return r}(e,["children","style"]);return i.default.createElement("select",n({type:"text",style:n({},s,r)},a),t)};var a,o=r(0),i=(a=o)&&a.__esModule?a:{default:a},l=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}(r(3));var s={display:"block",width:"100%",padding:"0px 4px",fontSize:"13px",color:l.PRIMARY_COLOR.input,backgroundColor:l.COLORS.white,backgroundImage:"none",border:"1px solid rgba(0,0,0,.15)",outline:"none",borderRadius:"0px",height:"30px",WebkitAppearance:"none",WebkitBorderRadius:"0px",background:"url(\"data:image/svg+xml;utf8,<svg version='1.1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' width='24' height='24' viewBox='0 0 24 24'><path fill='#444' d='M7.406 7.828l4.594 4.594 4.594-4.594 1.406 1.406-6 6-6-6z'></path></svg>\") #fff",backgroundPosition:"100% 50%",backgroundRepeat:"no-repeat"}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e};t.default=function(e){var t=e.value,r=e.onChange,l=function(e,t){var r={};for(var n in e)t.indexOf(n)>=0||Object.prototype.hasOwnProperty.call(e,n)&&(r[n]=e[n]);return r}(e,["value","onChange"]);return a.default.createElement("div",null,a.default.createElement("div",{style:s},a.default.createElement(o.default,n({type:"range",style:u,onChange:r,value:t},l))),a.default.createElement("div",{style:c},a.default.createElement(i.default,{value:t,onChange:r,style:d})))};var a=l(r(0)),o=l(r(192)),i=l(r(48));function l(e){return e&&e.__esModule?e:{default:e}}var s={display:"inline-block",width:"80%",marginRight:"5%"},u={display:"block",width:"100%",height:"30px"},c={display:"inline-block",width:"15%",float:"right"},d={height:"34px",textAlign:"center"}},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e};t.default=function(e){var t=e.children,r=function(e,t){var r={};for(var n in e)t.indexOf(n)>=0||Object.prototype.hasOwnProperty.call(e,n)&&(r[n]=e[n]);return r}(e,["children"]);return a.default.createElement(o.default,n({type:"submit",style:s,styleHover:u},r),t)};var a=l(r(0)),o=l(r(47)),i=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}(r(3));function l(e){return e&&e.__esModule?e:{default:e}}var s={borderColor:"#415375",backgroundColor:"#415375",color:i.COLORS.white},u={borderColor:"#1f3149",backgroundColor:"#1f3149",color:i.COLORS.white}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var r=[],n=!0,a=!1,o=void 0;try{for(var i,l=e[Symbol.iterator]();!(n=(i=l.next()).done)&&(r.push(i.value),!t||r.length!==t);n=!0);}catch(e){a=!0,o=e}finally{try{!n&&l.return&&l.return()}finally{if(a)throw o}}return r}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")};t.default=c;var a=u(r(0)),o=u(r(1)),i=r(5),l=r(11),s=u(r(24));function u(e){return e&&e.__esModule?e:{default:e}}function c(e){var t=e.value,r=e.onUpdate,o=e.configs,u=e.sourceElement,c=e.internalState,d=e.state;return a.default.createElement("table",{className:"PropertyEnum",style:s.default.tableStyle},a.default.createElement("tbody",null,a.default.createElement("tr",null,a.default.createElement("td",{style:s.default.firstTdStyle},a.default.createElement(l.FormLabel,null,o.label)),a.default.createElement("td",null,a.default.createElement(l.FormSelect,{value:t,onChange:function(e){return t=e.target.value,o.hook?o.hook(t,u,c,d).then((function(e){return r(e)})):r(t);var t}},(0,i.Seq)(o.values).entrySeq().map((function(e){var t=n(e,2),r=t[0],o=t[1];return a.default.createElement("option",{key:r,value:r},o)})))))))}c.propTypes={value:o.default.any.isRequired,onUpdate:o.default.func.isRequired,configs:o.default.object.isRequired,sourceElement:o.default.object,internalState:o.default.object,state:o.default.object.isRequired}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=s;var n=l(r(0)),a=l(r(1)),o=r(11),i=l(r(24));function l(e){return e&&e.__esModule?e:{default:e}}function s(e){var t=e.value,r=e.onUpdate,a=e.onValid,l=e.configs,s=e.sourceElement,u=e.internalState,c=e.state;return n.default.createElement("table",{className:"PropertyNumber",style:i.default.tableStyle},n.default.createElement("tbody",null,n.default.createElement("tr",null,n.default.createElement("td",{style:i.default.firstTdStyle},n.default.createElement(o.FormLabel,null,l.label)),n.default.createElement("td",null,n.default.createElement(o.FormNumberInput,{value:t,onChange:function(e){return t=e.target.value,n=parseFloat(t),isNaN(n)&&(n=0),l.hook?l.hook(n,s,u,c).then((function(e){return r(e)})):r(n);var t,n},onValid:a,min:l.min,max:l.max})))))}s.propTypes={value:a.default.any.isRequired,onUpdate:a.default.func.isRequired,onValid:a.default.func,configs:a.default.object.isRequired,sourceElement:a.default.object,internalState:a.default.object,state:a.default.object.isRequired}},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=s;var n=l(r(0)),a=l(r(1)),o=r(11),i=l(r(24));function l(e){return e&&e.__esModule?e:{default:e}}function s(e){var t=e.value,r=e.onUpdate,a=e.configs,l=e.sourceElement,s=e.internalState,u=e.state;return n.default.createElement("table",{className:"PropertyToggle",style:i.default.tableStyle},n.default.createElement("tbody",null,n.default.createElement("tr",null,n.default.createElement("td",{style:i.default.firstTdStyle},n.default.createElement(o.FormLabel,null,a.label)),n.default.createElement("td",null,n.default.createElement(o.Button,{onClick:function(e){return n=!t,a.hook?a.hook(n,l,s,u).then((function(e){return r(e)})):r(n);var n},size:"small"},a.actionName)))))}s.propTypes={value:a.default.any.isRequired,onUpdate:a.default.func.isRequired,configs:a.default.object.isRequired,sourceElement:a.default.object,internalState:a.default.object,state:a.default.object.isRequired}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=u;var n=l(r(0)),a=l(r(1)),o=r(11),i=l(r(24));function l(e){return e&&e.__esModule?e:{default:e}}var s={margin:0};function u(e){var t=e.value,r=e.onUpdate,a=e.configs,l=e.sourceElement,u=e.internalState,c=e.state;return n.default.createElement("table",{className:"PropertyCheckbox",style:i.default.tableStyle},n.default.createElement("tbody",null,n.default.createElement("tr",null,n.default.createElement("td",{style:i.default.firstTdStyle},n.default.createElement(o.FormLabel,null,a.label)),n.default.createElement("td",null,n.default.createElement("input",{style:s,type:"checkbox",checked:t,onChange:function(e){return n=!t,a.hook?a.hook(n,l,u,c).then((function(e){return r(e)})):r(n);var n}})))))}u.propTypes={value:a.default.any.isRequired,onUpdate:a.default.func.isRequired,configs:a.default.object.isRequired,sourceElement:a.default.object,internalState:a.default.object,state:a.default.object.isRequired}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=o;a(r(0));var n=a(r(1));function a(e){return e&&e.__esModule?e:{default:e}}function o(e){e.value,e.onUpdate,e.configs,e.sourceElement,e.internalState,e.state;return null}o.propTypes={value:n.default.any.isRequired,onUpdate:n.default.func.isRequired,configs:n.default.object.isRequired,sourceElement:n.default.object,internalState:n.default.object,state:n.default.object.isRequired}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=s;var n=l(r(0)),a=l(r(1)),o=r(11),i=l(r(24));function l(e){return e&&e.__esModule?e:{default:e}}function s(e){var t=e.value,r=(e.onUpdate,e.configs);e.sourceElement,e.internalState,e.state;return n.default.createElement("table",{className:"PropertyReadOnly",style:i.default.tableStyle},n.default.createElement("tbody",null,n.default.createElement("tr",null,n.default.createElement("td",{style:i.default.firstTdStyle},n.default.createElement(o.FormLabel,null,r.label)),n.default.createElement("td",null,n.default.createElement("div",null,t)))))}s.propTypes={value:a.default.any.isRequired,onUpdate:a.default.func.isRequired,configs:a.default.object.isRequired,sourceElement:a.default.object,internalState:a.default.object,state:a.default.object.isRequired}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={"+ Add Horizontal Giude":"+ Add Horizontal Giude","+ Add Vertical Giude":"+ Add Vertical Giude","2D View":"2D View","3D First Person":"3D First Person","3D View":"3D View",altitude:"altitude",Altitude:"Altitude",Areas:"Areas",Cancel:"Cancel",Catalog:"Catalog","Chain selected Elements to Group":"Chain selected Elements to Group",Circular:"Circular",color:"color","Configure layer":"Configure layer","Configure project":"Configure project",Confirm:"Confirm",Copy:"Copy","Delete group and all Elements":"Delete group and all Elements","Delete layer":"Delete layer",Delete:"Delete","Elements on layer {0}":"Elements on layer {0}",Elements:"Elements","Get Screenshot":"Get Screenshot","Group [{0}]":"Group [{0}]","Group's Barycenter":"Group's Barycenter","Group's Elements":"Group's Elements",Groups:"Groups",Guides:"Guides",height:"height",Holes:"Holes",Horizontal:"Horizontal",Items:"Items","Last Selected":"Last Selected","Layer config":"Layer config",Layer:"Layer",Layers:"Layers",Length:"Length",Lines:"Lines","Load project":"Load project","Mouse X Coordinate":"Mouse X Coordinate","Mouse Y Coordinate":"Mouse Y Coordinate",Name:"Name","New Empty Group":"New Empty Group","New Group from selected":"New Group from selected","New layer":"New layer","New project":"New project",opacity:"opacity","Open catalog":"Open catalog",order:"order",Pan:"Pan",Paste:"Paste","Project config":"Project config","Properties: [{0}] {1}":"Properties: [{0}] {1}",Prototype:"Prototype",Reset:"Reset",Rotation:"Rotation","Save project":"Save project",Save:"Save","Scene Zoom Level":"Scene Zoom Level","Search Element":"Search Element","Snap to Grid":"Snap to Grid","Snap to Guide":"Snap to Guide","Snap to Line":"Snap to Line","Snap to Point":"Snap to Point","Snap to Segment":"Snap to Segment",texture:"texture",thickness:"thickness","Toggle Group Visibility":"Toggle Group Visibility","Un-chain all Group's Elements and remove Group":"Un-chain all Group's Elements and remove Group","Un-chain Element from Group":"Un-chain Element from Group","Undo (CTRL-Z)":"Undo (CTRL-Z)",Unselect:"Unselect",Vertical:"Vertical",width:"width","Would you want to start a new Project?":"Would you want to start a new Project?","Zoom in":"Zoom in","Zoom out":"Zoom out"}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={"+ Add Horizontal Giude":"+ Aggiungi Guida Orizzontale","+ Add Vertical Giude":"+ Aggiungi Guida Verticale","2D View":"Vista 2D","3D First Person":"3D Prima persona","3D View":"Vista 3D",Altitude:"Quota",altitude:"Quota",Areas:"Aree",Cancel:"Annulla",Catalog:"Catalogo","Chain selected Elements to Group":"Collega l'Elemento selzionato al Gruppo",Circular:"Circolare",color:"colore","Configure layer":"Configura livello","Configure project":"Configura progetto",Confirm:"Conferma",Copy:"Copia","Delete group and all Elements":"Elimina Gruppo e tutti i suoi Elementi","Delete layer":"Elimina livello",Delete:"Elimina","Elements on layer {0}":"Elementi nel livello {0}",Elements:"Elementi","Get Screenshot":"Cattura uno screenshot","Group [{0}]":"Gruppo [{0}]","Group's Barycenter":"Baricentro del Gruppo","Group's Elements":"Elementi del Gruppo",Groups:"Gruppi",Guides:"Guide",height:"Altezza",Holes:"Buchi",Horizontal:"Orizzontale",Items:"Oggetti","Last Selected":"Ultimi Selezionati","Layer config":"Configurazione livello",Layer:"Livello",Layers:"Livelli",Length:"Lunghezza",Lines:"Linee","Load project":"Carica progetto","Mouse X Coordinate":"Coordinata X del Mouse","Mouse Y Coordinate":"Coordinata Y del Mouse",Name:"Nome","New Empty Group":"Crea Gruppo Vuoto","New Group from selected":"Crea Gruppo dai selezionati","New layer":"Nuovo livello","New project":"Nuovo progetto",opacity:"Opacità","Open catalog":"Apri catalogo",order:"Ordine",Pan:"Muovi",Paste:"Incolla","Project config":"Configurazione progetto","Properties: [{0}] {1}":"Proprietà: [{0}] {1}",Prototype:"Prototipo",Reset:"Annulla",Rotation:"Rotazione","Save project":"Salva progetto",Save:"Salva","Scene Zoom Level":"Livello di Zoom della Scena","Search Element":"Cerca Elemento","Snap to Grid":"Snap alla Griglia","Snap to Guide":"Snap alla Guida","Snap to Line":"Snap alla Linea","Snap to Point":"Snap al Punto","Snap to Segment":"Snap al Segmento",texture:"texture",thickness:"spessore","Toggle Group Visibility":"Varia la visibilità del Gruppo","Un-chain all Group's Elements and remove Group":"Elimina il Gruppo e scollega tutti gli Elementi appartenenti","Un-chain Element from Group":"Scollega l'Elemento dal Gruppo","Undo (CTRL-Z)":"Annulla (CTRL-Z)",Unselect:"Deseleziona",Vertical:"Verticale",width:"Larghezza","Would you want to start a new Project?":"Vuoi iniziare un nuovo progetto?","Zoom in":"Ingrandisci","Zoom out":"Riduci"}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={"+ Add Horizontal Giude":"+ Добавить горизонтальное руководство","+ Add Vertical Giude":"+ Добавить вертикальное руководство","2D View":"Плоский вид","3D First Person":"3D от первого лица","3D View":"Объёмный вид",altitude:"высота",Altitude:"Высота",Areas:"Поверхности",Cancel:"Отмена",Catalog:"Каталог","Chain selected Elements to Group":"Цепочка выбранных элементов в группу",Circular:"круговой",color:"цвет","Configure layer":"Настроить слой","Configure project":"Настроить проект",Confirm:"подтвердить",Copy:"Копировать","Delete group and all Elements":"Удалить группу и все элементы","Delete layer":"Удалить слой",Delete:"Удалить","Elements on layer {0}":"Элементов на слое {0}",Elements:"элементы","Get Screenshot":"Сделать снимок экрана","Group [{0}]":"группа [{0}]","Group's Barycenter":"Барицентр группы","Group's Elements":"Элементы группы",Groups:"группы",Guides:"руководства",height:"высота",Holes:"Проёмы",Horizontal:"горизонтальный",Items:"Предметы","Last Selected":"Последний выбраный","Layer config":"Настройка слоя",Layer:"Слой",Layers:"Слои",Length:"Длинна",Lines:"Линии","Load project":"Загрузить проект","Mouse X Coordinate":"X-координата курсора","Mouse Y Coordinate":"Y-координата курсора",Name:"Название","New Empty Group":"Новая пустая группа","New Group from selected":"Новая группа из выбранных","New layer":"Новый слой","New project":"Новый проект",opacity:"непрозрачность","Open catalog":"Открыть каталог",order:"порядок",Pan:"Двигать",Paste:"Вставить","Project config":"Настройка проекта","Properties: [{0}] {1}":"Свойства: [{0}] {1}",Prototype:"Опытный образец",Reset:"Сброс",Rotation:"Вращение","Save project":"Сохранить проект",Save:"Сохранить","Scene Zoom Level":"Уровень приближениия сцены","Search Element":"Поиск","Snap to Grid":"Привязка к сетке","Snap to Guide":"Привязать к руководству","Snap to Line":"Привязка к линии","Snap to Point":"Привязка к точке","Snap to Segment":"Привязка к сегменту",texture:"текстура",thickness:"толщина","Toggle Group Visibility":"Переключить видимость группы","Un-chain all Group's Elements and remove Group":"Удалить цепочку элементов группы и удалить группу","Un-chain Element from Group":"Unchain Element из группы","Undo (CTRL-Z)":"Отменить действие (CTRL-Z)",Unselect:"Снять выделене",Vertical:"вертикальный",width:"ширина","Would you want to start a new Project?":"Начать новый проект?","Zoom in":"Приблизить","Zoom out":"Отдалить"}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.initialState=void 0,t.default=function(e,t){return n.PROJECT_ACTIONS[t.type]?a.ReactPlannerProjectReducer.apply(void 0,arguments):n.VIEWER2D_ACTIONS[t.type]?a.ReactPlannerViewer2dReducer.apply(void 0,arguments):n.ITEMS_ACTIONS[t.type]?a.ReactPlannerItemsReducer.apply(void 0,arguments):n.HOLE_ACTIONS[t.type]?a.ReactPlannerHolesReducer.apply(void 0,arguments):n.LINE_ACTIONS[t.type]?a.ReactPlannerLinesReducer.apply(void 0,arguments):n.AREA_ACTIONS[t.type]?a.ReactPlannerAreasReducer.apply(void 0,arguments):n.GROUP_ACTIONS[t.type]?a.ReactPlannerGroupsReducer.apply(void 0,arguments):n.SCENE_ACTIONS[t.type]?a.ReactPlannerSceneReducer.apply(void 0,arguments):n.VERTEX_ACTIONS[t.type]?a.ReactPlannerVerticesReducer.apply(void 0,arguments):e||i};var n=r(2),a=r(140),o=r(31),i=t.initialState=new o.State},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){switch(t.type){case a.SELECT_AREA:return n.Area.select(e,t.layerID,t.areaID).updatedState;default:return e}};var n=r(8),a=r(2)},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),a=r(5),o=r(2),i=r(31),l=r(9),s=r(8);var u=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return n(e,null,[{key:"setAlterate",value:function(e){return{updatedState:e.set("alterate",!e.alterate)}}},{key:"openCatalog",value:function(e){return{updatedState:e=this.setMode(e,o.MODE_VIEWING_CATALOG).updatedState}}},{key:"newProject",value:function(e){return{updatedState:e=new i.State({viewer2D:e.get("viewer2D")})}}},{key:"loadProject",value:function(e,t){return{updatedState:e=new i.State({scene:t,catalog:e.catalog.toJS()})}}},{key:"setProperties",value:function(e,t,r){return{updatedState:e=s.Layer.setPropertiesOnSelected(e,t,r).updatedState}}},{key:"updateProperties",value:function(e,t,r){return{updatedState:e=s.Layer.updatePropertiesOnSelected(e,t,r).updatedState}}},{key:"setItemsAttributes",value:function(e,t){return e.getIn(["scene","layers"]).forEach((function(r){e=s.Layer.setAttributesOnSelected(e,r.id,t).updatedState})),{updatedState:e}}},{key:"setLinesAttributes",value:function(e,t){return e.getIn(["scene","layers"]).forEach((function(r){e=s.Layer.setAttributesOnSelected(e,r.id,t).updatedState})),{updatedState:e}}},{key:"setHolesAttributes",value:function(e,t){return e.getIn(["scene","layers"]).forEach((function(r){e=s.Layer.setAttributesOnSelected(e,r.id,t).updatedState})),{updatedState:e}}},{key:"unselectAll",value:function(e){return e.getIn(["scene","layers"]).forEach((function(t){var r=t.id;e=s.Layer.unselectAll(e,r).updatedState})),e.getIn(["scene","groups"]).forEach((function(t){e=s.Group.unselect(e,t.get("id")).updatedState})),{updatedState:e}}},{key:"remove",value:function(e){var t=e.getIn(["scene","selectedLayer"]),r=e.getIn(["scene","layers",t,"selected"]),n=r.lines,a=r.holes,o=r.items;return e=s.Layer.unselectAll(e,t).updatedState,n.forEach((function(r){e=s.Line.remove(e,t,r).updatedState})),a.forEach((function(r){e=s.Hole.remove(e,t,r).updatedState})),o.forEach((function(r){e=s.Item.remove(e,t,r).updatedState})),{updatedState:e=s.Layer.detectAndUpdateAreas(e,t).updatedState}}},{key:"undo",value:function(e){var t=e.sceneHistory;return e.scene===t.last&&t.list.size>1&&(t=l.history.historyPop(t)),{updatedState:e=e.merge({mode:o.MODE_IDLE,scene:t.last,sceneHistory:l.history.historyPop(t)})}}},{key:"rollback",value:function(e){var t=e.sceneHistory;return!t.last&&t.list.isEmpty()?{updatedState:e}:{updatedState:e=(e=this.unselectAll(e).updatedState).merge({mode:o.MODE_IDLE,scene:t.last,sceneHistory:l.history.historyPush(t,t.last),snapElements:new a.List,activeSnapElement:null,drawingSupport:new a.Map,draggingSupport:new a.Map,rotatingSupport:new a.Map})}}},{key:"setProjectProperties",value:function(e,t){var r=e.scene.merge(t);return{updatedState:e=e.merge({mode:o.MODE_IDLE,scene:r})}}},{key:"openProjectConfigurator",value:function(e){return{updatedState:e=e.merge({mode:o.MODE_CONFIGURING_PROJECT})}}},{key:"initCatalog",value:function(e,t){return{updatedState:e=e.set("catalog",new i.Catalog(t))}}},{key:"updateMouseCoord",value:function(e,t){return{updatedState:e=e.set("mouse",new a.Map(t))}}},{key:"updateZoomScale",value:function(e,t){return{updatedState:e=e.set("zoom",t)}}},{key:"toggleSnap",value:function(e,t){return{updatedState:e=e.set("snapMask",t)}}},{key:"throwError",value:function(e,t){return{updatedState:e=e.set("errors",e.get("errors").push({date:Date.now(),error:t}))}}},{key:"throwWarning",value:function(e,t){return{updatedState:e=e.set("warnings",e.get("warnings").push({date:Date.now(),warning:t}))}}},{key:"copyProperties",value:function(e,t){return{updatedState:e=e.set("clipboardProperties",t)}}},{key:"pasteProperties",value:function(e){return{updatedState:e=this.updateProperties(e,e.getIn(["scene","selectedLayer"]),e.get("clipboardProperties")).updatedState}}},{key:"pushLastSelectedCatalogElementToHistory",value:function(e,t){var r=e.selectedElementsHistory,n=r.findIndex((function(e){return e.name===t.name}));return-1!==n&&(r=r.splice(n,1)),r=r.splice(0,0,t),{updatedState:e=e.set("selectedElementsHistory",r)}}},{key:"changeCatalogPage",value:function(e,t,r){return{updatedState:e=e.setIn(["catalog","page"],r).updateIn(["catalog","path"],(function(e){return e.push(t)}))}}},{key:"goBackToCatalogPage",value:function(e,t){var r=e.catalog.path.findIndex((function(e){return e===t}));return{updatedState:e=e.setIn(["catalog","page"],t).updateIn(["catalog","path"],(function(e){return e.take(r)}))}}},{key:"setMode",value:function(e,t){return{updatedState:e=e.set("mode",t)}}},{key:"addHorizontalGuide",value:function(e,t){return{updatedState:e=s.HorizontalGuide.create(e,t).updatedState}}},{key:"addVerticalGuide",value:function(e,t){return{updatedState:e=s.VerticalGuide.create(e,t).updatedState}}},{key:"addCircularGuide",value:function(e,t,r,n){return console.log("adding horizontal guide at",t,r,n),{updatedState:e}}},{key:"removeHorizontalGuide",value:function(e,t){return{updatedState:e=s.HorizontalGuide.remove(e,t).updatedState}}},{key:"removeVerticalGuide",value:function(e,t){return{updatedState:e=s.VerticalGuide.remove(e,t).updatedState}}},{key:"removeCircularGuide",value:function(e,t){return console.log("removeing horizontal guide ",t),{updatedState:e}}}]),e}();t.default=u},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.calculateInnerCycles=function(e,t){var r=new i.List,l=new n.default(e.length);t.forEach((function(e){l.addEdge(e[0],e[1]),l.addEdge(e[1],e[0])})),l.BCC();var s=l.subgraphs.filter((function(e){return e.length>=3})),u=(0,a.default)(s,l),c=[];return u.forEach((function(e){e.forEach((function(e){return c.push(e)}))})),(0,o.default)(e,c).v_cycles.forEach((function(e){e.shift(),r=r.push(e)})),r},t.isClockWiseOrder=function(e){var t=0,r=0,n=e.size;for(t=0;t<n;t++){var a=e.get(t),o=a.x,i=a.y,l=e.get((t+1)%n),s=l.x,u=l.y;r+=(s-o)*(u+i)}return r>0};var n=l(r(309)),a=l(r(310)),o=l(r(311)),i=r(5);function l(e){return e&&e.__esModule?e:{default:e}}},function(e,t,r){"use strict";var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}();function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e){for(var t=[],r=0;r<e;++r)t.push([]);return t}var i=function e(t,r){a(this,e),this.u=t,this.v=r},l=function(){function e(t){a(this,e),this.count=0,this.subgraphs=[],this.time=0,this.V=t,this.E=0,this.adj=[],this.adj=o(t)}return n(e,[{key:"addEdge",value:function(e,t){this.adj[e].push(t),this.E++}},{key:"_BCCUtil",value:function(e,t,r,n,a){var o=this;t[e]=r[e]=++this.time,this.children=0,this.adj[e].forEach((function(l){if(-1==t[l]){if(o.children++,a[l]=e,n.push(new i(e,l)),o._BCCUtil(l,t,r,n,a),r[e]>r[l]&&(r[e]=r[l]),1==t[e]&&o.children>1||t[e]>1&&r[l]>=t[e]){for(var s=[];n[n.length-1].u!=e||n[n.length-1].v!=l;)s.push(n[n.length-1]),n.splice(n.length-1,1);s.push(n[n.length-1]),o.subgraphs.push(s),s=[],n.splice(n.length-1,1),o.count++}}else l!=a[e]&&t[l]<r[e]&&(r[e]>t[l]&&(r[e]=t[l]),n.push(new i(e,l)))}))}},{key:"BCC",value:function(){for(var e=this.V,t=o(e),r=o(e),n=o(e),a=[],i=0;i<e;i++)t[i]=-1,r[i]=-1,n[i]=-1;for(var l=0;l<e;l++){-1==t[l]&&this._BCCUtil(l,t,r,a,n);for(var s=0,u=[];a.length>0;)s=1,u.push(a[a.length-1]),a.splice(a.length-1,1);1==s&&(this.subgraphs.push(u),u=[],this.count++)}}}]),e}();e.exports=l},function(e,t,r){"use strict";e.exports=function(e,t){var r=[];return e.forEach((function(e){r.push([]);var n=function(e){var t=new Set;return e.forEach((function(e){t.add(e.u),t.add(e.v)})),t}(e);n.forEach((function(e){t.adj[e].forEach((function(t){e<=t&&n.has(t)&&r[r.length-1].push([e,t])}))}))})),r}},function(e,t,r){"use strict";function n(e,t){return(e%t+t)%t}function a(e,t){var r,n,a=(n=e,[(r=t)[0]-n[0],r[1]-n[1]]);return Math.atan2(a[1],a[0])}function o(e,t){var r=void 0,n=void 0;for(r=0;r<t.length;r+=1)if(t[r].color<2)return l(t,r,n=-1*t[r].direction),{edge:r,direction:n,position:-1===n?0:1}}function i(e,t,r,a){var o=e[a[t][r]],i=o.length,l=void 0,s=void 0;for(s=0;s<i;s+=1)if(o[s].index===t)return{edge:(l=o[n(s+1,o.length)]).index,vertex:l.endpoint,position:l.position,direction:l.position?1:-1}}function l(e,t,r){e[t].color+=1,e[t].direction=r}function s(e,t){for(var r=function(e){return e.map((function(e){return{ev:e,color:0,direction:-1}}))}(t),s=function(e,t){return e.map((function(r,n){var o=[];return t.forEach((function(t,i){var l=void 0,s=void 0;t[0]===n&&(l=t[1],s=1),t[1]===n&&(l=t[0],s=0),void 0!==l&&o.push({index:i,endpoint:l,angle:a(r,e[l]),edge:t,position:s})})),o.sort((function(e,t){return t.angle-e.angle})),o}))}(e,t),u=[],c=[],d=[],p=void 0,f=void 0,h=void 0,y=void 0,m=o(0,r);void 0!==m;){for(p=[t[m.edge][n(m.position+1,2)],t[m.edge][m.position]],f=[m.edge],h=[m.direction],y=i(s,m.edge,m.position,t);y.edge!==m.edge;)p.push(y.vertex),f.push(y.edge),h.push(y.direction),l(r,y.edge,y.direction),y=i(s,y.edge,y.position,t);c.push(f),u.push(p),d.push(h),m=o(0,r)}return{v_cycles:u,e_cycles:c,dir_e_cycles:d,ev_mapping:r}}e.exports=function(e,t){var r=s(e,t),n=r.v_cycles,a=r.e_cycles;(function(e,t){var r=[],n=void 0,a=void 0,o=void 0;for(o=0;o<t.length;o+=1)n=t[o],a=e[o],(n.length<3||a[0]!==a[a.length-1])&&r.push(o);return r})(n,a).forEach((function(e){n.splice(e,1),a.splice(e,1)}));var o=r.dir_e_cycles,i=r.e_cycles.map((function(r,n){return r.map((function(r,a){var i=void 0,l=void 0;return o[n][a]>0>0?(i=t[r][0],l=t[r][1]):(i=t[r][1],l=t[r][0]),(e[l][0]-e[i][0])*(e[l][1]+e[i][1])}))})).map((function(e){return e.reduce((function(e,t){return e+t}))})),l=i.filter((function(e){return e>0})).length,u=l>=i.length-l?1:-1;return{v_cycles:r.v_cycles.filter((function(e,t){return u*i[t]>0})),e_cycles:r.e_cycles.filter((function(e,t){return u*i[t]>0})),ev_mapping:r.ev_mapping}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var r=[],n=!0,a=!1,o=void 0;try{for(var i,l=e[Symbol.iterator]();!(n=(i=l.next()).done)&&(r.push(i.value),!t||r.length!==t);n=!0);}catch(e){a=!0,o=e}finally{try{!n&&l.return&&l.return()}finally{if(a)throw o}}return r}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")};t.sceneSnapElements=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new i.List,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new i.Map,l=e.width,s=e.height,u=void 0,c=void 0,d=void 0;return t.withMutations((function(t){if(e.layers.forEach((function(e){var i=e.lines,l=e.vertices;l.forEach((function(e){var n=e.id,i=e.x,l=e.y;if(r.get(a.SNAP_POINT)&&(0,a.addPointSnap)(t,i,l,10,10,n),r.get(a.SNAP_LINE)){var s=o.GeometryUtils.horizontalLine(l);u=s.a,c=s.b,d=s.c,(0,a.addLineSnap)(t,u,c,d,10,1,n);var p=o.GeometryUtils.verticalLine(i);u=p.a,c=p.b,d=p.c,(0,a.addLineSnap)(t,u,c,d,10,1,n)}})),r.get(a.SNAP_SEGMENT)&&i.forEach((function(e){var r=e.id,o=n(e.vertices,2),i=o[0],s=o[1],u=l.get(i),c=u.x,d=u.y,p=l.get(s),f=p.x,h=p.y;(0,a.addLineSegmentSnap)(t,c,d,f,h,20,1,r)}))})),r.get(a.SNAP_GRID))for(var i=l/20,p=s/20,f=0;f<i;f++)for(var h=20*f,y=0;y<p;y++){var m=20*y,g=!(f%5),v=!(y%5);(0,a.addGridSnap)(t,h,m,10,g&&v?15:10,null)}if(r.get(a.SNAP_GUIDE)){var E=e.getIn(["guides","horizontal"]),_=e.getIn(["guides","vertical"]),O=E.valueSeq(),b=_.valueSeq();O.forEach((function(e){b.forEach((function(r){(0,a.addPointSnap)(t,r,e,10,10)}))})),O.forEach((function(e){return(0,a.addLineSegmentSnap)(t,0,e,l,e,20,1)})),b.forEach((function(e){return(0,a.addLineSegmentSnap)(t,e,0,e,s,20,1)}))}}))};var a=r(41),o=r(9),i=r(5)},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.historyPop=t.historyPush=void 0;var n=r(5),a=i(r(314)),o=i(r(318));function i(e){return e&&e.__esModule?e:{default:e}}t.historyPush=function(e,t){if(e.last){if(e.last.hashCode()!==t.hashCode()){var r=new n.Map({time:Date.now(),diff:(0,a.default)(e.last,t)});e=e.set("last",t).set("list",e.list.push(r))}}else e=e.set("last",t);return e},t.historyPop=function(e){if(e.last&&e.list.size){for(var t=e.first,r=0;r<e.list.size-1;r++)t=(0,o.default)(t,e.list.get(r).get("diff"));e=e.set("last",t).set("list",e.list.pop())}return e}},,,,,,,function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}();var a=r(321),o=t.IDBroker=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return n(e,null,[{key:"acquireID",value:function(){return a.generate()}}]),e}();t.default=o},,,,,,,,,,function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}();var a=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return n(e,null,[{key:"generateName",value:function(e,t){return t.substr(0,1).toUpperCase()+t.substr(1)}}]),e}();t.default=a},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var r=[],n=!0,a=!1,o=void 0;try{for(var i,l=e[Symbol.iterator]();!(n=(i=l.next()).done)&&(r.push(i.value),!t||r.length!==t);n=!0);}catch(e){a=!0,o=e}finally{try{!n&&l.return&&l.return()}finally{if(a)throw o}}return r}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},a=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o=r(8),i=r(5),l=r(31),s=r(9);var u=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return a(e,null,[{key:"select",value:function(e,t){var r=e.getIn(["scene","groups",t,"elements"]);e=o.Project.setAlterate(e).updatedState,r.entrySeq().forEach((function(t){var r=n(t,2),a=r[0],i=r[1];e=o.Layer.unselectAll(e,a).updatedState;var l=i.get("lines"),s=i.get("holes"),u=i.get("items"),c=i.get("areas");l&&l.forEach((function(t){e=o.Line.select(e,a,t).updatedState})),s&&s.forEach((function(t){e=o.Hole.select(e,a,t).updatedState})),u&&u.forEach((function(t){e=o.Item.select(e,a,t).updatedState})),c&&c.forEach((function(t){e=o.Area.select(e,a,t).updatedState}))}));var a=(e=o.Project.setAlterate(e).updatedState).getIn(["scene","groups"]).map((function(e){return e.set("selected",!1)}));return{updatedState:e=e.setIn(["scene","groups"],a).setIn(["scene","groups",t,"selected"],!0)}}},{key:"unselect",value:function(e,t){var r=e.getIn(["scene","groups",t,"elements"]);return{updatedState:e=r.reduce((function(e,t,r){return o.Layer.unselectAll(e,r).updatedState}),e).setIn(["scene","groups",t,"selected"],!1)}}},{key:"create",value:function(e){var t=s.IDBroker.acquireID();return{updatedState:e=e.setIn(["scene","groups",t],new l.Group({id:t,name:t}))}}},{key:"createFromSelectedElements",value:function(e){var t=this,r=s.IDBroker.acquireID();return(e=e.setIn(["scene","groups",r],new l.Group({id:r,name:r}))).getIn(["scene","layers"]).forEach((function(n){var a=n.get("id"),o={lines:n.get("lines").filter((function(e){return e.get("selected")})),items:n.get("items").filter((function(e){return e.get("selected")})),holes:n.get("holes").filter((function(e){return e.get("selected")})),areas:n.get("areas").filter((function(e){return e.get("selected")}))},i=function(n){o[n].forEach((function(o){return e=t.addElement(e,r,a,n,o.get("id")).updatedState}))};for(var l in o)i(l)})),{updatedState:e}}},{key:"addElement",value:function(e,t,r,n,a){var o=e.getIn(["scene","groups",t,"elements",r,n])||new i.List;return o.contains(a)||(e=e.setIn(["scene","groups",t,"elements",r,n],o.push(a)),e=this.reloadBaricenter(e,t).updatedState),{updatedState:e}}},{key:"setBarycenter",value:function(e,t,r,n){return void 0!==r&&(e=e.setIn(["scene","groups",t,"x"],r)),void 0!==n&&(e=e.setIn(["scene","groups",t,"y"],n)),{updatedState:e}}},{key:"reloadBaricenter",value:function(e,t){var r=e.getIn(["scene","groups",t,"elements"]),a=e.get("viewer2D").toJS(),i=(a.a,a.b,a.c,a.d,a.e,a.f,a.SVGHeight,0),l=0,u=0;return r.entrySeq().forEach((function(t){var r=n(t,2),a=r[0],c=r[1];e=o.Layer.unselectAll(e,a).updatedState;var d=c.get("lines"),p=c.get("holes"),f=c.get("items"),h=c.get("areas");d&&d.forEach((function(t){var r=e.getIn(["scene","layers",a,"lines",t,"vertices"]).map((function(t){return e.getIn(["scene","layers",a,"vertices",t])})),n=r.get(0),o=n.x,c=n.y,d=r.get(1),p=d.x,f=d.y,h=s.GeometryUtils.midPoint(o,c,p,f),y=h.x,m=h.y;i+=y,l+=m,u++})),p&&p.forEach((function(t){var r=e.getIn(["scene","layers",a,"holes",t]),n=e.getIn(["scene","layers",a,"lines",r.line,"vertices"]).map((function(t){return e.getIn(["scene","layers",a,"vertices",t])})),o=n.get(0),c=o.x,d=o.y,p=n.get(1),f=p.x,h=p.y,y=s.GeometryUtils.extendLine(c,d,f,h,r.offset*s.GeometryUtils.pointsDistance(c,d,f,h)),m=y.x,g=y.y;i+=m,l+=g,u++})),f&&f.forEach((function(t){var r=e.getIn(["scene","layers",a,"items",t]),n=r.x,o=r.y;i+=n,l+=o,u++})),h&&h.forEach((function(t){var r=e.getIn(["scene","layers",a,"areas",t,"vertices"]).map((function(t){return e.getIn(["scene","layers",a,"vertices",t])})).toJS(),n=s.GeometryUtils.verticesMidPoint(r),o=n.x,c=n.y;i+=o,l+=c,u++}))})),u&&(e=this.setBarycenter(e,t,i/u,l/u).updatedState),{updatedState:e}}},{key:"removeElement",value:function(e,t,r,n,a){var o=e.getIn(["scene","groups",t,"elements",r,n]);return o&&o.contains(a)?{updatedState:e=e.setIn(["scene","groups",t,"elements",r,n],o.filterNot((function(e){return e===a})))}:{updatedState:e}}},{key:"setAttributes",value:function(e,t,r){return{updatedState:e=e.mergeIn(["scene","groups",t],r)}}},{key:"setProperties",value:function(e,t,r){return{updatedState:e=e.mergeIn(["scene","groups",t,"properties"],r)}}},{key:"remove",value:function(e,t){return{updatedState:e=e.removeIn(["scene","groups",t])}}},{key:"removeAndDeleteElements",value:function(e,t){return e.getIn(["scene","groups",t,"elements"]).entrySeq().forEach((function(t){var r=n(t,2),a=r[0],i=r[1];e=o.Layer.unselectAll(e,a).updatedState;var l=i.get("lines"),s=i.get("holes"),u=i.get("items");i.get("areas");l&&l.forEach((function(t){e=o.Line.remove(e,a,t).updatedState,e=o.Layer.detectAndUpdateAreas(e,a).updatedState})),s&&s.forEach((function(t){e=o.Hole.remove(e,a,t).updatedState})),u&&u.forEach((function(t){e=o.Item.remove(e,a,t).updatedState}))})),{updatedState:e=e.deleteIn(["scene","groups",t])}}},{key:"translate",value:function(t,r,a,l){var s=a-t.getIn(["scene","groups",r,"x"]),u=l-t.getIn(["scene","groups",r,"y"]);return t.getIn(["scene","groups",r,"elements"]).entrySeq().forEach((function(e){var r=n(e,2),a=r[0],l=r[1],c=l.get("lines"),d=l.get("items");if(c){var p={};for(var f in c.forEach((function(e){var r=t.getIn(["scene","layers",a,"lines",e]);p[r.vertices.get(0)]||(p[r.vertices.get(0)]=t.getIn(["scene","layers",a,"vertices",r.vertices.get(0)])),p[r.vertices.get(1)]||(p[r.vertices.get(1)]=t.getIn(["scene","layers",a,"vertices",r.vertices.get(1)]))})),p){var h=p[f],y=h.x,m=h.y;t=o.Vertex.setAttributes(t,a,f,new i.Map({x:y+s,y:m+u})).updatedState}for(var g in p)t=o.Vertex.beginDraggingVertex(t,a,g).updatedState,t=o.Vertex.endDraggingVertex(t).updatedState}d&&(t=d.map((function(e){return t.getIn(["scene","layers",a,"items",e])})).reduce((function(e,t){var r=t.x,n=t.y;return o.Item.setAttributes(e,a,t.id,new i.Map({x:r+s,y:n+u})).updatedState}),t)),t=o.Layer.detectAndUpdateAreas(t,a).updatedState})),t=this.setBarycenter(t,r,a,l).updatedState,{updatedState:t=e.select(t,r).updatedState}}},{key:"rotate",value:function(t,r,a){var l=t.getIn(["scene","groups",r]),u=l.x,c=l.y,d=a-l.rotation;return(t=e.setAttributes(t,r,new i.Map({rotation:a})).updatedState).getIn(["scene","groups",r,"elements"]).entrySeq().forEach((function(e){var r=n(e,2),a=r[0],l=r[1],p=l.get("lines"),f=(l.get("holes"),l.get("items"));l.get("areas");if(p){var h={};for(var y in p.forEach((function(e){var r=t.getIn(["scene","layers",a,"lines",e]);h[r.vertices.get(0)]||(h[r.vertices.get(0)]=t.getIn(["scene","layers",a,"vertices",r.vertices.get(0)])),h[r.vertices.get(1)]||(h[r.vertices.get(1)]=t.getIn(["scene","layers",a,"vertices",r.vertices.get(1)]))})),h){var m=h[y],g=m.x,v=m.y,E=s.GeometryUtils.rotatePointAroundPoint(g,v,u,c,d),_=E.x,O=E.y;t=o.Vertex.setAttributes(t,a,y,new i.Map({x:_,y:O})).updatedState}for(var b in h)t=o.Vertex.beginDraggingVertex(t,a,b).updatedState,t=o.Vertex.endDraggingVertex(t).updatedState}f&&(t=f.map((function(e){return t.getIn(["scene","layers",a,"items",e])})).reduce((function(e,t){var r=t.x,n=t.y,l=t.rotation,p=s.GeometryUtils.rotatePointAroundPoint(r,n,u,c,d),f=p.x,h=p.y;return o.Item.setAttributes(e,a,t.id,new i.Map({x:f,y:h,rotation:l+d})).updatedState}),t)),t=o.Layer.detectAndUpdateAreas(t,a).updatedState})),{updatedState:t=e.select(t,r).updatedState}}}]),e}();t.default=u},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),a=r(5),o=r(8),i=r(9),l=r(31);var s=function(e,t){return e.size===t.size&&e.isSuperset(t)&&e.isSubset(t)},u=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return n(e,null,[{key:"create",value:function(e,t,r){var n=i.IDBroker.acquireID();t=t||"layer "+n,r=r||0;var a=new l.Layer({id:n,name:t,altitude:r});return{updatedState:e=(e=e.setIn(["scene","selectedLayer"],n)).setIn(["scene","layers",n],a)}}},{key:"select",value:function(e,t){return e.get("alterate")||(e=o.Project.unselectAll(e).updatedState),{updatedState:e=e.setIn(["scene","selectedLayer"],t)}}},{key:"selectElement",value:function(e,t,r,n){return{updatedState:e=(e=e.setIn(["scene","layers",t,r,n,"selected"],!0)).updateIn(["scene","layers",t,"selected",r],(function(e){return e.push(n)}))}}},{key:"unselect",value:function(e,t,r,n){return{updatedState:e=(e=e.setIn(["scene","layers",t,r,n,"selected"],!1)).updateIn(["scene","layers",t,"selected",r],(function(e){return e.filter((function(e){return e.id===n}))}))}}},{key:"unselectAll",value:function(e,t){var r=e.getIn(["scene","layers",t]),n=r.lines,a=r.holes,i=r.items,l=r.areas;return n&&n.forEach((function(r){e=o.Line.unselect(e,t,r.id).updatedState})),a&&a.forEach((function(r){e=o.Hole.unselect(e,t,r.id).updatedState})),i&&i.forEach((function(r){e=o.Item.unselect(e,t,r.id).updatedState})),l&&l.forEach((function(r){e=o.Area.unselect(e,t,r.id).updatedState})),{updatedState:e}}},{key:"setProperties",value:function(e,t,r){return{updatedState:e=(e=e.mergeIn(["scene","layers",t],r)).updateIn(["scene","layers"],(function(e){return e.sort((function(e,t){return e.altitude!==t.altitude?e.altitude-t.altitude:e.order-t.order}))}))}}},{key:"remove",value:function(e,t){return{updatedState:e=(e=e.removeIn(["scene","layers",t])).setIn(["scene","selectedLayer"],e.scene.selectedLayer!==t?e.scene.selectedLayer:e.scene.layers.first().id)}}},{key:"removeElement",value:function(e,t,r,n){return{updatedState:e=e.deleteIn(["scene","layers",t,r,n])}}},{key:"detectAndUpdateAreas",value:function(e,t){console.log(e,t);var r,n=[],l={},u={};e.getIn(["scene","layers",t,"vertices"]).forEach((function(e){var t=n.push([e.x,e.y])-1;l[e.id]=t,u[t]=e.id})),r=e.getIn(["scene","layers",t,"lines"]).map((function(e){return e.vertices.map((function(e){return l[e]})).toArray()}));var c=i.GraphInnerCycles.calculateInnerCycles(n,r),d=new a.List(c).map((function(e){return new a.List(e.map((function(e){return u[e]})))}));d=d.map((function(r){return i.GraphInnerCycles.isClockWiseOrder(r.map((function(r){return e.getIn(["scene","layers",t,"vertices",r])})))?r.reverse():r}));var p=[];e.getIn(["scene","layers",t,"areas"]).forEach((function(r){d.some((function(e){return s(e,r.vertices)}))||(e=o.Area.remove(e,t,r.id).updatedState)})),d.forEach((function(r,n){var i=e.getIn(["scene","layers",t,"areas"]).find((function(e){return s(e.vertices,r)}));if(i)p[n]=i.id,e=e.setIn(["scene","layers",t,"areas",p[n],"holes"],new a.List);else{var l=r.map((function(r){return e.getIn(["scene","layers",t,"vertices",r])})),u=o.Area.add(e,t,"area",l,e.catalog);p[n]=u.area.id,e=u.updatedState}}));var f=p.map((function(r){return{id:r,vertices:e.getIn(["scene","layers",t,"areas",r]).vertices.map((function(r){var n=e.getIn(["scene","layers",t,"vertices",r]),o=n.x,i=n.y;return new a.List([o,i])}))}})),h=void 0,y=void 0;for(h=0;h<f.length;h++){var m=new a.List,g=f[h].vertices.flatten().toArray();for(y=0;y<f.length;y++){if(h!==y)i.GeometryUtils.ContainsPoint(g,f[y].vertices.get(0).get(0),f[y].vertices.get(0).get(1))&&(m=m.push(f[y].id))}e=e.setIn(["scene","layers",t,"areas",f[h].id,"holes"],m)}return p.forEach((function(r){var n=new Set,a=e.getIn(["scene","layers",t,"areas",r,"holes"]);a.forEach((function(r){e.getIn(["scene","layers",t,"areas",r,"holes"]).forEach((function(e){-1!==a.indexOf(e)&&n.add(e)}))})),n.forEach((function(e){a=a.remove(a.indexOf(e))})),e=e.setIn(["scene","layers",t,"areas",r,"holes"],a)})),{updatedState:e}}},{key:"removeZeroLengthLines",value:function(e,t){return{updatedState:e.getIn(["scene","layers",t,"lines"]).reduce((function(e,r){var n=r.getIn(["vertices",0]),a=r.getIn(["vertices",1]),l=e.getIn(["scene","layers",t,"vertices",n]),s=e.getIn(["scene","layers",t,"vertices",a]);return 0===i.GeometryUtils.verticesDistance(l,s)&&(e=o.Line.remove(e,t,r.id).updatedState),e}),e)}}},{key:"mergeEqualsVertices",value:function(e,t,r){var n=e.getIn(["scene","layers",t,"vertices",r]),a=e.getIn(["scene","layers",t,"vertices"]).filter((function(e){return e.id!==r&&i.GeometryUtils.samePoints(n,e)}));return a.isEmpty()?{updatedState:e}:(a.forEach((function(n){var a=n.lines.reduce((function(e,a){return e=e.updateIn(["scene","layers",t,"lines",a,"vertices"],(function(e){if(e)return e.map((function(e){return e===n.id?r:e}))})),e=o.Vertex.addElement(e,t,r,"lines",a).updatedState}),e),i=n.areas.reduce((function(e,a){return e=e.updateIn(["scene","layers",t,"areas",a,"vertices"],(function(e){if(e)return e.map((function(e){return e===n.id?r:e}))})),e=o.Vertex.addElement(e,t,r,"areas",a).updatedState}),a);e=o.Vertex.remove(i,t,n.id,null,null,!0).updatedState})),{updatedState:e})}},{key:"setPropertiesOnSelected",value:function(e,t,r){var n=e.getIn(["scene","layers",t,"selected"]);return n.lines.forEach((function(n){return e=o.Line.setProperties(e,t,n,r).updatedState})),n.holes.forEach((function(n){return e=o.Hole.setProperties(e,t,n,r).updatedState})),n.areas.forEach((function(n){return e=o.Area.setProperties(e,t,n,r).updatedState})),n.items.forEach((function(n){return e=o.Item.setProperties(e,t,n,r).updatedState})),{updatedState:e}}},{key:"updatePropertiesOnSelected",value:function(e,t,r){var n=e.getIn(["scene","layers",t,"selected"]);return n.lines.forEach((function(n){return e=o.Line.updateProperties(e,t,n,r).updatedState})),n.holes.forEach((function(n){return e=o.Hole.updateProperties(e,t,n,r).updatedState})),n.areas.forEach((function(n){return e=o.Area.updateProperties(e,t,n,r).updatedState})),n.items.forEach((function(n){return e=o.Item.updateProperties(e,t,n,r).updatedState})),{updatedState:e}}},{key:"setAttributesOnSelected",value:function(e,t,r){var n=e.getIn(["scene","layers",t,"selected"]);return n.lines.forEach((function(n){return e=o.Line.setAttributes(e,t,n,r).updatedState})),n.holes.forEach((function(n){return e=o.Hole.setAttributes(e,t,n,r).updatedState})),n.items.forEach((function(n){return e=o.Item.setAttributes(e,t,n,r).updatedState})),{updatedState:e}}}]),e}();t.default=u},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var r=[],n=!0,a=!1,o=void 0;try{for(var i,l=e[Symbol.iterator]();!(n=(i=l.next()).done)&&(r.push(i.value),!t||r.length!==t);n=!0);}catch(e){a=!0,o=e}finally{try{!n&&l.return&&l.return()}finally{if(a)throw o}}return r}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},a=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o=r(5),i=r(8),l=r(9),s=r(2);var u=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return a(e,null,[{key:"create",value:function(e,t,r,n,a,s,u,c){var d=l.IDBroker.acquireID(),p=i.Vertex.add(e,t,n,a,"lines",d),f=p.updatedState,h=p.vertex,y=i.Vertex.add(f,t,s,u,"lines",d),m=y.updatedState,g=y.vertex,v=(e=m).catalog.factoryElement(r,{id:d,name:l.NameGenerator.generateName("lines",e.catalog.getIn(["elements",r,"info","title"])),vertices:new o.List([h.id,g.id]),type:r},c);return console.log(e,t,r,n,a,s,u,c,v),{updatedState:e=e.setIn(["scene","layers",t,"lines",d],v),line:v}}},{key:"select",value:function(e,t,r){var n=(e=i.Layer.select(e,t).updatedState).getIn(["scene","layers",t,"lines",r]);return e=i.Layer.selectElement(e,t,"lines",r).updatedState,e=i.Layer.selectElement(e,t,"vertices",n.vertices.get(0)).updatedState,{updatedState:e=i.Layer.selectElement(e,t,"vertices",n.vertices.get(1)).updatedState}}},{key:"remove",value:function(e,t,r){var n=e.getIn(["scene","layers",t,"lines",r]);return n&&(e=this.unselect(e,t,r).updatedState,n.holes.forEach((function(r){return e=i.Hole.remove(e,t,r).updatedState})),e=i.Layer.removeElement(e,t,"lines",r).updatedState,n.vertices.forEach((function(n){return e=i.Vertex.remove(e,t,n,"lines",r).updatedState})),e.getIn(["scene","groups"]).forEach((function(n){return e=i.Group.removeElement(e,n.id,t,"lines",r).updatedState}))),{updatedState:e}}},{key:"unselect",value:function(e,t,r){var n=e.getIn(["scene","layers",t,"lines",r]);return n&&(e=i.Layer.unselect(e,t,"vertices",n.vertices.get(0)).updatedState,e=i.Layer.unselect(e,t,"vertices",n.vertices.get(1)).updatedState,e=i.Layer.unselect(e,t,"lines",r).updatedState),{updatedState:e}}},{key:"split",value:function(t,r,n,a,s){var u=t.getIn(["scene","layers",r,"lines",n]),c=t.getIn(["scene","layers",r,"vertices",u.vertices.get(0)]),d=t.getIn(["scene","layers",r,"vertices",u.vertices.get(1)]),p=c.x,f=c.y,h=d.x,y=d.y,m=e.create(t,r,u.type,p,f,a,s,u.get("properties")),g=m.updatedState,v=m.line,E=e.create(g,r,u.type,h,y,a,s,u.get("properties")),_=E.updatedState,O=E.line;t=_;var b=l.GeometryUtils.pointPositionOnLineSegment(p,f,h,y,a,s),w=l.GeometryUtils.minVertex(c,d);return u.holes.forEach((function(e){var n=t.getIn(["scene","layers",r,"holes",e]),a=n.offset;if(w.x===h&&w.y===y&&(b=1-b,a=1-n.offset),a<b){var o=a/b;w.x===h&&w.y===y&&(o=1-o),t=i.Hole.create(t,r,n.type,v.id,o,n.properties).updatedState}else{var l=(a-b)/(1-b);w.x===h&&w.y===y&&(l=1-l),t=i.Hole.create(t,r,n.type,O.id,l,n.properties).updatedState}})),t.getIn(["scene","groups"]).filter((function(e){var t=e.getIn(["elements",r,"lines"]);return t&&t.contains(n)})).forEach((function(e){t=i.Group.addElement(t,e.id,r,"lines",v.id).updatedState,t=i.Group.addElement(t,e.id,r,"lines",O.id).updatedState})),{updatedState:t=e.remove(t,r,n).updatedState,lines:new o.List([v,O])}}},{key:"addFromPoints",value:function(e,t,r,a,s,u){var c=this,d=(a=new o.List(a).sort((function(e,t){var r=e.x,n=e.y,a=t.x,o=t.y;return r===a?n-o:r-a}))).zip(a.skip(1)).filterNot((function(e){var t=n(e,2),r=t[0],a=r.x,o=r.y,i=t[1],l=i.x,s=i.y;return a===l&&o===s})),p=[];return d.forEach((function(a){var o=n(a,2),d=o[0],f=d.x,h=d.y,y=o[1],m=y.x,g=y.y,v=c.create(e,t,r,f,h,m,g,s),E=v.updatedState,_=v.line;e=E,u&&u.forEach((function(r){var n=r.offsetPosition,a=n.x,o=n.y;if(l.GeometryUtils.isPointOnLineSegment(f,h,m,g,a,o)){var s=l.GeometryUtils.pointPositionOnLineSegment(f,h,m,g,a,o);s>=0&&s<=1&&(e=i.Hole.create(e,t,r.hole.type,_.id,s,r.hole.properties).updatedState)}})),p.push(_)})),{updatedState:e,lines:new o.List(p)}}},{key:"createAvoidingIntersections",value:function(t,r,a,o,i,s,u,c,d){var p=this,f=[{x:o,y:i},{x:s,y:u}];t=t.getIn(["scene","layers",r,"lines"]).reduce((function(e,t){var a=t.vertices.map((function(t){return e.getIn(["scene","layers",r,"vertices"]).get(t)})).toArray(),o=n(a,2),i=o[0],s=o[1],u=l.GeometryUtils.samePoints(i,f[0])||l.GeometryUtils.samePoints(i,f[1])||l.GeometryUtils.samePoints(s,f[0])||l.GeometryUtils.samePoints(s,f[1]),c=l.GeometryUtils.twoLineSegmentsIntersection(f[0],f[1],i,s);if("colinear"===c.type){d||(d=[]);var h=l.GeometryUtils.orderVertices(f);e.getIn(["scene","layers",r,"lines",t.id,"holes"]).forEach((function(n){var a=e.getIn(["scene","layers",r,"holes",n]),o=l.GeometryUtils.pointsDistance(i.x,i.y,s.x,s.y),u=l.GeometryUtils.samePoints(h[1],t.vertices.get(1))?1-a.offset:a.offset,c=l.GeometryUtils.extendLine(i.x,i.y,s.x,s.y,o*u);d.push({hole:a,offsetPosition:c})})),e=p.remove(e,r,t.id).updatedState,f.push(i,s)}return"intersecting"!==c.type||u||(e=p.split(e,r,t.id,c.point.x,c.point.y).updatedState,f.push(c.point)),e}),t);var h=e.addFromPoints(t,r,a,f,c,d);return{updatedState:h.updatedState,lines:h.lines}}},{key:"replaceVertex",value:function(e,t,r,n,a,o){var l=e.getIn(["scene","layers",t,"lines",r,"vertices",n]);e=i.Vertex.remove(e,t,l,"lines",r).updatedState;var s=i.Vertex.add(e,t,a,o,"lines",r),u=s.updatedState,c=s.vertex;return{updatedState:e=(e=(e=u).setIn(["scene","layers",t,"lines",r,"vertices",n],c.id)).setIn(["scene","layers",t,"lines",r],e.getIn(["scene","layers",t,"lines",r])),line:e.getIn(["scene","layers",t,"lines",r]),vertex:c}}},{key:"selectToolDrawingLine",value:function(e,t){return{updatedState:e=e.merge({mode:s.MODE_WAITING_DRAWING_LINE,drawingSupport:new o.Map({type:t})})}}},{key:"beginDrawingLine",value:function(t,r,n,a){var u=l.SnapSceneUtils.sceneSnapElements(t.scene,new o.List,t.snapMask),c=null;if(t.snapMask&&!t.snapMask.isEmpty()){if(c=l.SnapUtils.nearestSnap(u,n,a,t.snapMask)){var d=c.point;n=d.x,a=d.y}u=u.withMutations((function(e){var t=void 0,r=void 0,o=void 0,i=l.GeometryUtils.horizontalLine(a);t=i.a,r=i.b,o=i.c,l.SnapUtils.addLineSnap(e,t,r,o,10,3,null);var s=l.GeometryUtils.verticalLine(n);t=s.a,r=s.b,o=s.c,l.SnapUtils.addLineSnap(e,t,r,o,10,3,null)}))}var p=t.get("drawingSupport").set("layerID",r);t=i.Layer.unselectAll(t,r).updatedState;var f=e.create(t,r,p.get("type"),n,a,n,a),h=f.updatedState,y=f.line;return{updatedState:t=(t=e.select(h,r,y.id).updatedState).merge({mode:s.MODE_DRAWING_LINE,snapElements:u,activeSnapElement:c?c.snap:null,drawingSupport:p})}}},{key:"updateDrawingLine",value:function(t,r,n){var a=null;if(t.snapMask&&!t.snapMask.isEmpty()&&(a=l.SnapUtils.nearestSnap(t.snapElements,r,n,t.snapMask))){var o=a.point;r=o.x,n=o.y}var i=t.getIn(["drawingSupport","layerID"]),s=t.getIn(["scene","layers",i,"selected","lines"]).first(),u=e.replaceVertex(t,i,s,1,r,n),c=u.updatedState;u.vertex;return t=c,{updatedState:t=(t=this.select(t,i,s).updatedState).merge({activeSnapElement:a?a.snap:null})}}},{key:"endDrawingLine",value:function(t,r,n){if(t.snapMask&&!t.snapMask.isEmpty()){var a=l.SnapUtils.nearestSnap(t.snapElements,r,n,t.snapMask);if(a){var u=a.point;r=u.x,n=u.y}}var c=t.getIn(["drawingSupport","layerID"]),d=t.getIn(["scene","layers",c]),p=t.getIn(["scene","layers",c,"selected","lines"]).first(),f=t.getIn(["scene","layers",c,"lines",p]),h=d.vertices.get(f.vertices.get(0));return t=e.remove(t,c,p).updatedState,t=e.createAvoidingIntersections(t,c,f.type,h.x,h.y,r,n).updatedState,{updatedState:t=(t=i.Layer.detectAndUpdateAreas(t,c).updatedState).merge({mode:s.MODE_WAITING_DRAWING_LINE,snapElements:new o.List,activeSnapElement:null})}}},{key:"beginDraggingLine",value:function(e,t,r,n,a){var i=l.SnapSceneUtils.sceneSnapElements(e.scene,new o.List,e.snapMask),u=e.scene.layers.get(t),c=u.lines.get(r),d=u.vertices.get(c.vertices.get(0)),p=u.vertices.get(c.vertices.get(1));return{updatedState:e=e.merge({mode:s.MODE_DRAGGING_LINE,snapElements:i,draggingSupport:(0,o.Map)({layerID:t,lineID:r,startPointX:n,startPointY:a,startVertex0X:d.x,startVertex0Y:d.y,startVertex1X:p.x,startVertex1Y:p.y})})}}},{key:"updateDraggingLine",value:function(e,t,r){var n=e.draggingSupport,a=e.snapElements,o=n.get("layerID"),i=n.get("lineID"),s=t-n.get("startPointX"),u=r-n.get("startPointY"),c=n.get("startVertex0X")+s,d=n.get("startVertex0Y")+u,p=n.get("startVertex1X")+s,f=n.get("startVertex1Y")+u,h=null,y=null,m=null;e.snapMask&&!e.snapMask.isEmpty()&&(y=l.SnapUtils.nearestSnap(a,c,d,e.snapMask),m=l.SnapUtils.nearestSnap(a,p,f,e.snapMask));var g=0,v=0;return y&&m?y.point.distance<m.point.distance?(g=y.point.x-c,v=y.point.y-d,h=y.snap):(g=m.point.x-p,v=m.point.y-f,h=m.snap):(y&&(g=y.point.x-c,v=y.point.y-d,h=y.snap),m&&(g=m.point.x-p,v=m.point.y-f,h=m.snap)),c+=g,d+=v,p+=g,f+=v,{updatedState:e=e.merge({activeSnapElement:h,scene:e.scene.updateIn(["layers",o],(function(e){return e.withMutations((function(e){var t=e.getIn(["lines",i,"vertices"]);return e.updateIn(["vertices",t.get(0)],(function(e){return e.merge({x:c,y:d})})),e.updateIn(["vertices",t.get(1)],(function(e){return e.merge({x:p,y:f})})),e}))}))})}}},{key:"endDraggingLine",value:function(t,r,n){var a=t.draggingSupport,u=a.get("layerID"),c=t.scene.layers.get(u),d=a.get("lineID"),p=c.lines.get(d),f=c.vertices.get(p.vertices.get(0)),h=c.vertices.get(p.vertices.get(1)),y=l.GeometryUtils.maxVertex(f,h),m=l.GeometryUtils.minVertex(f,h),g=l.GeometryUtils.verticesDistance(m,y),v=Math.atan2(y.y-m.y,y.x-m.x),E=[];c.lines.get(d).holes.forEach((function(e){var t=c.holes.get(e),r=g*t.offset,n={x:r*Math.cos(v)+m.x,y:r*Math.sin(v)+m.y};E.push({hole:t,offsetPosition:n})}));var _=r-a.get("startPointX"),O=n-a.get("startPointY"),b=a.get("startVertex0X")+_,w=a.get("startVertex0Y")+O,I=a.get("startVertex1X")+_,S=a.get("startVertex1Y")+O;if(t.snapMask&&!t.snapMask.isEmpty()){var M=l.SnapUtils.nearestSnap(t.snapElements,b,w,t.snapMask),x=l.SnapUtils.nearestSnap(t.snapElements,I,S,t.snapMask),R=0,P=0;M&&x?M.point.distance<x.point.distance?(R=M.point.x-b,P=M.point.y-w):(R=x.point.x-I,P=x.point.y-S):(M&&(R=M.point.x-b,P=M.point.y-w),x&&(R=x.point.x-I,P=x.point.y-S)),b+=R,w+=P,I+=R,S+=P}var D=t.getIn(["scene","groups"]).filter((function(e){var t=e.getIn(["elements",u,"lines"]);return t&&t.contains(d)}));if(t=i.Layer.mergeEqualsVertices(t,u,p.vertices.get(0)).updatedState,t=i.Layer.mergeEqualsVertices(t,u,p.vertices.get(1)).updatedState,t=e.remove(t,u,d).updatedState,!l.GeometryUtils.samePoints({newVertex0X:b,newVertex0Y:w},{newVertex1X:I,newVertex1Y:S})){var T=e.createAvoidingIntersections(t,u,p.type,b,w,I,S,p.properties,E);t=T.updatedState,T.lines.forEach((function(e){D.forEach((function(r){t=i.Group.addElement(t,r.id,u,"lines",e.id).updatedState}))}))}return{updatedState:t=(t=i.Layer.detectAndUpdateAreas(t,u).updatedState).merge({mode:s.MODE_IDLE,draggingSupport:null,activeSnapElement:null,snapElements:new o.List})}}},{key:"setProperties",value:function(e,t,r,n){return{updatedState:e=e.mergeIn(["scene","layers",t,"lines",r,"properties"],n)}}},{key:"setJsProperties",value:function(e,t,r,n){return this.setProperties(e,t,r,(0,o.fromJS)(n))}},{key:"updateProperties",value:function(e,t,r,n){return n.forEach((function(n,a){e.hasIn(["scene","layers",t,"lines",r,"properties",a])&&(e=e.mergeIn(["scene","layers",t,"lines",r,"properties",a],n))})),{updatedState:e}}},{key:"updateJsProperties",value:function(e,t,r,n){return this.updateProperties(e,t,r,(0,o.fromJS)(n))}},{key:"setAttributes",value:function(e,t,r,n){var a=n.toJS(),l=a.vertexOne,s=a.vertexTwo,u=a.lineLength;return delete a.vertexOne,delete a.vertexTwo,delete a.lineLength,e=e.mergeIn(["scene","layers",t,"lines",r],(0,o.fromJS)(a)).mergeIn(["scene","layers",t,"vertices",l.id],{x:l.x,y:l.y}).mergeIn(["scene","layers",t,"vertices",s.id],{x:s.x,y:s.y}).mergeIn(["scene","layers",t,"lines",r,"misc"],new o.Map({_unitLength:u._unit})),e=i.Layer.mergeEqualsVertices(e,t,l.id).updatedState,l.x!=s.x&&l.y!=s.y&&(e=i.Layer.mergeEqualsVertices(e,t,s.id).updatedState),{updatedState:e=i.Layer.detectAndUpdateAreas(e,t).updatedState}}},{key:"setVerticesCoords",value:function(e,t,r,n,a,l,s){var u=e.getIn(["scene","layers",t,"lines",r]);return e=i.Vertex.setAttributes(e,t,u.vertices.get(0),new o.Map({x:n,y:a})).updatedState,{updatedState:e=i.Vertex.setAttributes(e,t,u.vertices.get(1),new o.Map({x:l,y:s})).updatedState}}}]),e}();t.default=u},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),a=r(5),o=r(8),i=r(9),l=r(41),s=r(2);var u=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return n(e,null,[{key:"create",value:function(e,t,r,n,a,o){var l=i.IDBroker.acquireID(),s=e.catalog.factoryElement(r,{id:l,name:i.NameGenerator.generateName("holes",e.catalog.getIn(["elements",r,"info","title"])),type:r,offset:a,line:n},o);return e=(e=e.setIn(["scene","layers",t,"holes",l],s)).updateIn(["scene","layers",t,"lines",n,"holes"],(function(e){return e.push(l)})),console.log(s),{updatedState:e,hole:s}}},{key:"select",value:function(e,t,r){return e=o.Layer.select(e,t).updatedState,{updatedState:e=o.Layer.selectElement(e,t,"holes",r).updatedState}}},{key:"remove",value:function(e,t,r){var n=e.getIn(["scene","layers",t,"holes",r]);return e=this.unselect(e,t,r).updatedState,(e=(e=o.Layer.removeElement(e,t,"holes",r).updatedState).updateIn(["scene","layers",t,"lines",n.line,"holes"],(function(e){var t=e.findIndex((function(e){return r===e}));return-1!==t?e.remove(t):e}))).getIn(["scene","groups"]).forEach((function(n){return e=o.Group.removeElement(e,n.id,t,"holes",r).updatedState})),{updatedState:e}}},{key:"unselect",value:function(e,t,r){return{updatedState:e=o.Layer.unselect(e,t,"holes",r).updatedState}}},{key:"selectToolDrawingHole",value:function(e,t){var r=(new a.List).withMutations((function(t){var r=e.getIn(["scene","layers",e.scene.selectedLayer]),n=r.lines,a=r.vertices;n.forEach((function(e){var r=a.get(e.vertices.get(0)),n=r.x,o=r.y,i=a.get(e.vertices.get(1)),s=i.x,u=i.y;(0,l.addLineSegmentSnap)(t,n,o,s,u,20,1,e.id)}))}));return{updatedState:e=e.merge({mode:s.MODE_DRAWING_HOLE,snapElements:r,drawingSupport:(0,a.Map)({type:t})})}}},{key:"updateDrawingHole",value:function(t,r,n,a){var o=t.catalog,s=(0,l.nearestSnap)(t.snapElements,n,a,t.snapMask.merge({SNAP_SEGMENT:!0}));if(s){var u=s.point;n=u.x,a=u.y}var c=t.getIn(["scene","layers",r,"selected","holes"]).first();if(s){var d=s.snap.related.get(0),p=t.getIn(["scene","layers",r,"lines",d,"vertices"]),f=t.getIn(["scene","layers",r,"vertices",p.get(0)]),h=f.x,y=f.y,m=t.getIn(["scene","layers",r,"vertices",p.get(1)]),g=m.x,v=m.y,E=i.GeometryUtils.minVertex({x:h,y:y},{x:g,y:v}),_=i.GeometryUtils.maxVertex({x:h,y:y},{x:g,y:v}),O=o.factoryElement(t.drawingSupport.get("type")).properties.getIn(["width","length"]),b=i.GeometryUtils.pointsDistance(h,y,g,v),w=i.GeometryUtils.absAngleBetweenTwoPoints(h,y,g,v),I=i.GeometryUtils.cosWithThreshold(w,1e-7),S=i.GeometryUtils.sinWithThreshold(w,1e-7),M={x:E.x+O/2*I,y:E.y+O/2*S},x={x:E.x+b*I-O/2*I,y:E.y+b*S-O/2*S},R=void 0;if(n<M.x?R=i.GeometryUtils.pointPositionOnLineSegment(E.x,E.y,_.x,_.y,M.x,M.y):n>x.x?R=i.GeometryUtils.pointPositionOnLineSegment(E.x,E.y,_.x,_.y,x.x,x.y):n===M.x&&n===x.x?a<M.y?(R=i.GeometryUtils.pointPositionOnLineSegment(E.x,E.y,_.x,_.y,M.x,M.y),R=E.x===h&&E.y===y?R:1-R):a>x.y?(R=i.GeometryUtils.pointPositionOnLineSegment(E.x,E.y,_.x,_.y,x.x,x.y),R=E.x===h&&E.y===y?R:1-R):R=i.GeometryUtils.pointPositionOnLineSegment(h,y,g,v,n,a):R=i.GeometryUtils.pointPositionOnLineSegment(h,y,g,v,n,a),c&&s){var P=(t=t.mergeIn(["scene","layers",r,"holes",c],{offset:R,line:d})).getIn(["scene","layers",r,"lines"]).findEntry((function(e){return e.id!==d&&e.get("holes").contains(c)}));if(P){var D=P[1].get("holes").filter((function(e){return e!==c}));t=t.setIn(["scene","layers",r,"lines",P[0],"holes"],D)}var T=t.getIn(["scene","layers",r,"lines",d,"holes"]);T.contains(c)||(t=t.setIn(["scene","layers",r,"lines",d,"holes"],T.push(c)))}else if(!c&&s){var A=this.create(t,r,t.drawingSupport.get("type"),d,R),G=A.updatedState,L=A.hole;t=e.select(G,r,L.id).updatedState}}else 0;return{updatedState:t}}},{key:"endDrawingHole",value:function(e,t,r,n){return e=this.updateDrawingHole(e,t,r,n).updatedState,{updatedState:e=o.Layer.unselectAll(e,t).updatedState}}},{key:"beginDraggingHole",value:function(e,t,r,n,o){var i=e.getIn(["scene","layers",t]),u=i.getIn(["holes",r]),c=i.getIn(["lines",u.line]),d=i.getIn(["vertices",c.vertices.get(0)]),p=i.getIn(["vertices",c.vertices.get(1)]),f=(0,l.addLineSegmentSnap)((0,a.List)(),d.x,d.y,p.x,p.y,9999999,1,null);return{updatedState:e=e.merge({mode:s.MODE_DRAGGING_HOLE,snapElements:f,draggingSupport:(0,a.Map)({layerID:t,holeID:r,startPointX:n,startPointY:o})})}}},{key:"updateDraggingHole",value:function(e,t,r){var n=(0,l.nearestSnap)(e.snapElements,t,r,e.snapMask.merge({SNAP_SEGMENT:!0}));if(!n)return e;var a=e,o=a.draggingSupport,s=a.scene,u=o.get("layerID"),c=o.get("holeID"),d=(o.get("startPointX"),o.get("startPointY"),e.getIn(["scene","layers",u])),p=d.getIn(["holes",c]),f=d.getIn(["lines",p.line]),h=d.getIn(["vertices",f.vertices.get(0)]),y=d.getIn(["vertices",f.vertices.get(1)]),m=n.point;t=m.x,r=m.y;var g=i.GeometryUtils.minVertex(h,y),v=i.GeometryUtils.maxVertex(h,y),E=p.properties.get("width").get("length"),_=i.GeometryUtils.pointsDistance(h.x,h.y,y.x,y.y),O=Math.atan2(Math.abs(y.y-h.y),Math.abs(y.x-h.x)),b=function(e){var t=Math.cos(e);return t<1e-7?0:t}(O),w=function(e){var t=Math.sin(e);return t<1e-7?0:t}(O),I={x:g.x+E/2*b,y:g.y+E/2*w},S={x:g.x+_*b-E/2*b,y:g.y+_*w-E/2*w},M=void 0;return t<I.x?M=i.GeometryUtils.pointPositionOnLineSegment(g.x,g.y,v.x,v.y,I.x,I.y):t>S.x?M=i.GeometryUtils.pointPositionOnLineSegment(g.x,g.y,v.x,v.y,S.x,S.y):t===I.x&&t===S.x?r<I.y?(M=i.GeometryUtils.pointPositionOnLineSegment(g.x,g.y,v.x,v.y,I.x,I.y),M=g===h?M:1-M):r>S.y?(M=i.GeometryUtils.pointPositionOnLineSegment(g.x,g.y,v.x,v.y,S.x,S.y),M=g===h?M:1-M):(M=i.GeometryUtils.pointPositionOnLineSegment(g.x,g.y,v.x,v.y,t,r),M=g===h?M:1-M):M=i.GeometryUtils.pointPositionOnLineSegment(g.x,g.y,v.x,v.y,t,r),p=p.set("offset",M),{updatedState:e=e.merge({scene:s.mergeIn(["layers",u,"holes",c],p)})}}},{key:"endDraggingHole",value:function(e,t,r){return{updatedState:e=(e=this.updateDraggingHole(e,t,r).updatedState).merge({mode:s.MODE_IDLE})}}},{key:"setProperties",value:function(e,t,r,n){return{updatedState:e=e.setIn(["scene","layers",t,"holes",r,"properties"],n)}}},{key:"setJsProperties",value:function(e,t,r,n){return this.setProperties(e,t,r,(0,a.fromJS)(n))}},{key:"updateProperties",value:function(e,t,r,n){return n.forEach((function(n,a){e.hasIn(["scene","layers",t,"holes",r,"properties",a])&&(e=e.mergeIn(["scene","layers",t,"holes",r,"properties",a],n))})),{updatedState:e}}},{key:"updateJsProperties",value:function(e,t,r,n){return this.updateProperties(e,t,r,(0,a.fromJS)(n))}},{key:"setAttributes",value:function(e,t,r,n){var o=n.toJS(),i=o.offsetA,l=o.offsetB,s=o.offset;delete o.offsetA,delete o.offsetB,delete o.offset;var u=new a.Map({_unitA:i._unit,_unitB:l._unit});return{updatedState:e=e.mergeIn(["scene","layers",t,"holes",r],(0,a.fromJS)(o)).mergeDeepIn(["scene","layers",t,"holes",r],new a.Map({offset:s,misc:u}))}}}]),e}();t.default=u},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),a=r(5),o=r(31),i=r(9),l=r(2),s=r(8);var u=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return n(e,null,[{key:"add",value:function(e,t,r,n,l,s){var u,c,d,p=e.getIn(["scene","layers",t,"vertices"]).find((function(e){return i.GeometryUtils.samePoints(e,{x:r,y:n})}));return p=p?p.update(l,(function(e){return e.push(s)})):new o.Vertex((u={id:i.IDBroker.acquireID(),name:"Vertex",x:r,y:n},c=l,d=new a.List([s]),c in u?Object.defineProperty(u,c,{value:d,enumerable:!0,configurable:!0,writable:!0}):u[c]=d,u)),{updatedState:e=e.setIn(["scene","layers",t,"vertices",p.id],p),vertex:p}}},{key:"setAttributes",value:function(e,t,r,n){return{updatedState:e=e.mergeIn(["scene","layers",t,"vertices",r],n)}}},{key:"addElement",value:function(e,t,r,n,a){return{updatedState:e=e.updateIn(["scene","layers",t,"vertices",r,n],(function(e){return e.push(a)}))}}},{key:"removeElement",value:function(e,t,r,n,a){var o=e.getIn(["scene","layers",t,"vertices",r,n]).findIndex((function(e){return e===a}));return-1!==o&&(e=e.updateIn(["scene","layers",t,"vertices",r,n],(function(e){return e.remove(o)}))),{updatedState:e}}},{key:"select",value:function(e,t,r){return{updatedState:e=(e=e.setIn(["scene","layers",t,"vertices",r,"selected"],!0)).updateIn(["scene","layers",t,"selected","vertices"],(function(e){return e.push(r)}))}}},{key:"unselect",value:function(e,t,r){return{updatedState:e=(e=e.setIn(["scene","layers",t,"vertices",r,"selected"],!1)).updateIn(["scene","layers",t,"selected","vertices"],(function(e){return e.filter((function(e){return e.id!==r}))}))}}},{key:"remove",value:function(e,t,r,n,a,o){var i=e.getIn(["scene","layers",t,"vertices",r]);i&&(n&&a&&(i=i.update(n,(function(e){var t=e.findIndex((function(e){return a===e}));return e.delete(t)}))),e=(i.areas.size||i.lines.size)&&!o?e.setIn(["scene","layers",t,"vertices",r],i):e.deleteIn(["scene","layers",t,"vertices",r]));return{updatedState:e}}},{key:"beginDraggingVertex",value:function(e,t,r,n,o){var s=i.SnapSceneUtils.sceneSnapElements(e.scene,new a.List,e.snapMask);return{updatedState:e=e.merge({mode:l.MODE_DRAGGING_VERTEX,snapElements:s,draggingSupport:(0,a.Map)({layerID:t,vertexID:r,previousMode:e.get("mode")})})}}},{key:"updateDraggingVertex",value:function(e,t,r){var n=e,a=n.draggingSupport,o=n.snapElements,l=n.scene,s=null;if(e.snapMask&&!e.snapMask.isEmpty()&&(s=i.SnapUtils.nearestSnap(o,t,r,e.snapMask))){var u=s.point;t=u.x,r=u.y}var c=a.get("layerID"),d=a.get("vertexID");return{updatedState:e=e.merge({activeSnapElement:s?s.snap:null,scene:l.mergeIn(["layers",c,"vertices",d],{x:t,y:r})})}}},{key:"endDraggingVertex",value:function(e,t,r){var n=e.draggingSupport,o=n.get("layerID"),l=n.get("vertexID"),u=e.getIn(["scene","layers",o,"vertices",l,"lines"]);return u&&(e=u.reduce((function(e,t){if(!e.getIn(["scene","layers",o,"lines",t]))return e;var r=e.getIn(["scene","layers",o,"lines",t,"vertices",0]),n=e.getIn(["scene","layers",o,"lines",t,"vertices",1]),a=r===l?n:r,u=e.getIn(["scene","layers",o,"vertices",a]),c=e.getIn(["scene","layers",o,"vertices",l]),d=[],p=i.GeometryUtils.orderVertices([u,c]),f=(e.getIn(["scene","layers",o,"lines",t,"holes"]).forEach((function(r){var n=e.getIn(["scene","layers",o,"holes",r]),a=i.GeometryUtils.pointsDistance(u.x,u.y,c.x,c.y),l=i.GeometryUtils.samePoints(p[1],e.getIn(["scene","layers",o,"lines",t,"vertices",1]))?1-n.offset:n.offset,s=i.GeometryUtils.extendLine(u.x,u.y,c.x,c.y,a*l);d.push({hole:n,offsetPosition:s})})),e.getIn(["scene","layers",o,"lines",t,"type"])),h=e.getIn(["scene","layers",o,"lines",t,"properties"]),y=e.getIn(["scene","groups"]).filter((function(e){var r=e.getIn(["elements",o,"lines"]);return r&&r.contains(t)}));if(e=s.Layer.removeZeroLengthLines(e,o).updatedState,e=s.Layer.mergeEqualsVertices(e,o,l).updatedState,e=s.Line.remove(e,o,t).updatedState,!i.GeometryUtils.samePoints(u,c)){var m=s.Line.createAvoidingIntersections(e,o,f,u.x,u.y,c.x,c.y,h,d);e=m.updatedState,m.lines.forEach((function(t){y.forEach((function(r){e=s.Group.addElement(e,r.id,o,"lines",t.id).updatedState}))}))}return e}),e)),{updatedState:e=(e=s.Layer.detectAndUpdateAreas(e,o).updatedState).merge({mode:n.get("previousMode"),draggingSupport:null,activeSnapElement:null,snapElements:new a.List})}}}]),e}();t.default=u},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),a=r(5),o=r(8),i=r(9);var l=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return n(e,null,[{key:"add",value:function(e,t,r,n,a){var l=void 0,s=e.getIn(["scene","layers",t]);return s=s.withMutations((function(s){var u=i.IDBroker.acquireID(),c=n.map((function(r){return o.Vertex.add(e,t,r.x,r.y,"areas",u).vertex.id}));l=a.factoryElement(r,{id:u,name:i.NameGenerator.generateName("areas",a.getIn(["elements",r,"info","title"])),type:r,prototype:"areas",vertices:c}),s.setIn(["areas",u],l)})),{updatedState:e=e.setIn(["scene","layers",t],s),area:l}}},{key:"select",value:function(e,t,r){return e=o.Layer.select(e,t).updatedState,{updatedState:e=o.Layer.selectElement(e,t,"areas",r).updatedState}}},{key:"remove",value:function(e,t,r){var n=e.getIn(["scene","layers",t,"areas",r]);return!0===n.get("selected")&&(e=this.unselect(e,t,r).updatedState),n.vertices.forEach((function(n){e=o.Vertex.remove(e,t,n,"areas",r).updatedState})),(e=e.deleteIn(["scene","layers",t,"areas",r])).getIn(["scene","groups"]).forEach((function(n){return e=o.Group.removeElement(e,n.id,t,"areas",r).updatedState})),{updatedState:e}}},{key:"unselect",value:function(e,t,r){return{updatedState:e=o.Layer.unselect(e,t,"areas",r).updatedState}}},{key:"setProperties",value:function(e,t,r,n){return{updatedState:e=e.mergeIn(["scene","layers",t,"areas",r,"properties"],n)}}},{key:"setJsProperties",value:function(e,t,r,n){return this.setProperties(e,t,r,(0,a.fromJS)(n))}},{key:"updateProperties",value:function(e,t,r,n){return n.forEach((function(n,a){e.hasIn(["scene","layers",t,"areas",r,"properties",a])&&(e=e.mergeIn(["scene","layers",t,"areas",r,"properties",a],n))})),{updatedState:e}}},{key:"updateJsProperties",value:function(e,t,r,n){return this.updateProperties(e,t,r,(0,a.fromJS)(n))}},{key:"setAttributes",value:function(e){return{updatedState:e}}}]),e}();t.default=l},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),a=r(8),o=r(9),i=r(5),l=r(2);var s=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return n(e,null,[{key:"create",value:function(e,t,r,n,a,i,l,s){var u=o.IDBroker.acquireID(),c=e.catalog.factoryElement(r,{id:u,name:o.NameGenerator.generateName("items",e.catalog.getIn(["elements",r,"info","title"])),type:r,height:l,width:i,x:n,y:a,rotation:s});return{updatedState:e=e.setIn(["scene","layers",t,"items",u],c),item:c}}},{key:"select",value:function(e,t,r){return e=a.Layer.select(e,t).updatedState,{updatedState:e=a.Layer.selectElement(e,t,"items",r).updatedState}}},{key:"remove",value:function(e,t,r){return e=this.unselect(e,t,r).updatedState,(e=a.Layer.removeElement(e,t,"items",r).updatedState).getIn(["scene","groups"]).forEach((function(n){return e=a.Group.removeElement(e,n.id,t,"items",r).updatedState})),{updatedState:e}}},{key:"unselect",value:function(e,t,r){return{updatedState:e=a.Layer.unselect(e,t,"items",r).updatedState}}},{key:"selectToolDrawingItem",value:function(e,t){return{updatedState:e=e.merge({mode:l.MODE_DRAWING_ITEM,drawingSupport:new i.Map({type:t})})}}},{key:"updateDrawingItem",value:function(t,r,n,a){if(t.hasIn(["drawingSupport","currentID"]))t=t.updateIn(["scene","layers",r,"items",t.getIn(["drawingSupport","currentID"])],(function(e){return e.merge({x:n,y:a})}));else{var o=this.create(t,r,t.getIn(["drawingSupport","type"]),n,a,200,100,0),i=o.updatedState,l=o.item;t=(t=e.select(i,r,l.id).updatedState).setIn(["drawingSupport","currentID"],l.id)}return{updatedState:t}}},{key:"endDrawingItem",value:function(e,t,r,n){var o=e.catalog;return e=this.updateDrawingItem(e,t,r,n,o).updatedState,{updatedState:e=(e=a.Layer.unselectAll(e,t).updatedState).merge({drawingSupport:(0,i.Map)({type:e.drawingSupport.get("type")})})}}},{key:"beginDraggingItem",value:function(e,t,r,n,a){var o=e.getIn(["scene","layers",t,"items",r]);return{updatedState:e=e.merge({mode:l.MODE_DRAGGING_ITEM,draggingSupport:(0,i.Map)({layerID:t,itemID:r,startPointX:n,startPointY:a,originalX:o.x,originalY:o.y})})}}},{key:"updateDraggingItem",value:function(e,t,r){var n=e,a=n.draggingSupport,o=n.scene,i=a.get("layerID"),l=a.get("itemID"),s=a.get("startPointX"),u=a.get("startPointY"),c=a.get("originalX"),d=a.get("originalY"),p=s-t,f=u-r,h=o.getIn(["layers",i,"items",l]);return h=h.merge({x:c-p,y:d-f}),{updatedState:e=e.merge({scene:o.mergeIn(["layers",i,"items",l],h)})}}},{key:"endDraggingItem",value:function(e,t,r){return{updatedState:e=(e=this.updateDraggingItem(e,t,r).updatedState).merge({mode:l.MODE_IDLE})}}},{key:"beginRotatingItem",value:function(e,t,r,n,a){return{updatedState:e=e.merge({mode:l.MODE_ROTATING_ITEM,rotatingSupport:(0,i.Map)({layerID:t,itemID:r})})}}},{key:"updateRotatingItem",value:function(e,t,r){var n=e,a=n.rotatingSupport,o=n.scene,i=a.get("layerID"),l=a.get("itemID"),s=e.getIn(["scene","layers",i,"items",l]),u=t-s.x,c=r-s.y,d=180*Math.atan2(c,u)/Math.PI-90;return-5<d&&d<5&&(d=0),-95<d&&d<-85&&(d=-90),-185<d&&d<-175&&(d=-180),85<d&&d<90&&(d=90),-270<d&&d<-265&&(d=90),s=s.merge({rotation:d}),{updatedState:e=e.merge({scene:o.mergeIn(["layers",i,"items",l],s)})}}},{key:"endRotatingItem",value:function(e,t,r){return{updatedState:e=(e=this.updateRotatingItem(e,t,r).updatedState).merge({mode:l.MODE_IDLE})}}},{key:"setProperties",value:function(e,t,r,n){return{updatedState:e=e.mergeIn(["scene","layers",t,"items",r,"properties"],n)}}},{key:"setJsProperties",value:function(e,t,r,n){return this.setProperties(e,t,r,(0,i.fromJS)(n))}},{key:"updateProperties",value:function(e,t,r,n){return n.forEach((function(n,a){e.hasIn(["scene","layers",t,"items",r,"properties",a])&&(e=e.mergeIn(["scene","layers",t,"items",r,"properties",a],n))})),{updatedState:e}}},{key:"updateJsProperties",value:function(e,t,r,n){return this.updateProperties(e,t,r,(0,i.fromJS)(n))}},{key:"setAttributes",value:function(e,t,r,n){return{updatedState:e=e.mergeIn(["scene","layers",t,"items",r],n)}}},{key:"setJsAttributes",value:function(e,t,r,n){return n=(0,i.fromJS)(n),this.setAttributes(e,t,r,n)}}]),e}();t.default=s},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CircularGuide=t.VerticalGuide=t.HorizontalGuide=void 0;var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),a=r(9);function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var i=function(){function e(){o(this,e)}return n(e,null,[{key:"create",value:function(e,t){var r=a.IDBroker.acquireID();return{updatedState:e=e.setIn(["scene","guides","horizontal",r],t)}}},{key:"remove",value:function(e,t){return{updatedState:e=e.deleteIn(["scene","guides","horizontal",t])}}}]),e}(),l=function(){function e(){o(this,e)}return n(e,null,[{key:"create",value:function(e,t){var r=a.IDBroker.acquireID();return{updatedState:e=e.setIn(["scene","guides","vertical",r],t)}}},{key:"remove",value:function(e,t){return{updatedState:e=e.deleteIn(["scene","guides","vertical",t])}}}]),e}(),s=function e(){o(this,e)};t.HorizontalGuide=i,t.VerticalGuide=l,t.CircularGuide=s,t.default={HorizontalGuide:i,VerticalGuide:l,CircularGuide:s}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){switch(t.type){case o.SELECT_TOOL_DRAWING_HOLE:return e=e.merge({sceneHistory:a.history.historyPush(e.sceneHistory,e.scene)}),n.Hole.selectToolDrawingHole(e,t.sceneComponentType).updatedState;case o.UPDATE_DRAWING_HOLE:return n.Hole.updateDrawingHole(e,t.layerID,t.x,t.y).updatedState;case o.END_DRAWING_HOLE:return e=e.merge({sceneHistory:a.history.historyPush(e.sceneHistory,e.scene)}),n.Hole.endDrawingHole(e,t.layerID,t.x,t.y).updatedState;case o.BEGIN_DRAGGING_HOLE:return e=e.merge({sceneHistory:a.history.historyPush(e.sceneHistory,e.scene)}),n.Hole.beginDraggingHole(e,t.layerID,t.holeID,t.x,t.y).updatedState;case o.UPDATE_DRAGGING_HOLE:return n.Hole.updateDraggingHole(e,t.x,t.y).updatedState;case o.END_DRAGGING_HOLE:return e=e.merge({sceneHistory:a.history.historyPush(e.sceneHistory,e.scene)}),n.Hole.endDraggingHole(e,t.x,t.y).updatedState;case o.SELECT_HOLE:return n.Hole.select(e,t.layerID,t.holeID).updatedState;default:return e}};var n=r(8),a=r(9),o=r(2)},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){switch(t.type){case o.SELECT_ITEM:return n.Item.select(e,t.layerID,t.itemID).updatedState;case o.SELECT_TOOL_DRAWING_ITEM:return e=e.merge({sceneHistory:a.history.historyPush(e.sceneHistory,e.scene)}),n.Item.selectToolDrawingItem(e,t.sceneComponentType).updatedState;case o.UPDATE_DRAWING_ITEM:return n.Item.updateDrawingItem(e,t.layerID,t.x,t.y).updatedState;case o.END_DRAWING_ITEM:return e=e.merge({sceneHistory:a.history.historyPush(e.sceneHistory,e.scene)}),n.Item.endDrawingItem(e,t.layerID,t.x,t.y).updatedState;case o.BEGIN_DRAGGING_ITEM:return e=e.merge({sceneHistory:a.history.historyPush(e.sceneHistory,e.scene)}),n.Item.beginDraggingItem(e,t.layerID,t.itemID,t.x,t.y).updatedState;case o.UPDATE_DRAGGING_ITEM:return n.Item.updateDraggingItem(e,t.x,t.y).updatedState;case o.END_DRAGGING_ITEM:return e=e.merge({sceneHistory:a.history.historyPush(e.sceneHistory,e.scene)}),n.Item.endDraggingItem(e,t.x,t.y).updatedState;case o.BEGIN_ROTATING_ITEM:return e=e.merge({sceneHistory:a.history.historyPush(e.sceneHistory,e.scene)}),n.Item.beginRotatingItem(e,t.layerID,t.itemID,t.x,t.y).updatedState;case o.UPDATE_ROTATING_ITEM:return n.Item.updateRotatingItem(e,t.x,t.y).updatedState;case o.END_ROTATING_ITEM:return e=e.merge({sceneHistory:a.history.historyPush(e.sceneHistory,e.scene)}),n.Item.endRotatingItem(e,t.x,t.y).updatedState;default:return e}};var n=r(8),a=r(9),o=r(2)},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){switch(t.type){case o.SELECT_TOOL_DRAWING_LINE:return n.Line.selectToolDrawingLine(e,t.sceneComponentType).updatedState;case o.BEGIN_DRAWING_LINE:return e=e.merge({sceneHistory:a.history.historyPush(e.sceneHistory,e.scene)}),n.Line.beginDrawingLine(e,t.layerID,t.x,t.y).updatedState;case o.UPDATE_DRAWING_LINE:return n.Line.updateDrawingLine(e,t.x,t.y).updatedState;case o.END_DRAWING_LINE:return e=e.merge({sceneHistory:a.history.historyPush(e.sceneHistory,e.scene)}),n.Line.endDrawingLine(e,t.x,t.y).updatedState;case o.BEGIN_DRAGGING_LINE:return e=e.merge({sceneHistory:a.history.historyPush(e.sceneHistory,e.scene)}),n.Line.beginDraggingLine(e,t.layerID,t.lineID,t.x,t.y).updatedState;case o.UPDATE_DRAGGING_LINE:return n.Line.updateDraggingLine(e,t.x,t.y).updatedState;case o.END_DRAGGING_LINE:return e=e.merge({sceneHistory:a.history.historyPush(e.sceneHistory,e.scene)}),n.Line.endDraggingLine(e,t.x,t.y).updatedState;case o.SELECT_LINE:return n.Line.select(e,t.layerID,t.lineID).updatedState;default:return e}};var n=r(8),a=r(9),o=r(2)},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){switch(e=e.merge({sceneHistory:o.history.historyPush(e.sceneHistory,e.scene)}),t.type){case n.GROUP_ACTIONS.ADD_GROUP:return a.Group.create(e).updatedState;case n.GROUP_ACTIONS.ADD_GROUP_FROM_SELECTED:return a.Group.createFromSelectedElements(e).updatedState;case n.GROUP_ACTIONS.SELECT_GROUP:return a.Group.select(e,t.groupID).updatedState;case n.GROUP_ACTIONS.UNSELECT_GROUP:return a.Group.unselect(e,t.groupID).updatedState;case n.GROUP_ACTIONS.ADD_TO_GROUP:return a.Group.addElement(e,t.groupID,t.layerID,t.elementPrototype,t.elementID).updatedState;case n.GROUP_ACTIONS.REMOVE_FROM_GROUP:return a.Group.removeElement(e,t.groupID,t.layerID,t.elementPrototype,t.elementID).updatedState;case n.GROUP_ACTIONS.SET_GROUP_ATTRIBUTES:return a.Group.setAttributes(e,t.groupID,t.attributes).updatedState;case n.GROUP_ACTIONS.SET_GROUP_PROPERTIES:return a.Group.setProperties(e,t.groupID,t.properties).updatedState;case n.GROUP_ACTIONS.SET_GROUP_BARYCENTER:return a.Group.setBarycenter(e,t.groupID,t.barycenter.get("x"),t.barycenter.get("y")).updatedState;case n.GROUP_ACTIONS.REMOVE_GROUP:return a.Group.remove(e,t.groupID).updatedState;case n.GROUP_ACTIONS.REMOVE_GROUP_AND_DELETE_ELEMENTS:return a.Group.removeAndDeleteElements(e,t.groupID).updatedState;case n.GROUP_ACTIONS.GROUP_TRANSLATE:return a.Group.translate(e,t.groupID,t.x,t.y).updatedState;case n.GROUP_ACTIONS.GROUP_ROTATE:return a.Group.rotate(e,t.groupID,t.rotation).updatedState;default:return e}};var n=r(2),a=r(8),o=r(9)},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){switch(t.type){case a.NEW_PROJECT:return o.Project.newProject(e).updatedState;case a.LOAD_PROJECT:return o.Project.loadProject(e,t.sceneJSON).updatedState;case a.OPEN_CATALOG:return o.Project.openCatalog(e).updatedState;case a.CHANGE_CATALOG_PAGE:return o.Project.changeCatalogPage(e,t.oldPage,t.newPage).updatedState;case a.GO_BACK_TO_CATALOG_PAGE:return o.Project.goBackToCatalogPage(e,t.newPage).updatedState;case a.SELECT_TOOL_EDIT:return o.Project.setMode(e,a.MODE_IDLE).updatedState;case a.UNSELECT_ALL:return o.Project.unselectAll(e).updatedState;case a.SET_PROPERTIES:return e=e.merge({sceneHistory:n.history.historyPush(e.sceneHistory,e.scene)}),o.Project.setProperties(e,e.getIn(["scene","selectedLayer"]),t.properties).updatedState;case a.SET_ITEMS_ATTRIBUTES:return e=e.merge({sceneHistory:n.history.historyPush(e.sceneHistory,e.scene)}),o.Project.setItemsAttributes(e,t.itemsAttributes).updatedState;case a.SET_LINES_ATTRIBUTES:return e=e.merge({sceneHistory:n.history.historyPush(e.sceneHistory,e.scene)}),o.Project.setLinesAttributes(e,t.linesAttributes).updatedState;case a.SET_HOLES_ATTRIBUTES:return e=e.merge({sceneHistory:n.history.historyPush(e.sceneHistory,e.scene)}),o.Project.setHolesAttributes(e,t.holesAttributes).updatedState;case a.REMOVE:return e=e.merge({sceneHistory:n.history.historyPush(e.sceneHistory,e.scene)}),o.Project.remove(e).updatedState;case a.UNDO:return o.Project.undo(e).updatedState;case a.ROLLBACK:return o.Project.rollback(e).updatedState;case a.SET_PROJECT_PROPERTIES:return e=e.merge({sceneHistory:n.history.historyPush(e.sceneHistory,e.scene)}),o.Project.setProjectProperties(e,t.properties).updatedState;case a.OPEN_PROJECT_CONFIGURATOR:return e=e.merge({sceneHistory:n.history.historyPush(e.sceneHistory,e.scene)}),o.Project.openProjectConfigurator(e).updatedState;case a.INIT_CATALOG:return o.Project.initCatalog(e,t.catalog).updatedState;case a.UPDATE_MOUSE_COORDS:return o.Project.updateMouseCoord(e,t.coords).updatedState;case a.UPDATE_ZOOM_SCALE:return o.Project.updateZoomScale(e,t.scale).updatedState;case a.TOGGLE_SNAP:return o.Project.toggleSnap(e,t.mask).updatedState;case a.THROW_ERROR:return o.Project.throwError(e,t.error).updatedState;case a.THROW_WARNING:return o.Project.throwWarning(e,t.warning).updatedState;case a.COPY_PROPERTIES:return o.Project.copyProperties(e,t.properties).updatedState;case a.PASTE_PROPERTIES:return e=e.merge({sceneHistory:n.history.historyPush(e.sceneHistory,e.scene)}),o.Project.pasteProperties(e).updatedState;case a.PUSH_LAST_SELECTED_CATALOG_ELEMENT_TO_HISTORY:return o.Project.pushLastSelectedCatalogElementToHistory(e,t.element).updatedState;case a.ALTERATE_STATE:return o.Project.setAlterate(e).updatedState;case a.SET_MODE:return o.Project.setMode(e,t.mode).updatedState;case a.ADD_HORIZONTAL_GUIDE:return e=e.merge({sceneHistory:n.history.historyPush(e.sceneHistory,e.scene)}),o.Project.addHorizontalGuide(e,t.coordinate).updatedState;case a.ADD_VERTICAL_GUIDE:return o.Project.addVerticalGuide(e,t.coordinate).updatedState;case a.ADD_CIRCULAR_GUIDE:return o.Project.addCircularGuide(e,t.x,t.y,t.radius).updatedState;case a.REMOVE_HORIZONTAL_GUIDE:return o.Project.removeHorizontalGuide(e,t.guideID).updatedState;case a.REMOVE_VERTICAL_GUIDE:return o.Project.removeVerticalGuide(e,t.guideID).updatedState;case a.REMOVE_CIRCULAR_GUIDE:return o.Project.removeCircularGuide(e,t.guideID).updatedState;default:return e}};var n=r(9),a=r(2),o=r(8)},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){switch(e=e.merge({sceneHistory:a.history.historyPush(e.sceneHistory,e.scene)}),t.type){case o.ADD_LAYER:return n.Layer.create(e,t.name,t.altitude).updatedState;case o.SELECT_LAYER:return n.Layer.select(e,t.layerID).updatedState;case o.SET_LAYER_PROPERTIES:return n.Layer.setProperties(e,t.layerID,t.properties).updatedState;case o.REMOVE_LAYER:return n.Layer.remove(e,t.layerID).updatedState;default:return e}};var n=r(8),a=r(9),o=r(2)},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){switch(t.type){case n.BEGIN_DRAGGING_VERTEX:return a.Vertex.beginDraggingVertex(e,t.layerID,t.vertexID,t.x,t.y).updatedState;case n.UPDATE_DRAGGING_VERTEX:return a.Vertex.updateDraggingVertex(e,t.x,t.y).updatedState;case n.END_DRAGGING_VERTEX:return a.Vertex.endDraggingVertex(e,t.x,t.y).updatedState;default:return e}};var n=r(2),a=r(8)},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){switch(t.type){case n.UPDATE_2D_CAMERA:return e.merge({viewer2D:t.value});case n.SELECT_TOOL_PAN:return e.set("mode",n.MODE_2D_PAN);case n.SELECT_TOOL_ZOOM_IN:return e.set("mode",n.MODE_2D_ZOOM_IN);case n.SELECT_TOOL_ZOOM_OUT:return e.set("mode",n.MODE_2D_ZOOM_OUT)}};var n=r(2)},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){switch(e=e.merge({sceneHistory:o.history.historyPush(e.sceneHistory,e.scene)}),t.type){case n.SELECT_TOOL_3D_VIEW:return e=a.Project.rollback(e).updatedState,e=a.Project.setMode(e,n.MODE_3D_VIEW).updatedState;case n.SELECT_TOOL_3D_FIRST_PERSON:return e=a.Project.rollback(e).updatedState,e=a.Project.setMode(e,n.MODE_3D_FIRST_PERSON).updatedState;default:return e}};var n=r(2),a=r(8),o=r(9)},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},a=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o=r(0),i=m(o),l=m(r(1)),s=r(45),u=r(89),c=m(r(59)),d=m(r(94)),p=m(r(87)),f=r(141),h=r(142),y=r(157);function m(e){return e&&e.__esModule?e:{default:e}}r(394);var g=h.ToolbarComponents.Toolbar,v=h.SidebarComponents.Sidebar,E=h.FooterBarComponents.FooterBar,_={display:"flex",flexFlow:"row nowrap"},O=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),a(t,[{key:"getChildContext",value:function(){var e=this;return n({},(0,f.objectsMap)(p.default,(function(t){return e.props[t]})),{translator:this.props.translator,catalog:this.props.catalog})}},{key:"componentWillMount",value:function(){var e=this.context.store,t=this.props,r=t.projectActions,n=t.catalog,a=t.stateExtractor;t.plugins.forEach((function(t){return t(e,a)})),r.initCatalog(n)}},{key:"componentWillReceiveProps",value:function(e){var t=e.stateExtractor,r=e.state,n=e.projectActions,a=e.catalog;t(r).getIn(["catalog","ready"])||n.initCatalog(a)}},{key:"render",value:function(){var e=this.props,t=e.width,r=e.height,a=e.state,o=e.stateExtractor,l=function(e,t){var r={};for(var n in e)t.indexOf(n)>=0||Object.prototype.hasOwnProperty.call(e,n)&&(r[n]=e[n]);return r}(e,["width","height","state","stateExtractor"]),s=t-50-300,u=r-20,c=r-20,d=r-20,p=o(a);return i.default.createElement("div",{style:n({},_,{height:r})},i.default.createElement(g,n({width:50,height:u,state:p},l)),i.default.createElement(h.Content,n({width:s,height:c,state:p},l,{onWheel:function(e){return e.preventDefault()}})),i.default.createElement(v,n({width:300,height:d,state:p},l)),i.default.createElement(E,n({width:t,height:20,state:p},l)))}}]),t}(o.Component);O.propTypes={translator:l.default.instanceOf(c.default),catalog:l.default.instanceOf(d.default),allowProjectFileSupport:l.default.bool,plugins:l.default.arrayOf(l.default.func),autosaveKey:l.default.string,autosaveDelay:l.default.number,width:l.default.number.isRequired,height:l.default.number.isRequired,stateExtractor:l.default.func.isRequired,toolbarButtons:l.default.array,sidebarComponents:l.default.array,footerbarComponents:l.default.array,customContents:l.default.object,softwareSignature:l.default.string},O.contextTypes={store:l.default.object.isRequired},O.childContextTypes=n({},(0,f.objectsMap)(p.default,(function(){return l.default.object})),{translator:l.default.object,catalog:l.default.object}),O.defaultProps={translator:new c.default,catalog:new d.default,plugins:[],allowProjectFileSupport:!0,softwareSignature:"React-Planner "+y.VERSION,toolbarButtons:[],sidebarComponents:[],footerbarComponents:[],customContents:{}},t.default=(0,u.connect)((function(e){return{state:e}}),(function(e){return(0,f.objectsMap)(p.default,(function(t){return(0,s.bindActionCreators)(p.default[t],e)}))}))(O)},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.updateCameraView=function(e){return{type:n.UPDATE_2D_CAMERA,value:e}},t.selectToolPan=function(){return{type:n.SELECT_TOOL_PAN}},t.selectToolZoomOut=function(){return{type:n.SELECT_TOOL_ZOOM_OUT}},t.selectToolZoomIn=function(){return{type:n.SELECT_TOOL_ZOOM_IN}};var n=r(2)},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.selectLine=function(e,t){return{type:n.SELECT_LINE,layerID:e,lineID:t}},t.selectToolDrawingLine=function(e){return{type:n.SELECT_TOOL_DRAWING_LINE,sceneComponentType:e}},t.beginDrawingLine=function(e,t,r,a){return{type:n.BEGIN_DRAWING_LINE,layerID:e,x:t,y:r,snapMask:a}},t.updateDrawingLine=function(e,t,r){return{type:n.UPDATE_DRAWING_LINE,x:e,y:t,snapMask:r}},t.endDrawingLine=function(e,t,r){return{type:n.END_DRAWING_LINE,x:e,y:t,snapMask:r}},t.beginDraggingLine=function(e,t,r,a,o){return{type:n.BEGIN_DRAGGING_LINE,layerID:e,lineID:t,x:r,y:a,snapMask:o}},t.updateDraggingLine=function(e,t,r){return{type:n.UPDATE_DRAGGING_LINE,x:e,y:t,snapMask:r}},t.endDraggingLine=function(e,t,r){return{type:n.END_DRAGGING_LINE,x:e,y:t,snapMask:r}};var n=r(2)},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.selectHole=function(e,t){return{type:n.SELECT_HOLE,layerID:e,holeID:t}},t.selectToolDrawingHole=function(e){return{type:n.SELECT_TOOL_DRAWING_HOLE,sceneComponentType:e}},t.updateDrawingHole=function(e,t,r){return{type:n.UPDATE_DRAWING_HOLE,layerID:e,x:t,y:r}},t.endDrawingHole=function(e,t,r){return{type:n.END_DRAWING_HOLE,layerID:e,x:t,y:r}},t.beginDraggingHole=function(e,t,r,a){return{type:n.BEGIN_DRAGGING_HOLE,layerID:e,holeID:t,x:r,y:a}},t.updateDraggingHole=function(e,t){return{type:n.UPDATE_DRAGGING_HOLE,x:e,y:t}},t.endDraggingHole=function(e,t){return{type:n.END_DRAGGING_HOLE,x:e,y:t}};var n=r(2)},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.selectLayer=function(e){return{type:n.SELECT_LAYER,layerID:e}},t.addLayer=function(e,t){return{type:n.ADD_LAYER,name:e,altitude:t}},t.setLayerProperties=function(e,t){return{type:n.SET_LAYER_PROPERTIES,layerID:e,properties:t}},t.removeLayer=function(e){return{type:n.REMOVE_LAYER,layerID:e}};var n=r(2)},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.beginDraggingVertex=function(e,t,r,a,o){return{type:n.BEGIN_DRAGGING_VERTEX,layerID:e,vertexID:t,x:r,y:a,snapMask:o}},t.updateDraggingVertex=function(e,t,r){return{type:n.UPDATE_DRAGGING_VERTEX,x:e,y:t,snapMask:r}},t.endDraggingVertex=function(e,t,r){return{type:n.END_DRAGGING_VERTEX,x:e,y:t,snapMask:r}};var n=r(2)},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.selectItem=function(e,t){return{type:n.SELECT_ITEM,layerID:e,itemID:t}},t.selectToolDrawingItem=function(e){return{type:n.SELECT_TOOL_DRAWING_ITEM,sceneComponentType:e}},t.updateDrawingItem=function(e,t,r){return{type:n.UPDATE_DRAWING_ITEM,layerID:e,x:t,y:r}},t.endDrawingItem=function(e,t,r){return{type:n.END_DRAWING_ITEM,layerID:e,x:t,y:r}},t.beginDraggingItem=function(e,t,r,a){return{type:n.BEGIN_DRAGGING_ITEM,layerID:e,itemID:t,x:r,y:a}},t.updateDraggingItem=function(e,t){return{type:n.UPDATE_DRAGGING_ITEM,x:e,y:t}},t.endDraggingItem=function(e,t){return{type:n.END_DRAGGING_ITEM,x:e,y:t}},t.beginRotatingItem=function(e,t,r,a){return{type:n.BEGIN_ROTATING_ITEM,layerID:e,itemID:t,x:r,y:a}},t.updateRotatingItem=function(e,t){return{type:n.UPDATE_ROTATING_ITEM,x:e,y:t}},t.endRotatingItem=function(e,t){return{type:n.END_ROTATING_ITEM,x:e,y:t}};var n=r(2)},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.selectArea=function(e,t){return{type:n.SELECT_AREA,layerID:e,areaID:t}};var n=r(2)},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.addGroup=function(){return{type:n.GROUP_ACTIONS.ADD_GROUP}},t.addGroupFromSelected=function(){return{type:n.GROUP_ACTIONS.ADD_GROUP_FROM_SELECTED}},t.selectGroup=function(e){return{type:n.GROUP_ACTIONS.SELECT_GROUP,groupID:e}},t.unselectGroup=function(e){return{type:n.GROUP_ACTIONS.UNSELECT_GROUP,groupID:e}},t.addToGroup=function(e,t,r,a){return{type:n.GROUP_ACTIONS.ADD_TO_GROUP,groupID:e,layerID:t,elementPrototype:r,elementID:a}},t.removeFromGroup=function(e,t,r,a){return{type:n.GROUP_ACTIONS.REMOVE_FROM_GROUP,groupID:e,layerID:t,elementPrototype:r,elementID:a}},t.setGroupAttributes=function(e,t){return{type:n.GROUP_ACTIONS.SET_GROUP_ATTRIBUTES,groupID:e,attributes:t}},t.setGroupProperties=function(e,t){return{type:n.GROUP_ACTIONS.SET_GROUP_PROPERTIES,groupID:e,properties:t}},t.setGroupBarycenter=function(e,t){return{type:n.GROUP_ACTIONS.SET_GROUP_BARYCENTER,groupID:e,barycenter:t}},t.removeGroup=function(e){return{type:n.GROUP_ACTIONS.REMOVE_GROUP,groupID:e}},t.removeGroupAndDeleteElements=function(e){return{type:n.GROUP_ACTIONS.REMOVE_GROUP_AND_DELETE_ELEMENTS,groupID:e}},t.groupTranslate=function(e,t,r){return{type:n.GROUP_ACTIONS.GROUP_TRANSLATE,groupID:e,x:t,y:r}},t.groupRotate=function(e,t){return{type:n.GROUP_ACTIONS.GROUP_ROTATE,groupID:e,rotation:t}};var n=r(2)},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Toolbar=t.ToolbarLoadButton=t.ToolbarSaveButton=t.ToolbarButton=void 0;var n=l(r(61)),a=l(r(143)),o=l(r(145)),i=l(r(358));function l(e){return e&&e.__esModule?e:{default:e}}t.ToolbarButton=n.default,t.ToolbarSaveButton=a.default,t.ToolbarLoadButton=o.default,t.Toolbar=i.default,t.default={ToolbarButton:n.default,ToolbarSaveButton:a.default,ToolbarLoadButton:o.default,Toolbar:i.default}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},o=r(0),i=d(o),l=d(r(1)),s=(r(19),r(18),d(r(61)),d(r(143))),u=(d(r(145)),d(r(43))),c=(r(2),function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}(r(3)));function d(e){return e&&e.__esModule?e:{default:e}}var p={backgroundColor:c.PRIMARY_COLOR.main,padding:"10px"},f=function(e,t){return void 0!==e.index&&null!==e.index||(e.index=Number.MAX_SAFE_INTEGER),void 0!==t.index&&null!==t.index||(t.index=Number.MAX_SAFE_INTEGER),e.index-t.index},h=function(e,t){return i.default.createElement(u.default,{key:t,condition:e.condition,style:{position:"relative"}},e.dom)},y=function(e){function t(e,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,r));return n.state={},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),n(t,[{key:"shouldComponentUpdate",value:function(e,t){return this.props.state.mode!==e.state.mode||this.props.height!==e.height||this.props.width!==e.width||this.props.state.alterate!==e.state.alterate}},{key:"render",value:function(){var e=this.props,t=e.state,r=e.width,n=e.height,o=e.toolbarButtons,l=e.allowProjectFileSupport,u=this.context,d=(u.projectActions,u.translator,t.get("mode")),y=(t.get("alterate")&&c.MATERIAL_COLORS[500].orange,[{index:1,condition:l,dom:i.default.createElement(s.default,{state:t})}]);return y=y.concat(o.map((function(e,r){return e.prototype?{condition:!0,dom:i.default.createElement(e,{mode:d,state:t,key:r})}:{index:e.index,condition:e.condition,dom:i.default.createElement(e.dom,{mode:d,state:t,key:r})}}))),i.default.createElement("aside",{style:a({},p,{maxWidth:r,maxHeight:n}),className:"toolbar"},y.sort(f).map(h))}}]),t}(o.Component);t.default=y,y.propTypes={state:l.default.object.isRequired,width:l.default.number.isRequired,height:l.default.number.isRequired,allowProjectFileSupport:l.default.bool.isRequired,toolbarButtons:l.default.array},y.contextTypes={projectActions:l.default.object.isRequired,viewer2DActions:l.default.object.isRequired,linesActions:l.default.object.isRequired,holesActions:l.default.object.isRequired,itemsActions:l.default.object.isRequired,translator:l.default.object.isRequired}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=c;var n=u(r(0)),a=u(r(1)),o=u(r(146)),i=u(r(375)),l=u(r(380)),s=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}(r(2));function u(e){return e&&e.__esModule?e:{default:e}}function c(e){var t=e.width,r=e.height,a=e.state,u=e.customContents,c=a.get("mode");switch(c){case s.MODE_VIEWING_CATALOG:return n.default.createElement(i.default,{state:a,width:t,height:r});case s.MODE_IDLE:case s.MODE_2D_ZOOM_IN:case s.MODE_2D_ZOOM_OUT:case s.MODE_2D_PAN:case s.MODE_WAITING_DRAWING_LINE:case s.MODE_DRAGGING_LINE:case s.MODE_DRAGGING_VERTEX:case s.MODE_DRAGGING_ITEM:case s.MODE_DRAWING_LINE:case s.MODE_DRAWING_HOLE:case s.MODE_DRAWING_ITEM:case s.MODE_DRAGGING_HOLE:case s.MODE_ROTATING_ITEM:return n.default.createElement(o.default,{state:a,width:t,height:r});case s.MODE_CONFIGURING_PROJECT:return n.default.createElement(l.default,{width:t,height:r,state:a});default:if(u.hasOwnProperty(c)){var d=u[c];return n.default.createElement(d,{width:t,height:r,state:a})}throw new Error("Mode "+c+" doesn't have a mapped content")}}c.propTypes={state:a.default.object.isRequired,width:a.default.number.isRequired,height:a.default.number.isRequired}},,function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=l;var n=o(r(0)),a=o(r(1));function o(e){return e&&e.__esModule?e:{default:e}}var i={fill:"#0096fd",stroke:function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}(r(3)).COLORS.white,cursor:"move"};function l(e){var t=e.vertex,r=e.layer,a=t.x,o=t.y;return n.default.createElement("g",{transform:"translate("+a+", "+o+")","data-element-root":!0,"data-prototype":t.prototype,"data-id":t.id,"data-selected":t.selected,"data-layer":r.id},n.default.createElement("circle",{cx:"0",cy:"0",r:"7",style:i}))}l.propTypes={vertex:a.default.object.isRequired,layer:a.default.object.isRequired}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=s;var n=l(r(0)),a=l(r(1)),o=r(9),i=l(r(150));function l(e){return e&&e.__esModule?e:{default:e}}function s(e){var t=e.line,r=e.layer,a=e.scene,l=e.catalog,s=r.vertices.get(t.vertices.get(0)),u=r.vertices.get(t.vertices.get(1));if(s.id===u.id||o.GeometryUtils.samePoints(s,u))return null;var c=s.x,d=s.y,p=u.x,f=u.y;c>p&&(c=u.x,d=u.y,p=s.x,f=s.y);var h=o.GeometryUtils.pointsDistance(c,d,p,f),y=o.GeometryUtils.angleBetweenTwoPointsAndOrigin(c,d,p,f),m=t.holes.map((function(e){var t=r.holes.get(e),o=h*t.offset,i=l.getElement(t.type).render2D(t,r,a);return n.default.createElement("g",{key:e,transform:"translate("+o+", 0)","data-element-root":!0,"data-prototype":t.prototype,"data-id":t.id,"data-selected":t.selected,"data-layer":r.id},i)})),g=t.getIn(["properties","thickness","length"])/2,v=l.getElement(t.type).render2D(t,r),E=t.selected?n.default.createElement(i.default,{unit:a.unit,length:h,transform:"translate(0, "+(g+10)+" )"}):null;return n.default.createElement("g",{transform:"translate("+c+", "+d+") rotate("+y+", 0, 0)","data-element-root":!0,"data-prototype":t.prototype,"data-id":t.id,"data-selected":t.selected,"data-layer":r.id,style:t.selected?{cursor:"move"}:{}},E,v,m)}s.propTypes={line:a.default.object.isRequired,layer:a.default.object.isRequired,scene:a.default.object.isRequired,catalog:a.default.object.isRequired}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=l;var n=i(r(0)),a=i(r(1)),o=r(62);function i(e){return e&&e.__esModule?e:{default:e}}function l(e){var t=e.layer,r=e.scene,a=e.catalog,i=r.unit,l=r.groups,s=t.lines,u=t.areas,c=t.vertices,d=(t.holes,t.id),p=t.items,f=t.opacity;return n.default.createElement("g",{opacity:f},u.valueSeq().map((function(e){return n.default.createElement(o.Area,{key:e.id,layer:t,area:e,unit:i,catalog:a})})),s.valueSeq().map((function(e){return n.default.createElement(o.Line,{key:e.id,layer:t,line:e,scene:r,catalog:a})})),p.valueSeq().map((function(e){return n.default.createElement(o.Item,{key:e.id,layer:t,item:e,scene:r,catalog:a})})),c.valueSeq().filter((function(e){return e.selected})).map((function(e){return n.default.createElement(o.Vertex,{key:e.id,layer:t,vertex:e})})),l.valueSeq().filter((function(e){return e.hasIn(["elements",d])&&e.get("selected")})).map((function(e){return n.default.createElement(o.Group,{key:e.get("id"),layer:t,group:e,scene:r,catalog:a})})))}l.propTypes={layer:a.default.object.isRequired,scene:a.default.object.isRequired,catalog:a.default.object.isRequired}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=u;var n=i(r(0)),a=i(r(1)),o=i(r(43));function i(e){return e&&e.__esModule?e:{default:e}}var l={fill:"#0096fd",stroke:"#0096fd",cursor:"ew-resize"},s={fill:"none",stroke:"#0096fd",cursor:"ew-resize"};function u(e){var t=e.layer,r=e.item,a=e.scene,i=e.catalog,u=r.x,c=r.y,d=r.rotation,p=i.getElement(r.type).render2D(r,t,a);return n.default.createElement("g",{"data-element-root":!0,"data-prototype":r.prototype,"data-id":r.id,"data-selected":r.selected,"data-layer":t.id,style:r.selected?{cursor:"move"}:{},transform:"translate("+u+","+c+") rotate("+d+")"},p,n.default.createElement(o.default,{condition:r.selected},n.default.createElement("g",{"data-element-root":!0,"data-prototype":r.prototype,"data-id":r.id,"data-selected":r.selected,"data-layer":t.id,"data-part":"rotation-anchor"},n.default.createElement("circle",{cx:"0",cy:"150",r:"10",style:l}),n.default.createElement("circle",{cx:"0",cy:"0",r:"150",style:s}))))}u.propTypes={item:a.default.object.isRequired,layer:a.default.object.isRequired,scene:a.default.object.isRequired,catalog:a.default.object.isRequired}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=u;var n=l(r(0)),a=l(r(1)),o=l(r(366)),i=l(r(368));function l(e){return e&&e.__esModule?e:{default:e}}var s={textAnchor:"middle",fontSize:"12px",fontFamily:'"Courier New", Courier, monospace',pointerEvents:"none",fontWeight:"bold",WebkitTouchCallout:"none",WebkitUserSelect:"none",MozUserSelect:"none",MsUserSelect:"none",userSelect:"none"};function u(e){var t=e.layer,r=e.area,a=e.catalog.getElement(r.type).render2D(r,t),l=null;if(r.selected){var u=r.vertices.toArray().map((function(e){var r=t.vertices.get(e);return[r.x,r.y]})),c=u;r.holes.forEach((function(e){var r=t.areas.get(e).vertices.toArray().map((function(e){var r=t.vertices.get(e);return[r.x,r.y]}));c=c.concat(r.reverse())}));var d=(0,o.default)([c],1),p=(0,i.default)(u,!1);r.holes.forEach((function(e){var r=t.areas.get(e).vertices.toArray().map((function(e){var r=t.vertices.get(e);return[r.x,r.y]}));p-=(0,i.default)(r,!1)})),l=n.default.createElement("text",{x:"0",y:"0",transform:"translate("+d[0]+" "+d[1]+") scale(1, -1)",style:s},(p/1e4).toFixed(2)," m",String.fromCharCode(178))}return n.default.createElement("g",{"data-element-root":!0,"data-prototype":r.prototype,"data-id":r.id,"data-selected":r.selected,"data-layer":t.id},a,l)}u.propTypes={area:a.default.object.isRequired,layer:a.default.object.isRequired,catalog:a.default.object.isRequired}},,,,function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var r=[],n=!0,a=!1,o=void 0;try{for(var i,l=e[Symbol.iterator]();!(n=(i=l.next()).done)&&(r.push(i.value),!t||r.length!==t);n=!0);}catch(e){a=!0,o=e}finally{try{!n&&l.return&&l.return()}finally{if(a)throw o}}return r}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")};t.default=u;var a=s(r(0)),o=s(r(1)),i=s(r(370)),l=s(r(371));function s(e){return e&&e.__esModule?e:{default:e}}function u(e){var t=e.scene,r=t.width,o=t.height,s=t.grids.entrySeq().map((function(e){var t=n(e,2),s=t[0],u=t[1];switch(u.type){case"horizontal-streak":return a.default.createElement(i.default,{key:s,width:r,height:o,grid:u});case"vertical-streak":return a.default.createElement(l.default,{key:s,width:r,height:o,grid:u});default:console.warn("grid "+u.type+" not allowed")}})).toList();return a.default.createElement("g",null,s)}u.propTypes={scene:o.default.object.isRequired}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=l;var n=i(r(0)),a=i(r(1)),o=r(5);function i(e){return e&&e.__esModule?e:{default:e}}function l(e){var t=e.width,r=e.height,a=e.grid,i=a.properties.get("step"),l=void 0;l=a.properties.has("color")?new o.List([a.properties.get("color")]):a.properties.get("colors");for(var s=[],u=0,c=0;c<=r;c+=i){var d=l.get(u%l.size);u++,s.push(n.default.createElement("line",{key:c,x1:"0",y1:c,x2:t,y2:c,strokeWidth:"1",stroke:d}))}return n.default.createElement("g",null,s)}l.propTypes={width:a.default.number.isRequired,height:a.default.number.isRequired,grid:a.default.object.isRequired}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=l;var n=i(r(0)),a=i(r(1)),o=r(5);function i(e){return e&&e.__esModule?e:{default:e}}function l(e){var t=e.width,r=e.height,a=e.grid,i=a.properties.get("step"),l=void 0;l=a.properties.has("color")?new o.List([a.properties.get("color")]):a.properties.get("colors");for(var s=[],u=0,c=0;c<=t;c+=i){var d=l.get(u%l.size);u++,s.push(n.default.createElement("line",{key:c,x1:c,y1:"0",x2:c,y2:r,strokeWidth:"1",stroke:d}))}return n.default.createElement("g",null,s)}l.propTypes={width:a.default.number.isRequired,height:a.default.number.isRequired,grid:a.default.object.isRequired}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=p;var n=l(r(0)),a=l(r(1)),o=l(r(43)),i=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}(r(3));function l(e){return e&&e.__esModule?e:{default:e}}var s=0,u=0,c=5,d={fill:i.MATERIAL_COLORS[500].orange,stroke:i.MATERIAL_COLORS[500].orange,cursor:"default"};function p(e,t){var r=e.layer,a=e.group,i=(e.scene,e.catalog,t.translator);return n.default.createElement("g",{"data-element-root":!0,"data-prototype":a.prototype,"data-id":a.id,"data-selected":a.selected,"data-layer":r.id,style:a.selected?{cursor:"move"}:{},transform:"translate("+a.x+","+a.y+") rotate("+a.rotation+")"},n.default.createElement(o.default,{condition:a.selected},n.default.createElement("g",{"data-element-root":!0,"data-prototype":a.prototype,"data-id":a.id,"data-selected":a.selected,"data-layer":r.id,"data-part":"rotation-anchor"},n.default.createElement("circle",{cx:s,cy:u,r:c,style:d},n.default.createElement("title",null,i.t("Group's Barycenter"))))))}p.propTypes={group:a.default.object.isRequired,layer:a.default.object.isRequired,scene:a.default.object.isRequired,catalog:a.default.object.isRequired},p.contextTypes={translator:a.default.object.isRequired}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},a=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o=r(0),i=u(o),l=u(r(1)),s=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}(r(3));function u(e){return e&&e.__esModule?e:{default:e}}var c=function(e){function t(e,r){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,r))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),a(t,[{key:"render",value:function(){var e=this.props.unitPixelSize*this.props.zoom,t={display:"inline-block",width:e,position:"relative",borderLeft:"1px solid "+this.props.fontColor,paddingLeft:"0.2em",fontSize:"10px",height:"100%"},r={width:"20%",display:"inline-block",margin:0,padding:0},a={backgroundColor:this.props.backgroundColor,position:"relative",width:this.props.width,height:"100%",color:this.props.fontColor},o={position:"absolute",left:this.props.zeroLeftPosition+this.props.mouseX*this.props.zoom-6.5,top:8,width:0,height:0,borderLeft:"5px solid transparent",borderRight:"5px solid transparent",borderTop:"8px solid "+this.props.markerColor,zIndex:9001},l={position:"absolute",height:"10px",top:"4px",display:"grid",gridRowGap:"0",gridColumnGap:"0",gridTemplateRows:"100%",grdAutoColumns:e+"px"},s=n({},l,{width:this.props.positiveUnitsNumber*e,left:this.props.zeroLeftPosition}),u=n({},l,{width:this.props.negativeUnitsNumber*e,left:this.props.zeroLeftPosition-this.props.negativeUnitsNumber*e}),c=[];if(e<=200)for(var d=0;d<this.props.positiveUnitsNumber;d++)c.push(i.default.createElement("div",{key:d,style:n({},t,{gridColumn:d+1,gridRow:1})},e>30?100*d:""));else if(e>200)for(var p=0;p<this.props.positiveUnitsNumber;p++){var f=100*p;c.push(i.default.createElement("div",{key:p,style:n({},t,{gridColumn:p+1,gridRow:1})},i.default.createElement("div",{style:r},f),i.default.createElement("div",{style:r},f+20),i.default.createElement("div",{style:r},f+40),i.default.createElement("div",{style:r},f+60),i.default.createElement("div",{style:r},f+80)))}return i.default.createElement("div",{style:a},i.default.createElement("div",{id:"horizontalMarker",style:o}),i.default.createElement("div",{id:"negativeRuler",style:u}),i.default.createElement("div",{id:"positiveRuler",style:s},c))}}]),t}(o.Component);t.default=c,c.propTypes={unitPixelSize:l.default.number.isRequired,positiveUnitsNumber:l.default.number,negativeUnitsNumber:l.default.number,zoom:l.default.number.isRequired,mouseX:l.default.number.isRequired,width:l.default.number.isRequired,zeroLeftPosition:l.default.number.isRequired,backgroundColor:l.default.string,fontColor:l.default.string,markerColor:l.default.string},c.defaultProps={positiveUnitsNumber:50,negativeUnitsNumber:50,backgroundColor:s.PRIMARY_COLOR.main,fontColor:s.COLORS.white,markerColor:s.SECONDARY_COLOR.main},c.contextTypes={translator:l.default.object.isRequired}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},a=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o=r(0),i=u(o),l=u(r(1)),s=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}(r(3));function u(e){return e&&e.__esModule?e:{default:e}}var c=function(e){function t(e,r){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,r))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),a(t,[{key:"render",value:function(){var e=this.props.unitPixelSize*this.props.zoom,t={width:"8px",borderBottom:"1px solid "+this.props.fontColor,paddingBottom:"0.2em",fontSize:"10px",height:e,textOrientation:"upright",writingMode:"vertical-lr",letterSpacing:"-2px",textAlign:"right"},r={height:"20%",width:"100%",textOrientation:"upright",writingMode:"vertical-lr",display:"inline-block",letterSpacing:"-2px",textAlign:"right"},a={backgroundColor:this.props.backgroundColor,height:this.props.height,width:"100%",color:this.props.fontColor},o={position:"absolute",top:this.props.zeroTopPosition-this.props.mouseY*this.props.zoom-6.5,left:8,width:0,height:0,borderTop:"5px solid transparent",borderBottom:"5px solid transparent",borderLeft:"8px solid "+this.props.markerColor,zIndex:9001},l={position:"absolute",width:"100%",display:"grid",gridRowGap:"0",gridColumnGap:"0",gridTemplateColumns:"100%",grdAutoRows:e+"px",paddingLeft:"5px"},s=n({},l,{top:this.props.zeroTopPosition-this.props.positiveUnitsNumber*e,height:this.props.positiveUnitsNumber*e}),u=n({},l,{top:this.props.zeroTopPosition+this.props.negativeUnitsNumber*e,height:this.props.negativeUnitsNumber*e}),c=[];if(e<=200)for(var d=1;d<=this.props.positiveUnitsNumber;d++)c.push(i.default.createElement("div",{key:d,style:n({},t,{gridColumn:1,gridRow:d})},e>30?100*(this.props.positiveUnitsNumber-d):""));else if(e>200)for(var p=1;p<=this.props.positiveUnitsNumber;p++){var f=100*(this.props.positiveUnitsNumber-p);c.push(i.default.createElement("div",{key:p,style:n({},t,{gridColumn:1,gridRow:p})},i.default.createElement("div",{style:r},f+80),i.default.createElement("div",{style:r},f+60),i.default.createElement("div",{style:r},f+40),i.default.createElement("div",{style:r},f+20),i.default.createElement("div",{style:r},f)))}return i.default.createElement("div",{style:a},i.default.createElement("div",{id:"verticalMarker",style:o}),i.default.createElement("div",{id:"negativeRuler",style:u}),i.default.createElement("div",{id:"positiveRuler",style:s},c))}}]),t}(o.Component);t.default=c,c.propTypes={unitPixelSize:l.default.number.isRequired,zoom:l.default.number.isRequired,mouseY:l.default.number.isRequired,height:l.default.number.isRequired,zeroTopPosition:l.default.number.isRequired,backgroundColor:l.default.string,fontColor:l.default.string,markerColor:l.default.string},c.defaultProps={positiveUnitsNumber:50,negativeUnitsNumber:50,backgroundColor:s.PRIMARY_COLOR.main,fontColor:s.COLORS.white,markerColor:s.SECONDARY_COLOR.main},c.contextTypes={translator:l.default.object.isRequired}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},o=r(0),i=y(o),l=y(r(1)),s=y(r(376)),u=y(r(377)),c=y(r(378)),d=y(r(379)),p=y(r(96)),f=y(r(97)),h=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}(r(3));function y(e){return e&&e.__esModule?e:{default:e}}var m={position:"fixed",width:"calc( 100% - 51px)",height:"calc( 100% - 20px)",backgroundColor:"#FFF",padding:"1em",left:50,overflowY:"auto",overflowX:"hidden",zIndex:10},g={display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(14em, 1fr))",gridGap:"10px",marginTop:"1em"},v={width:"100%",height:"3em",padding:"0.625em",background:"#f7f7f9",border:"1px solid #e1e1e8",cursor:"pointer",position:"relative",boxShadow:"0 1px 6px 0 rgba(0, 0, 0, 0.11), 0 1px 4px 0 rgba(0, 0, 0, 0.11)",borderRadius:"2px",transition:"all .2s ease-in-out",WebkitTransition:"all .2s ease-in-out",marginBottom:"1em"},E={width:"8em",display:"inline-block"},_={width:"calc( 100% - 10em )",height:"2em",margin:"0",padding:"0 1em",border:"1px solid #EEE"},O=a({},v,{padding:"0.2em 0.625em"}),b={width:"auto",height:"2em",lineHeight:"2em",textAlign:"center",borderRadius:"1em",display:"inline-block",cursor:"pointer",backgroundColor:h.PRIMARY_COLOR.alt,color:h.PRIMARY_COLOR.text_main,textTransform:"capitalize",margin:"0.25em",padding:"0 1em"},w=function(e){function t(e,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e)),a=e.state.catalog.page,o=r.catalog.getCategory(a),i=(o.categories,o.elements.filter((function(e){return!e.info.visibility||e.info.visibility.catalog})));return n.state={categories:o.categories,elements:i,matchString:"",matchedElements:[]},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),n(t,[{key:"flattenCategories",value:function(e){for(var t=[],r=0;r<e.length;r++){var n=e[r];t=t.concat(n.elements),n.categories.length&&(t=t.concat(this.flattenCategories(n.categories)))}return t}},{key:"matcharray",value:function(e){var t=this.state.elements.concat(this.flattenCategories(this.state.categories)),r=[];if(""!=e)for(var n=new RegExp(e,"i"),a=0;a<t.length;a++)n.test(t[a].info.title)&&r.push(t[a]);this.setState({matchString:e,matchedElements:r})}},{key:"select",value:function(e){switch(e.prototype){case"lines":this.context.linesActions.selectToolDrawingLine(e.name);break;case"items":this.context.itemsActions.selectToolDrawingItem(e.name);break;case"holes":this.context.holesActions.selectToolDrawingHole(e.name)}this.context.projectActions.pushLastSelectedCatalogElementToHistory(e)}},{key:"render",value:function(){var e=this,t=this.props.state.catalog.page,r=this.context.catalog.getCategory(t),n=r.categories,o=r.elements.filter((function(e){return!e.info.visibility||e.info.visibility.catalog})),l=null;if("root"!==t){var h=[];this.props.state.catalog.path.forEach((function(t){h.push({name:e.context.catalog.getCategory(t).label,action:function(){return projectActions.goBackToCatalogPage(t)}})})),h.push({name:r.label,action:""}),l=i.default.createElement(u.default,{names:h})}var y=this.props.state.catalog.path.size,w=y>0?i.default.createElement(d.default,{key:y,page:this.context.catalog.categories[this.props.state.catalog.path.get(y-1)]}):null,I=this.props.state.get("selectedElementsHistory"),S=I.map((function(t,r){return i.default.createElement("div",{key:r,style:b,title:t.name,onClick:function(){return e.select(t)}},t.name)}));return i.default.createElement(p.default,{width:this.props.width,height:this.props.height,style:a({},m,this.props.style)},i.default.createElement(f.default,null,this.context.translator.t("Catalog")),l,i.default.createElement("div",{style:v},i.default.createElement("span",{style:E},this.context.translator.t("Search Element")),i.default.createElement("input",{type:"text",style:_,onChange:function(t){e.matcharray(t.target.value)}})),I.size?i.default.createElement("div",{style:O},i.default.createElement("span",null,this.context.translator.t("Last Selected")),S):null,i.default.createElement("div",{style:g},""===this.state.matchString?[w,n.map((function(e){return i.default.createElement(c.default,{key:e.name,page:e,oldPage:r})})),o.map((function(e){return i.default.createElement(s.default,{key:e.name,element:e})}))]:this.state.matchedElements.map((function(e){return i.default.createElement(s.default,{key:e.name,element:e})}))))}}]),t}(o.Component);t.default=w,w.propTypes={state:l.default.object.isRequired,width:l.default.number.isRequired,height:l.default.number.isRequired,style:l.default.object},w.contextTypes={catalog:l.default.object.isRequired,translator:l.default.object.isRequired,itemsActions:l.default.object.isRequired,linesActions:l.default.object.isRequired,holesActions:l.default.object.isRequired,projectActions:l.default.object.isRequired}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n,a=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},i=r(0),l=d(i),s=d(r(1)),u=r(18),c=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}(r(3));function d(e){return e&&e.__esModule?e:{default:e}}function p(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var f={width:"14em",height:"14em",padding:"0.625em",background:"#f7f7f9",border:"1px solid #e1e1e8",cursor:"pointer",position:"relative",boxShadow:"0 1px 6px 0 rgba(0, 0, 0, 0.11), 0 1px 4px 0 rgba(0, 0, 0, 0.11)",borderRadius:"2px",transition:"all .15s ease-in-out",WebkitTransition:"all .15s ease-in-out",alignSelf:"center",justifySelf:"center"},h=o({},f,{background:c.SECONDARY_COLOR.main}),y={width:"100%",textAlign:"center",display:"block",marginBottom:".5em",textTransform:"capitalize"},m=o({},y,{color:c.COLORS.white}),g={width:"100%",height:"8em",position:"relative",overflow:"hidden",border:"solid 1px #e6e6e6",padding:0,margin:0,marginBottom:"5px"},v={position:"absolute",background:"#222",width:"100%",height:"100%",backgroundSize:"contain",backgroundPosition:"50% 50%",backgroundColor:c.COLORS.white,backgroundRepeat:"no-repeat",transition:"all .2s ease-in-out"},E=o({},v,{transform:"scale(1.2)"}),_={marginTop:"1.5em",color:c.SECONDARY_COLOR.main,fontSize:"2em",opacity:"0.7",width:"100%"},O=(p(n={display:"block"},"display","-webkit-box"),p(n,"height","2em"),p(n,"margin","0 auto"),p(n,"fontSize","0.75em"),p(n,"fontStyle","italic"),p(n,"lineHeight","1em"),p(n,"WebkitLineClamp","2"),p(n,"WebkitBoxOrient","vertical"),p(n,"overflow","hidden"),p(n,"textOverflow","ellipsis"),n),b={listStyle:"none",margin:"0px",padding:"0px",fontSize:"11px",marginBottom:"3px"},w={display:"inline-block",background:"#337ab7",color:c.COLORS.white,padding:"1px 4px",marginRight:"3px",borderRadius:"3px"},I=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return r.state={hover:!1},r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),a(t,[{key:"select",value:function(){var e=this.props.element;switch(e.prototype){case"lines":this.context.linesActions.selectToolDrawingLine(e.name);break;case"items":this.context.itemsActions.selectToolDrawingItem(e.name);break;case"holes":this.context.holesActions.selectToolDrawingHole(e.name)}this.context.projectActions.pushLastSelectedCatalogElementToHistory(e)}},{key:"render",value:function(){var e=this,t=this.props.element,r=this.state.hover;return l.default.createElement("div",{style:r?h:f,onClick:function(t){return e.select()},onMouseEnter:function(t){return e.setState({hover:!0})},onMouseLeave:function(t){return e.setState({hover:!1})}},l.default.createElement("b",{style:r?m:y},t.info.title),l.default.createElement("div",{style:g},l.default.createElement("div",{style:o({},r?E:v,{backgroundImage:"url("+t.info.image+")"})},r?l.default.createElement(u.FaPlusCircle,{style:_}):null)),l.default.createElement("ul",{style:b},t.info.tag.map((function(e,t){return l.default.createElement("li",{style:w,key:t},e)}))),l.default.createElement("div",{style:O},t.info.description))}}]),t}(i.Component);t.default=I,I.propTypes={element:s.default.object.isRequired},I.contextTypes={itemsActions:s.default.object.isRequired,linesActions:s.default.object.isRequired,holesActions:s.default.object.isRequired,projectActions:s.default.object.isRequired}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},a=s(r(0)),o=s(r(1)),i=r(19),l=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}(r(3));function s(e){return e&&e.__esModule?e:{default:e}}var u={margin:"1.5em",display:"flex"},c={fontSize:"20px",cursor:"pointer"},d=n({},c,{fontWeight:"bolder",color:l.SECONDARY_COLOR.main}),p={fill:l.COLORS.black,fontSize:"24px",marginLeft:"10px",marginRight:"10px"},f=function(e){var t=e.names,r=t.map((function(e,r){var n=r===t.length-1;return a.default.createElement("div",{key:r,style:{display:"flex"}},a.default.createElement("div",{style:n?d:c,onClick:e.action||null},e.name),n?null:a.default.createElement(i.MdArrowBack,{style:p}))}));return a.default.createElement("div",{style:u},r)};f.propTypes={names:o.default.arrayOf(o.default.object).isRequired},t.default=f},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},o=r(0),i=c(o),l=c(r(1)),s=r(19),u=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}(r(3));function c(e){return e&&e.__esModule?e:{default:e}}var d={width:"14em",height:"14em",padding:"0.625em",background:"#f7f7f9",border:"1px solid #e1e1e8",cursor:"pointer",position:"relative",boxShadow:"0 1px 6px 0 rgba(0, 0, 0, 0.11), 0 1px 4px 0 rgba(0, 0, 0, 0.11)",borderRadius:"2px",transition:"all .2s ease-in-out",WebkitTransition:"all .2s ease-in-out",alignSelf:"center",justifySelf:"center"},p=a({},d,{background:u.SECONDARY_COLOR.main}),f={width:"100%",position:"absolute",textAlign:"center",display:"block",marginBottom:".5em",padding:"1em",textTransform:"capitalize",WebkitTransition:"all .15s ease-in-out"},h=a({},f,{fontSize:"1.4em",transform:"translateY(-60px)",color:"rgb(28, 166, 252)",marginTop:"0.5em"}),y={position:"absolute",color:u.SECONDARY_COLOR.main,fontSize:"5em",width:"100%"},m={background:u.COLORS.white,marginBottom:"5px",border:"solid 1px #EEE",width:"100%",height:"100%",display:"flex",alignItems:"center",justifyContent:"center"},g=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return r.state={hover:!1},r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),n(t,[{key:"changePage",value:function(e){this.context.projectActions.changeCatalogPage(e,this.props.oldPage.name)}},{key:"render",value:function(){var e=this,t=this.props.page,r=this.state.hover;return i.default.createElement("div",{style:r?p:d,onClick:function(r){return e.changePage(t.name)},onMouseEnter:function(t){return e.setState({hover:!0})},onMouseLeave:function(t){return e.setState({hover:!1})}},r?i.default.createElement("div",{style:m},i.default.createElement("b",{style:h},t.label),i.default.createElement(s.MdNavigateNext,{style:y})):i.default.createElement("div",{style:m},i.default.createElement("b",{style:f},t.label)))}}]),t}(o.Component);t.default=g,g.propTypes={page:l.default.object.isRequired,oldPage:l.default.object.isRequired},g.contextTypes={projectActions:l.default.object.isRequired}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},o=r(0),i=c(o),l=c(r(1)),s=r(19),u=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}(r(3));function c(e){return e&&e.__esModule?e:{default:e}}var d={width:"14em",height:"14em",padding:"0.625em",background:"#f7f7f9",border:"1px solid #e1e1e8",margin:"0.3em",cursor:"pointer",position:"relative",boxShadow:"0 1px 6px 0 rgba(0, 0, 0, 0.11), 0 1px 4px 0 rgba(0, 0, 0, 0.11)",borderRadius:"2px",transition:"all .2s ease-in-out",WebkitTransition:"all .2s ease-in-out"},p=a({},d,{background:u.SECONDARY_COLOR.main}),f={position:"absolute",color:u.COLORS.black,fontSize:"5em",width:"100%"},h=a({},f,{color:u.SECONDARY_COLOR.main}),y={background:u.COLORS.white,marginBottom:"5px",border:"solid 1px #e6e6e6",width:"100%",height:"100%",display:"flex",alignItems:"center",justifyContent:"center"},m=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return r.state={hover:!1},r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),n(t,[{key:"changePage",value:function(e){this.context.projectActions.goBackToCatalogPage(e)}},{key:"render",value:function(){var e=this,t=this.props.page,r=this.state.hover;return i.default.createElement("div",{style:r?p:d,onClick:function(r){return e.changePage(t.name)},onMouseEnter:function(t){return e.setState({hover:!0})},onMouseLeave:function(t){return e.setState({hover:!1})}},i.default.createElement("div",{style:y},i.default.createElement(s.MdNavigateBefore,{style:r?h:f})))}}]),t}(o.Component);t.default=m,m.propTypes={page:l.default.object.isRequired},m.contextTypes={projectActions:l.default.object.isRequired}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),a=r(0),o=s(a),i=s(r(1)),l=r(11);function s(e){return e&&e.__esModule?e:{default:e}}var u=function(e){function t(e,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,r)),a=e.state.scene;return n.state={dataWidth:a.width,dataHeight:a.height},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),n(t,[{key:"onSubmit",value:function(e){e.preventDefault();var t=this.context.projectActions,r=this.state,n=r.dataWidth,a=r.dataHeight;n=parseInt(n),a=parseInt(a),n<=100||a<=100?alert("Scene size too small"):t.setProjectProperties({width:n,height:a})}},{key:"render",value:function(){var e=this,t=this.props,r=t.width,n=t.height,a=this.state,i=a.dataWidth,s=a.dataHeight,u=this.context,c=u.projectActions,d=u.translator;return o.default.createElement(l.ContentContainer,{width:r,height:n},o.default.createElement(l.ContentTitle,null,d.t("Project config")),o.default.createElement("form",{onSubmit:function(t){return e.onSubmit(t)}},o.default.createElement(l.FormBlock,null,o.default.createElement(l.FormLabel,{htmlFor:"width"},d.t("width")),o.default.createElement(l.FormNumberInput,{id:"width",placeholder:"width",value:i,onChange:function(t){return e.setState({dataWidth:t.target.value})}})),o.default.createElement(l.FormBlock,null,o.default.createElement(l.FormLabel,{htmlFor:"height"},d.t("height")),o.default.createElement(l.FormNumberInput,{id:"height",placeholder:"height",value:s,onChange:function(t){return e.setState({dataHeight:t.target.value})}})),o.default.createElement("table",{style:{float:"right"}},o.default.createElement("tbody",null,o.default.createElement("tr",null,o.default.createElement("td",null,o.default.createElement(l.CancelButton,{size:"large",onClick:function(e){return c.rollback()}},d.t("Cancel"))),o.default.createElement("td",null,o.default.createElement(l.FormSubmitButton,{size:"large"},d.t("Save"))))))))}}]),t}(a.Component);t.default=u,u.propTypes={width:i.default.number.isRequired,height:i.default.number.isRequired,state:i.default.object.isRequired},u.contextTypes={projectActions:i.default.object.isRequired,translator:i.default.object.isRequired}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PanelGuides=t.PanelLayerElement=t.PanelLayers=t.Panel=t.Sidebar=void 0;var n=s(r(382)),a=s(r(25)),o=s(r(151)),i=s(r(154)),l=s(r(153));function s(e){return e&&e.__esModule?e:{default:e}}t.Sidebar=n.default,t.Panel=a.default,t.PanelLayers=o.default,t.PanelLayerElement=i.default,t.PanelGuides=l.default,t.default={Sidebar:n.default,Panel:a.default,PanelLayers:o.default,PanelLayerElement:i.default,PanelGuides:l.default}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e};t.default=v;var a=h(r(0)),o=h(r(1)),i=h(r(383)),l=h(r(389)),s=(h(r(390)),h(r(151))),u=h(r(153)),c=h(r(391)),d=h(r(154)),p=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}(r(3)),f=h(r(43));function h(e){return e&&e.__esModule?e:{default:e}}var y={backgroundColor:p.PRIMARY_COLOR.main,display:"block",overflowY:"auto",overflowX:"hidden",paddingBottom:"20px"},m=function(e,t){return void 0!==e.index&&null!==e.index||(e.index=Number.MAX_SAFE_INTEGER),void 0!==t.index&&null!==t.index||(t.index=Number.MAX_SAFE_INTEGER),e.index-t.index},g=function(e,t){return a.default.createElement(f.default,{key:t,condition:e.condition,style:{position:"relative"}},e.dom)};function v(e){var t=e.state,r=e.width,o=e.height,p=e.sidebarComponents,f=t.getIn(["scene","selectedLayer"]),h=t.getIn(["scene","layers",f,"selected"]),v=h.lines.size>1||h.items.size>1||h.holes.size>1||h.areas.size>1||h.lines.size+h.items.size+h.holes.size+h.areas.size>1,E=t.getIn(["scene","groups"]).findEntry((function(e){return e.get("selected")})),_=[{index:0,condition:!0,dom:a.default.createElement(u.default,{state:t})},{index:1,condition:!0,dom:a.default.createElement(s.default,{state:t})},{index:2,condition:!0,dom:a.default.createElement(d.default,{mode:t.mode,layers:t.scene.layers,selectedLayer:t.scene.selectedLayer})},{index:3,condition:!0,dom:a.default.createElement(c.default,{mode:t.mode,groups:t.scene.groups,layers:t.scene.layers})},{index:4,condition:!v,dom:a.default.createElement(i.default,{state:t})},{index:6,condition:!!E,dom:a.default.createElement(l.default,{state:t,groupID:E?E[0]:null})}];return _=_.concat(p.map((function(e,r){return e.prototype?{condition:!0,dom:a.default.createElement(e,{state:t,key:r})}:{index:e.index,condition:e.condition,dom:a.default.createElement(e.dom,{state:t,key:r})}}))),a.default.createElement("aside",{style:n({width:r,height:o},y),onKeyDown:function(e){return e.stopPropagation()},onKeyUp:function(e){return e.stopPropagation()},className:"sidebar"},_.sort(m).map(g))}v.propTypes={state:o.default.object.isRequired,width:o.default.number.isRequired,height:o.default.number.isRequired}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=c;var n=u(r(0)),a=u(r(1)),o=u(r(25)),i=r(5),l=r(2),s=u(r(384));function u(e){return e&&e.__esModule?e:{default:e}}function c(e,t){var r=e.state,a=(t.projectActions,t.translator),u=r.scene,c=r.mode;if(![l.MODE_IDLE,l.MODE_2D_ZOOM_IN,l.MODE_2D_ZOOM_OUT,l.MODE_2D_PAN,l.MODE_3D_VIEW,l.MODE_3D_FIRST_PERSON,l.MODE_WAITING_DRAWING_LINE,l.MODE_DRAWING_LINE,l.MODE_DRAWING_HOLE,l.MODE_DRAWING_ITEM,l.MODE_DRAGGING_LINE,l.MODE_DRAGGING_VERTEX,l.MODE_DRAGGING_ITEM,l.MODE_DRAGGING_HOLE,l.MODE_ROTATING_ITEM,l.MODE_UPLOADING_IMAGE,l.MODE_FITTING_IMAGE].includes(c))return null;return n.default.createElement("div",null,u.layers.valueSeq().map((function(e){return(0,i.Seq)().concat(e.lines,e.holes,e.areas,e.items).filter((function(e){return e.selected})).map((function(t){return function(e,t){return n.default.createElement(o.default,{key:e.id,name:a.t("Properties: [{0}] {1}",e.type,e.id),opened:!0},n.default.createElement("div",{style:{padding:"5px 15px"}},n.default.createElement(s.default,{element:e,layer:t,state:r})))}(t,e)})).valueSeq()})))}c.propTypes={state:a.default.object.isRequired},c.contextTypes={projectActions:a.default.object.isRequired,translator:a.default.object.isRequired}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var r=[],n=!0,a=!1,o=void 0;try{for(var i,l=e[Symbol.iterator]();!(n=(i=l.next()).done)&&(r.push(i.value),!t||r.length!==t);n=!0);}catch(e){a=!0,o=e}finally{try{!n&&l.return&&l.return()}finally{if(a)throw o}}return r}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),i=r(0),l=y(i),s=y(r(1)),u=r(5),c=y(r(385)),d=r(9),p=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}(r(3)),f=y(r(134)),h=r(19);function y(e){return e&&e.__esModule?e:{default:e}}var m={margin:"0.5em 0.25em 0.5em 0",border:"2px solid "+p.SECONDARY_COLOR.alt,position:"relative",height:"2.5em",borderRadius:"2px"},g={position:"absolute",right:"0.5em",top:"0.5em"},v={float:"right",margin:"-3px 4px 0px 0px",padding:0,cursor:"pointer",fontSize:"1.4em"},E=function(e){function t(e,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,r));return n.state={attributesFormData:n.initAttrData(n.props.element,n.props.layer,n.props.state),propertiesFormData:n.initPropData(n.props.element,n.props.layer,n.props.state)},n.updateAttribute=n.updateAttribute.bind(n),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),o(t,[{key:"shouldComponentUpdate",value:function(e,t){return this.state.attributesFormData.hashCode()!==t.attributesFormData.hashCode()||this.state.propertiesFormData.hashCode()!==t.propertiesFormData.hashCode()||this.props.state.clipboardProperties.hashCode()!==e.state.clipboardProperties.hashCode()}},{key:"componentWillReceiveProps",value:function(e){var t=e.element,r=e.layer,n=e.state,a=t.prototype,o=t.id,i=this.props.state.get("scene"),l=i.getIn(["layers",i.get("selectedLayer")]);l.getIn([a,o]);l.hashCode()!==r.hashCode()&&this.setState({attributesFormData:this.initAttrData(t,r,n),propertiesFormData:this.initPropData(t,r,n)})}},{key:"initAttrData",value:function(e,t,r){switch((e="object"===a(e.misc)?e.set("misc",new u.Map(e.misc)):e).prototype){case"items":return new u.Map(e);case"lines":var n=t.vertices.get(e.vertices.get(0)),o=t.vertices.get(e.vertices.get(1)),i=d.GeometryUtils.pointsDistance(n.x,n.y,o.x,o.y),l=e.misc.get("_unitLength")||this.context.catalog.unit,s=(0,f.default)(i).from(this.context.catalog.unit).to(l);return new u.Map({vertexOne:n,vertexTwo:o,lineLength:new u.Map({length:i,_length:s,_unit:l})});case"holes":var c=t.lines.get(e.line),p=t.vertices.get(c.vertices.get(0)),h=p.x,y=p.y,m=t.vertices.get(c.vertices.get(1)),g=m.x,v=m.y,E=d.GeometryUtils.pointsDistance(h,y,g,v),_=E*e.offset-e.properties.get("width").get("length")/2,O=e.misc.get("_unitA")||this.context.catalog.unit,b=(0,f.default)(_).from(this.context.catalog.unit).to(O),w=E-E*e.offset-e.properties.get("width").get("length")/2,I=e.misc.get("_unitB")||this.context.catalog.unit,S=(0,f.default)(w).from(this.context.catalog.unit).to(I);return new u.Map({offset:e.offset,offsetA:new u.Map({length:d.MathUtils.toFixedFloat(_,2),_length:d.MathUtils.toFixedFloat(b,2),_unit:O}),offsetB:new u.Map({length:d.MathUtils.toFixedFloat(w,2),_length:d.MathUtils.toFixedFloat(S,2),_unit:I})});case"areas":return new u.Map({});default:return null}}},{key:"initPropData",value:function(e,t,r){var n=this.context.catalog.getElement(e.type),a={};for(var o in n.properties)a[o]=new u.Map({currentValue:e.properties.has(o)?e.properties.get(o):(0,u.fromJS)(n.properties[o].defaultValue),configs:n.properties[o]});return new u.Map(a)}},{key:"updateAttribute",value:function(e,t){var r=this,a=this.state.attributesFormData;switch(this.props.element.prototype){case"items":a=a.set(e,t);break;case"lines":switch(e){case"lineLength":var o=a.get("vertexOne"),i=a.get("vertexTwo"),l=d.GeometryUtils.orderVertices([o,i]),s=n(l,2),c=s[0],p=s[1],h=d.GeometryUtils.extendLine(c.x,c.y,p.x,p.y,t.get("length"),2);a=a.withMutations((function(e){e.set(o===c?"vertexTwo":"vertexOne",p.merge(h)),e.set("lineLength",t)}));break;case"vertexOne":case"vertexTwo":a=a.withMutations((function(n){n.set(e,n.get(e).merge(t));var a=d.GeometryUtils.verticesDistance(n.get("vertexOne"),n.get("vertexTwo"));n.mergeIn(["lineLength"],n.get("lineLength").merge({length:a,_length:(0,f.default)(a).from(r.context.catalog.unit).to(n.get("lineLength").get("_unit"))}))}));break;default:a=a.set(e,t)}break;case"holes":switch(e){case"offsetA":var y=this.props.layer.lines.get(this.props.element.line),m=d.GeometryUtils.orderVertices([this.props.layer.vertices.get(y.vertices.get(0)),this.props.layer.vertices.get(y.vertices.get(1))]),g=n(m,2),v=g[0],E=v.x,_=v.y,O=g[1],b=O.x,w=O.y,I=d.GeometryUtils.angleBetweenTwoPoints(E,_,b,w),S=d.GeometryUtils.pointsDistance(E,_,b,w),M=this.props.element.properties.get("width").get("length"),x=M/2,R=t.get("length");R=Math.max(R,0);var P=((R=Math.min(R,S-M))+x)*Math.cos(I)+E,D=(R+x)*Math.sin(I)+_,T=d.GeometryUtils.pointPositionOnLineSegment(E,_,b,w,P,D),A=d.MathUtils.toFixedFloat(S-S*T-x,2),G=a.getIn(["offsetB","_unit"]),L=new u.Map({length:A,_length:(0,f.default)(A).from(this.context.catalog.unit).to(G),_unit:G});a=a.set("offsetB",L).set("offset",T);var C=new u.Map({length:d.MathUtils.toFixedFloat(R,2),_unit:t.get("_unit"),_length:d.MathUtils.toFixedFloat((0,f.default)(R).from(this.context.catalog.unit).to(t.get("_unit")),2)});a=a.set(e,C);break;case"offsetB":var N=this.props.layer.lines.get(this.props.element.line),j=d.GeometryUtils.orderVertices([this.props.layer.vertices.get(N.vertices.get(0)),this.props.layer.vertices.get(N.vertices.get(1))]),k=n(j,2),U=k[0],V=U.x,F=U.y,H=k[1],B=H.x,z=H.y,q=d.GeometryUtils.angleBetweenTwoPoints(V,F,B,z),W=d.GeometryUtils.pointsDistance(V,F,B,z),Y=this.props.element.properties.get("width").get("length"),Z=Y/2,J=t.get("length");J=Math.max(J,0);var X=B-((J=Math.min(J,W-Y))+Z)*Math.cos(q),K=z-(J+Z)*Math.sin(q),Q=d.GeometryUtils.pointPositionOnLineSegment(V,F,B,z,X,K),$=d.MathUtils.toFixedFloat(W*Q-Z,2),ee=a.getIn(["offsetA","_unit"]),te=new u.Map({length:$,_length:(0,f.default)($).from(this.context.catalog.unit).to(ee),_unit:ee});a=a.set("offsetA",te).set("offset",Q);var re=new u.Map({length:d.MathUtils.toFixedFloat(J,2),_unit:t.get("_unit"),_length:d.MathUtils.toFixedFloat((0,f.default)(J).from(this.context.catalog.unit).to(t.get("_unit")),2)});a=a.set(e,re);break;default:a=a.set(e,t)}}this.setState({attributesFormData:a}),this.save({attributesFormData:a})}},{key:"updateProperty",value:function(e,t){var r=this.state.propertiesFormData;r=r.setIn([e,"currentValue"],t),this.setState({propertiesFormData:r}),this.save({propertiesFormData:r})}},{key:"reset",value:function(){this.setState({propertiesFormData:this.initPropData(this.props.element,this.props.layer,this.props.state)})}},{key:"save",value:function(e){var t=e.propertiesFormData,r=e.attributesFormData;if(t){var n=t.map((function(e){return e.get("currentValue")}));this.context.projectActions.setProperties(n)}if(r)switch(this.props.element.prototype){case"items":this.context.projectActions.setItemsAttributes(r);break;case"lines":this.context.projectActions.setLinesAttributes(r);break;case"holes":this.context.projectActions.setHolesAttributes(r)}}},{key:"copyProperties",value:function(e){this.context.projectActions.copyProperties(e)}},{key:"pasteProperties",value:function(){this.context.projectActions.pasteProperties()}},{key:"render",value:function(){var e=this,t=this.state,r=t.propertiesFormData,a=t.attributesFormData,o=this.context,i=(o.projectActions,o.catalog),s=o.translator,u=this.props,d=u.state,p=u.element;return l.default.createElement("div",null,l.default.createElement(c.default,{element:p,onUpdate:this.updateAttribute,attributeFormData:a,state:d}),l.default.createElement("div",{style:m},l.default.createElement("div",{style:g},l.default.createElement("div",{title:s.t("Copy"),style:v,onClick:function(t){return e.copyProperties(p.properties)}},l.default.createElement(h.MdContentCopy,null)),d.get("clipboardProperties")&&d.get("clipboardProperties").size?l.default.createElement("div",{title:s.t("Paste"),style:v,onClick:function(t){return e.pasteProperties()}},l.default.createElement(h.MdContentPaste,null)):null)),r.entrySeq().map((function(t){var r=n(t,2),a=r[0],o=r[1],s=o.get("currentValue"),u=o.get("configs"),c=i.getPropertyType(u.type).Editor;return l.default.createElement(c,{key:a,propertyName:a,value:s,configs:u,onUpdate:function(t){return e.updateProperty(a,t)},state:d,sourceElement:p,internalState:e.state})})))}}]),t}(i.Component);t.default=E,E.propTypes={state:s.default.object.isRequired,element:s.default.object.isRequired,layer:s.default.object.isRequired},E.contextTypes={projectActions:s.default.object.isRequired,catalog:s.default.object.isRequired,translator:s.default.object.isRequired}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e};t.default=c;var a=u(r(0)),o=u(r(1)),i=u(r(386)),l=u(r(387)),s=u(r(388));function u(e){return e&&e.__esModule?e:{default:e}}function c(e){var t=e.element,r=e.onUpdate,o=e.onValid,u=e.attributeFormData,c=e.state,d=function(e,t){var r={};for(var n in e)t.indexOf(n)>=0||Object.prototype.hasOwnProperty.call(e,n)&&(r[n]=e[n]);return r}(e,["element","onUpdate","onValid","attributeFormData","state"]);switch(t.prototype){case"items":return a.default.createElement(i.default,n({element:t,onUpdate:r,onValid:o,attributeFormData:u,state:c},d));case"lines":return a.default.createElement(l.default,n({element:t,onUpdate:r,onValid:o,attributeFormData:u,state:c},d));case"holes":return a.default.createElement(s.default,n({element:t,onUpdate:r,onValid:o,attributeFormData:u,state:c},d));case"areas":return null}return null}c.propTypes={element:o.default.object.isRequired,onUpdate:o.default.func.isRequired,onValid:o.default.func,attributeFormData:o.default.object.isRequired,state:o.default.object.isRequired}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e};t.default=p;var a=s(r(0)),o=s(r(1)),i=s(r(98)),l=s(r(48));function s(e){return e&&e.__esModule?e:{default:e}}var u={width:"100%"},c={width:"6em"},d={textAlign:"left"};function p(e,t){var r=t.translator,o=e.element,s=e.onUpdate,p=e.attributeFormData,f=e.state,h=function(e,t){var r={};for(var n in e)t.indexOf(n)>=0||Object.prototype.hasOwnProperty.call(e,n)&&(r[n]=e[n]);return r}(e,["element","onUpdate","attributeFormData","state"]),y=p.has("name")?p.get("name"):o.name,m=p.has("x")?p.get("x"):o.x,g=p.has("y")?p.get("y"):o.y,v=p.has("rotation")?p.get("rotation"):o.rotation;return a.default.createElement("table",{style:u},a.default.createElement("tbody",null,a.default.createElement("tr",null,a.default.createElement("td",{style:c},r.t("Name")),a.default.createElement("td",null,a.default.createElement(l.default,{value:y,onChange:function(e){return s("name",e.target.value)},style:d}))),a.default.createElement("tr",null,a.default.createElement("td",{style:c},"X"),a.default.createElement("td",null,a.default.createElement(i.default,n({value:m,onChange:function(e){return s("x",e.target.value)},style:d,state:f,precision:2},h)))),a.default.createElement("tr",null,a.default.createElement("td",{style:c},"Y"),a.default.createElement("td",null,a.default.createElement(i.default,n({value:g,onChange:function(e){return s("y",e.target.value)},style:d,state:f,precision:2},h)))),a.default.createElement("tr",null,a.default.createElement("td",{style:c},r.t("Rotation")),a.default.createElement("td",null,a.default.createElement(i.default,n({value:v,onChange:function(e){return s("rotation",e.target.value)},style:d,state:f,precision:2},h))))))}p.propTypes={element:o.default.object.isRequired,onUpdate:o.default.func.isRequired,attributeFormData:o.default.object.isRequired,state:o.default.object.isRequired},p.contextTypes={translator:o.default.object.isRequired}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},a=s(r(0)),o=s(r(1)),i=r(11),l=r(95);function s(e){return e&&e.__esModule?e:{default:e}}var u={width:"100%"},c={width:"6em"},d={textAlign:"left"};function p(e,t){var r=t.translator,o=e.element,s=e.onUpdate,p=e.attributeFormData,f=e.state,h=function(e,t){var r={};for(var n in e)t.indexOf(n)>=0||Object.prototype.hasOwnProperty.call(e,n)&&(r[n]=e[n]);return r}(e,["element","onUpdate","attributeFormData","state"]),y=p.has("name")?p.get("name"):o.name,m=p.has("vertexOne")?p.get("vertexOne"):null,g=p.has("vertexTwo")?p.get("vertexTwo"):null,v=p.has("lineLength")?p.get("lineLength"):null;return a.default.createElement("div",null,a.default.createElement("table",{style:u},a.default.createElement("tbody",null,a.default.createElement("tr",null,a.default.createElement("td",{style:c},r.t("Name")),a.default.createElement("td",null,a.default.createElement(i.FormTextInput,{value:y,onChange:function(e){return s("name",e.target.value)},style:d}))),a.default.createElement("tr",null,a.default.createElement("td",{style:c},"X1"),a.default.createElement("td",null,a.default.createElement(i.FormNumberInput,n({value:m.get("x"),onChange:function(e){return s("vertexOne",{x:e.target.value})},style:d,state:f,precision:2},h)))),a.default.createElement("tr",null,a.default.createElement("td",{style:c},"Y1"),a.default.createElement("td",null,a.default.createElement(i.FormNumberInput,n({value:m.get("y"),onChange:function(e){return s("vertexOne",{y:e.target.value})},style:d,state:f,precision:2},h)))),a.default.createElement("tr",null,a.default.createElement("td",{style:c},"X2"),a.default.createElement("td",null,a.default.createElement(i.FormNumberInput,n({value:g.get("x"),onChange:function(e){return s("vertexTwo",{x:e.target.value})},style:d,state:f,precision:2},h)))),a.default.createElement("tr",null,a.default.createElement("td",{style:c},"Y2"),a.default.createElement("td",null,a.default.createElement(i.FormNumberInput,n({value:g.get("y"),onChange:function(e){return s("vertexTwo",{y:e.target.value})},style:d,state:f,precision:2},h)))))),a.default.createElement(l.PropertyLengthMeasure,{value:v,onUpdate:function(e){return s("lineLength",e)},configs:{label:r.t("Length"),min:0,max:1/0,precision:2},state:f}))}t.default=p,p.propTypes={element:o.default.object.isRequired,onUpdate:o.default.func.isRequired,onValid:o.default.func,attributeFormData:o.default.object.isRequired,state:o.default.object.isRequired},p.contextTypes={translator:o.default.object.isRequired}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},a=s(r(0)),o=s(r(1)),i=s(r(133)),l=s(r(132));function s(e){return e&&e.__esModule?e:{default:e}}function u(e,t){t.translator;var r=e.element,o=e.onUpdate,s=e.attributeFormData,u=e.state,c=function(e,t){var r={};for(var n in e)t.indexOf(n)>=0||Object.prototype.hasOwnProperty.call(e,n)&&(r[n]=e[n]);return r}(e,["element","onUpdate","attributeFormData","state"]),d=s.has("name")?s.get("name"):r.name,p=s.has("offsetA")?s.get("offsetA"):r.offsetA,f=s.has("offsetB")?s.get("offsetB"):r.offsetA;return a.default.createElement("div",null,a.default.createElement(l.default,n({value:d,onUpdate:function(e){return o("name",e)},configs:{label:"Nome"},state:u},c)),a.default.createElement(i.default,n({value:p,onUpdate:function(e){return o("offsetA",e)},configs:{label:"Offset 1",min:0,max:1/0,precision:2},state:u},c)),a.default.createElement(i.default,n({value:f,onUpdate:function(e){return o("offsetB",e)},configs:{label:"Offset 2",min:0,max:1/0,precision:2},state:u},c)))}t.default=u,u.propTypes={element:o.default.object.isRequired,onUpdate:o.default.func.isRequired,attributeFormData:o.default.object.isRequired,state:o.default.object.isRequired},u.contextTypes={translator:o.default.object.isRequired}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var r=[],n=!0,a=!1,o=void 0;try{for(var i,l=e[Symbol.iterator]();!(n=(i=l.next()).done)&&(r.push(i.value),!t||r.length!==t);n=!0);}catch(e){a=!0,o=e}finally{try{!n&&l.return&&l.return()}finally{if(a)throw o}}return r}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},a=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o=r(0),i=h(o),l=h(r(1)),s=h(r(25)),u=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}(r(3)),c=r(11),d=r(5),p=r(18),f=r(2);function h(e){return e&&e.__esModule?e:{default:e}}var y={MODE_IDLE:f.MODE_IDLE,MODE_2D_ZOOM_IN:f.MODE_2D_ZOOM_IN,MODE_2D_ZOOM_OUT:f.MODE_2D_ZOOM_OUT,MODE_2D_PAN:f.MODE_2D_PAN,MODE_3D_VIEW:f.MODE_3D_VIEW,MODE_3D_FIRST_PERSON:f.MODE_3D_FIRST_PERSON,MODE_WAITING_DRAWING_LINE:f.MODE_WAITING_DRAWING_LINE,MODE_DRAWING_LINE:f.MODE_DRAWING_LINE,MODE_DRAWING_HOLE:f.MODE_DRAWING_HOLE,MODE_DRAWING_ITEM:f.MODE_DRAWING_ITEM,MODE_DRAGGING_LINE:f.MODE_DRAGGING_LINE,MODE_DRAGGING_VERTEX:f.MODE_DRAGGING_VERTEX,MODE_DRAGGING_ITEM:f.MODE_DRAGGING_ITEM,MODE_DRAGGING_HOLE:f.MODE_DRAGGING_HOLE,MODE_FITTING_IMAGE:f.MODE_FITTING_IMAGE,MODE_UPLOADING_IMAGE:f.MODE_UPLOADING_IMAGE,MODE_ROTATING_ITEM:f.MODE_ROTATING_ITEM},m={width:"100%"},g={width:"6em"},v={textAlign:"left"},E={marginLeft:"5px",border:"0px",background:"none",color:u.COLORS.white,fontSize:"14px",outline:"0px"},_={width:"100%",cursor:"pointer",maxHeight:"20em",marginLeft:"1px",marginTop:"1em"},O={width:"2em"},b=function(e){function t(e,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,r));return n.state={},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),a(t,[{key:"shouldComponentUpdate",value:function(e,t){return!0}},{key:"componentWillReceiveProps",value:function(e,t){}},{key:"render",value:function(){var e=this;if(!this.props.groupID||!y[this.props.state.mode])return null;var t=this.props.state.getIn(["scene","groups",this.props.groupID]),r=t.get("elements");return i.default.createElement(s.default,{name:this.context.translator.t("Group [{0}]",t.get("name")),opened:!0},i.default.createElement("div",{style:{padding:"5px 15px"}},i.default.createElement("table",{style:m},i.default.createElement("tbody",null,i.default.createElement("tr",null,i.default.createElement("td",{style:g},this.context.translator.t("Name")),i.default.createElement("td",null,i.default.createElement(c.FormTextInput,{value:t.get("name"),onChange:function(t){return e.context.groupsActions.setGroupAttributes(e.props.groupID,new d.Map({name:t.target.value}))},style:v}))),i.default.createElement("tr",null,i.default.createElement("td",{style:g},"X"),i.default.createElement("td",null,i.default.createElement(c.FormNumberInput,{value:t.get("x"),onChange:function(r){return e.context.groupsActions.groupTranslate(e.props.groupID,r.target.value,t.get("y"))},style:v,state:this.props.state,precision:2}))),i.default.createElement("tr",null,i.default.createElement("td",{style:g},"Y"),i.default.createElement("td",null,i.default.createElement(c.FormNumberInput,{value:t.get("y"),onChange:function(r){return e.context.groupsActions.groupTranslate(e.props.groupID,t.get("x"),r.target.value)},style:v,state:this.props.state,precision:2}))),i.default.createElement("tr",null,i.default.createElement("td",{style:g},this.context.translator.t("Rotation")),i.default.createElement("td",null,i.default.createElement(c.FormNumberInput,{value:t.get("rotation"),onChange:function(t){return e.context.groupsActions.groupRotate(e.props.groupID,t.target.value)},style:v,state:this.props.state,precision:2}))))),r.size?i.default.createElement("div",null,i.default.createElement("p",{style:{textAlign:"center",borderBottom:u.PRIMARY_COLOR.border,paddingBottom:"1em"}},this.context.translator.t("Group's Elements")),i.default.createElement("table",{style:_},i.default.createElement("thead",null,i.default.createElement("tr",null,i.default.createElement("th",{style:O}),i.default.createElement("th",null,this.context.translator.t("Layer")),i.default.createElement("th",null,this.context.translator.t("Prototype")),i.default.createElement("th",null,this.context.translator.t("Name")))),i.default.createElement("tbody",null,r.entrySeq().map((function(t){var r=n(t,2),a=r[0];return r[1].entrySeq().map((function(t){var r=n(t,2),o=r[0];return r[1].valueSeq().map((function(t){var r=e.props.state.getIn(["scene","layers",a,o,t]);return i.default.createElement("tr",{key:t},i.default.createElement("td",{style:O,title:e.context.translator.t("Un-chain Element from Group")},i.default.createElement(p.FaUnlink,{onClick:function(r){return e.context.groupsActions.removeFromGroup(e.props.groupID,a,o,t)},style:E})),i.default.createElement("td",{style:{textAlign:"center"}},a),i.default.createElement("td",{style:{textAlign:"center",textTransform:"capitalize"}},o),i.default.createElement("td",{style:{textAlign:"center"}},r.name))}))}))}))))):null))}}]),t}(o.Component);t.default=b,b.propTypes={state:l.default.object.isRequired,groupID:l.default.string},b.contextTypes={catalog:l.default.object.isRequired,translator:l.default.object.isRequired,itemsActions:l.default.object.isRequired,linesActions:l.default.object.isRequired,holesActions:l.default.object.isRequired,groupsActions:l.default.object.isRequired,projectActions:l.default.object.isRequired}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var r=[],n=!0,a=!1,o=void 0;try{for(var i,l=e[Symbol.iterator]();!(n=(i=l.next()).done)&&(r.push(i.value),!t||r.length!==t);n=!0);}catch(e){a=!0,o=e}finally{try{!n&&l.return&&l.return()}finally{if(a)throw o}}return r}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},a=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o=r(0),i=d(o),l=d(r(1)),s=d(r(25)),u=(r(5),r(2)),c=r(11);r(8);function d(e){return e&&e.__esModule?e:{default:e}}var p={width:"100%"},f={width:"6em"},h=function(e){function t(e,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,r));return n.state={selectedGroupID:""},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),a(t,[{key:"addSelectToGroup",value:function(e,t,r,n){t&&""!==t&&n&&n.size&&console.log("need to be added to group",t,"elements",n)}},{key:"render",value:function(){var e=this,t=this.props.state.mode;if(![u.MODE_IDLE,u.MODE_2D_ZOOM_IN,u.MODE_2D_ZOOM_OUT,u.MODE_2D_PAN,u.MODE_3D_VIEW,u.MODE_3D_FIRST_PERSON,u.MODE_WAITING_DRAWING_LINE,u.MODE_DRAWING_LINE,u.MODE_DRAWING_HOLE,u.MODE_DRAWING_ITEM,u.MODE_DRAGGING_LINE,u.MODE_DRAGGING_VERTEX,u.MODE_DRAGGING_ITEM,u.MODE_DRAGGING_HOLE,u.MODE_ROTATING_ITEM,u.MODE_UPLOADING_IMAGE,u.MODE_FITTING_IMAGE].includes(t))return null;var r=this.props.state.getIn(["scene","groups"]),a=this.props.state.getIn(["scene","selectedLayer"]),o=this.props.state.getIn(["scene","layers",a,"selected"]);return i.default.createElement(s.default,{name:"Multiselected",opened:!0},i.default.createElement("div",{style:{padding:"5px 15px"}},i.default.createElement("p",null,"Multiselection tab"),i.default.createElement("table",{style:p},i.default.createElement("tbody",null,i.default.createElement("tr",null,i.default.createElement("td",{style:f},"Add to Group"),i.default.createElement("td",null,i.default.createElement(c.FormSelect,{value:this.state.selectedGroupID,onChange:function(t){return e.setState({selectedGroupID:t.target.value})}},i.default.createElement("option",{key:0,value:""}),r.entrySeq().map((function(e){var t=n(e,2),r=t[0],a=t[1];return i.default.createElement("option",{key:r,value:r},a.get("name"))})))),i.default.createElement("td",{style:{cursor:"pointer",padding:"0.5em 0",textAlign:"center"},onClick:function(t){if(e.state.selectedGroupID&&""!==e.state.selectedGroupID&&o&&o.size)for(var r=o.toJS(),n=0;n<r.lines.length;n++)e.context.groupsActions.addToGroup(e.state.selectedGroupID,a,"lines",r.lines[n])}},"+"))))))}}]),t}(o.Component);t.default=h,h.propTypes={state:l.default.object.isRequired},h.contextTypes={projectActions:l.default.object.isRequired,groupsActions:l.default.object.isRequired,translator:l.default.object.isRequired}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var r=[],n=!0,a=!1,o=void 0;try{for(var i,l=e[Symbol.iterator]();!(n=(i=l.next()).done)&&(r.push(i.value),!t||r.length!==t);n=!0);}catch(e){a=!0,o=e}finally{try{!n&&l.return&&l.return()}finally{if(a)throw o}}return r}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},a=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},i=r(0),l=y(i),s=y(r(1)),u=y(r(25)),c=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}(r(3)),d=r(152),p=r(18),f=r(5),h=r(2);function y(e){return e&&e.__esModule?e:{default:e}}var m={MODE_IDLE:h.MODE_IDLE,MODE_2D_ZOOM_IN:h.MODE_2D_ZOOM_IN,MODE_2D_ZOOM_OUT:h.MODE_2D_ZOOM_OUT,MODE_2D_PAN:h.MODE_2D_PAN,MODE_3D_VIEW:h.MODE_3D_VIEW,MODE_3D_FIRST_PERSON:h.MODE_3D_FIRST_PERSON,MODE_WAITING_DRAWING_LINE:h.MODE_WAITING_DRAWING_LINE,MODE_DRAWING_LINE:h.MODE_DRAWING_LINE,MODE_DRAWING_HOLE:h.MODE_DRAWING_HOLE,MODE_DRAWING_ITEM:h.MODE_DRAWING_ITEM,MODE_DRAGGING_LINE:h.MODE_DRAGGING_LINE,MODE_DRAGGING_VERTEX:h.MODE_DRAGGING_VERTEX,MODE_DRAGGING_ITEM:h.MODE_DRAGGING_ITEM,MODE_DRAGGING_HOLE:h.MODE_DRAGGING_HOLE,MODE_FITTING_IMAGE:h.MODE_FITTING_IMAGE,MODE_UPLOADING_IMAGE:h.MODE_UPLOADING_IMAGE,MODE_ROTATING_ITEM:h.MODE_ROTATING_ITEM},g={marginLeft:"5px",border:"0px",background:"none",color:c.COLORS.white,fontSize:"14px",outline:"0px"},v={width:"100%",cursor:"pointer",maxHeight:"20em",padding:"0 1em",marginLeft:"1px"},E={width:"2em",textAlign:"center"},_={color:c.SECONDARY_COLOR.main},O=o({},g,_),b={fontSize:"10px",marginLeft:"5px"},w={fontSize:"1.25em"},I=o({},w,{color:"#a5a1a1"}),S={fontSize:"1.3em",cursor:"pointer",textAlign:"center"},M=o({},S,_),x=function(e){function t(e,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,r));return n.state={newEmptyHover:!1,newSelectedHover:!1},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),a(t,[{key:"shouldComponentUpdate",value:function(e,t){return this.props.groups.hashCode()!==e.groups.hashCode()||this.props.layers.hashCode()!==e.layers.hashCode()||this.props.mode!==e.mode}},{key:"render",value:function(){var e=this,t=this.props,r=t.mode,a=t.groups,o=t.layers;return m[r]?l.default.createElement(u.default,{name:this.context.translator.t("Groups"),opened:a.size>0},a.size?l.default.createElement("table",{style:v},l.default.createElement("thead",null,l.default.createElement("tr",null,l.default.createElement("th",{colSpan:"4"}),l.default.createElement("th",null,this.context.translator.t("Elements")),l.default.createElement("th",null,this.context.translator.t("Name")))),l.default.createElement("tbody",null,a.entrySeq().map((function(t){var r=n(t,2),a=r[0],i=r[1],s=function(t){return e.context.groupsActions.selectGroup(a)},u=i.get("selected"),c=u?_:null,d=i.get("elements").reduce((function(e,t){return e+t.reduce((function(e,t){return e+t.size}),0)}),0);return l.default.createElement("tr",{key:a,style:c},l.default.createElement("td",{style:E,title:e.context.translator.t("Toggle Group Visibility")},l.default.createElement(p.FaEye,{onClick:function(t){t.stopPropagation(),e.context.groupsActions.setGroupProperties(a,new f.Map({visible:!i.get("visible")}))},style:i.get("visible")?w:I})),l.default.createElement("td",{style:E,title:e.context.translator.t("Chain selected Elements to Group")},l.default.createElement(p.FaLink,{onClick:function(t){o.forEach((function(t){var r=t.get("id"),n={lines:t.get("lines"),items:t.get("items"),holes:t.get("holes"),areas:t.get("areas")},o=function(t){n[t].filter((function(e){return e.get("selected")})).forEach((function(n){e.context.groupsActions.addToGroup(a,r,t,n.get("id"))}))};for(var i in n)o(i)})),s()},style:u?O:g})),l.default.createElement("td",{style:E,title:e.context.translator.t("Un-chain all Group's Elements and remove Group")},l.default.createElement(p.FaUnlink,{onClick:function(t){return e.context.groupsActions.removeGroup(a)},style:u?O:g})),l.default.createElement("td",{style:E,title:e.context.translator.t("Delete group and all Elements")},l.default.createElement(p.FaTrash,{onClick:function(t){return e.context.groupsActions.removeGroupAndDeleteElements(a)},style:u?O:g})),l.default.createElement("td",{onClick:s,style:{width:"0em",textAlign:"center"}},d),l.default.createElement("td",{onClick:s},i.get("name")))})))):null,l.default.createElement("table",{style:{width:"100%",marginTop:"0.1em"}},l.default.createElement("tbody",null,l.default.createElement("tr",null,l.default.createElement("td",{style:this.state.newEmptyHover?M:S,onMouseOver:function(){return e.setState({newEmptyHover:!0})},onMouseOut:function(){return e.setState({newEmptyHover:!1})},onClick:function(t){return e.context.groupsActions.addGroup()}},l.default.createElement(d.TiPlus,null),l.default.createElement("b",{style:b},this.context.translator.t("New Empty Group"))),l.default.createElement("td",{style:this.state.newSelectedHover?M:S,onMouseOver:function(){return e.setState({newSelectedHover:!0})},onMouseOut:function(){return e.setState({newSelectedHover:!1})},onClick:function(t){return e.context.groupsActions.addGroupFromSelected()}},l.default.createElement(d.TiPlus,null),l.default.createElement("b",{style:b},this.context.translator.t("New Group from selected"))))))):null}}]),t}(i.Component);t.default=x,x.propTypes={mode:s.default.string.isRequired,groups:s.default.object.isRequired,layers:s.default.object.isRequired},x.contextTypes={catalog:s.default.object.isRequired,translator:s.default.object.isRequired,itemsActions:s.default.object.isRequired,linesActions:s.default.object.isRequired,holesActions:s.default.object.isRequired,groupsActions:s.default.object.isRequired,projectActions:s.default.object.isRequired}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FooterBar=t.FooterContentButton=t.FooterToggleButton=void 0;var n=i(r(155)),a=i(r(156)),o=i(r(393));function i(e){return e&&e.__esModule?e:{default:e}}t.FooterToggleButton=n.default,t.FooterContentButton=a.default,t.FooterBar=o.default,t.default={FooterToggleButton:n.default,FooterContentButton:a.default,FooterBar:o.default}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.rightTextStyle=t.leftTextStyle=void 0;var n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},a=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o=r(0),i=m(o),l=m(r(1)),s=m(r(43)),u=m(r(155)),c=m(r(156)),d=r(41),p=r(2),f=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}(r(3)),h=r(19),y=r(157);function m(e){return e&&e.__esModule?e:{default:e}}var g={position:"absolute",bottom:0,lineHeight:"14px",fontSize:"12px",color:f.COLORS.white,backgroundColor:f.SECONDARY_COLOR.alt,padding:"3px 1em",margin:0,boxSizing:"border-box",cursor:"default",userSelect:"none",zIndex:"9001"},v=t.leftTextStyle={position:"relative",borderRight:"1px solid #FFF",float:"left",padding:"0 1em",display:"inline-block"},E=t.rightTextStyle={position:"relative",borderLeft:"1px solid #FFF",float:"right",padding:"0 1em",display:"inline-block"},_={display:"inline-block",width:"6em",margin:0,padding:0},O={borderBottom:"1px solid #555",lineHeight:"1.5em"},b=function(e){function t(e,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,r));return n.state={},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),a(t,[{key:"render",value:function(){var e=this.props,t=e.state,r=e.width,a=e.height,o=this.context,l=o.translator,m=o.projectActions,b=t.get("mouse").toJS(),w=b.x,I=b.y,S=t.get("zoom"),M=t.get("mode"),x=t.get("errors").toArray(),R=x.map((function(e,t){return i.default.createElement("div",{key:t,style:O},"[ ",new Date(e.date).toLocaleString()," ] ",e.error)})),P=x.length?{color:f.MATERIAL_COLORS[500].red}:{},D=x.length?{transform:"rotate(45deg)",color:f.MATERIAL_COLORS[500].red}:{transform:"rotate(45deg)"},T=t.get("warnings").toArray(),A=T.map((function(e,t){return i.default.createElement("div",{key:t,style:O},"[ ",new Date(e.date).toLocaleString()," ] ",e.warning)})),G=T.length?{color:f.MATERIAL_COLORS[500].yellow}:{},L=G,C=function(e){return m.toggleSnap(t.snapMask.merge(e))};return i.default.createElement("div",{style:n({},g,{width:r,height:a})},i.default.createElement(s.default,{condition:p.MODE_SNAPPING.includes(M)},i.default.createElement("div",{style:v},i.default.createElement("div",{title:l.t("Mouse X Coordinate"),style:_},"X : ",w.toFixed(3)),i.default.createElement("div",{title:l.t("Mouse Y Coordinate"),style:_},"Y : ",I.toFixed(3))),i.default.createElement("div",{style:v,title:l.t("Scene Zoom Level")},"Zoom: ",S.toFixed(3),"X"),i.default.createElement("div",{style:v},i.default.createElement(u.default,{state:this.state,toggleOn:function(){C({SNAP_POINT:!0})},toggleOff:function(){C({SNAP_POINT:!1})},text:"Snap PT",toggleState:t.snapMask.get(d.SNAP_POINT),title:l.t("Snap to Point")}),i.default.createElement(u.default,{state:this.state,toggleOn:function(){C({SNAP_LINE:!0})},toggleOff:function(){C({SNAP_LINE:!1})},text:"Snap LN",toggleState:t.snapMask.get(d.SNAP_LINE),title:l.t("Snap to Line")}),i.default.createElement(u.default,{state:this.state,toggleOn:function(){C({SNAP_SEGMENT:!0})},toggleOff:function(){C({SNAP_SEGMENT:!1})},text:"Snap SEG",toggleState:t.snapMask.get(d.SNAP_SEGMENT),title:l.t("Snap to Segment")}),i.default.createElement(u.default,{state:this.state,toggleOn:function(){C({SNAP_GRID:!0})},toggleOff:function(){C({SNAP_GRID:!1})},text:"Snap GRD",toggleState:t.snapMask.get(d.SNAP_GRID),title:l.t("Snap to Grid")}),i.default.createElement(u.default,{state:this.state,toggleOn:function(){C({SNAP_GUIDE:!0})},toggleOff:function(){C({SNAP_GUIDE:!1})},text:"Snap GDE",toggleState:t.snapMask.get(d.SNAP_GUIDE),title:l.t("Snap to Guide")}))),this.props.footerbarComponents.map((function(e,t){return i.default.createElement(e,{state:state,key:t})})),this.props.softwareSignature?i.default.createElement("div",{style:E,title:this.props.softwareSignature+(this.props.softwareSignature.includes("React-Planner")?"":" using React-Planner "+y.VERSION)},this.props.softwareSignature):null,i.default.createElement("div",{style:E},i.default.createElement(c.default,{state:this.state,icon:h.MdAddCircle,iconStyle:D,text:x.length.toString(),textStyle:P,title:"Errors [ "+x.length+" ]",titleStyle:P,content:[R]}),i.default.createElement(c.default,{state:this.state,icon:h.MdWarning,iconStyle:L,text:T.length.toString(),textStyle:G,title:"Warnings [ "+T.length+" ]",titleStyle:G,content:[A]})))}}]),t}(o.Component);t.default=b,b.propTypes={state:l.default.object.isRequired,footerbarComponents:l.default.array.isRequired,width:l.default.number.isRequired,height:l.default.number.isRequired,softwareSignature:l.default.string},b.contextTypes={projectActions:l.default.object.isRequired,viewer2DActions:l.default.object.isRequired,linesActions:l.default.object.isRequired,holesActions:l.default.object.isRequired,itemsActions:l.default.object.isRequired,translator:l.default.object.isRequired}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TabsStyle=void 0;var n=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}(r(395));t.TabsStyle=n,t.default={TabsStyle:n}},function(e,t,r){r(396)(r(398),{hmr:!0})},,,function(e,t,r){e.exports=r.p+"e500b4871b2c21b97e6d25cac92f917d.css"},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ConsoleDebugger=t.Keyboard=t.Autosave=void 0;var n=i(r(400)),a=i(r(401)),o=i(r(402));function i(e){return e&&e.__esModule?e:{default:e}}t.Autosave=n.default,t.Keyboard=a.default,t.ConsoleDebugger=o.default,t.default={Autosave:n.default,Keyboard:a.default,ConsoleDebugger:o.default}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){return function(r,l){if(t=t||o,e&&a){if(null!==a.getItem(e)){var s=a.getItem(e),u=JSON.parse(s);r.dispatch((0,n.loadProject)(u))}r.subscribe((function(){i&&clearTimeout(i),i=setTimeout((function(){var t=l(r.getState());a.setItem(e,JSON.stringify(t.scene.toJS()))}),t)}))}}};var n=r(88),a=!!window.hasOwnProperty("localStorage")&&window.localStorage,o=500,i=null},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){return function(e,t){window.addEventListener("keydown",(function(r){var o=t(e.getState()),i=o.get("mode");switch(r.keyCode){case n.KEYBOARD_BUTTON_CODE.BACKSPACE:case n.KEYBOARD_BUTTON_CODE.DELETE:[n.MODE_IDLE,n.MODE_3D_FIRST_PERSON,n.MODE_3D_VIEW].includes(i)&&e.dispatch((0,a.remove)());break;case n.KEYBOARD_BUTTON_CODE.ESC:e.dispatch((0,a.rollback)());break;case n.KEYBOARD_BUTTON_CODE.Z:(r.getModifierState("Control")||r.getModifierState("Meta"))&&e.dispatch((0,a.undo)());break;case n.KEYBOARD_BUTTON_CODE.ALT:n.MODE_SNAPPING.includes(i)&&e.dispatch((0,a.toggleSnap)(o.snapMask.merge({SNAP_POINT:!1,SNAP_LINE:!1,SNAP_SEGMENT:!1,SNAP_GRID:!1,SNAP_GUIDE:!1,tempSnapConfiguartion:o.snapMask.toJS()})));break;case n.KEYBOARD_BUTTON_CODE.C:var l=o.getIn(["scene","selectedLayer"]),s=o.getIn(["scene","layers",l,"selected"]);if((i===n.MODE_IDLE||i===n.MODE_3D_VIEW)&&(s.holes.size||s.areas.size||s.items.size||s.lines.size))if(s.holes.size){var u=o.getIn(["scene","layers",l,"holes",s.holes.get(0)]);e.dispatch((0,a.copyProperties)(u.get("properties")))}else if(s.areas.size){var c=o.getIn(["scene","layers",l,"areas",s.areas.get(0)]);e.dispatch((0,a.copyProperties)(c.properties))}else if(s.items.size){var d=o.getIn(["scene","layers",l,"items",s.items.get(0)]);e.dispatch((0,a.copyProperties)(d.properties))}else if(s.lines.size){var p=o.getIn(["scene","layers",l,"lines",s.lines.get(0)]);e.dispatch((0,a.copyProperties)(p.properties))}break;case n.KEYBOARD_BUTTON_CODE.V:e.dispatch((0,a.pasteProperties)());break;case n.KEYBOARD_BUTTON_CODE.CTRL:e.dispatch((0,a.setAlterateState)())}})),window.addEventListener("keyup",(function(r){var o=t(e.getState()),i=o.get("mode");switch(r.keyCode){case n.KEYBOARD_BUTTON_CODE.ALT:n.MODE_SNAPPING.includes(i)&&e.dispatch((0,a.toggleSnap)(o.snapMask.merge(o.snapMask.get("tempSnapConfiguartion"))));break;case n.KEYBOARD_BUTTON_CODE.CTRL:e.dispatch((0,a.setAlterateState)())}}))}};var n=r(2),a=r(88)},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e};t.default=function(){return function(e,t){window.ReactPlanner=n({},i.default,{getStore:function(){return e},getState:function(){return t(e.getState())},do:function(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:300;t=t.reverse();var n=e.dispatch,a=function e(){console.info("There are other "+t.length+" actions on stack"),0!==t.length&&(n(t.pop()),0!==t.length&&setTimeout(e,r))};setTimeout(a,0)}}),console.groupCollapsed("ReactPlanner"),console.info("ReactPlanner is ready"),console.info("console.log(ReactPlanner)"),console.log(window.ReactPlanner),console.groupEnd()}};var a,o=r(87),i=(a=o)&&a.__esModule?a:{default:a}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AreaFactory=t.WallFactory=void 0;var n=o(r(404)),a=o(r(407));function o(e){return e&&e.__esModule?e:{default:e}}t.WallFactory=n.default,t.AreaFactory=a.default,t.default={WallFactory:n.default,AreaFactory:a.default}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e};t.default=function(e,t,r){var n={name:e,prototype:"lines",info:t,properties:{height:{label:g.t("height"),type:"length-measure",defaultValue:{length:300}},thickness:{label:g.t("thickness"),type:"length-measure",defaultValue:{length:15}}},render2D:function(e,t,r){var n=t.vertices.get(e.vertices.get(0)),o=n.x,i=n.y,s=t.vertices.get(e.vertices.get(1)),u=s.x,c=s.y,g=l.pointsDistance(o,i,u,c),v=g/5,E=e.getIn(["properties","thickness","length"]),_=E/2,O=_+d,b=_+d+5,w=e.visible?h:y;return e.selected?a.default.createElement("g",null,a.default.createElement("rect",{x:"0",y:-_,width:g,height:E,style:m}),a.default.createElement("line",{x1:v,y1:-O,x2:v,y2:O,style:f}),a.default.createElement("text",{x:v,y:b+11,style:p},"A"),a.default.createElement("text",{x:v,y:-b,style:p},"B")):a.default.createElement("rect",{x:"0",y:-_,width:g,height:E,style:w})},render3D:function(e,t,n){return(0,o.buildWall)(e,t,n,r)},updateRender3D:function(e,t,n,a,i,l,s,u){return(0,o.updatedWall)(e,t,n,r,a,i,l,s,u)}};if(r&&r!=={}){var i={none:"None"};for(var s in r)i[s]=r[s].name;n.properties.textureA={label:g.t("texture")+" A",type:"enum",defaultValue:i.bricks?"bricks":"none",values:i},n.properties.textureB={label:g.t("texture")+" B",type:"enum",defaultValue:i.bricks?"bricks":"none",values:i}}return n};var a=c(r(0)),o=r(405),i=u(r(3)),l=u(r(42)),s=c(r(59));function u(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function c(e){return e&&e.__esModule?e:{default:e}}var d=20,p={textAnchor:"middle"},f={stroke:i.LINE_MESH_COLOR.selected},h={strokeWidth:1,stroke:i.LINE_MESH_COLOR.unselected,fill:"url(#diagonalFill)"},y={strokeOpacity:.3,strokeWidth:1,stroke:i.LINE_MESH_COLOR.unselected,fill:"url(#diagonalFillInvisible)"},m=n({},h,{stroke:i.LINE_MESH_COLOR.selected}),g=new s.default},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.buildWall=function(e,t,r,n){var o=t.vertices.get(e.vertices.get(0)),d=t.vertices.get(e.vertices.get(1)),p=!1;if(o.x>d.x){var f=o;o=d,d=f,p=!0}var h=e.properties.getIn(["height","length"]),y=e.properties.getIn(["thickness","length"]),m=y/2,g=(0,l.verticesDistance)(o,d),v=g/2,E=new a.MeshBasicMaterial({color:e.selected?s.MESH_SELECTED:13882323}),_=new a.Mesh(new a.BoxGeometry(g,h,y),E),O=Math.asin((d.y-o.y)/g),b=Math.sin(O),w=Math.cos(O);_.position.y+=h/2,_.position.x+=v*w,_.position.z-=v*b,_.rotation.y=O,e.holes.forEach((function(e){var r=t.holes.get(e),n=r.properties.getIn(["width","length"]),o=r.properties.getIn(["height","length"]),l=r.properties.getIn(["altitude","length"]),s=(p?1-r.offset:r.offset)*g,u=new a.BoxGeometry(n,o,y),c=new a.Mesh(u);c.position.y+=o/2+l,c.position.x+=s*w,c.position.z-=s*b,c.rotation.y=O;var d=new i.default(_),f=new i.default(c),h=d.subtract(f);_=h.toMesh(E)})),_.name="soul";var I=new a.MeshBasicMaterial,S=new a.MeshBasicMaterial;c(I,n[e.properties.get("textureB")],g,h),c(S,n[e.properties.get("textureA")],g,h);var M=.2/y,x=m+1,R=_.clone();R.material=I,R.scale.set(1,1,M),R.position.x+=x*Math.cos(O-u),R.position.z-=x*Math.sin(O-u),R.name="frontFace";var P=_.clone();P.material=S,P.scale.set(1,1,M),P.position.x+=x*Math.cos(O+u),P.position.z-=x*Math.sin(O+u),P.name="backFace";var D=new a.Group;return D.add(_,R,P),Promise.resolve(D)},t.updatedWall=function(e,t,r,n,o,i,l,c,d){var p=function(){return c(),d()},f=o.getObjectByName("soul"),h=o.getObjectByName("frontFace"),y=o.getObjectByName("backFace");if("selected"==l[0])f.material=new a.MeshBasicMaterial({color:e.selected?s.MESH_SELECTED:13882323});else{if("properties"!=l[0])return p();if("thickness"!=l[1])return p();var m=e.getIn(["properties","thickness","length"]),g=i.getIn(["properties","thickness","length"]),v=m/2+1,E=g/f.scale.z,_=f.rotation.y,O=v*Math.cos(_-u),b=v*Math.sin(_-u);f.scale.set(1,1,m/E),h.position.x=f.position.x+O,h.position.z=f.position.z+b,y.position.x=f.position.x-O,y.position.z=f.position.z-b}return Promise.resolve(o)};var n,a=r(10),o=r(406),i=(n=o)&&n.__esModule?n:{default:n},l=r(42),s=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}(r(3));var u=Math.PI/2,c=function(e,t,r,n){var o=new a.TextureLoader;t&&(e.map=o.load(t.uri),e.needsUpdate=!0,e.map.wrapS=a.RepeatWrapping,e.map.wrapT=a.RepeatWrapping,e.map.repeat.set(r*t.lengthRepeatScale,n*t.heightRepeatScale),t.normal&&(e.normalMap=o.load(t.normal.uri),e.normalScale=new a.Vector2(t.normal.normalScaleX,t.normal.normalScaleY),e.normalMap.wrapS=a.RepeatWrapping,e.normalMap.wrapT=a.RepeatWrapping,e.normalMap.repeat.set(r*t.normal.lengthRepeatScale,n*t.normal.heightRepeatScale)))}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}(r(10));function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var l=function(){function e(t){i(this,e);var r,a,l,d,p,f,h,y=[];if(this.Polygon=s,this.Vertex=u,this.Node=c,t instanceof o.Geometry)this.matrix=new o.Matrix4;else{if(!(t instanceof o.Mesh)){if(t instanceof c)return this.tree=t,this.matrix=new o.Matrix4,this;throw"ThreeBSP: Given geometry is unsupported"}t.updateMatrix(),this.matrix=t.matrix.clone(),t=t.geometry}for(r=0,a=t.faces.length;r<a;r++){if(l=t.faces[r],p=t.faceVertexUvs[0][r],h=new s,l instanceof o.Face3)d=t.vertices[l.a],f=p?new o.Vector2(p[0].x,p[0].y):null,(d=new u(d.x,d.y,d.z,l.vertexNormals[0],f)).applyMatrix4(this.matrix),h.vertices.push(d),d=t.vertices[l.b],f=p?new o.Vector2(p[1].x,p[1].y):null,(d=new u(d.x,d.y,d.z,l.vertexNormals[1],f)).applyMatrix4(this.matrix),h.vertices.push(d),d=t.vertices[l.c],f=p?new o.Vector2(p[2].x,p[2].y):null,(d=new u(d.x,d.y,d.z,l.vertexNormals[2],f)).applyMatrix4(this.matrix),h.vertices.push(d);else{if(!n(o.Face4))throw"Invalid face type at index "+r;d=t.vertices[l.a],f=p?new o.Vector2(p[0].x,p[0].y):null,(d=new u(d.x,d.y,d.z,l.vertexNormals[0],f)).applyMatrix4(this.matrix),h.vertices.push(d),d=t.vertices[l.b],f=p?new o.Vector2(p[1].x,p[1].y):null,(d=new u(d.x,d.y,d.z,l.vertexNormals[1],f)).applyMatrix4(this.matrix),h.vertices.push(d),d=t.vertices[l.c],f=p?new o.Vector2(p[2].x,p[2].y):null,(d=new u(d.x,d.y,d.z,l.vertexNormals[2],f)).applyMatrix4(this.matrix),h.vertices.push(d),d=t.vertices[l.d],f=p?new o.Vector2(p[3].x,p[3].y):null,(d=new u(d.x,d.y,d.z,l.vertexNormals[3],f)).applyMatrix4(this.matrix),h.vertices.push(d)}h.calculateProperties(),y.push(h)}this.tree=new c(y)}return a(e,[{key:"subtract",value:function(t){var r=this.tree.clone(),n=t.tree.clone();return r.invert(),r.clipTo(n),n.clipTo(r),n.invert(),n.clipTo(r),n.invert(),r.build(n.allPolygons()),r.invert(),(r=new e(r)).matrix=this.matrix,r}},{key:"union",value:function(t){var r=this.tree.clone(),n=t.tree.clone();return r.clipTo(n),n.clipTo(r),n.invert(),n.clipTo(r),n.invert(),r.build(n.allPolygons()),(r=new e(r)).matrix=this.matrix,r}},{key:"intersect",value:function(t){var r=this.tree.clone(),n=t.tree.clone();return r.invert(),n.clipTo(r),n.invert(),r.clipTo(n),n.clipTo(r),r.build(n.allPolygons()),r.invert(),(r=new e(r)).matrix=this.matrix,r}},{key:"toGeometry",value:function(){var e,t,r,n,a,i,l,s,u,c,d=(new o.Matrix4).getInverse(this.matrix),p=new o.Geometry,f=this.tree.allPolygons(),h=f.length,y={};for(e=0;e<h;e++)for(n=(r=f[e]).vertices.length,t=2;t<n;t++)c=[],s=r.vertices[0],c.push(new o.Vector2(s.uv.x,s.uv.y)),(s=new o.Vector3(s.x,s.y,s.z)).applyMatrix4(d),void 0!==y[s.x+","+s.y+","+s.z]?a=y[s.x+","+s.y+","+s.z]:(p.vertices.push(s),a=y[s.x+","+s.y+","+s.z]=p.vertices.length-1),s=r.vertices[t-1],c.push(new o.Vector2(s.uv.x,s.uv.y)),(s=new o.Vector3(s.x,s.y,s.z)).applyMatrix4(d),void 0!==y[s.x+","+s.y+","+s.z]?i=y[s.x+","+s.y+","+s.z]:(p.vertices.push(s),i=y[s.x+","+s.y+","+s.z]=p.vertices.length-1),s=r.vertices[t],c.push(new o.Vector2(s.uv.x,s.uv.y)),(s=new o.Vector3(s.x,s.y,s.z)).applyMatrix4(d),void 0!==y[s.x+","+s.y+","+s.z]?l=y[s.x+","+s.y+","+s.z]:(p.vertices.push(s),l=y[s.x+","+s.y+","+s.z]=p.vertices.length-1),u=new o.Face3(a,i,l,new o.Vector3(r.normal.x,r.normal.y,r.normal.z)),p.faces.push(u),p.faceVertexUvs[0].push(c);return p}},{key:"toMesh",value:function(e){var t=this.toGeometry(),r=new o.Mesh(t,e);return r.position.setFromMatrixPosition(this.matrix),r.rotation.setFromRotationMatrix(this.matrix),r}}]),e}();t.default=l;var s=function(){function e(t,r,n){i(this,e),t instanceof Array||(t=[]),this.vertices=t,t.length>0?this.calculateProperties():this.normal=this.w=void 0}return a(e,[{key:"calculateProperties",value:function(){var e=this.vertices[0],t=this.vertices[1],r=this.vertices[2];return this.normal=t.clone().subtract(e).cross(r.clone().subtract(e)).normalize(),this.w=this.normal.clone().dot(e),this}},{key:"clone",value:function(){var t,r,n=new e;for(t=0,r=this.vertices.length;t<r;t++)n.vertices.push(this.vertices[t].clone());return n.calculateProperties(),n}},{key:"flip",value:function(){var e,t=[];for(this.normal.multiplyScalar(-1),this.w*=-1,e=this.vertices.length-1;e>=0;e--)t.push(this.vertices[e]);return this.vertices=t,this}},{key:"classifyVertex",value:function(e){var t=this.normal.dot(e)-this.w;return t<-1e-5?2:t>1e-5?1:0}},{key:"classifySide",value:function(e){var t,r,n,a=0,o=0,i=e.vertices.length;for(t=0;t<i;t++)r=e.vertices[t],1===(n=this.classifyVertex(r))?a++:2===n&&o++;return a>0&&0===o?1:0===a&&o>0?2:0===a&&0===o?0:3}},{key:"splitPolygon",value:function(t,r,n,a,o){var i=this.classifySide(t);if(0===i)(this.normal.dot(t.normal)>0?r:n).push(t);else if(1===i)a.push(t);else if(2===i)o.push(t);else{var l,s,u,c,d,p,f,h,y,m=[],g=[];for(s=0,l=t.vertices.length;s<l;s++)u=(s+1)%l,p=t.vertices[s],f=t.vertices[u],c=this.classifyVertex(p),d=this.classifyVertex(f),2!=c&&m.push(p),1!=c&&g.push(p),3==(c|d)&&(h=(this.w-this.normal.dot(p))/this.normal.dot(f.clone().subtract(p)),y=p.interpolate(f,h),m.push(y),g.push(y));m.length>=3&&a.push(new e(m).calculateProperties()),g.length>=3&&o.push(new e(g).calculateProperties())}}}]),e}(),u=function(){function e(t,r,n,a,l){i(this,e),this.x=t,this.y=r,this.z=n,this.normal=a||new o.Vector3,this.uv=l||new o.Vector2}return a(e,[{key:"clone",value:function(){return new e(this.x,this.y,this.z,this.normal.clone(),this.uv.clone())}},{key:"add",value:function(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this}},{key:"subtract",value:function(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this}},{key:"multiplyScalar",value:function(e){return this.x*=e,this.y*=e,this.z*=e,this}},{key:"cross",value:function(e){var t=this.x,r=this.y,n=this.z;return this.x=r*e.z-n*e.y,this.y=n*e.x-t*e.z,this.z=t*e.y-r*e.x,this}},{key:"normalize",value:function(){var e=Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z);return this.x/=e,this.y/=e,this.z/=e,this}},{key:"dot",value:function(e){return this.x*e.x+this.y*e.y+this.z*e.z}},{key:"lerp",value:function(e,t){return this.add(e.clone().subtract(this).multiplyScalar(t)),this.normal.add(e.normal.clone().sub(this.normal).multiplyScalar(t)),this.uv.add(e.uv.clone().sub(this.uv).multiplyScalar(t)),this}},{key:"interpolate",value:function(e,t){return this.clone().lerp(e,t)}},{key:"applyMatrix4",value:function(e){var t=this.x,r=this.y,n=this.z,a=e.elements;return this.x=a[0]*t+a[4]*r+a[8]*n+a[12],this.y=a[1]*t+a[5]*r+a[9]*n+a[13],this.z=a[2]*t+a[6]*r+a[10]*n+a[14],this}}]),e}(),c=function(){function e(t){i(this,e);var r,n,a=[],o=[];if(this.polygons=[],this.front=this.back=void 0,t instanceof Array&&0!==t.length){for(this.divider=t[0].clone(),r=0,n=t.length;r<n;r++)this.divider.splitPolygon(t[r],this.polygons,this.polygons,a,o);a.length>0&&(this.front=new e(a)),o.length>0&&(this.back=new e(o))}}return a(e,[{key:"isConvex",value:function(e){var t,r;for(t=0;t<e.length;t++)for(r=0;r<e.length;r++)if(t!==r&&2!==e[t].classifySide(e[r]))return!1;return!0}},{key:"build",value:function(t){var r,n,a=[],o=[];for(this.divider||(this.divider=t[0].clone()),r=0,n=t.length;r<n;r++)this.divider.splitPolygon(t[r],this.polygons,this.polygons,a,o);a.length>0&&(this.front||(this.front=new e),this.front.build(a)),o.length>0&&(this.back||(this.back=new e),this.back.build(o))}},{key:"allPolygons",value:function(){var e=this.polygons.slice();return this.front&&(e=e.concat(this.front.allPolygons())),this.back&&(e=e.concat(this.back.allPolygons())),e}},{key:"clone",value:function(){var t=new e;return t.divider=this.divider.clone(),t.polygons=this.polygons.map((function(e){return e.clone()})),t.front=this.front&&this.front.clone(),t.back=this.back&&this.back.clone(),t}},{key:"invert",value:function(){var e,t,r;for(e=0,t=this.polygons.length;e<t;e++)this.polygons[e].flip();return this.divider.flip(),this.front&&this.front.invert(),this.back&&this.back.invert(),r=this.front,this.front=this.back,this.back=r,this}},{key:"clipPolygons",value:function(e){var t,r,n,a;if(!this.divider)return e.slice();for(n=[],a=[],t=0,r=e.length;t<r;t++)this.divider.splitPolygon(e[t],n,a,n,a);return this.front&&(n=this.front.clipPolygons(n)),a=this.back?this.back.clipPolygons(a):[],n.concat(a)}},{key:"clipTo",value:function(e){this.polygons=e.clipPolygons(this.polygons),this.front&&this.front.clipTo(e),this.back&&this.back.clipTo(e)}}]),e}();window.ThreeBSP=l},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e};t.default=function(e,t,r){var l={name:e,prototype:"areas",info:n({},t,{visibility:{catalog:!1,layerElementsVisible:!1}}),properties:{patternColor:{label:s.t("color"),type:"color",defaultValue:i.AREA_MESH_COLOR.unselected},thickness:{label:s.t("thickness"),type:"length-measure",defaultValue:{length:0}}},render2D:function(e,t,r){var n="";e.vertices.forEach((function(e,r){var a=t.vertices.get(e);n+=(r?"L":"M")+a.x+" "+a.y+" "})),e.holes.forEach((function(e){t.areas.get(e).vertices.reverse().forEach((function(e,r){var a=t.vertices.get(e);n+=(r?"L":"M")+a.x+" "+a.y+" "}))}));var o=e.selected?i.AREA_MESH_COLOR.selected:e.properties.get("patternColor");return a.default.createElement("path",{d:n,fill:o})},render3D:function(e,t,n){return(0,o.createArea)(e,t,n,r)},updateRender3D:function(e,t,n,a,i,l,s,u){return(0,o.updatedArea)(e,t,n,r,a,i,l,s,u)}};if(r&&r!=={}){var u={none:"None"};for(var c in r)u[c]=r[c].name;l.properties.texture={label:s.t("texture"),type:"enum",defaultValue:"none",values:u}}return l};var a=l(r(0)),o=r(408),i=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}(r(3));function l(e){return e&&e.__esModule?e:{default:e}}var s=new(l(r(59)).default)},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createArea=function(e,t,r,s){var u=[];e.vertices.forEach((function(e){u.push(t.vertices.get(e))}));var c=e.properties.get("texture"),d=e.properties.get("patternColor");e.selected?d=a.AREA_MESH_COLOR.selected:c&&"none"!==c&&(d=a.AREA_MESH_COLOR.unselected);var p=new n.Shape;p.moveTo(u[0].x,u[0].y);for(var f=1;f<u.length;f++)p.lineTo(u[f].x,u[f].y);var h=new n.MeshPhongMaterial({side:n.DoubleSide,color:d});e.holes.forEach((function(e){var r=[];t.getIn(["areas",e,"vertices"]).forEach((function(e){var n=t.getIn(["vertices",e]),a=n.x,o=n.y;r.push([a,o])})),r=r.reverse();var n=l(r);p.holes.push(n)}));var y=new n.ShapeGeometry(p);i(y);var m=(new n.Box3).setFromObject(new n.Mesh(y,new n.MeshBasicMaterial)),g=m.max.x-m.min.x,v=m.max.y-m.min.y,E=s[c];o(h,E,g,v);var _=new n.Mesh(y,h);return _.rotation.x-=Math.PI/2,_.name="floor",Promise.resolve(_)},t.updatedArea=function(e,t,r,n,o,i,l,s,u){var c=function(){return s(),u()},d=o.getObjectByName("floor");if("selected"==l[0]){var p=e.selected?a.AREA_MESH_COLOR.selected:e.properties.get("patternColor")||a.AREA_MESH_COLOR.unselected;d.material.color.set(p)}else{if("properties"!=l[0])return c();if("texture"===l[1])return c()}return Promise.resolve(o)};var n=r(10),a=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}(r(3));var o=function(e,t,r,a){var o=new n.TextureLoader;t&&(e.map=o.load(t.uri),e.needsUpdate=!0,e.map.wrapS=n.RepeatWrapping,e.map.wrapT=n.RepeatWrapping,e.map.repeat.set(r*t.lengthRepeatScale,a*t.heightRepeatScale),t.normal&&(e.normalMap=o.load(t.normal.uri),e.normalScale=new n.Vector2(t.normal.normalScaleX,t.normal.normalScaleY),e.normalMap.wrapS=n.RepeatWrapping,e.normalMap.wrapT=n.RepeatWrapping,e.normalMap.repeat.set(r*t.normal.lengthRepeatScale,a*t.normal.heightRepeatScale)))},i=function(e){e.computeBoundingBox();var t=e.boundingBox,r=t.min,a=t.max,o=new n.Vector2(0-r.x,0-r.y),i=new n.Vector2(a.x-r.x,a.y-r.y);e.faceVertexUvs[0]=e.faces.map((function(t){var r=e.vertices[t.a],a=e.vertices[t.b],l=e.vertices[t.c];return[new n.Vector2((r.x+o.x)/i.x,(r.y+o.y)/i.y),new n.Vector2((a.x+o.x)/i.x,(a.y+o.y)/i.y),new n.Vector2((l.x+o.x)/i.x,(l.y+o.y)/i.y)]})),e.uvsNeedUpdate=!0};var l=function(e){var t=new n.Shape;t.moveTo(e[0][0],e[0][1]);for(var r=1;r<e.length;r++)t.lineTo(e[r][0],e[r][1]);return t}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(34),a={parquet:{name:"Parquet",uri:r(410),lengthRepeatScale:.004,heightRepeatScale:.004},tile1:{name:"Tile1",uri:r(411),lengthRepeatScale:.01,heightRepeatScale:.01},ceramic:{name:"Ceramic Tile",uri:r(412),lengthRepeatScale:.02,heightRepeatScale:.02},strand_porcelain:{name:"Strand Porcelain Tile",uri:r(413),lengthRepeatScale:.02,heightRepeatScale:.02},grass:{name:"Grass",uri:r(414),lengthRepeatScale:.01,heightRepeatScale:.01}};t.default=n.ElementsFactories.AreaFactory("area",{title:"area",tag:["area"],description:"Generic Room",image:""},a)},function(e,t,r){e.exports=r.p+"catalog/areas/area/textures/parquet.jpg"},function(e,t,r){e.exports=r.p+"catalog/areas/area/textures/tile1.jpg"},function(e,t,r){e.exports=r.p+"catalog/areas/area/textures/ceramic-tile.jpg"},function(e,t,r){e.exports=r.p+"catalog/areas/area/textures/strand-porcelain.jpg"},function(e,t,r){e.exports=r.p+"catalog/areas/area/textures/grass.jpg"},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(34),a={title:"wall",tag:["wall"],description:"Wall with bricks or painted",image:r(416),visibility:{catalog:!0,layerElementsVisible:!0}},o={bricks:{name:"Bricks",uri:r(417),lengthRepeatScale:.01,heightRepeatScale:.01,normal:{uri:r(418),lengthRepeatScale:.01,heightRepeatScale:.01,normalScaleX:.8,normalScaleY:.8}},painted:{name:"Painted",uri:r(419),lengthRepeatScale:.01,heightRepeatScale:.01,normal:{uri:r(420),lengthRepeatScale:.01,heightRepeatScale:.01,normalScaleX:.4,normalScaleY:.4}}};t.default=n.ElementsFactories.WallFactory("wall",a,o)},function(e,t,r){e.exports=r.p+"catalog/lines/wall/wall.png"},function(e,t,r){e.exports=r.p+"catalog/lines/wall/textures/bricks.jpg"},function(e,t,r){e.exports=r.p+"catalog/lines/wall/textures/bricks-normal.jpg"},function(e,t,r){e.exports=r.p+"catalog/lines/wall/textures/painted.jpg"},function(e,t,r){e.exports=r.p+"catalog/lines/wall/textures/painted-normal.jpg"},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n,a=r(0),o=(n=a)&&n.__esModule?n:{default:n},i=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}(r(10));var l=new i.MeshLambertMaterial({color:0}),s=new i.MeshLambertMaterial({color:12046060}),u=new i.MeshLambertMaterial({color:13807722}),c=new i.MeshLambertMaterial({color:16773070}),d=[u,u,u,u,c,c];function p(e){var t=new i.Object3D,r=new i.CylinderGeometry(e/100,e/100,e/32.5,Math.round(32)),n=new i.SphereGeometry(e/100,Math.round(32),Math.round(32)),a=new i.CylinderGeometry(e/100,e/100,e/14.5,Math.round(32)),o=new i.Mesh(r,l),s=new i.Mesh(n,l),u=new i.Mesh(a,l),c=new i.Mesh(n,l);return u.rotation.z=Math.PI/2,u.position.x=e/14.5/2,s.position.y=-e/32.5/2,c.position.y=-e/14.5/2,u.add(c),s.add(u),o.add(s),t.add(o),t}function f(){var e=new i.Object3D,t=new i.BoxGeometry(7.6,28,2),r=new i.CylinderGeometry(3.6,3.6,2,Math.round(32)),n=function(){var e=new i.Object3D,t=new i.CylinderGeometry(1.5,1.5,4,Math.round(32)),r=new i.BoxGeometry(1.6,4,4),n=new i.BoxGeometry(1.4,4.06,.36),a=new i.Mesh(t,s),o=new i.Mesh(r,s),l=new i.Mesh(n,u);return o.position.z=1,a.add(o),a.add(l),e.add(a),e}(),a=new i.Mesh(t,l),o=new i.Mesh(r,l);return n.rotation.x=Math.PI/2,n.position.y=-3,o.rotation.x=Math.PI/2,o.position.y=-3.3,o.scale.z=1.5,a.add(n),a.add(o),e.add(a),e}t.default={name:"double door",prototype:"holes",info:{tag:["door"],title:"double door",description:"iron door",image:r(422)},properties:{width:{label:"width",type:"length-measure",defaultValue:{length:200,unit:"cm"}},height:{label:"height",type:"length-measure",defaultValue:{length:215,unit:"cm"}},thickness:{label:"thickness",type:"length-measure",defaultValue:{length:30,unit:"cm"}},altitude:{label:"altitude",type:"length-measure",defaultValue:{length:0,unit:"cm"}},flip_horizontal:{label:"flip",type:"checkbox",defaultValue:!1,values:{none:!1,yes:!0}}},render2D:function(e,t,r){var n=e.properties.get("flip_horizontal"),a=e.properties.get("width").get("length"),i="M0 -3  L"+a+" "+-3+"  L"+a+" 3  L0 3  z",l="M0,0  A"+a/4+","+a/4+" 0 0,1 "+a/4+","+a/4,s="M0,0  A"+(a/2+a/4)+","+(a/2+a/4)+" 0 0,0 "+(a/2+a/4)+","+(a/2+a/4),u=e.selected?{stroke:"#ff0000",strokeWidth:"4px",fill:"#ff0000",cursor:"move"}:{stroke:"#ff0000",strokeWidth:"3px",fill:"#ff0000"},c=e.selected?{stroke:"#ff0000",strokeWidth:"4px",strokeDasharray:"5,5",fill:"none",cursor:"move"}:{stroke:"#ff0000",strokeWidth:"3px",strokeDasharray:"5,5",fill:"none"};e.properties.get("width").get("length");return n?o.default.createElement("g",{transform:"translate("+-e.properties.get("width").get("length")/2+", 0)"},o.default.createElement("path",{key:"1",d:l,style:c,transform:"translate(0,"+-a/4+")"}),o.default.createElement("line",{key:"2",x1:0,y1:-3,x2:0,y2:-a/4-3,style:u}),o.default.createElement("path",{key:"3",d:s,style:c,transform:"translate("+a+","+(-a/2-a/4)+") rotate(90)"}),o.default.createElement("line",{key:"4",x1:a,y1:-3,x2:a,y2:-a/2-a/4-3,style:u}),o.default.createElement("path",{key:"5",d:i,style:u})):o.default.createElement("g",{transform:"translate("+-e.properties.get("width").get("length")/2+", 0)"},o.default.createElement("path",{key:"1",d:l,style:c,transform:"translate("+a+","+a/4+") rotate(180)"}),o.default.createElement("line",{key:"2",x1:0,y1:-3,x2:0,y2:a/2+a/4-3,style:u}),o.default.createElement("path",{key:"3",d:s,style:c,transform:"translate(0,"+(a/2+a/4)+") rotate(270)"}),o.default.createElement("line",{key:"4",x1:a,y1:-3,x2:a,y2:a/4-3,style:u}),o.default.createElement("path",{key:"5",d:i,style:u}))},render3D:function(e,t,r){var n=e.properties.get("flip_horizontal"),a=e.properties.get("width").get("length"),o=e.properties.get("height").get("length"),l=e.properties.get("thickness").get("length"),s=e.properties.get("altitude").get("length"),u=new i.Object3D;u.add(function(e,t,r){var n=new i.Mesh,a=new i.BoxGeometry(.75*e,t,r),o=new i.Mesh(a,d);o.position.x-=.25*e,n.add(o);var l=new i.BoxGeometry(.25*e,t,r),s=new i.Mesh(l,d);s.position.x+=.25*e,s.position.z+=r/10,n.add(s);var u=p(e);u.position.set(e/20,t/40,r/2+r/10),u.rotation.z+=Math.PI,u.rotation.x+=Math.PI/2,n.add(u);var c=f();c.position.set(e/20,0,r/2),c.rotation.x=0,n.add(c);var h=p(e);h.position.set(e/20,t/40,-r/2-r/10),h.rotation.z+=Math.PI,h.rotation.x-=Math.PI/2,n.add(h);var y=f();return y.position.set(e/20,0,-r/2),y.rotation.x=0,n.add(y),n}(a,o,l).clone(a,o,l));var c=(new i.Box3).setFromObject(u),h=Math.abs(c.max.x-c.min.x),y=Math.abs(c.max.y-c.min.y),m=Math.abs(c.max.z-c.min.z);if(e.selected){var g=new i.BoxHelper(u,10077179);g.material.linewidth=5,g.renderOrder=1e3,g.material.depthTest=!1,u.add(g)}return n&&(u.rotation.y+=Math.PI,u.position.x-=a/4),u.position.y+=s,u.position.x+=a/8,u.scale.set(a/h,o/y,l/m),Promise.resolve(u)}}},function(e,t,r){e.exports=r.p+"catalog/holes/door-double/door_double.png"},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=l(r(0)),a=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}(r(10)),o=r(44),i=l(r(32));function l(e){return e&&e.__esModule?e:{default:e}}var s=null,u={stroke:"#000",strokeWidth:"1px",fill:"url(#diagonalFillInvisible)"},c={stroke:"#0096fd",strokeWidth:"1px",fill:"#0096fd",cursor:"move"},d={stroke:"#000",strokeWidth:"1px",fill:"none"},p={stroke:"#0096fd",strokeWidth:"1px",fill:"none",cursor:"move"};t.default={name:"door",prototype:"holes",info:{title:"door",tag:["door"],description:"Wooden door",image:r(427)},properties:{width:{label:"Width",type:"length-measure",defaultValue:{length:80}},height:{label:"Height",type:"length-measure",defaultValue:{length:215}},altitude:{label:"Altitude",type:"length-measure",defaultValue:{length:0}},thickness:{label:"Thickness",type:"length-measure",defaultValue:{length:20}},flip_orizzontal:{label:"flip orizzontale",type:"checkbox",defaultValue:!1,values:{none:!1,yes:!0}}},render2D:function(e,t,r){var a=e.properties.get("flip_orizzontal"),o=e.properties.get("width").get("length"),i="M0 -3  L"+o+" "+-3+"  L"+o+" 3  L0 3  z",l="M0,0  A"+o+","+o+" 0 0,1 "+o+","+o,s=e.selected?c:u,f=e.selected?p:d,h=e.properties.get("width").get("length");return 0==a?n.default.createElement("g",{transform:"translate("+-h/2+", 0)"},n.default.createElement("path",{d:l,style:f,transform:"translate(0,"+o+") scale(1,"+-1+") rotate(0)"}),n.default.createElement("line",{x1:0,y1:o-3,x2:0,y2:0,style:s,transform:"scale(-1,1)"}),n.default.createElement("path",{d:i,style:s})):n.default.createElement("g",{transform:"translate("+-h/2+", 0)"},n.default.createElement("path",{d:l,style:f,transform:"translate(0,"+-o+") scale(1,1) rotate(0)"}),n.default.createElement("line",{x1:0,y1:-o-3,x2:0,y2:-3,style:s,transform:"scale(-1,1)"}),n.default.createElement("path",{d:i,style:s}))},render3D:function(e,t,n){var l=function(t){var r=(new a.Box3).setFromObject(t),n=r.max.x-r.min.x,o=r.max.y-r.min.y,i=r.max.z-r.min.z;if(e.selected){var l=new a.BoxHelper(t,10077179);l.material.linewidth=2,l.material.depthTest=!1,l.renderOrder=1e3,t.add(l)}var s=e.properties.get("width").get("length"),u=e.properties.get("height").get("length"),c=e.properties.get("thickness").get("length");return t.scale.set(s/n,u/o,c/i),t};if(s)return Promise.resolve(l(s.clone()));var u=r(428),c=r(429),d=r(430);return(0,o.loadObjWithMaterial)(u,c,i.default.dirname(d)+"/").then((function(e){return l((s=e).clone())}))}}},function(e,t,r){"use strict";var n,a=window.THREE||r(10);n=function(e){this.manager=void 0!==e?e:a.DefaultLoadingManager},Object.assign(n.prototype,a.EventDispatcher.prototype,{load:function(e,t,r,n){var o=this,i=new a.FileLoader(this.manager);i.setPath(this.path),i.load(e,(function(e){t(o.parse(e))}),r,n)},setPath:function(e){this.path=e},setTexturePath:function(e){this.texturePath=e},setBaseUrl:function(e){console.warn("THREE.MTLLoader: .setBaseUrl() is deprecated. Use .setTexturePath( path ) for texture path or .setPath( path ) for general base path instead."),this.setTexturePath(e)},setCrossOrigin:function(e){this.crossOrigin=e},setMaterialOptions:function(e){this.materialOptions=e},parse:function(e){for(var t=e.split("\n"),r={},a=/\s+/,o={},i=0;i<t.length;i++){var l=t[i];if(0!==(l=l.trim()).length&&"#"!==l.charAt(0)){var s=l.indexOf(" "),u=s>=0?l.substring(0,s):l;u=u.toLowerCase();var c=s>=0?l.substring(s+1):"";if(c=c.trim(),"newmtl"===u)r={name:c},o[c]=r;else if(r)if("ka"===u||"kd"===u||"ks"===u){var d=c.split(a,3);r[u]=[parseFloat(d[0]),parseFloat(d[1]),parseFloat(d[2])]}else r[u]=c}}var p=new n.MaterialCreator(this.texturePath||this.path,this.materialOptions);return p.setCrossOrigin(this.crossOrigin),p.setManager(this.manager),p.setMaterials(o),p}}),(n.MaterialCreator=function(e,t){this.baseUrl=e||"",this.options=t,this.materialsInfo={},this.materials={},this.materialsArray=[],this.nameLookup={},this.side=this.options&&this.options.side?this.options.side:a.FrontSide,this.wrap=this.options&&this.options.wrap?this.options.wrap:a.RepeatWrapping}).prototype={constructor:n.MaterialCreator,setCrossOrigin:function(e){this.crossOrigin=e},setManager:function(e){this.manager=e},setMaterials:function(e){this.materialsInfo=this.convert(e),this.materials={},this.materialsArray=[],this.nameLookup={}},convert:function(e){if(!this.options)return e;var t={};for(var r in e){var n=e[r],a={};for(var o in t[r]=a,n){var i=!0,l=n[o],s=o.toLowerCase();switch(s){case"kd":case"ka":case"ks":this.options&&this.options.normalizeRGB&&(l=[l[0]/255,l[1]/255,l[2]/255]),this.options&&this.options.ignoreZeroRGBs&&0===l[0]&&0===l[1]&&0===l[2]&&(i=!1)}i&&(a[s]=l)}}return t},preload:function(){for(var e in this.materialsInfo)this.create(e)},getIndex:function(e){return this.nameLookup[e]},getAsArray:function(){var e=0;for(var t in this.materialsInfo)this.materialsArray[e]=this.create(t),this.nameLookup[t]=e,e++;return this.materialsArray},create:function(e){return void 0===this.materials[e]&&this.createMaterial_(e),this.materials[e]},createMaterial_:function(e){var t=this.materialsInfo[e],r={name:e,side:this.side},n=function(e,t){return"string"!=typeof t||""===t?"":/^https?:\/\//i.test(t)?t:e+t};for(var o in t){var i=t[o];if(""!==i)switch(o.toLowerCase()){case"kd":r.color=(new a.Color).fromArray(i);break;case"ks":r.specular=(new a.Color).fromArray(i);break;case"map_kd":if(r.map)break;var l=this.getTextureParams(i,r);r.map=this.loadTexture(n(this.baseUrl,l.url)),r.map.repeat.copy(l.scale),r.map.offset.copy(l.offset),r.map.wrapS=this.wrap,r.map.wrapT=this.wrap;break;case"map_ks":if(r.specularMap)break;r.specularMap=this.loadTexture(n(this.baseUrl,i)),r.specularMap.wrapS=this.wrap,r.specularMap.wrapT=this.wrap;break;case"ns":r.shininess=parseFloat(i);break;case"d":i<1&&(r.opacity=i,r.transparent=!0);break;case"Tr":i>0&&(r.opacity=1-i,r.transparent=!0);break;case"map_bump":case"bump":if(r.bumpMap)break;l=this.getTextureParams(i,r);r.bumpMap=this.loadTexture(n(this.baseUrl,l.url)),r.bumpMap.repeat.copy(l.scale),r.bumpMap.offset.copy(l.offset),r.bumpMap.wrapS=this.wrap,r.bumpMap.wrapT=this.wrap}}return this.materials[e]=new a.MeshPhongMaterial(r),this.materials[e]},getTextureParams:function(e,t){var r,n={scale:new a.Vector2(1,1),offset:new a.Vector2(0,0)},o=e.split(/\s+/);return(r=o.indexOf("-bm"))>=0&&(t.bumpScale=parseFloat(o[r+1]),o.splice(r,2)),(r=o.indexOf("-s"))>=0&&(n.scale.set(parseFloat(o[r+1]),parseFloat(o[r+2])),o.splice(r,4)),(r=o.indexOf("-o"))>=0&&(n.offset.set(parseFloat(o[r+1]),parseFloat(o[r+2])),o.splice(r,4)),n.url=o.join(" ").trim(),n},loadTexture:function(e,t,r,n,o){var i,l=a.Loader.Handlers.get(e),s=void 0!==this.manager?this.manager:a.DefaultLoadingManager;return null===l&&(l=new a.TextureLoader(s)),l.setCrossOrigin&&l.setCrossOrigin(this.crossOrigin),i=l.load(e,r,n,o),void 0!==t&&(i.mapping=t),i}},e.exports=n},function(e,t,r){"use strict";var n,a=window.THREE||r(10);n=function(){var e=/^[og]\s*(.+)?/,t=/^mtllib /,r=/^usemtl /;function n(){var e={objects:[],object:{},vertices:[],normals:[],colors:[],uvs:[],materialLibraries:[],startObject:function(e,t){if(this.object&&!1===this.object.fromDeclaration)return this.object.name=e,void(this.object.fromDeclaration=!1!==t);var r=this.object&&"function"==typeof this.object.currentMaterial?this.object.currentMaterial():void 0;if(this.object&&"function"==typeof this.object._finalize&&this.object._finalize(!0),this.object={name:e||"",fromDeclaration:!1!==t,geometry:{vertices:[],normals:[],colors:[],uvs:[]},materials:[],smooth:!0,startMaterial:function(e,t){var r=this._finalize(!1);r&&(r.inherited||r.groupCount<=0)&&this.materials.splice(r.index,1);var n={index:this.materials.length,name:e||"",mtllib:Array.isArray(t)&&t.length>0?t[t.length-1]:"",smooth:void 0!==r?r.smooth:this.smooth,groupStart:void 0!==r?r.groupEnd:0,groupEnd:-1,groupCount:-1,inherited:!1,clone:function(e){var t={index:"number"==typeof e?e:this.index,name:this.name,mtllib:this.mtllib,smooth:this.smooth,groupStart:0,groupEnd:-1,groupCount:-1,inherited:!1};return t.clone=this.clone.bind(t),t}};return this.materials.push(n),n},currentMaterial:function(){if(this.materials.length>0)return this.materials[this.materials.length-1]},_finalize:function(e){var t=this.currentMaterial();if(t&&-1===t.groupEnd&&(t.groupEnd=this.geometry.vertices.length/3,t.groupCount=t.groupEnd-t.groupStart,t.inherited=!1),e&&this.materials.length>1)for(var r=this.materials.length-1;r>=0;r--)this.materials[r].groupCount<=0&&this.materials.splice(r,1);return e&&0===this.materials.length&&this.materials.push({name:"",smooth:this.smooth}),t}},r&&r.name&&"function"==typeof r.clone){var n=r.clone(0);n.inherited=!0,this.object.materials.push(n)}this.objects.push(this.object)},finalize:function(){this.object&&"function"==typeof this.object._finalize&&this.object._finalize(!0)},parseVertexIndex:function(e,t){var r=parseInt(e,10);return 3*(r>=0?r-1:r+t/3)},parseNormalIndex:function(e,t){var r=parseInt(e,10);return 3*(r>=0?r-1:r+t/3)},parseUVIndex:function(e,t){var r=parseInt(e,10);return 2*(r>=0?r-1:r+t/2)},addVertex:function(e,t,r){var n=this.vertices,a=this.object.geometry.vertices;a.push(n[e+0],n[e+1],n[e+2]),a.push(n[t+0],n[t+1],n[t+2]),a.push(n[r+0],n[r+1],n[r+2])},addVertexPoint:function(e){var t=this.vertices;this.object.geometry.vertices.push(t[e+0],t[e+1],t[e+2])},addVertexLine:function(e){var t=this.vertices;this.object.geometry.vertices.push(t[e+0],t[e+1],t[e+2])},addNormal:function(e,t,r){var n=this.normals,a=this.object.geometry.normals;a.push(n[e+0],n[e+1],n[e+2]),a.push(n[t+0],n[t+1],n[t+2]),a.push(n[r+0],n[r+1],n[r+2])},addColor:function(e,t,r){var n=this.colors,a=this.object.geometry.colors;a.push(n[e+0],n[e+1],n[e+2]),a.push(n[t+0],n[t+1],n[t+2]),a.push(n[r+0],n[r+1],n[r+2])},addUV:function(e,t,r){var n=this.uvs,a=this.object.geometry.uvs;a.push(n[e+0],n[e+1]),a.push(n[t+0],n[t+1]),a.push(n[r+0],n[r+1])},addUVLine:function(e){var t=this.uvs;this.object.geometry.uvs.push(t[e+0],t[e+1])},addFace:function(e,t,r,n,a,o,i,l,s){var u=this.vertices.length,c=this.parseVertexIndex(e,u),d=this.parseVertexIndex(t,u),p=this.parseVertexIndex(r,u);if(this.addVertex(c,d,p),void 0!==n&&""!==n){var f=this.uvs.length;c=this.parseUVIndex(n,f),d=this.parseUVIndex(a,f),p=this.parseUVIndex(o,f),this.addUV(c,d,p)}if(void 0!==i&&""!==i){var h=this.normals.length;c=this.parseNormalIndex(i,h),d=i===l?c:this.parseNormalIndex(l,h),p=i===s?c:this.parseNormalIndex(s,h),this.addNormal(c,d,p)}this.colors.length>0&&this.addColor(c,d,p)},addPointGeometry:function(e){this.object.geometry.type="Points";for(var t=this.vertices.length,r=0,n=e.length;r<n;r++)this.addVertexPoint(this.parseVertexIndex(e[r],t))},addLineGeometry:function(e,t){this.object.geometry.type="Line";for(var r=this.vertices.length,n=this.uvs.length,a=0,o=e.length;a<o;a++)this.addVertexLine(this.parseVertexIndex(e[a],r));var i=0;for(o=t.length;i<o;i++)this.addUVLine(this.parseUVIndex(t[i],n))}};return e.startObject("",!1),e}function o(e){this.manager=void 0!==e?e:a.DefaultLoadingManager,this.materials=null}return o.prototype={constructor:o,load:function(e,t,r,n){var o=this,i=new a.FileLoader(o.manager);i.setPath(this.path),i.load(e,(function(e){t(o.parse(e))}),r,n)},setPath:function(e){this.path=e},setMaterials:function(e){return this.materials=e,this},parse:function(o){console.time("OBJLoader");var i=new n;-1!==o.indexOf("\r\n")&&(o=o.replace(/\r\n/g,"\n")),-1!==o.indexOf("\\\n")&&(o=o.replace(/\\\n/g,""));for(var l=o.split("\n"),s="",u="",c=[],d="function"==typeof"".trimLeft,p=0,f=l.length;p<f;p++)if(s=l[p],0!==(s=d?s.trimLeft():s.trim()).length&&"#"!==(u=s.charAt(0)))if("v"===u){var h=s.split(/\s+/);switch(h[0]){case"v":i.vertices.push(parseFloat(h[1]),parseFloat(h[2]),parseFloat(h[3])),8===h.length&&i.colors.push(parseFloat(h[4]),parseFloat(h[5]),parseFloat(h[6]));break;case"vn":i.normals.push(parseFloat(h[1]),parseFloat(h[2]),parseFloat(h[3]));break;case"vt":i.uvs.push(parseFloat(h[1]),parseFloat(h[2]))}}else if("f"===u){for(var y=s.substr(1).trim().split(/\s+/),m=[],g=0,v=y.length;g<v;g++){var E=y[g];if(E.length>0){var _=E.split("/");m.push(_)}}var O=m[0];for(g=1,v=m.length-1;g<v;g++){var b=m[g],w=m[g+1];i.addFace(O[0],b[0],w[0],O[1],b[1],w[1],O[2],b[2],w[2])}}else if("l"===u){var I=s.substring(1).trim().split(" "),S=[],M=[];if(-1===s.indexOf("/"))S=I;else for(var x=0,R=I.length;x<R;x++){var P=I[x].split("/");""!==P[0]&&S.push(P[0]),""!==P[1]&&M.push(P[1])}i.addLineGeometry(S,M)}else if("p"===u){var D=s.substr(1).trim().split(" ");i.addPointGeometry(D)}else if(null!==(c=e.exec(s))){var T=(" "+c[0].substr(1).trim()).substr(1);i.startObject(T)}else if(r.test(s))i.object.startMaterial(s.substring(7).trim(),i.materialLibraries);else if(t.test(s))i.materialLibraries.push(s.substring(7).trim());else{if("s"!==u){if("\0"===s)continue;throw new Error('THREE.OBJLoader: Unexpected line: "'+s+'"')}if((c=s.split(" ")).length>1){var A=c[1].trim().toLowerCase();i.object.smooth="0"!==A&&"off"!==A}else i.object.smooth=!0;(W=i.object.currentMaterial())&&(W.smooth=i.object.smooth)}i.finalize();var G=new a.Group;G.materialLibraries=[].concat(i.materialLibraries);for(p=0,f=i.objects.length;p<f;p++){var L=i.objects[p],C=L.geometry,N=L.materials,j="Line"===C.type,k="Points"===C.type,U=!1;if(0!==C.vertices.length){var V=new a.BufferGeometry;V.addAttribute("position",new a.Float32BufferAttribute(C.vertices,3)),C.normals.length>0?V.addAttribute("normal",new a.Float32BufferAttribute(C.normals,3)):V.computeVertexNormals(),C.colors.length>0&&(U=!0,V.addAttribute("color",new a.Float32BufferAttribute(C.colors,3))),C.uvs.length>0&&V.addAttribute("uv",new a.Float32BufferAttribute(C.uvs,2));for(var F,H=[],B=0,z=N.length;B<z;B++){var q=N[B],W=void 0;if(null!==this.materials)if(W=this.materials.create(q.name),!j||!W||W instanceof a.LineBasicMaterial){if(k&&W&&!(W instanceof a.PointsMaterial)){var Y=new a.PointsMaterial({size:10,sizeAttenuation:!1});Z.copy(W),W=Y}}else{var Z=new a.LineBasicMaterial;Z.copy(W),Z.lights=!1,W=Z}W||((W=j?new a.LineBasicMaterial:k?new a.PointsMaterial({size:1,sizeAttenuation:!1}):new a.MeshPhongMaterial).name=q.name),W.flatShading=!q.smooth,W.vertexColors=U?a.VertexColors:a.NoColors,H.push(W)}if(H.length>1){for(B=0,z=N.length;B<z;B++){q=N[B];V.addGroup(q.groupStart,q.groupCount,B)}F=j?new a.LineSegments(V,H):k?new a.Points(V,H):new a.Mesh(V,H)}else F=j?new a.LineSegments(V,H[0]):k?new a.Points(V,H[0]):new a.Mesh(V,H[0]);F.name=L.name,G.add(F)}}return console.timeEnd("OBJLoader"),G}},o}(),e.exports=n},,function(e,t,r){e.exports=r.p+"catalog/holes/door/door.png"},function(e,t,r){e.exports=r.p+"catalog/holes/door/door.mtl"},function(e,t,r){e.exports=r.p+"catalog/holes/door/door.obj"},function(e,t,r){e.exports=r.p+"catalog/holes/door/texture.jpg"},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=o(r(0)),a=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}(r(10));o(r(32));function o(e){return e&&e.__esModule?e:{default:e}}t.default={name:"gate",prototype:"holes",info:{tag:["gate"],title:"gate",description:"hole in the wall",image:r(432)},properties:{width:{label:"width",type:"length-measure",defaultValue:{length:80}},height:{label:"height",type:"length-measure",defaultValue:{length:215}},altitude:{label:"altitude",type:"length-measure",defaultValue:{length:0}},thickness:{label:"thickness",type:"length-measure",defaultValue:{length:30}}},render2D:function(e,t,r){var a=e.properties.get("width").get("length"),o="M0,0  A0,0 0 0,1 "+a+",0",i=e.selected?{stroke:"#0096fd",strokeWidth:"4px",fill:"#0096fd",cursor:"move"}:{stroke:"#000",strokeWidth:"3px",fill:"#000"},l=e.selected?{stroke:"#0096fd",strokeWidth:"4px",strokeDasharray:"5,5",fill:"none",cursor:"move"}:{stroke:"#000",strokeWidth:"3px",strokeDasharray:"5,5",fill:"none"},s=e.properties.get("width").get("length");return n.default.createElement("g",{transform:"translate("+-s/2+", 0)"},n.default.createElement("line",{key:"1",x1:0,y1:a/6-3,x2:0,y2:-a/6+3,style:i,transform:"scale(-1,1)"}),n.default.createElement("line",{key:"2",x1:-a,y1:a/6-3,x2:-a,y2:-a/6+3,style:i,transform:"scale(-1,1)"}),n.default.createElement("path",{key:"3",d:o,style:l}))},render3D:function(e,t,r){var n=new a.Object3D;return Promise.resolve(n)}}},function(e,t,r){e.exports=r.p+"catalog/holes/gate/gate.jpg"},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n,a=r(0),o=(n=a)&&n.__esModule?n:{default:n},i=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}(r(10));var l=new i.MeshLambertMaterial({color:0}),s=new i.MeshLambertMaterial({color:3442561}),u=new i.MeshLambertMaterial({color:16711680}),c=new i.MeshLambertMaterial({color:4441819,opacity:.7,transparent:!0}),d=new i.MeshLambertMaterial({color:12046060}),p=(new i.MeshLambertMaterial({color:3223857}),new i.MeshLambertMaterial({color:2171169}),new i.MeshLambertMaterial({color:5664126}));function f(){var e,t,r,n,a,o,s,u=new i.Mesh,c=g(),f=g(),v=function(){var e=new i.Object3D,t=function(){var e=new i.Object3D,t=new i.BoxGeometry(.038,.14,.01),r=new i.CylinderGeometry(.023,.023,.01,Math.round(32)),n=function(){var e=new i.Object3D,t=new i.CylinderGeometry(.005,.005,.02,Math.round(32)),r=new i.BoxGeometry(.008,.02,.02),n=new i.BoxGeometry(.007,.0203,.0018),a=new i.Mesh(t,d),o=new i.Mesh(r,d),l=new i.Mesh(n,p);return o.position.z=.01,a.add(o),a.add(l),e.add(a),e}(),a=new i.Mesh(t,l),o=new i.Mesh(r,l);return n.rotation.x=Math.PI/2,n.position.y=-.03,o.rotation.x=Math.PI/2,o.position.y=-.033,o.scale.z=1.5,a.add(n),a.add(o),e.add(a),e}(),r=function(){var e=new i.Object3D,t=new i.CylinderGeometry(.01,.01,.03,Math.round(32)),r=new i.SphereGeometry(.01,Math.round(32),Math.round(32)),n=new i.CylinderGeometry(.01,.01,.07,Math.round(32)),a=new i.Mesh(t,l),o=new i.Mesh(r,l),s=new i.Mesh(n,l),u=new i.Mesh(r,l);return s.rotation.z=Math.PI/2,s.position.x=.035,o.position.y=-.015,u.position.y=-.035,s.add(u),o.add(s),a.add(o),e.add(a),e}();return r.rotation.x=Math.PI/2,r.position.set(0,.04,-.02),e.add(t),e.add(r),e.scale.set(1.1,1.1,1.1),e}(),E=m(),_=m(),O=y(),b=y(),w=(e=new i.Object3D,t=new i.BoxGeometry(.01,.1,.02),r=new i.BoxGeometry(.01,.02,.01),n=new i.BoxGeometry(.006,.04,.008),a=new i.Mesh(t,d),o=new i.Mesh(r,p),s=new i.Mesh(n,p),o.position.set(-.004,.03,0),s.position.y=-.05,o.add(s),a.add(o),e.add(a),e),I=h(),S=h();return w.position.set(-.05,-.02,.03),v.position.set(-.235,.425,-.03),E.position.set(.2975,0,-.03),_.position.set(.3,0,.0385),f.rotation.y=Math.PI,f.position.set(-.259,0,.0043),c.position.set(.259,0,-.0043),O.position.set(0,.4,.03),b.position.set(0,.4,-.031),v.add(w),c.add(v),c.add(O),f.add(b),c.add(E),u.add(c),f.add(_),c.add(I),f.add(S),u.add(f),u}function h(){var e=new i.Object3D,t=new i.CylinderGeometry(.012,.012,1.905,Math.round(32)),r=new i.CylinderGeometry(.007,.007,1.907,Math.round(32)),n=new i.Mesh(t,d),a=new i.Mesh(r,p);return e.position.set(-.275,.35,0),e.scale.x=1/1.3,n.add(a),e.add(n),e}function y(){var e=new i.Object3D,t=new i.BoxGeometry(.5,.1,.005),r=new i.CylinderGeometry(.04,.04,.48,Math.round(32)),n=new i.CylinderGeometry(.042,.042,.01,Math.round(32)),a=new i.Mesh(t,l),o=new i.Mesh(r,u),s=new i.Mesh(n,l),c=new i.Mesh(n,l);return a.position.z=.0025,o.rotation.z=Math.PI/2,s.position.y=.245,c.position.y=-.245,o.add(s),o.add(c),a.add(o),e.add(a),e}function m(){var e=new i.Object3D,t=new i.CylinderGeometry(.009,.009,.04,Math.round(32)),r=new i.CylinderGeometry(.01,.01,.04,Math.round(32)),n=new i.Mesh(t,s),a=new i.Mesh(r,s),o=new i.Mesh(t,s),l=new i.Mesh(r,s);return n.position.y=-.4,a.position.y=.04,o.position.y=1,l.position.y=.04,o.add(l),n.add(a),e.add(o),e.add(n),e}function g(){var e=new i.Object3D,t=new i.BoxGeometry(.6,1.2,.01),r=new i.BoxGeometry(.2,.7,.01),n=new i.BoxGeometry(.2,.2,.01),a=new i.CylinderGeometry(.005,.005,1.9,Math.round(32)),o=new i.BoxGeometry(.03,1.9,.01),l=new i.BoxGeometry(.2,.7,.06),u=new i.BoxGeometry(.19,.7,.06),d=new i.BoxGeometry(.2,.2,.06),p=new i.BoxGeometry(.2,.5,.05),f=new i.BoxGeometry(.59,1.2,.06),h=new i.BoxGeometry(.01,.52,.064),y=new i.BoxGeometry(.224,.01,.064),m=new i.Mesh(t,s),g=new i.Mesh(u,s),v=new i.Mesh(l,s),E=new i.Mesh(f,s),_=new i.Mesh(r,s),O=new i.Mesh(r,s),b=new i.Mesh(n,s),w=new i.Mesh(d,s),I=new i.Mesh(a,s),S=new i.Mesh(o,s),M=new i.Mesh(p,c),x=new i.Mesh(h,s),R=new i.Mesh(h,s),P=new i.Mesh(y,s),D=new i.Mesh(y,s);return m.position.set(-(.6-.59)/2,0,-.025),_.position.set(-.2,.95,0),O.position.set(.2,.95,0),b.position.set(0,.35,-.025),w.position.set(0,.35,0),M.position.set(-.005,.85,0),v.position.z=.025,g.position.set(.005,0,.025),I.position.set(-.3,.35,0),x.position.x=.1+.007,R.position.x=-.1-.007,P.position.y=.257,D.position.y=-.257,S.position.set(.01,0,-.005),I.add(S),M.add(b),M.add(x),M.add(R),M.add(P),M.add(D),M.add(b),M.add(w),E.add(M),_.add(g),O.add(v),m.add(I),m.add(_),m.add(O),E.add(m),e.add(E),e.scale.x=.9,e}t.default={name:"double panic door",prototype:"holes",info:{tag:["door"],title:"double panic door",description:"iron door",image:r(434)},properties:{width:{label:"width",type:"length-measure",defaultValue:{length:200,unit:"cm"}},height:{label:"height",type:"length-measure",defaultValue:{length:215,unit:"cm"}},thickness:{label:"thickness",type:"length-measure",defaultValue:{length:30,unit:"cm"}},altitude:{label:"altitude",type:"length-measure",defaultValue:{length:0,unit:"cm"}},flip_horizontal:{label:"flip",type:"checkbox",defaultValue:!1,values:{none:!1,yes:!0}}},render2D:function(e,t,r){var n=e.properties.get("flip_horizontal"),a=e.properties.get("width").get("length"),i="M0 -3  L"+a+" "+-3+"  L"+a+" 3  L0 3  z",l="M0,0  A"+a/2+","+a/2+" 0 0,1 "+a/2+","+a/2,s="M0,0  A"+a/2+","+a/2+" 0 0,0 "+a/2+","+a/2,u=e.selected?{stroke:"#ff0000",strokeWidth:"4px",fill:"#ff0000",cursor:"move"}:{stroke:"#ff0000",strokeWidth:"3px",fill:"#ff0000"},c=e.selected?{stroke:"#ff0000",strokeWidth:"4px",strokeDasharray:"5,5",fill:"none",cursor:"move"}:{stroke:"#ff0000",strokeWidth:"3px",strokeDasharray:"5,5",fill:"none"};e.properties.get("width").get("length");return n?o.default.createElement("g",{transform:"translate("+-e.properties.get("width").get("length")/2+", 0)"},o.default.createElement("path",{key:"1",d:l,style:c,transform:"translate(0,"+-a/2+")"}),o.default.createElement("line",{key:"2",x1:0,y1:-3,x2:0,y2:-a/2-3,style:u}),o.default.createElement("path",{key:"3",d:s,style:c,transform:"translate("+a+","+-a/2+") rotate(90)"}),o.default.createElement("line",{key:"4",x1:a,y1:-3,x2:a,y2:-a/2-3,style:u}),o.default.createElement("path",{key:"5",d:i,style:u})):o.default.createElement("g",{transform:"translate("+-e.properties.get("width").get("length")/2+", 0)"},o.default.createElement("path",{key:"1",d:l,style:c,transform:"translate("+a+","+a/2+") rotate(180)"}),o.default.createElement("line",{key:"2",x1:0,y1:-3,x2:0,y2:a/2-3,style:u}),o.default.createElement("path",{key:"3",d:s,style:c,transform:"translate(0,"+a/2+") rotate(270)"}),o.default.createElement("line",{key:"4",x1:a,y1:-3,x2:a,y2:a/2-3,style:u}),o.default.createElement("path",{key:"5",d:i,style:u}))},render3D:function(e,t,r){var n=e.properties.get("flip_horizontal"),a=e.properties.get("width").get("length"),o=e.properties.get("height").get("length"),l=e.properties.get("thickness").get("length"),s=e.properties.get("altitude").get("length"),u=new i.Object3D;u.add(f().clone());var c=(new i.Box3).setFromObject(u),d=Math.abs(c.max.x-c.min.x),p=Math.abs(c.max.y-c.min.y),h=Math.abs(c.max.z-c.min.z);if(e.selected){var y=new i.BoxHelper(u,10077179);y.material.linewidth=5,y.renderOrder=1e3,y.material.depthTest=!1,u.add(y)}return n&&(u.rotation.y+=Math.PI),u.position.y+=s,u.scale.set(a/d,o/p,l/h),Promise.resolve(u)}}},function(e,t,r){e.exports=r.p+"catalog/holes/panic-door-double/panicDoorDouble.png"},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n,a=r(0),o=(n=a)&&n.__esModule?n:{default:n},i=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}(r(10));var l=new i.MeshLambertMaterial({color:0}),s=new i.MeshLambertMaterial({color:3442561}),u=new i.MeshLambertMaterial({color:16711680}),c=new i.MeshLambertMaterial({color:4441819,opacity:.7,transparent:!0}),d=new i.MeshLambertMaterial({color:12046060}),p=(new i.MeshLambertMaterial({color:3223857}),new i.MeshLambertMaterial({color:2171169}),new i.MeshLambertMaterial({color:5664126})),f=void 0,h=void 0;function y(e){var t,r,n,a,o,u,f,h,y,v,E,_,O,b,w,I,S,M,x,R,P,D,T,A,G,L,C,N,j,k,U,V,F,H,B,z,q,W,Y,Z,J=new i.Mesh,X=(t=new i.Object3D,r=new i.BoxGeometry(.6,1.2,.01),n=new i.BoxGeometry(.2,.7,.01),a=new i.BoxGeometry(.2,.2,.01),o=new i.CylinderGeometry(.005,.005,1.9,Math.round(32)),u=new i.BoxGeometry(.03,1.9,.01),f=new i.BoxGeometry(.2,.7,.06),h=new i.BoxGeometry(.19,.7,.06),y=new i.BoxGeometry(.2,.2,.06),v=new i.BoxGeometry(.2,.5,.05),E=new i.BoxGeometry(.59,1.2,.06),_=new i.BoxGeometry(.01,.52,.064),O=new i.BoxGeometry(.224,.01,.064),b=new i.Mesh(r,s),w=new i.Mesh(h,s),I=new i.Mesh(f,s),S=new i.Mesh(E,s),M=new i.Mesh(n,s),x=new i.Mesh(n,s),R=new i.Mesh(a,s),P=new i.Mesh(y,s),D=new i.Mesh(o,s),T=new i.Mesh(u,s),A=new i.Mesh(v,c),G=new i.Mesh(_,s),L=new i.Mesh(_,s),C=new i.Mesh(O,s),N=new i.Mesh(O,s),b.position.set(-(.6-.59)/2,0,-.025),M.position.set(-.2,.95,0),x.position.set(.2,.95,0),R.position.set(0,.35,-.025),P.position.set(0,.35,0),A.position.set(-.005,.85,0),I.position.z=.025,w.position.set(.005,0,.025),D.position.set(-.3,.35,0),G.position.x=.1+.007,L.position.x=-.1-.007,C.position.y=.257,N.position.y=-.257,T.position.set(.01,0,-.005),D.add(T),A.add(R),A.add(G),A.add(L),A.add(C),A.add(N),A.add(R),A.add(P),S.add(A),M.add(w),x.add(I),b.add(D),b.add(M),b.add(x),S.add(b),t.add(S),t.scale.x=1.3,t),K=function(e){var t=new i.Object3D,r=function(e){var t=new i.Object3D,r=new i.BoxGeometry(.038,.14,.01),n=new i.CylinderGeometry(.023,.023,.01,Math.round(32)),a=(u=new i.Object3D,c=new i.CylinderGeometry(.005,.005,.02,Math.round(32)),f=new i.BoxGeometry(.008,.02,.02),h=new i.BoxGeometry(.007,.0203,.0018),y=new i.Mesh(c,d),m=new i.Mesh(f,d),g=new i.Mesh(h,p),m.position.z=.01,y.add(m),y.add(g),u.add(y),u),o=new i.Mesh(r,l),s=new i.Mesh(n,l);var u,c,f,h,y,m,g;a.rotation.x=Math.PI/2,s.rotation.x=Math.PI/2,a.position.y=-.03,s.position.y=-.033,e||(o.position.x=.4);return s.scale.z=1.5,o.add(a),o.add(s),t.add(o),t}(e),n=function(){var e=new i.Object3D,t=new i.CylinderGeometry(.01,.01,.03,Math.round(32)),r=new i.SphereGeometry(.01,Math.round(32),Math.round(32)),n=new i.CylinderGeometry(.01,.01,.07,Math.round(32)),a=new i.Mesh(t,l),o=new i.Mesh(r,l),s=new i.Mesh(n,l),u=new i.Mesh(r,l);return s.rotation.z=Math.PI/2,s.position.x=.035,o.position.y=-.015,u.position.y=-.035,s.add(u),o.add(s),a.add(o),e.add(a),e}();n.rotation.x=Math.PI/2,e?n.position.set(0,.04,-.02):(n.position.set(.4,.04,-.02),n.rotation.y=Math.PI);return t.add(r),t.add(n),t.scale.set(1.1,1.1,1.1),t}(e),Q=g(),$=g(),ee=m(),te=m(),re=(j=new i.Object3D,k=new i.BoxGeometry(.01,.1,.02),U=new i.BoxGeometry(.01,.02,.01),V=new i.BoxGeometry(.006,.04,.008),F=new i.Mesh(k,d),H=new i.Mesh(U,p),B=new i.Mesh(V,p),H.position.set(-.004,.03,0),B.position.y=-.05,H.add(B),F.add(H),j.add(F),j),ne=(z=new i.Object3D,q=new i.CylinderGeometry(.012,.012,1.905,Math.round(32)),W=new i.CylinderGeometry(.007,.007,1.907,Math.round(32)),Y=new i.Mesh(q,d),Z=new i.Mesh(W,p),z.position.set(-.275,.35,0),z.scale.x=1/1.3,Y.add(Z),z.add(Y),z);return re.position.set(-.05,-.02,.03),K.position.set(-.235,.425,-.03),e?Q.position.set(.2975,0,-.03):Q.position.set(-.2975,0,-.03),$.position.set(.3,0,.0385),ee.position.set(0,.4,.03),te.position.set(0,.4,-.031),K.add(re),X.add(K),X.add(ee),X.add(Q),J.add(X),X.add(ne),J}function m(){var e=new i.Object3D,t=new i.BoxGeometry(.5,.1,.005),r=new i.CylinderGeometry(.04,.04,.48,Math.round(32)),n=new i.CylinderGeometry(.042,.042,.01,Math.round(32)),a=new i.Mesh(t,l),o=new i.Mesh(r,u),s=new i.Mesh(n,l),c=new i.Mesh(n,l);return a.position.z=.0025,o.rotation.z=Math.PI/2,s.position.y=.245,c.position.y=-.245,o.add(s),o.add(c),a.add(o),e.add(a),e}function g(){var e=new i.Object3D,t=new i.CylinderGeometry(.009,.009,.04,Math.round(32)),r=new i.CylinderGeometry(.01,.01,.04,Math.round(32)),n=new i.Mesh(t,s),a=new i.Mesh(r,s),o=new i.Mesh(t,s),l=new i.Mesh(r,s);return n.position.y=-.4,a.position.y=.04,o.position.y=1,l.position.y=.04,o.add(l),n.add(a),e.add(o),e.add(n),e}t.default={name:"panic door",prototype:"holes",info:{tag:["door"],title:"panic door",description:"iron door",image:r(436)},properties:{width:{label:"width",type:"length-measure",defaultValue:{length:100,unit:"cm"}},height:{label:"height",type:"length-measure",defaultValue:{length:215,unit:"cm"}},thickness:{label:"thickness",type:"length-measure",defaultValue:{length:30,unit:"cm"}},altitude:{label:"altitude",type:"length-measure",defaultValue:{length:0,unit:"cm"}},flip_horizontal:{label:"horizontal flip",type:"checkbox",defaultValue:"none",values:{none:"none",yes:"yes"}},flip_vertical:{label:"vertical flip",type:"checkbox",defaultValue:"right",values:{right:"right",left:"left"}}},render2D:function(e,t,r){var n=e.properties.get("flip_horizontal"),a=e.properties.get("flip_vertical"),i=e.properties.get("width").get("length"),l="M0 -3  L"+i+" "+-3+"  L"+i+" 3  L0 3  z",s="M0,0  A"+i+","+i+" 0 0,1 "+i+","+i,u=e.selected?{stroke:"#ff0000",strokeWidth:"4px",fill:"#ff0000",cursor:"move"}:{stroke:"#ff0000",strokeWidth:"3px",fill:"#ff0000"},c=e.selected?{stroke:"#ff0000",strokeWidth:"4px",strokeDasharray:"5,5",fill:"none",cursor:"move"}:{stroke:"#ff0000",strokeWidth:"3px",strokeDasharray:"5,5",fill:"none"},d=(e.properties.get("width").get("length"),void 0),p=void 0,y=void 0,m=void 0,g=void 0,v=void 0,E=void 0,_=void 0,O=void 0;return h=a?"right":"left","yes"===(f=n?"yes":"none")?(d=1,"right"===h?(m=i,g=-i,v=-i,_=0,E=-i,O=i,y=180,p=-1):(m=0,g=-i,v=0,_=0,E=0,O=-i,p=1,y=0)):"none"===f&&(d=-1,"left"===h?(m=i,g=0,v=0,_=0,E=0,O=-i,y=-90,p=-1):(m=0,g=0,v=i,_=0,E=i,O=i,y=90,p=1)),o.default.createElement("g",{transform:"translate("+-e.properties.get("width").get("length")/2+", 0)"},o.default.createElement("path",{key:"1",d:s,style:c,transform:"translate("+m+","+g+") scale("+d+","+p+") rotate("+y+")"}),o.default.createElement("line",{key:"2",x1:v,y1:_-3,x2:E,y2:O-3,style:u,transform:"scale("+-d+","+p+")"}),o.default.createElement("path",{key:"5",d:l,style:u}))},render3D:function(e,t,r){var n=e.properties.get("flip_horizontal"),a=e.properties.get("flip_vertical"),o=e.properties.get("width").get("length"),l=e.properties.get("height").get("length"),s=e.properties.get("thickness").get("length"),u=e.properties.get("altitude").get("length"),c=new i.Object3D;if(c.add(y(a).clone()),e.selected){var d=new i.BoxHelper(c,10077179);d.material.linewidth=5,d.renderOrder=1e3,d.material.depthTest=!1,c.add(d)}var p=(new i.Box3).setFromObject(c),f=Math.abs(p.max.x-p.min.x),h=Math.abs(p.max.y-p.min.y),m=Math.abs(p.max.z-p.min.z);return n&&(c.rotation.y+=Math.PI),c.position.y+=u,c.scale.set(o/f,l/h,s/m),Promise.resolve(c)}}},function(e,t,r){e.exports=r.p+"catalog/holes/panic-door/panicDoor.png"},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=l(r(0)),a=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}(r(10)),o=r(44),i=l(r(32));function l(e){return e&&e.__esModule?e:{default:e}}var s=null;t.default={name:"sash window",prototype:"holes",info:{title:"sash window",tag:["window"],description:"Sash window",image:r(438)},properties:{width:{label:"Width",type:"length-measure",defaultValue:{length:90}},height:{label:"Height",type:"length-measure",defaultValue:{length:100}},altitude:{label:"Altitude",type:"length-measure",defaultValue:{length:90}},thickness:{label:"Thickness",type:"length-measure",defaultValue:{length:10}}},render2D:function(e,t,r){var a=e.properties.get("width").get("length"),o="M0 -3  L"+a+" "+-3+"  L"+a+" 3  L0 3  z",i=e.selected?{stroke:"#0096fd",strokeWidth:"3px",fill:"#0096fd",cursor:"move"}:{stroke:"#000",strokeWidth:"3px",fill:"#000"},l=e.properties.get("width").get("length");return n.default.createElement("g",{transform:"translate("+-l/2+", 0)"},n.default.createElement("path",{key:"1",d:o,style:i}),n.default.createElement("line",{key:"2",x1:a/2,y1:-13,x2:a/2,y2:13,style:i}))},render3D:function(e,t,n){var l=function(t){var r=(new a.Box3).setFromObject(t),n=r.max.x-r.min.x,o=r.max.y-r.min.y,i=r.max.z-r.min.z;if(e.selected){var l=new a.BoxHelper(t,10077179);l.material.linewidth=2,l.material.depthTest=!1,l.renderOrder=1e3,t.add(l)}var s=e.properties.get("width").get("length"),u=e.properties.get("height").get("length"),c=e.properties.get("thickness").get("length");return t.scale.set(s/n,u/o,c/i),t};if(s)return Promise.resolve(l(s.clone()));var u=r(439),c=r(440),d=r(441);return(0,o.loadObjWithMaterial)(u,c,i.default.dirname(d)+"/").then((function(e){return l((s=e).clone())}))}}},function(e,t,r){e.exports=r.p+"catalog/holes/sash-window/window.png"},function(e,t,r){e.exports=r.p+"catalog/holes/sash-window/sash-window.mtl"},function(e,t,r){e.exports=r.p+"catalog/holes/sash-window/sash-window.obj"},function(e,t,r){e.exports=r.p+"catalog/holes/sash-window/texture.png"},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n,a=r(0),o=(n=a)&&n.__esModule?n:{default:n},i=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}(r(10));var l=new i.MeshLambertMaterial({color:4144959}),s=new i.MeshLambertMaterial({color:16777215,transparent:!0,opacity:.5}),u=new i.MeshLambertMaterial({color:0});t.default={name:"sliding door",prototype:"holes",info:{tag:["door"],title:"sliding door",description:"iron door",image:r(443)},properties:{width:{label:"width",type:"length-measure",defaultValue:{length:200,unit:"cm"}},height:{label:"height",type:"length-measure",defaultValue:{length:215,unit:"cm"}},thickness:{label:"thickness",type:"length-measure",defaultValue:{length:30,unit:"cm"}},altitude:{label:"altitude",type:"length-measure",defaultValue:{length:0,unit:"cm"}},flip_horizontal:{label:"horizontal flip",type:"checkbox",defaultValue:"none",values:{none:"none",yes:"yes"}},flip_vertical:{label:"vertical flip",type:"checkbox",defaultValue:"right",values:{right:"right",left:"left"}}},render2D:function(e,t,r){var n={stroke:"#0096fd",strokeWidth:"14px",fill:"#0096fd",cursor:"move"},a=e.properties.get("flip_horizontal"),i=e.properties.get("flip_vertical"),l=e.properties.get("width").get("length"),s=e.selected?n:{stroke:"#000",strokeWidth:"14px",fill:"#000"},u=e.selected?n:{stroke:"#000",strokeWidth:"16px",fill:"#000"},c=(e.properties.get("width").get("length"),void 0),d=void 0,p=void 0,f=void 0;return i=i?"right":"left","yes"===(a=a?"yes":"none")?(c=1,"right"===i?(p=0,f=l/2,d=-1):(p=l/2,f=l,d=-1)):(c=1,"right"===i?(p=l/2,f=l,d=1):(p=0,f=l/2,d=1)),o.default.createElement("g",{transform:"translate("+-e.properties.get("width").get("length")/2+", 0)"},o.default.createElement("line",{key:"1",x1:"0",y1:-3,x2:l,y2:-3,style:s,transform:"scale("+c+","+d+")"}),o.default.createElement("line",{key:"2",x1:p,y1:2,x2:f,y2:2,style:u,transform:"scale("+c+","+d+")"}),o.default.createElement("line",{key:"3",x1:l,y1:-3,x2:l,y2:18,style:u,transform:"scale("+c+","+d+")"}),o.default.createElement("line",{key:"4",x1:"0",y1:-3,x2:"0",y2:18,style:u,transform:"scale("+c+","+d+")"}))},render3D:function(e,t,r){var n=e.properties.get("flip_horizontal"),a=e.properties.get("flip_vertical"),o=e.properties.get("width").get("length"),c=e.properties.get("height").get("length"),d=e.properties.get("thickness").get("length"),p=e.properties.get("altitude").get("length");n=n?"yes":"none",a=a?"right":"left";var f=new i.Object3D;f.add(function(e){var t=new i.Mesh,r=new i.Shape;r.moveTo(1,2),r.lineTo(0,2),r.lineTo(0,0),r.lineTo(1,0);var n=new i.Path;n.moveTo(.65,1.75),n.lineTo(.35,1.75),n.lineTo(.35,1.25),n.lineTo(.65,1.25),r.holes.push(n);var a=new i.ExtrudeGeometry(r,{steps:2,depth:.05,bevelEnabled:!1,bevelThickness:1,bevelSize:1,bevelSegments:1}),o=new i.Mesh(a,l);"right"===e?o.position.set(-1,0,0):o.position.set(0,0,0),t.add(o);var c=new i.BoxGeometry(1,2,.05),d=new i.Mesh(c,l);"right"===e?d.position.set(1.5,1,.065):d.position.set(-.5,1,.065),o.add(d);var p=new i.BoxGeometry(2,.1,.1),f=new i.Mesh(p,l);f.position.set(-0,2.07,.05),t.add(f);var h=new i.BoxGeometry(.3,.5,.05),y=new i.Mesh(h,s);y.position.set(.5,1.5,.025),o.add(y);var m=new i.CylinderGeometry(.051,.051,.0625,80,80,!0);u.side=i.DoubleSide;var g=new i.Mesh(m,u);g.position.set(.2,1,.025),g.rotation.x=Math.PI/2,o.add(g);var v=new i.BoxGeometry(.1,.02,.0625),E=new i.Mesh(v,u);return E.position.set(.2,1,.025),o.add(E),"left"===e&&(g.position.x=.8,E.position.x=.8),t}(a).clone());var h=(new i.Box3).setFromObject(f),y=Math.abs(h.max.x-h.min.x),m=Math.abs(h.max.y-h.min.y),g=Math.abs(h.max.z-h.min.z);if(e.selected){var v=new i.BoxHelper(f,10077179);v.material.linewidth=5,v.renderOrder=1e3,v.material.depthTest=!1,f.add(v)}return"yes"===n&&(f.rotation.y+=Math.PI),f.position.y+=p,f.scale.set(o/y,c/m,d/g),Promise.resolve(f)}}},function(e,t,r){e.exports=r.p+"catalog/holes/sliding-door/slidingDoor.png"},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=l(r(0)),a=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}(r(10)),o=r(44),i=l(r(32));function l(e){return e&&e.__esModule?e:{default:e}}var s=null;t.default={name:"venetian-blind-window",prototype:"holes",info:{tag:["Window"],title:"Venetian Blind Window",description:"Venetian Blind Window",image:r(445)},properties:{width:{label:"Width",type:"length-measure",defaultValue:{length:90}},height:{label:"Height",type:"length-measure",defaultValue:{length:100}},altitude:{label:"Altitude",type:"length-measure",defaultValue:{length:90}},thickness:{label:"Thickness",type:"length-measure",defaultValue:{length:10}},flip:{label:"Flip",type:"checkbox",defaultValue:"false"}},render2D:function(e,t,r){var a=e.properties.get("width").get("length"),o="M0 -3  L"+a+" "+-3+"  L"+a+" 3  L0 3  z",i=e.selected?{stroke:"#0096fd",strokeWidth:"3px",fill:"#0096fd",cursor:"move"}:{stroke:"#000",strokeWidth:"3px",fill:"#000"},l=e.properties.get("width").get("length");return n.default.createElement("g",{transform:"translate("+-l/2+", 0)"},n.default.createElement("path",{key:"1",d:o,style:i}),n.default.createElement("line",{key:"2",x1:a/2,y1:-13,x2:a/2,y2:13,style:i}))},render3D:function(e,t,n){e.properties.get("width").get("length"),e.properties.get("height").get("length");var l=e.properties.get("thickness").get("length"),u=e.properties.get("flip"),c=function(t){var r=new a.Object3D,n=(new a.Box3).setFromObject(t),o=n.max.x-n.min.x,i=n.max.y-n.min.y,l=n.max.z-n.min.z;if(e.selected){var s=new a.BoxHelper(t,10077179);s.material.linewidth=2,s.material.depthTest=!1,s.renderOrder=1e3,t.add(s)}var c=e.properties.get("width").get("length"),d=e.properties.get("height").get("length"),p=e.properties.get("thickness").get("length");return t.scale.set(c/o,d/i,p/2/l),r.add(t),r.add(h()),!0===u&&(r.rotation.y+=Math.PI),r};if(s)return Promise.resolve(c(s.clone()));var d=r(446),p=r(447),f=r(448);return(0,o.loadObjWithMaterial)(d,p,i.default.dirname(f)+"/").then((function(e){return c((s=e).clone())}));function h(){var e=new a.Object3D,t=new a.MeshLambertMaterial({color:16777215,opacity:.5,transparent:!0}),r=new a.MeshLambertMaterial({color:13421772}),n=new a.Shape;n.moveTo(0,.25),n.lineTo(0,17.75),n.quadraticCurveTo(0,18,.25,18),n.lineTo(.75,18),n.quadraticCurveTo(1,18,1,17.75),n.lineTo(1,.25),n.quadraticCurveTo(1,0,.75,0),n.lineTo(.25,0),n.quadraticCurveTo(0,0,0,.25);var o=new a.Path;o.moveTo(.5,.6),o.arc(0,.7,.15,0,Math.PI,!1),o.arc(.15,-.09,.15,Math.PI,0,!1),n.holes.push(o);var i=new a.Path;i.moveTo(.5,4.6),i.arc(0,.7,.15,0,Math.PI,!1),i.arc(.15,-.09,.15,Math.PI,0,!1),n.holes.push(i);var s=new a.Path;s.moveTo(.5,8.6),s.arc(0,.7,.15,0,Math.PI,!1),s.arc(.15,-.09,.15,Math.PI,0,!1),n.holes.push(s);var u=new a.Path;u.moveTo(.5,12.6),u.arc(0,.7,.15,0,Math.PI,!1),u.arc(.15,-.09,.15,Math.PI,0,!1),n.holes.push(u);var c=new a.Path;c.moveTo(.5,16.6),c.arc(0,.7,.15,0,Math.PI,!1),c.arc(.15,-.09,.15,Math.PI,0,!1),n.holes.push(c);for(var d={steps:1,depth:.2,bevelEnabled:!1,bevelThickness:.4,bevelSize:.4,bevelSegments:1},p=0;p<25;p+=.7){var f=new a.ExtrudeGeometry(n,d),h=new a.Mesh(f,r);h.position.set(0,p,.86),h.rotation.z+=Math.PI/2,h.rotation.x+=-Math.PI/2,e.add(h)}for(var y=-1.25;y>-19;y+=-4){var m=new a.CylinderGeometry(.105,.105,26,32),g=new a.Mesh(m,t);g.position.set(y,12.5,.35),e.add(g)}var v=new a.Shape;v.moveTo(0,.25),v.lineTo(0,17.75),v.quadraticCurveTo(0,18,.25,18),v.lineTo(.75,18),v.quadraticCurveTo(1,18,1,17.75),v.lineTo(1,.25),v.quadraticCurveTo(1,0,.75,0),v.lineTo(.25,0),v.quadraticCurveTo(0,0,0,.25);for(var E={steps:1,depth:.4,bevelEnabled:!1,bevelThickness:.4,bevelSize:.4,bevelSegments:1},_=-.5;_<27;_+=26){var O=new a.ExtrudeGeometry(v,E),b=new a.Mesh(O,r);b.position.set(0,_,1),b.rotation.z+=Math.PI/2,b.rotation.x+=-Math.PI/2,e.add(b)}var w=(new a.Box3).setFromObject(e),I=Math.abs(w.max.x-w.min.x),S=Math.abs(w.max.y-w.min.y),M=Math.abs(w.max.z-w.min.z);return e.position.x+=40,e.position.y+=-45,e.scale.set(5.2/M,5.45*18/S,2.5*l/I),e}}}},function(e,t,r){e.exports=r.p+"catalog/holes/venetian-blind-window/venetian.jpg"},function(e,t,r){e.exports=r.p+"catalog/holes/venetian-blind-window/venetian.mtl"},function(e,t,r){e.exports=r.p+"catalog/holes/venetian-blind-window/venetian.obj"},function(e,t,r){e.exports=r.p+"catalog/holes/venetian-blind-window/texture.png"},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=l(r(0)),a=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}(r(10)),o=r(44),i=l(r(32));function l(e){return e&&e.__esModule?e:{default:e}}var s=null,u={stroke:"#000",strokeWidth:"3px",fill:"#000"},c={stroke:"#0096fd",strokeWidth:"3px",fill:"#0096fd",cursor:"move"};t.default={name:"window-curtain",prototype:"holes",info:{tag:["Finestre"],title:"Curtain window",description:"Curtain window",image:r(450)},properties:{width:{label:"width",type:"length-measure",defaultValue:{length:90}},height:{label:"height",type:"length-measure",defaultValue:{length:100}},altitude:{label:"altitudine",type:"length-measure",defaultValue:{length:90}},thickness:{label:"spessore",type:"length-measure",defaultValue:{length:10}},flip:{label:"flip",type:"checkbox",defaultValue:"none",values:{none:"none",yes:"yes"}}},render2D:function(e,t,r){var a=e.properties.get("width").get("length"),o="M0 -3  L"+a+" "+-3+"  L"+a+" 3  L0 3  z",i=e.selected?c:u,l=e.properties.get("width").get("length");return n.default.createElement("g",{transform:"translate("+-l/2+", 0)"},n.default.createElement("path",{key:"1",d:o,style:i}),n.default.createElement("line",{key:"2",x1:a/2,y1:-13,x2:a/2,y2:13,style:i}))},render3D:function(e,t,n){var l=e.properties.get("width").get("length"),u=e.properties.get("height").get("length"),c=e.properties.get("thickness").get("length"),d=e.properties.get("flip"),p=function(t){var r=new a.Object3D,n=(new a.Box3).setFromObject(t),o=n.max.x-n.min.x,i=n.max.y-n.min.y,l=n.max.z-n.min.z;if(e.selected){var s=new a.BoxHelper(t,10077179);s.material.linewidth=2,s.material.depthTest=!1,s.renderOrder=1e3,t.add(s)}var u=e.properties.get("width").get("length"),c=e.properties.get("height").get("length"),p=e.properties.get("thickness").get("length");return t.scale.set(u/o,c/i,p/2/l),r.add(t),r.add(m()),!0===d&&(r.rotation.y+=Math.PI),r};if(s)return Promise.resolve(p(s.clone()));var f=r(451),h=r(452),y=r(453);return(0,o.loadObjWithMaterial)(f,h,i.default.dirname(y)+"/").then((function(e){return p((s=e).clone())}));function m(){var e=new a.MeshLambertMaterial({color:15394506}),t=new a.Object3D,r=function(e){e.applyMatrix((new a.Matrix4).makeTranslation(-25,0,-25));var t=new a.MeshLambertMaterial({color:16777215,opacity:.9,transparent:!0});return t.side=a.DoubleSide,new a.Mesh(e,t)}(new a.ParametricGeometry((function(e,t){var r=3*Math.sin(e)*10,n=2*Math.sin(t/2)*10,o=.5*(Math.sin(2*e*Math.PI)+Math.cos(2*t*Math.PI));return new a.Vector3(r,o,n)}),20,20));r.rotation.x+=Math.PI/2,r.rotation.y+=Math.PI/2,r.position.y+=3.1,r.position.x+=.05,r.scale.set(.125,.125,.125);var n=r.clone();n.rotation.x+=Math.PI,n.position.set(1.4,0,.06),t.add(r),t.add(n);for(var o=-.7;o>-3.4;o-=.45){var i=new a.TorusGeometry(.08,.016,32,32,2*Math.PI),s=new a.Mesh(i,e);-1.15==o?s.position.set(o,3.14,.045):-2.5==o?s.position.set(o,3.14,-.01):s.position.set(o,3.14,.04),s.rotation.y+=Math.PI/2,t.add(s)}var d=new a.CylinderGeometry(.02,.02,1.25,32),p=new a.Mesh(d,e);p.position.set(-1.1,3.18,.02),p.rotation.z+=Math.PI/2,t.add(p);var f=p.clone();f.position.set(-2.5,3.18,.02),t.add(f);var h=new a.SphereGeometry(.04,32,32),y=new a.Mesh(h,e);y.position.set(-.5,3.18,.02),y.rotation.x+=Math.PI/2,y.scale.set(.8,1,1),t.add(y);var m=y.clone();m.position.x+=-1.2,t.add(m);var g=y.clone();g.position.x+=-1.4,t.add(g);var v=y.clone();v.position.x+=-2.6,t.add(v);var E=(new a.Box3).setFromObject(t),_=Math.abs(E.max.x-E.min.x),O=Math.abs(E.max.y-E.min.y),b=Math.abs(E.max.z-E.min.z);return t.position.x+=l/1.48,t.position.y+=-u/2.1,t.position.z+=c/1024,t.scale.set(l/_,u/O,c/b),t}}}},function(e,t,r){e.exports=r.p+"catalog/holes/window-curtain/window-curtain.jpg"},function(e,t,r){e.exports=r.p+"catalog/holes/window-curtain/window.mtl"},function(e,t,r){e.exports=r.p+"catalog/holes/window-curtain/window.obj"},function(e,t,r){e.exports=r.p+"catalog/holes/window-curtain/texture.png"},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=l(r(0)),a=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}(r(10)),o=r(44),i=l(r(32));function l(e){return e&&e.__esModule?e:{default:e}}var s=null;t.default={name:"window",prototype:"holes",info:{title:"window",tag:["window"],description:"Window",image:r(455)},properties:{width:{label:"Width",type:"length-measure",defaultValue:{length:90}},height:{label:"Height",type:"length-measure",defaultValue:{length:100}},altitude:{label:"Altitude",type:"length-measure",defaultValue:{length:90}},thickness:{label:"Thickness",type:"length-measure",defaultValue:{length:10}}},render2D:function(e,t,r){var a=e.properties.get("width").get("length"),o="M0 -3  L"+a+" "+-3+"  L"+a+" 3  L0 3  z",i=e.selected?{stroke:"#0096fd",strokeWidth:"3px",fill:"#0096fd",cursor:"move"}:{stroke:"#000",strokeWidth:"3px",fill:"#000"},l=e.properties.get("width").get("length");return n.default.createElement("g",{transform:"translate("+-l/2+", 0)"},n.default.createElement("path",{key:"1",d:o,style:i}),n.default.createElement("line",{key:"2",x1:a/2,y1:-13,x2:a/2,y2:13,style:i}))},render3D:function(e,t,n){var l=function(t){var r=(new a.Box3).setFromObject(t),n=r.max.x-r.min.x,o=r.max.y-r.min.y,i=r.max.z-r.min.z;if(e.selected){var l=new a.BoxHelper(t,10077179);l.material.linewidth=2,l.material.depthTest=!1,l.renderOrder=1e3,t.add(l)}var s=e.properties.get("width").get("length"),u=e.properties.get("height").get("length"),c=e.properties.get("thickness").get("length");return t.scale.set(s/n,u/o,c/i),t};if(s)return Promise.resolve(l(s.clone()));var u=r(456),c=r(457),d=r(458);return(0,o.loadObjWithMaterial)(u,c,i.default.dirname(d)+"/").then((function(e){return l((s=e).clone())}))}}},function(e,t,r){e.exports=r.p+"catalog/holes/window/window.png"},function(e,t,r){e.exports=r.p+"catalog/holes/window/window.mtl"},function(e,t,r){e.exports=r.p+"catalog/holes/window/window.obj"},function(e,t,r){e.exports=r.p+"catalog/holes/window/texture.png"},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=I;var n=l(r(0)),a=l(r(1)),o=r(19),i=r(34);function l(e){return e&&e.__esModule?e:{default:e}}var s=i.ReactPlannerConstants.MODE_IDLE,u=i.ReactPlannerConstants.MODE_2D_ZOOM_IN,c=i.ReactPlannerConstants.MODE_2D_ZOOM_OUT,d=i.ReactPlannerConstants.MODE_2D_PAN,p=i.ReactPlannerConstants.MODE_WAITING_DRAWING_LINE,f=i.ReactPlannerConstants.MODE_DRAGGING_LINE,h=i.ReactPlannerConstants.MODE_DRAGGING_VERTEX,y=i.ReactPlannerConstants.MODE_DRAGGING_ITEM,m=i.ReactPlannerConstants.MODE_DRAWING_LINE,g=i.ReactPlannerConstants.MODE_DRAWING_HOLE,v=i.ReactPlannerConstants.MODE_DRAWING_ITEM,E=i.ReactPlannerConstants.MODE_DRAGGING_HOLE,_=i.ReactPlannerConstants.MODE_ROTATING_ITEM,O=i.ReactPlannerConstants.MODE_3D_FIRST_PERSON,b=i.ReactPlannerConstants.MODE_3D_VIEW,w=i.ReactPlannerComponents.ToolbarComponents.ToolbarButton;function I(e,t){var r=e.mode,a=t.translator,i=function(e){var t=document.createElement("a"),r="output"+Date.now()+".png";(r=window.prompt("Insert output filename",r))&&(t.setAttribute("download",r),t.href=e,t.style.display="none",document.body.appendChild(t),t.click(),document.body.removeChild(t))};return[O,b].includes(r)?n.default.createElement(w,{active:!1,tooltip:a.t("Get Screenshot"),onClick:function(e){e.preventDefault();var t=document.getElementsByTagName("canvas")[0];i(t.toDataURL())}},n.default.createElement(o.MdCamera,null)):[s,u,c,d,p,f,h,y,m,g,v,E,_].includes(r)?n.default.createElement(w,{active:!1,tooltip:a.t("Get Screenshot"),onClick:function(e){e.preventDefault();for(var t=document.getElementsByTagName("svg"),r=t[0],n=1;n<t.length;n++)t[n].width.baseVal.value>r.width.baseVal.value&&(r=t[n]);var a=new XMLSerializer,o=new Image,l=new Image,s=document.createElement("canvas"),u=s.getContext("2d"),c=document.createAttribute("height");c.value=r.height.baseVal.value,s.setAttributeNode(c);var d=document.createAttribute("width");d.value=r.width.baseVal.value,s.setAttributeNode(d),u.fillStyle="white",u.fillRect(0,0,s.width,s.height),o.crossOrigin="anonymous",o.src="data:image/svg+xml;base64,"+window.btoa(a.serializeToString(r)),l.crossOrigin="anonymous",l.src="https://media.istockphoto.com/photos/orange-picture-id185284489?k=6&m=185284489&s=612x612&w=0&h=x_w4oMnanMTQ5KtSNjSNDdiVaSrlxM4om-3PQTIzFaY=",o.onload=function(){console.log("BASE"),u.drawImage(o,0,0,r.width.baseVal.value,r.height.baseVal.value)},l.onload=function(){console.log("ORANGE"),u.drawImage(l,0,0,10,20),i(s.toDataURL())}}},n.default.createElement(o.MdCamera,null)):null}I.propTypes={mode:a.default.string.isRequired},I.contextTypes={translator:a.default.object.isRequired}}]);
//# sourceMappingURL=app.js.map