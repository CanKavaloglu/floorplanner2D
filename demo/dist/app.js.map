{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///../src/constants.js","webpack:///../src/shared-style.js","webpack:///../src/class/export.js","webpack:///../src/utils/export.js","webpack:///../src/components/style/export.jsx","webpack:///../src/catalog/properties/shared-property-style.js","webpack:///../src/components/sidebar/panel.jsx","webpack:///../src/models.js","webpack:///../src/index.js","webpack:///../src/utils/snap.js","webpack:///../src/utils/geometry.js","webpack:///../src/utils/react-if.jsx","webpack:///./src/catalog/utils/load-obj.js","webpack:///../src/components/style/button.jsx","webpack:///../src/components/style/form-text-input.jsx","webpack:///../src/translator/translator.js","webpack:///../src/components/toolbar/toolbar-button.jsx","webpack:///../src/components/viewer2d/export.js","webpack:///../src/utils/math.js","webpack:///../src/actions/export.js","webpack:///../src/actions/project-actions.js","webpack:///../src/catalog/catalog.js","webpack:///../src/catalog/properties/export.js","webpack:///../src/components/style/content-container.jsx","webpack:///../src/components/style/content-title.jsx","webpack:///../src/components/style/form-number-input.jsx","webpack:///../src/catalog/properties/property-string.jsx","webpack:///../src/catalog/properties/property-lenght-measure.jsx","webpack:///../src/reducers/export.js","webpack:///../src/utils/objects-utils.js","webpack:///../src/components/export.js","webpack:///../src/components/toolbar/toolbar-save-button.jsx","webpack:///../src/utils/browser.js","webpack:///../src/components/toolbar/toolbar-load-button.jsx","webpack:///../src/components/viewer2d/viewer2d.jsx","webpack:///../src/components/viewer2d/state.jsx","webpack:///../src/components/viewer2d/scene.jsx","webpack:///../src/components/viewer2d/snap.jsx","webpack:///../src/components/viewer2d/ruler.jsx","webpack:///../src/components/sidebar/panel-layers.jsx","webpack:///../src/components/sidebar/panel-guides.jsx","webpack:///../src/components/sidebar/panel-layer-elements.jsx","webpack:///../src/components/footerbar/footer-toggle-button.jsx","webpack:///../src/components/footerbar/footer-content-button.jsx","webpack:///../src/version.js","webpack:///./src/renderer.jsx","webpack:///./src/catalog/mycatalog.js","webpack:///../src/catalog/properties/property-color.jsx","webpack:///../src/components/style/cancel-button.jsx","webpack:///../src/components/style/delete-button.jsx","webpack:///../src/components/style/form-block.jsx","webpack:///../src/components/style/form-color-input.jsx","webpack:///../src/components/style/form-label.jsx","webpack:///../src/components/style/form-select.jsx","webpack:///../src/components/style/form-slider.jsx","webpack:///../src/components/style/form-submit-button.jsx","webpack:///../src/catalog/properties/property-enum.jsx","webpack:///../src/catalog/properties/property-number.jsx","webpack:///../src/catalog/properties/property-toggle.jsx","webpack:///../src/catalog/properties/property-checkbox.jsx","webpack:///../src/catalog/properties/property-hidden.jsx","webpack:///../src/catalog/properties/property-read-only.jsx","webpack:///../src/translator/en.js","webpack:///../src/translator/it.js","webpack:///../src/translator/ru.js","webpack:///../src/reducers/reducer.js","webpack:///../src/reducers/areas-reducer.js","webpack:///../src/class/project.js","webpack:///../src/utils/graph-inner-cycles.js","webpack:///../src/utils/graph.js","webpack:///../src/utils/get-edges-of-subgraphs.js","webpack:///../src/utils/graph-cycles.js","webpack:///../src/utils/snap-scene.js","webpack:///../src/utils/history.js","webpack:///../src/utils/id-broker.js","webpack:///../src/utils/name-generator.js","webpack:///../src/class/group.js","webpack:///../src/class/layer.js","webpack:///../src/class/line.js","webpack:///../src/class/hole.js","webpack:///../src/class/vertex.js","webpack:///../src/class/area.js","webpack:///../src/class/item.js","webpack:///../src/class/guide.js","webpack:///../src/reducers/holes-reducer.js","webpack:///../src/reducers/items-reducer.js","webpack:///../src/reducers/lines-reducer.js","webpack:///../src/reducers/groups-reducer.js","webpack:///../src/reducers/project-reducer.js","webpack:///../src/reducers/scene-reducer.js","webpack:///../src/reducers/vertices-reducer.js","webpack:///../src/reducers/viewer2d-reducer.js","webpack:///../src/reducers/viewer3d-reducer.js","webpack:///../src/react-planner.jsx","webpack:///../src/actions/viewer2d-actions.js","webpack:///../src/actions/lines-actions.js","webpack:///../src/actions/holes-actions.js","webpack:///../src/actions/scene-actions.js","webpack:///../src/actions/vertices-actions.js","webpack:///../src/actions/items-actions.js","webpack:///../src/actions/area-actions.js","webpack:///../src/actions/groups-actions.js","webpack:///../src/components/toolbar/export.js","webpack:///../src/components/toolbar/toolbar.jsx","webpack:///../src/components/content.jsx","webpack:///../src/components/viewer2d/vertex.jsx","webpack:///../src/components/viewer2d/line.jsx","webpack:///../src/components/viewer2d/layer.jsx","webpack:///../src/components/viewer2d/item.jsx","webpack:///../src/components/viewer2d/area.jsx","webpack:///../src/components/viewer2d/grids/grids.jsx","webpack:///../src/components/viewer2d/grids/grid-horizontal-streak.jsx","webpack:///../src/components/viewer2d/grids/grid-vertical-streak.jsx","webpack:///../src/components/viewer2d/group.jsx","webpack:///../src/components/viewer2d/rulerX.jsx","webpack:///../src/components/viewer2d/rulerY.jsx","webpack:///../src/components/catalog-view/catalog-list.jsx","webpack:///../src/components/catalog-view/catalog-item.jsx","webpack:///../src/components/catalog-view/catalog-breadcrumb.jsx","webpack:///../src/components/catalog-view/catalog-page-item.jsx","webpack:///../src/components/catalog-view/catalog-turn-back-page-item.jsx","webpack:///../src/components/configurator/project-configurator.jsx","webpack:///../src/components/sidebar/export.js","webpack:///../src/components/sidebar/sidebar.jsx","webpack:///../src/components/sidebar/panel-element-editor/panel-element-editor.jsx","webpack:///../src/components/sidebar/panel-element-editor/element-editor.jsx","webpack:///../src/components/sidebar/panel-element-editor/attributes-editor/attributes-editor.jsx","webpack:///../src/components/sidebar/panel-element-editor/attributes-editor/item-attributes-editor.jsx","webpack:///../src/components/sidebar/panel-element-editor/attributes-editor/line-attributes-editor.jsx","webpack:///../src/components/sidebar/panel-element-editor/attributes-editor/hole-attributes-editor.jsx","webpack:///../src/components/sidebar/panel-group-editor.jsx","webpack:///../src/components/sidebar/panel-element-editor/panel-multi-elements-editor.jsx","webpack:///../src/components/sidebar/panel-groups.jsx","webpack:///../src/components/footerbar/export.js","webpack:///../src/components/footerbar/footerbar.jsx","webpack:///../src/styles/export.js","webpack:///../src/styles/tabs.css?5165","webpack:///../src/styles/tabs.css","webpack:///../src/plugins/export.js","webpack:///../src/plugins/autosave.js","webpack:///../src/plugins/keyboard.js","webpack:///../src/plugins/console-debugger.js","webpack:///../src/catalog/factories/export.js","webpack:///../src/catalog/factories/wall-factory.jsx","webpack:///../src/catalog/factories/wall-factory-3d.js","webpack:///../src/utils/threeCSG.es6.js","webpack:///../src/catalog/factories/area-factory.jsx","webpack:///../src/catalog/factories/area-factory-3d.js","webpack:///./src/catalog/areas/area/planner-element.jsx","webpack:///./src/catalog/areas/area/textures/parquet.jpg","webpack:///./src/catalog/areas/area/textures/tile1.jpg","webpack:///./src/catalog/areas/area/textures/ceramic-tile.jpg","webpack:///./src/catalog/areas/area/textures/strand-porcelain.jpg","webpack:///./src/catalog/areas/area/textures/grass.jpg","webpack:///./src/catalog/lines/wall/planner-element.jsx","webpack:///./src/catalog/lines/wall/wall.png","webpack:///./src/catalog/lines/wall/textures/bricks.jpg","webpack:///./src/catalog/lines/wall/textures/bricks-normal.jpg","webpack:///./src/catalog/lines/wall/textures/painted.jpg","webpack:///./src/catalog/lines/wall/textures/painted-normal.jpg","webpack:///./src/catalog/holes/door-double/planner-element.jsx","webpack:///./src/catalog/holes/door-double/door_double.png","webpack:///./src/catalog/holes/door/planner-element.jsx","webpack:///./src/catalog/utils/mtl-loader.js","webpack:///./src/catalog/utils/obj-loader.js","webpack:///./src/catalog/holes/door/door.png","webpack:///./src/catalog/holes/door/door.mtl","webpack:///./src/catalog/holes/door/door.obj","webpack:///./src/catalog/holes/door/texture.jpg","webpack:///./src/catalog/holes/gate/planner-element.jsx","webpack:///./src/catalog/holes/gate/gate.jpg","webpack:///./src/catalog/holes/panic-door-double/planner-element.jsx","webpack:///./src/catalog/holes/panic-door-double/panicDoorDouble.png","webpack:///./src/catalog/holes/panic-door/planner-element.jsx","webpack:///./src/catalog/holes/panic-door/panicDoor.png","webpack:///./src/catalog/holes/sash-window/planner-element.jsx","webpack:///./src/catalog/holes/sash-window/window.png","webpack:///./src/catalog/holes/sash-window/sash-window.mtl","webpack:///./src/catalog/holes/sash-window/sash-window.obj","webpack:///./src/catalog/holes/sash-window/texture.png","webpack:///./src/catalog/holes/sliding-door/planner-element.jsx","webpack:///./src/catalog/holes/sliding-door/slidingDoor.png","webpack:///./src/catalog/holes/venetian-blind-window/planner-element.jsx","webpack:///./src/catalog/holes/venetian-blind-window/venetian.jpg","webpack:///./src/catalog/holes/venetian-blind-window/venetian.mtl","webpack:///./src/catalog/holes/venetian-blind-window/venetian.obj","webpack:///./src/catalog/holes/venetian-blind-window/texture.png","webpack:///./src/catalog/holes/window-curtain/planner-element.jsx","webpack:///./src/catalog/holes/window-curtain/window-curtain.jpg","webpack:///./src/catalog/holes/window-curtain/window.mtl","webpack:///./src/catalog/holes/window-curtain/window.obj","webpack:///./src/catalog/holes/window-curtain/texture.png","webpack:///./src/catalog/holes/window/planner-element.jsx","webpack:///./src/catalog/holes/window/window.png","webpack:///./src/catalog/holes/window/window.mtl","webpack:///./src/catalog/holes/window/window.obj","webpack:///./src/catalog/holes/window/texture.png","webpack:///./src/ui/toolbar-screenshot-button.jsx"],"names":["webpackJsonpCallback","data","moduleId","chunkId","chunkIds","moreModules","executeModules","i","resolves","length","installedChunks","push","Object","prototype","hasOwnProperty","call","modules","parentJsonpFunction","shift","deferredModules","apply","checkDeferredModules","result","deferredModule","fulfilled","j","depId","splice","__webpack_require__","s","installedModules","0","exports","module","l","m","c","d","name","getter","o","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","p","jsonpArray","window","oldJsonpFunction","slice","NEW_PROJECT","LOAD_PROJECT","SAVE_PROJECT","OPEN_CATALOG","SELECT_TOOL_EDIT","UNSELECT_ALL","SET_PROPERTIES","SET_ITEMS_ATTRIBUTES","SET_LINES_ATTRIBUTES","SET_HOLES_ATTRIBUTES","REMOVE","UNDO","ROLLBACK","SET_PROJECT_PROPERTIES","OPEN_PROJECT_CONFIGURATOR","INIT_CATALOG","UPDATE_MOUSE_COORDS","UPDATE_ZOOM_SCALE","TOGGLE_SNAP","CHANGE_CATALOG_PAGE","GO_BACK_TO_CATALOG_PAGE","THROW_ERROR","THROW_WARNING","COPY_PROPERTIES","PASTE_PROPERTIES","PUSH_LAST_SELECTED_CATALOG_ELEMENT_TO_HISTORY","ALTERATE_STATE","SET_MODE","ADD_HORIZONTAL_GUIDE","ADD_VERTICAL_GUIDE","ADD_CIRCULAR_GUIDE","REMOVE_HORIZONTAL_GUIDE","REMOVE_VERTICAL_GUIDE","REMOVE_CIRCULAR_GUIDE","SELECT_TOOL_ZOOM_IN","SELECT_TOOL_ZOOM_OUT","SELECT_TOOL_PAN","UPDATE_2D_CAMERA","SELECT_TOOL_DRAWING_ITEM","UPDATE_DRAWING_ITEM","END_DRAWING_ITEM","BEGIN_DRAGGING_ITEM","UPDATE_DRAGGING_ITEM","END_DRAGGING_ITEM","BEGIN_ROTATING_ITEM","UPDATE_ROTATING_ITEM","END_ROTATING_ITEM","ADD_GROUP","ADD_GROUP_FROM_SELECTED","SELECT_GROUP","UNSELECT_GROUP","ADD_TO_GROUP","REMOVE_FROM_GROUP","SET_GROUP_PROPERTIES","SET_GROUP_ATTRIBUTES","SET_GROUP_BARYCENTER","REMOVE_GROUP","REMOVE_GROUP_AND_DELETE_ELEMENTS","GROUP_TRANSLATE","GROUP_ROTATE","SELECT_HOLE","SELECT_AREA","SELECT_ITEM","SELECT_LINE","SELECT_TOOL_DRAWING_LINE","BEGIN_DRAWING_LINE","UPDATE_DRAWING_LINE","END_DRAWING_LINE","SELECT_TOOL_DRAWING_HOLE","UPDATE_DRAWING_HOLE","END_DRAWING_HOLE","BEGIN_DRAGGING_LINE","UPDATE_DRAGGING_LINE","END_DRAGGING_LINE","BEGIN_DRAGGING_HOLE","SELECT_TOOL_UPLOAD_IMAGE","BEGIN_UPLOADING_IMAGE","END_UPLOADING_IMAGE","BEGIN_FITTING_IMAGE","END_FITTING_IMAGE","UPDATE_DRAGGING_HOLE","END_DRAGGING_HOLE","BEGIN_DRAGGING_VERTEX","UPDATE_DRAGGING_VERTEX","END_DRAGGING_VERTEX","SET_LAYER_PROPERTIES","ADD_LAYER","SELECT_LAYER","REMOVE_LAYER","MODE_IDLE","PROJECT_ACTIONS","VIEWER2D_ACTIONS","ITEMS_ACTIONS","HOLE_ACTIONS","LINE_ACTIONS","AREA_ACTIONS","GROUP_ACTIONS","SCENE_ACTIONS","VERTEX_ACTIONS","MODE_2D_ZOOM_IN","MODE_2D_ZOOM_OUT","MODE_2D_PAN","MODE_WAITING_DRAWING_LINE","MODE_3D_VIEW","MODE_3D_FIRST_PERSON","MODE_DRAGGING_LINE","MODE_DRAGGING_VERTEX","MODE_DRAGGING_ITEM","MODE_DRAGGING_HOLE","MODE_DRAWING_LINE","MODE_DRAWING_HOLE","MODE_DRAWING_ITEM","MODE_ROTATING_ITEM","MODE_UPLOADING_IMAGE","MODE_FITTING_IMAGE","UNIT_MILLIMETER","MODE_VIEWING_CATALOG","MODE_CONFIGURING_PROJECT","MODE_SNAPPING","UNIT_CENTIMETER","UNIT_METER","UNIT_INCH","UNIT_FOOT","UNIT_MILE","UNITS_LENGTH","EPSILON","KEYBOARD_BUTTON_CODE","DELETE","BACKSPACE","ESC","Z","ALT","C","V","CTRL","ENTER","TAB","COLORS","white","black","MESH_SELECTED","MATERIAL_COLORS","500","amber","blue_grey","blue","brown","cyan","deep_orange","deep_purple","green","grey","indigo","light_blue","light_green","lime","orange","pink","purple","red","teal","yellow","PRIMARY_COLOR","main","alt","icon","border","text_main","text_alt","input","SECONDARY_COLOR","AREA_MESH_COLOR","selected","unselected","LINE_MESH_COLOR","Project","Group","Layer","Line","Hole","Vertex","Area","Item","HorizontalGuide","VerticalGuide","GeometryUtils","GraphInnerCycles","MathUtils","SnapUtils","SnapSceneUtils","history","ObjectUtils","IDBroker","NameGenerator","Button","CancelButton","ContentContainer","ContentTitle","DeleteButton","FormBlock","FormColorInput","FormLabel","FormNumberInput","FormSelect","FormSlider","FormSubmitButton","FormTextInput","PropertyStyle","tableStyle","width","borderSpacing","marginBottom","firstTdStyle","textTransform","SharedStyle","STYLE","borderTop","borderBottom","userSelect","STYLE_TITLE","fontSize","color","padding","backgroundColor","textShadow","boxShadow","margin","cursor","STYLE_CONTENT","STYLE_ARROW","float","Panel","props","context","state","opened","hover","this","setState","headComponents","children","style","onMouseEnter","toggleHover","onMouseLeave","onClick","toggleOpen","FaAngleUp","FaAngleDown","display","Component","propTypes","PropTypes","string","isRequired","array","bool","safeLoadMapList","mapList","Model","defaultMap","Map","map","toMap","Grid","json","properties","fromJS","Record","id","type","DefaultGrids","step","colors","ElementsSet","vertices","List","lines","holes","areas","items","sharedAttributes","misc","visible","x","y","offset","line","rotation","altitude","order","opacity","elements","DefaultLayers","Scene","layers","grids","selectedLayer","first","groups","meta","guides","horizontal","vertical","circular","unit","height","CatalogElement","info","Catalog","ready","isEmpty","options","initialProperties","has","catList","element","toArray","Error","merge","page","path","HistoryStructure","list","scene","last","State","sceneHistory","catalog","viewer2D","drawingSupport","draggingSupport","rotatingSupport","mouse","zoom","snapMask","SNAP_MASK","snapElements","activeSnapElement","errors","warnings","clipboardProperties","selectedElementsHistory","alterate","Models","ReactPlannerConstants","ReactPlannerSharedStyle","Translator","reducer","ReactPlanner","Plugins","ReactPlannerComponents","ReactPlannerActions","ReactPlannerReducers","ReactPlannerClasses","ElementsFactories","ReactPlannerUtils","nearestSnap","filter","SNAP_POINT","SNAP_LINE","SNAP_SEGMENT","SNAP_GRID","valueSeq","el","isNear","radius","snap","point","nearestPoint","distance","min","p1","priority","d1","p2","d2","addPointSnap","addLineSnap","a","b","related","withMutations","some","lineSnap","Geometry","twoLinesIntersection","intersection","undefined","forEach","LineSnap","addLineSegmentSnap","x1","y1","x2","y2","LineSegmentSnap","addGridSnap","GridSnap","PointSnap","SNAP_GUIDE","pointsDistance","closestPointFromLine","distancePointFromLine","closestPointFromLineSegment","distancePointFromLineSegment","compareVertices","minVertex","v0","v1","maxVertex","orderVertices","sort","verticesDistance","v2","x0","y0","horizontalLine","verticalLine","linePassingThroughTwoPoints","fAbs","Math","sqrt","denom","k","angularCoefficientsDiff","twoLineSegmentsIntersection","p3","p4","x3","y3","x4","y4","numA","numB","comparator","pa","pb","line0","line1","toJS","lineA","lineB","lineSX","lineDX","uA","uB","isPointOnLineSegment","xp","yp","maxDistance","q","mi","pointPositionOnLineSegment","mapRange","angleBetweenTwoPointsAndOrigin","atan2","PI","angleBetweenTwoPoints","absAngleBetweenTwoPoints","abs","samePoints","extendLine","newDistance","precision","rad","toFixedFloat","cos","sin","roundVertex","vertex","set","ContainsPoint","polygon","pointX","pointY","ax","lup","ay","bx","by","ii","depth","lx","cosWithThreshold","alpha","threshold","sinWithThreshold","midPoint","verticesMidPoint","verticesArray","res","reduce","incr","rotatePointAroundPoint","px","py","ox","oy","theta","thetaRad","deltaX","deltaY","diff_x","diff_y","D","len_sq","param","xx","yy","dx","dy","low1","high1","low2","high2","If","condition","Array","isArray","loadObjWithMaterial","mtlFile","objFile","imgPath","mtlLoader","MTLLoader","setTexturePath","url","Promise","resolve","reject","load","materials","preload","objLoader","OBJLoader","setMaterials","BASE_STYLE","fontWeight","lineHeight","textAlign","whiteSpace","verticalAlign","WebkitUserSelect","MozUserSelect","MsUserSelect","fonWeight","transition","outline","borderRadius","borderWidth","borderType","BASE_STYLE_SIZE","small","normal","large","customStyle","customStyleHover","styleHover","size","rest","styleMerged","assign","e","defaultProps","borderColor","oneOf","STYLE_INPUT","backgroundImage","focus","textInputStyle","onFocus","onBlur","DEFAULT_LOCALE","locale","translations","registerTranslation","EN","IT","RU","languages","getBrowserLanguages","lang","setLocale","phrase","params","translate","translation","console","warn","translatedPhrase","replace","match","number","toLowerCase","navigator","language","userLanguage","alignItems","justifyContent","position","STYLE_TOOLTIP","background","visibility","left","top","marginTop","marginLeft","zIndex","STYLE_TOOLTIP_PIN","right","borderRight","ToolbarButton","active","onMouseOver","event","onMouseOut","tooltip","func","Viewer2D","Snap","Ruler","Grids","RulerX","RulerY","num","parseFloat","toFixed","multiplyMatrices","m1","m2","sum","projectActions","viewer2DActions","linesActions","holesActions","sceneActions","verticesActions","itemsActions","areaActions","groupsActions","loadProject","sceneJSON","newProject","saveProject","openCatalog","changeCatalogPage","newPage","oldPage","goBackToCatalogPage","selectToolEdit","unselectAll","setProperties","setItemsAttributes","itemsAttributes","setLinesAttributes","linesAttributes","attributes","setIn","getIn","setHolesAttributes","holesAttributes","remove","undo","rollback","openProjectConfigurator","setProjectProperties","initCatalog","updateMouseCoord","coords","updateZoomScale","scale","toggleSnap","mask","throwError","error","throwWarning","warning","copyProperties","pasteProperties","pushLastSelectedCatalogElementToHistory","setAlterateState","setMode","addHorizontalGuide","coordinate","addVerticalGuide","addCircularGuide","removeHorizontalGuide","guideID","removeVerticalGuide","removeCircularGuide","categories","root","label","propertyTypes","registerMultiplePropertyType","PropertyColor","PropertyEnum","PropertyString","PropertyNumber","PropertyLengthMeasure","PropertyToggle","PropertyCheckbox","PropertyHidden","PropertyReadOnly","hasElement","categoryName","hasCategory","validateElement","elementArray","registerElement","Viewer","Editor","propertyTypeArray","registerPropertyType","propertyName","propertyConfigs","childs","validateCategory","addToCategory","child","indexOf","elementName","overflowY","onWheel","stopPropagation","propsType","confirmStyle","valid","showedValue","nextProps","max","onChange","onValid","onInvalid","placeholder","numericInputStyle","regexp","RegExp","isNaN","isFinite","currValue","test","different","saveFn","savedValue","target","evt","nativeEvent","onKeyDown","keyCode","which","title","translator","MdUpdate","oneOfType","contextTypes","Number","MIN_SAFE_INTEGER","MAX_SAFE_INTEGER","onUpdate","configs","sourceElement","internalState","className","val","hook","then","_val","any","internalTableStyle","borderCollapse","secondTdStyle","unitContainerStyle","_length","_unit","configRest","update","lengthInput","unitInput","newLength","merged","from","to","instanceOf","ReactPlannerAreasReducer","ReactPlannerHolesReducer","ReactPlannerItemsReducer","ReactPlannerLinesReducer","ReactPlannerGroupsReducer","ReactPlannerProjectReducer","ReactPlannerSceneReducer","ReactPlannerVerticesReducer","ReactPlannerViewer2dReducer","ReactPlannerViewer3dReducer","objectsMap","mappedObject","objectsCompare","constructor","ToolbarComponents","Content","SidebarComponents","FooterBarComponents","Viewer2DComponents","StyleComponents","ToolbarSaveButton","preventDefault","updatedState","browserDownload","fileOutputLink","document","createElement","filename","Date","now","prompt","output","JSON","stringify","Blob","URL","createObjectURL","setAttribute","href","body","appendChild","click","removeChild","browserUpload","fileInput","addEventListener","file","files","reader","FileReader","fileEvent","loadedData","readAsText","ToolbarLoadButton","parse","constants","mode2Tool","TOOL_PAN","TOOL_ZOOM_IN","TOOL_ZOOM_OUT","TOOL_AUTO","TOOL_NONE","mode2PointerEvents","pointerEvents","mode2Cursor","mode2DetectAutopan","extractElementData","node","getNamedItem","tagName","parentNode","part","layer","layerID","mapCursorPosition","f","SVGWidth","SVGHeight","rulerBgColor","rulerFnColor","rulerMkColor","sceneWidth","sceneHeight","sceneZoom","rulerXElements","ceil","rulerYElements","gridRowGap","gridColumnGap","gridTemplateColumns","rulerSize","gridTemplateRows","gridColumn","gridRow","overflow","unitPixelSize","mouseX","zeroLeftPosition","fontColor","markerColor","positiveUnitsNumber","negativeUnitsNumber","mouseY","zeroTopPosition","ReactSVGPanZoom","onChangeValue","updateCameraView","tool","onChangeTool","selectToolPan","selectToolZoomIn","selectToolZoomOut","detectAutoPan","onMouseDown","viewerEvent","originalEvent","Event","dispatchEvent","elementData","beginDraggingLine","beginDraggingVertex","beginRotatingItem","beginDraggingItem","beginDraggingHole","onMouseMove","updateDrawingLine","updateDrawingHole","updateDrawingItem","updateDraggingHole","updateDraggingLine","updateDraggingVertex","updateDraggingItem","updateRotatingItem","onMouseUp","selectArea","selectLine","selectHole","selectItem","beginDrawingLine","endDrawingLine","endDrawingHole","endDrawingItem","endDraggingLine","endDraggingVertex","endDraggingItem","endDraggingHole","endRotatingItem","miniaturePosition","toolbarPosition","patternUnits","fill","stroke","strokeWidth","guideStyle","strokewidth","transform","entrySeq","hgKey","hgVal","vgKey","vgVal","nextState","hashCode","ActiveDrawingHelper","h0","h1","pointH0","pointH1","pointV0","pointV1","STYLE_TEXT","textAnchor","fontFamily","WebkitTouchCallout","distanceText","VISIBILITY_MODE","styleEditButton","tableLayerStyle","maxHeight","iconColStyle","styleHoverColor","styleEditButtonHover","styleAddLabel","styleEyeVisible","styleEyeHidden","newLayerLableStyle","newLayerLableHoverStyle","layerInputTableStyle","inputTableButtonStyle","PanelLayers","headHovered","layerAddUIVisible","editingLayer","addLayer","layerData","parseInt","setLayerProperties","removeLayer","isLastLayer","colSpan","configureClick","isCurrentLayer","selectLayer","onDoubleClick","FaEye","FaPencilAlt","FaTrash","delLayer","TiDelete","TiPlus","round","resetLayerMod","updateLayer","tabStyle","iconStyle","addGuideStyle","tableTabStyle","PanelGuides","addHGVisible","addVGVisible","addCGVisible","Tabs","TabList","Tab","TabPanel","ind","FaTimes","contentArea","elementStyle","elementSelectedStyle","categoryDividerStyle","paddingBottom","tableSearchStyle","searchIconStyle","searchInputStyle","PanelLayerElement","matchString","matchedElements","oldElements","newElements","filterCb","text","MdSearch","matcharray","count","lineID","holeID","hole","itemID","item","toggleButtonStyle","toggleButtonStyleOver","FooterToggleButton","over","toggleState","isActive","toggleOn","toggleOff","toggleOver","toggleOut","toggle","labelContainerStyle","contentContainerStyleActive","bottom","contentContainerStyleInactive","contentHeaderStyle","titleStyle","contentAreaStyle","iconCloseStyleOut","borderLeft","iconCloseStyleOver","marginRight","textStyle","FooterContentButton","closeOver","content","LabelIcon","labelIconStyle","labelTextStyle","inputTitleStyle","VERSION","AppState","PlannerModels","store","createStore","action","plannerState","plugins","PlannerPlugins","Keyboard","Autosave","ConsoleDebugger","toolbarButtons","ToolbarScreenshotButton","ReactDOM","render","Provider","MyCatalog","stateExtractor","getElementById","Areas","Lines","Holes","Items","registerCategory","sashWindow","venetianBlindWindow","windowCurtain","door","doorDouble","panicDoor","panicDoorDouble","slidingDoor","STYLE_HOVER","EREG_NUMBER","autoComplete","WebkitAppearance","WebkitBorderRadius","backgroundPosition","backgroundRepeat","sliderContainerStyle","sliderStyle","textContainerStyle","Seq","values","actionName","checkboxStyle","checked","arguments","initialState","select","areaID","setPropertiesOnSelected","updatePropertiesOnSelected","setAttributesOnSelected","group","unselect","selectedLines","selectedHoles","selectedItems","detectAndUpdateAreas","historyPop","historyPush","date","updateProperties","currHistory","previousPosition","findIndex","updateIn","pageIndex","take","log","default","calculateInnerCycles","edgesArray","innerCycles","graph","Graph","addEdge","BCC","subgraphs","subgraph","edgesOfSubgraphsArray","edges","es","edge","v_cycles","cycle","isClockWiseOrder","innerCycleWithCoords","twiceEnclosedArea","create_array","Edge","u","v","time","E","adj","w","disc","low","st","parent","_BCCUtil","component","Set","add","getVerticesFromBiconnectedComponent","mod","compute_angle","P","get_starting_edge","incidences","ev_mapping","direction","get_next_edge","EV","n_items","out","index","endpoint","find_cycles","ev","compute_ev_mapping","incidence","angle","i1","i2","compute_incidences","V_cycles","E_cycles","dir_E_cycles","V_cycle","E_cycle","dir_E_cycle","next","start","e_cycles","dir_e_cycles","cycles","indexes","e_cycle","v_cycle","find_short_cycles_indexes","indx","rooms_sums","room","positive_count","rm_neg","sceneSnapElements","vertexID","xCycle","yCycle","xMul","yMul","onXCross","onYCross","hValues","vValues","hVal","vVal","historyStructure","toPush","diff","pop","shortid","require","generate","substr","toUpperCase","groupID","layerList","setAlterate","groupLayerID","groupLayerElements","g","newState","acquireID","GroupModel","layerElements","elementPrototype","addElement","elementID","actualList","contains","reloadBaricenter","xBar","yBar","elementCount","vID","xM","yM","lineVertices","areaVertices","setBarycenter","filterNot","mergeIn","removeIn","deleteIn","xV","yV","setAttributes","xI","yI","newAlpha","barX","barY","newX","newY","rI","sameSet","set1","set2","isSuperset","isSubset","LayerModel","elems","area","linesArray","vertexID_to_verticesArrayIndex","verticesArrayIndex_to_vertexID","latestVertexIndex","innerCyclesByVerticesArrayIndex","innerCyclesByVerticesID","vertexIndex","reverse","areaIDs","areaInUse","find","areaVerticesCoords","resultAdd","verticesCoordsForArea","holesList","areaVerticesList","flatten","doubleHoles","areaHoles","areaHoleID","doubleHoleID","v_id0","v_id1","doubleVertices","doubleVertex","reduced","reducedState","biReduced","stateV0","stateV1","factoryElement","generateName","selectElement","removeElement","stateL1","stateL2","splitPointOffset","holeOffset","points","pointsPair","zip","skip","stateL","holeWithOffsetPoint","offsetPosition","newOffset","oldProperties","oldHoles","hasCommonEndpoint","orderedVertices","oldLineLength","split","addFromPoints","stateV","sceneComponentType","replaceVertex","stateLV","createAvoidingIntersections","vertex0","vertex1","startPointX","startPointY","startVertex0X","startVertex0Y","startVertex1X","startVertex1Y","diffX","diffY","newVertex0X","newVertex0Y","newVertex1X","newVertex1Y","curSnap0","curSnap1","maxV","minV","lineLength","holesWithOffsetPosition","pointOnLine","lineGroups","mergeEqualsVertices","ret","addedLine","oldLineGroup","hasIn","lineAttributes","lAttr","vertexOne","vertexTwo","ID","selectedHole","cosAlpha","sinAlpha","minLeftVertexHole","maxRightVertexHole","findEntry","removed","hl","line_holes","stateH","hAttr","offsetA","offsetB","_unitA","_unitB","mergeDeepIn","relatedPrototype","relatedID","VertexModel","vertexAttributes","elementIndex","forceRemove","delete","previousMode","oldVertexID","oldVertex","lineType","lineProps","removeZeroLengthLines","verticesCoords","stateI","originalX","originalY","itemAttributes","hGuideID","vGuideID","CircularGuide","selectToolDrawingHole","selectToolDrawingItem","selectToolDrawingLine","createFromSelectedElements","barycenter","removeAndDeleteElements","rotate","SELECT_TOOL_3D_VIEW","SELECT_TOOL_3D_FIRST_PERSON","Toolbar","Sidebar","FooterBar","wrapperStyle","flexFlow","actions","actionNamespace","plugin","contentW","toolbarH","contentH","sidebarH","extractedState","allowProjectFileSupport","arrayOf","autosaveKey","autosaveDelay","sidebarComponents","footerbarComponents","customContents","softwareSignature","childContextTypes","connect","reduxState","dispatch","bindActionCreators","addGroup","addGroupFromSelected","selectGroup","unselectGroup","addToGroup","removeFromGroup","setGroupAttributes","setGroupProperties","setGroupBarycenter","removeGroup","removeGroupAndDeleteElements","groupTranslate","groupRotate","ASIDE_STYLE","sortButtonsCb","mapButtonsCb","dom","sorter","concat","React","maxWidth","CustomContent","data-element-root","data-prototype","data-id","data-selected","data-layer","cx","cy","renderedHoles","startAt","renderedHole","getElement","render2D","half_thickness","renderedLine","renderedRuler","STYLE_CIRCLE","STYLE_CIRCLE2","renderedItem","data-part","rendered","renderedAreaSize","polygonWithHoles","polygonHole","center","areaSize","holePolygon","String","fromCharCode","renderedGrids","gridID","grid","toList","GridHorizontalStreak","GridVerticalStreak","sharedStyles","elementW","paddingLeft","insideElementsStyle","rulerStyle","markerStyle","rulerContainer","grdAutoColumns","positiveRulerContainer","negativeRulerContainer","positiveDomElements","elementH","textOrientation","writingMode","letterSpacing","grdAutoRows","containerStyle","overflowX","itemsStyle","gridGap","searchContainer","WebkitTransition","searchText","searchInput","historyContainer","historyElementStyle","CatalogList","currentCategory","getCategory","elementsToDisplay","toRet","curr","flattenCategories","filtered","categoriesToDisplay","breadcrumbComponent","breadcrumbsNames","pathName","names","pathSize","turnBackButton","selectedHistory","selectedHistoryElements","cat","elem","STYLE_BOX","alignSelf","justifySelf","STYLE_BOX_HOVER","STYLE_TITLE_HOVER","STYLE_IMAGE_CONTAINER","STYLE_IMAGE","backgroundSize","STYLE_IMAGE_HOVER","STYLE_PLUS_HOVER","STYLE_DESCRIPTION","STYLE_TAGS","listStyle","STYLE_TAG","CatalogItem","image","tag","description","breadcrumbStyle","breadcrumbTextStyle","breadcrumbLastTextStyle","breadcrumbTabStyle","CatalogBreadcrumb","labelNames","lastElement","STYLE_TITLE_HOVERED","STYLE_NEXT_HOVER","CONTAINER_DIV","CatalogPageItem","changePage","MdNavigateNext","STYLE_BACK","STYLE_BACK_HOVER","CatalogTurnBackPageItem","MdNavigateBefore","ProjectConfigurator","dataWidth","dataHeight","alert","onSubmit","htmlFor","multiselected","selectedGroup","onKeyUp","PanelElementEditor","includes","componentRenderer","attrPorpSeparatorStyle","headActionStyle","iconHeadStyle","ElementEditor","attributesFormData","initAttrData","propertiesFormData","initPropData","updateAttribute","v_a","v_b","_lengthA","endAt","_lengthB","catalogElement","mapped","currentValue","defaultValue","attributeName","v_0","v_1","v_b_new","attr","widthLength","halfWidthLength","lengthValue","offsetUnit","offsetAttribute","save","appState","attributeFormData","MdContentCopy","MdContentPaste","getPropertyType","updateProperty","AttributesEditor","ItemAttributesEditor","inputStyle","renderedX","renderedY","renderedR","LineAttributesEditor","Infinity","HoleAttributesEditor","tablegroupStyle","PanelGroupEditor","nextContext","FaUnlink","PanelMultiElementsEditor","selectedGroupID","selecteds","selectedJs","PanelGroups","newEmptyHover","newSelectedHover","selectClick","shouldHighlight","rowStyle","dimension","lSum","elProt","FaLink","footerBarStyle","boxSizing","leftTextStyle","rightTextStyle","coordStyle","appMessageStyle","globalState","errorsJsx","err","toLocaleString","errorLableStyle","errorIconStyle","warningsJsx","warningLableStyle","warningIconStyle","updateSnapMask","MdAddCircle","toString","MdWarning","TabsStyle","delay","TIMEOUT_DELAY","localStorage","getItem","subscribe","timeout","clearTimeout","setTimeout","getState","setItem","getModifierState","tempSnapConfiguartion","getStore","do","dispatchAction","groupCollapsed","groupEnd","WallFactory","AreaFactory","textures","wallElement","thickness","length_5","half_thickness_eps","epsilon","textDistance","STYLE_RECT","STYLE_RECT_INVISIBLE","STYLE_RECT_SELECTED","STYLE_LINE","render3D","buildWall","updateRender3D","mesh","oldElement","differences","selfDestroy","selfBuild","updatedWall","textureValues","textureName","textureA","bricks","textureB","strokeOpacity","inverted","app","halfThickness","halfDistance","soulMaterial","MeshBasicMaterial","soul","Mesh","BoxGeometry","asin","z","holeData","holeWidth","holeHeight","holeAltitude","holeDistance","holeGeometry","holeMesh","wallBSP","ThreeBSP","holeBSP","wallWithHoleBSP","subtract","toMesh","frontMaterial","backMaterial","applyTexture","scaleFactor","texturedFaceDistance","frontFace","clone","material","halfPI","backFace","noPerf","getObjectByName","newThickness","oldThickness","originalThickness","xTemp","zTemp","texture","loader","TextureLoader","uri","needsUpdate","wrapS","RepeatWrapping","wrapT","repeat","lengthRepeatScale","heightRepeatScale","normalMap","normalScale","Vector2","normalScaleX","normalScaleY","THREE","geometry","_length_i","face","faceVertexUvs","uvs","polygons","Polygon","Node","matrix","Matrix4","tree","updateMatrix","faces","Face3","vertexNormals","applyMatrix4","Face4","calculateProperties","other_tree","invert","clipTo","build","allPolygons","polygon_vertice_count","vertex_idx_a","vertex_idx_b","vertex_idx_c","verticeUvs","getInverse","polygon_count","vertice_dict","uv","Vector3","toGeometry","setFromMatrixPosition","setFromRotationMatrix","cross","normalize","dot","vertice_count","multiplyScalar","side_value","classification","num_positive","num_negative","classifyVertex","coplanar_front","coplanar_back","front","back","classifySide","ti","tj","vi","vj","interpolate","scalar","sub","other","lerp","divider","splitPolygon","temp","flip","clipPolygons","areaElement","layerElementsVisible","patternColor","createArea","updatedArea","shape","Shape","moveTo","lineTo","areaMaterial","MeshPhongMaterial","side","DoubleSide","holeCoords","holeShape","createShape","shapeGeometry","ShapeGeometry","assignUVs","boundingBox","Box3","setFromObject","floor","computeBoundingBox","range","v3","uvsNeedUpdate","shapeCoords","parquet","tile1","ceramic","strand_porcelain","grass","painted","Three","MeshLambertMaterial","metalBlue","darkGrey","boxMaterials","makeHandle","handle","Object3D","geometry_p1","CylinderGeometry","geometry_p2","SphereGeometry","geometry_p3","makeHandleBase","handleBase","geometryBase1","geometryBase2","lock","LockGeometry1","lockGeometry2","lockGeometry3","lock_p1","lock_p2","lock_p3","makeLock","handleBase1","handleBase2","flip_horizontal","holePath","arcPath","arcPath2","holeStyle","arcStyle","strokeDasharray","newAltitude","door_double","LongDoorGeometry","longDoor","ShortDoorGeometry","shortDoor","handle2","makeDoor","valuePosition","deltaZ","bbox","BoxHelper","linewidth","renderOrder","depthTest","cached3DDoor","STYLE_HOLE_BASE","STYLE_HOLE_SELECTED","STYLE_ARC_BASE","STYLE_ARC_SELECTED","flip_orizzontal","onLoadItem","initialWidth","initialHeight","initialThickness","box","mtl","obj","img","dirname","manager","DefaultLoadingManager","EventDispatcher","onLoad","onProgress","onError","scope","FileLoader","setPath","texturePath","setBaseUrl","setCrossOrigin","crossOrigin","setMaterialOptions","materialOptions","delimiter_pattern","materialsInfo","trim","charAt","pos","substring","ss","materialCreator","MaterialCreator","setManager","baseUrl","materialsArray","nameLookup","FrontSide","wrap","convert","converted","mn","mat","covmat","prop","lprop","normalizeRGB","ignoreZeroRGBs","getIndex","materialName","getAsArray","createMaterial_","resolveURL","Color","fromArray","specular","texParams","getTextureParams","loadTexture","copy","specularMap","shininess","transparent","bumpMap","matParams","bumpScale","join","mapping","Loader","Handlers","object_pattern","material_library_pattern","material_use_pattern","ParserState","objects","normals","materialLibraries","startObject","fromDeclaration","previousMaterial","currentMaterial","_finalize","smooth","startMaterial","libraries","previous","inherited","groupCount","mtllib","groupStart","cloned","end","lastMultiMaterial","declared","finalize","parseVertexIndex","len","parseNormalIndex","parseUVIndex","addVertex","src","dst","addVertexPoint","addVertexLine","addNormal","addColor","addUV","addUVLine","addFace","ua","ub","uc","na","nb","nc","vLen","ia","ib","ic","uvLen","nLen","addPointGeometry","addLineGeometry","uvi","lineFirstChar","trimLeft","vertexData","faceVertices","jl","vertexParts","lineParts","lineUVs","li","llen","parts","pointData","exec","container","isLine","isPoints","hasVertexColors","buffergeometry","BufferGeometry","addAttribute","Float32BufferAttribute","computeVertexNormals","createdMaterials","miLen","sourceMaterial","LineBasicMaterial","PointsMaterial","materialPoints","sizeAttenuation","materialLine","lights","flatShading","vertexColors","VertexColors","NoColors","LineSegments","Points","timeEnd","turquoise","metalBlueGrey","makePanicDoor","mechanism","BaseGeometry","FirstBlockGeometry","SecondBlockGeometry","base","FirstBlock","SecondBlock","doorLeft","makeDoorStructure","doorRight","BaseGeometry1","BaseGeometry2","geometryLock1","geometryLock2","geometryLock3","lockPiece1","lockPiece2","lockPiece3","makeLockKey","base1","base2","hilt","GeometryPiece1","GeometryPiece2","GeometryPiece3","piece1","piece2","piece3","piece4","makeHilt","doorLeftPivot","makePivot","doorRightPivot","safetyHandleLeft","makeSafetyHandle","safetyHandleRight","doorLockLeft","makeDoorLock","doorLockRight","block","DoorLockGeometry1","DoorLockGeometry2","DoorLock1","DoorLock2","handleSupportGeometry","PushButtonGeometry","PushButtonCoverGeometry","handleSupport","pushButton","pushButtonCover1","pushButtonCover2","DoorPivot","DownPivotGeometry","UpPivotGeometry","downPivot1","upPivot1","downPivot2","upPivot2","lowBaseDoorGeometry","middleBaseDoorGeometry","highBaseDoorGeometry","BorderCoverDoorGeometry1","BorderCoverDoorGeometry2","MiddleDoorGeometry2","MiddleDoorGeometry1","HighDoorGeometry","glassGeometry","LowDoorGeometry","glassCoverVertical","glassCoverHorizontal","lowCoverDoor","middleDoor1","middleDoor2","baseDoor","middleCoverDoor1","middleCoverDoor2","highCoverDoor","highDoor","borderCoverDoor1","borderCoverDoor2","glass","glassVerticalCover1","glassVerticalCover2","glassHorizontalCover1","glassHorizontalCover2","flip_value","handleSide_value","handleSide","PieceGeometry1","PieceGeometry2","DoorLock","doorLockGeometry1","doorLockGeometry2","doorLock1","doorLock2","leftDoor","Lock","geometry1","geometry2","geometry3","LockPiece1","LockPiece2","LockPiece3","Geometry_p1","Geometry_p2","Geometry_p3","leftDoorPivot","rightDoorPivot","doorLock","HandleSupportGeometry","PushGeometry","CoverPushGeometry","PushButton","CoverPush1","CoverPush2","flip_vertical","scaleX","scaleY","rotateAngle","tX","tY","pX1","pX2","pY1","pY2","cached3DWindow","holeStyle2","doorShape","doorHole","Path","ExtrudeGeometry","steps","bevelEnabled","bevelThickness","bevelSize","bevelSegments","doorGeometry","door2","barGeometry","doorBar","HandleGeometry1","handle_p1","HandleGeometry2","handle_p2","venetian","createTenda","roundedRectShape","quadraticCurveTo","holePath1","arc","holePath2","holePath3","holePath4","holePath5","extrudeSettings","tubo","roundedRectShape2","extrudeSettings2","mesh2","valueObject","width1","Tenda","geom","applyMatrix","makeTranslation","meshMaterial","createMesh","ParametricGeometry","TorusGeometry","torus","geometryAsta","asta","asta2","geometrySphereUp","sphere","sphere2","sphere3","sphere4","imageBrowserDownload","imageUri","canvas","getElementsByTagName","toDataURL","MdCamera","svgElements","maxWidthSVGElement","baseVal","serializer","XMLSerializer","Image","logo","ctx","getContext","heightAtt","createAttribute","setAttributeNode","widthAtt","fillStyle","fillRect","btoa","serializeToString","onload","drawImage"],"mappings":"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","file":"app.js","sourcesContent":[" \t// install a JSONP callback for chunk loading\n \tfunction webpackJsonpCallback(data) {\n \t\tvar chunkIds = data[0];\n \t\tvar moreModules = data[1];\n \t\tvar executeModules = data[2];\n\n \t\t// add \"moreModules\" to the modules object,\n \t\t// then flag all \"chunkIds\" as loaded and fire callback\n \t\tvar moduleId, chunkId, i = 0, resolves = [];\n \t\tfor(;i < chunkIds.length; i++) {\n \t\t\tchunkId = chunkIds[i];\n \t\t\tif(installedChunks[chunkId]) {\n \t\t\t\tresolves.push(installedChunks[chunkId][0]);\n \t\t\t}\n \t\t\tinstalledChunks[chunkId] = 0;\n \t\t}\n \t\tfor(moduleId in moreModules) {\n \t\t\tif(Object.prototype.hasOwnProperty.call(moreModules, moduleId)) {\n \t\t\t\tmodules[moduleId] = moreModules[moduleId];\n \t\t\t}\n \t\t}\n \t\tif(parentJsonpFunction) parentJsonpFunction(data);\n\n \t\twhile(resolves.length) {\n \t\t\tresolves.shift()();\n \t\t}\n\n \t\t// add entry modules from loaded chunk to deferred list\n \t\tdeferredModules.push.apply(deferredModules, executeModules || []);\n\n \t\t// run deferred modules when all chunks ready\n \t\treturn checkDeferredModules();\n \t};\n \tfunction checkDeferredModules() {\n \t\tvar result;\n \t\tfor(var i = 0; i < deferredModules.length; i++) {\n \t\t\tvar deferredModule = deferredModules[i];\n \t\t\tvar fulfilled = true;\n \t\t\tfor(var j = 1; j < deferredModule.length; j++) {\n \t\t\t\tvar depId = deferredModule[j];\n \t\t\t\tif(installedChunks[depId] !== 0) fulfilled = false;\n \t\t\t}\n \t\t\tif(fulfilled) {\n \t\t\t\tdeferredModules.splice(i--, 1);\n \t\t\t\tresult = __webpack_require__(__webpack_require__.s = deferredModule[0]);\n \t\t\t}\n \t\t}\n \t\treturn result;\n \t}\n\n \t// The module cache\n \tvar installedModules = {};\n\n \t// object to store loaded and loading chunks\n \t// undefined = chunk not loaded, null = chunk preloaded/prefetched\n \t// Promise = chunk loading, 0 = chunk loaded\n \tvar installedChunks = {\n \t\t0: 0\n \t};\n\n \tvar deferredModules = [];\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \tvar jsonpArray = window[\"webpackJsonp\"] = window[\"webpackJsonp\"] || [];\n \tvar oldJsonpFunction = jsonpArray.push.bind(jsonpArray);\n \tjsonpArray.push = webpackJsonpCallback;\n \tjsonpArray = jsonpArray.slice();\n \tfor(var i = 0; i < jsonpArray.length; i++) webpackJsonpCallback(jsonpArray[i]);\n \tvar parentJsonpFunction = oldJsonpFunction;\n\n\n \t// add entry module to deferred list\n \tdeferredModules.push([161,1]);\n \t// run deferred modules when ready\n \treturn checkDeferredModules();\n","// ACTIONS project\nexport const NEW_PROJECT = 'NEW_PROJECT';\nexport const LOAD_PROJECT = 'LOAD_PROJECT';\nexport const SAVE_PROJECT = 'SAVE_PROJECT';\nexport const OPEN_CATALOG = 'OPEN_CATALOG';\nexport const SELECT_TOOL_EDIT = 'SELECT_TOOL_EDIT';\nexport const UNSELECT_ALL = 'UNSELECT_ALL';\nexport const SET_PROPERTIES = 'SET_PROPERTIES';\nexport const SET_ITEMS_ATTRIBUTES = 'SET_ITEMS_ATTRIBUTES';\nexport const SET_LINES_ATTRIBUTES = 'SET_LINES_ATTRIBUTES';\nexport const SET_HOLES_ATTRIBUTES = 'SET_HOLES_ATTRIBUTES';\nexport const REMOVE = 'REMOVE';\nexport const UNDO = 'UNDO';\nexport const ROLLBACK = 'ROLLBACK';\nexport const SET_PROJECT_PROPERTIES = 'SET_PROJECT_PROPERTIES';\nexport const OPEN_PROJECT_CONFIGURATOR = 'OPEN_PROJECT_CONFIGURATOR';\nexport const INIT_CATALOG = 'INIT_CATALOG';\nexport const UPDATE_MOUSE_COORDS = 'UPDATE_MOUSE_COORDS';\nexport const UPDATE_ZOOM_SCALE = 'UPDATE_ZOOM_SCALE';\nexport const TOGGLE_SNAP = 'TOGGLE_SNAP';\nexport const CHANGE_CATALOG_PAGE = 'CHANGE_CATALOG_PAGE';\nexport const GO_BACK_TO_CATALOG_PAGE = 'GO_BACK_TO_CATALOG_PAGE';\nexport const THROW_ERROR = 'THROW_ERROR';\nexport const THROW_WARNING = 'THROW_WARNING';\nexport const COPY_PROPERTIES = 'COPY_PROPERTIES';\nexport const PASTE_PROPERTIES = 'PASTE_PROPERTIES';\nexport const PUSH_LAST_SELECTED_CATALOG_ELEMENT_TO_HISTORY = 'PUSH_LAST_SELECTED_CATALOG_ELEMENT_TO_HISTORY';\nexport const ALTERATE_STATE = 'ALTERATE_STATE';\nexport const SET_MODE = 'SET_MODE';\nexport const ADD_HORIZONTAL_GUIDE = 'ADD_HORIZONTAL_GUIDE';\nexport const ADD_VERTICAL_GUIDE = 'ADD_VERTICAL_GUIDE';\nexport const ADD_CIRCULAR_GUIDE = 'ADD_CIRCULAR_GUIDE';\nexport const REMOVE_HORIZONTAL_GUIDE = 'REMOVE_HORIZONTAL_GUIDE';\nexport const REMOVE_VERTICAL_GUIDE = 'REMOVE_VERTICAL_GUIDE';\nexport const REMOVE_CIRCULAR_GUIDE = 'REMOVE_CIRCULAR_GUIDE';\n\n// ACTIONS viewer2D\nexport const SELECT_TOOL_ZOOM_IN = 'SELECT_TOOL_ZOOM_IN';\nexport const SELECT_TOOL_ZOOM_OUT = 'SELECT_TOOL_ZOOM_OUT';\nexport const SELECT_TOOL_PAN = 'SELECT_TOOL_PAN';\nexport const UPDATE_2D_CAMERA = 'UPDATE_2D_CAMERA';\n\n//ACTIONS viewer3D\n/*\nexport const SELECT_TOOL_3D_VIEW = 'SELECT_TOOL_3D_VIEW';\nexport const SELECT_TOOL_3D_FIRST_PERSON = 'SELECT_TOOL_3D_FIRST_PERSON';\n*/\n\n//ACTIONS items\nexport const SELECT_TOOL_DRAWING_ITEM = 'SELECT_TOOL_DRAWING_ITEM';\nexport const UPDATE_DRAWING_ITEM = 'UPDATE_DRAWING_ITEM';\nexport const END_DRAWING_ITEM = 'END_DRAWING_ITEM';\nexport const BEGIN_DRAGGING_ITEM = 'BEGIN_DRAGGING_ITEM';\nexport const UPDATE_DRAGGING_ITEM = 'UPDATE_DRAGGING_ITEM';\nexport const END_DRAGGING_ITEM = 'END_DRAGGING_ITEM';\nexport const BEGIN_ROTATING_ITEM = 'BEGIN_ROTATING_ITEM';\nexport const UPDATE_ROTATING_ITEM = 'UPDATE_ROTATING_ITEM';\nexport const END_ROTATING_ITEM = 'END_ROTATING_ITEM';\n\n//ACTIONS groups\nexport const ADD_GROUP = 'ADD_GROUP';\nexport const ADD_GROUP_FROM_SELECTED = 'ADD_GROUP_FROM_SELECTED';\nexport const SELECT_GROUP = 'SELECT_GROUP';\nexport const UNSELECT_GROUP = 'UNSELECT_GROUP';\nexport const ADD_TO_GROUP = 'ADD_TO_GROUP';\nexport const REMOVE_FROM_GROUP = 'REMOVE_FROM_GROUP';\nexport const SET_GROUP_PROPERTIES = 'SET_GROUP_PROPERTIES';\nexport const SET_GROUP_ATTRIBUTES = 'SET_GROUP_ATTRIBUTES';\nexport const SET_GROUP_BARYCENTER = 'SET_GROUP_BARYCENTER';\nexport const REMOVE_GROUP = 'REMOVE_GROUP';\nexport const REMOVE_GROUP_AND_DELETE_ELEMENTS = 'REMOVE_GROUP_AND_DELETE_ELEMENTS';\nexport const GROUP_TRANSLATE = 'GROUP_TRANSLATE';\nexport const GROUP_ROTATE = 'GROUP_ROTATE';\n\n//ACTION drawings\nexport const SELECT_HOLE = 'SELECT_HOLE';\nexport const SELECT_AREA = 'SELECT_AREA';\nexport const SELECT_ITEM = 'SELECT_ITEM';\nexport const SELECT_LINE = 'SELECT_LINE';\nexport const SELECT_TOOL_DRAWING_LINE = 'SELECT_TOOL_DRAWING_LINE';\nexport const BEGIN_DRAWING_LINE = 'BEGIN_DRAWING_LINE';\nexport const UPDATE_DRAWING_LINE = 'UPDATE_DRAWING_LINE';\nexport const END_DRAWING_LINE = 'END_DRAWING_LINE';\nexport const SELECT_TOOL_DRAWING_HOLE = 'SELECT_TOOL_DRAWING_HOLE';\nexport const UPDATE_DRAWING_HOLE = 'UPDATE_DRAWING_HOLE'; //SHOULD BE SLPITTED IN BEGIN_DRAWING_HOLE AND UPDATE_DRAWING_HOLE\nexport const END_DRAWING_HOLE = 'END_DRAWING_HOLE';\nexport const BEGIN_DRAGGING_LINE = 'BEGIN_DRAGGING_LINE';\nexport const UPDATE_DRAGGING_LINE = 'UPDATE_DRAGGING_LINE';\nexport const END_DRAGGING_LINE = 'END_DRAGGING_LINE';\nexport const SELECT_TOOL_UPLOAD_IMAGE = 'SELECT_TOOL_UPLOAD_IMAGE';\nexport const BEGIN_UPLOADING_IMAGE = 'BEGIN_UPLOADING_IMAGE';\nexport const END_UPLOADING_IMAGE = 'END_UPLOADING_IMAGE';\nexport const BEGIN_FITTING_IMAGE = 'BEGIN_FITTING_IMAGE';\nexport const END_FITTING_IMAGE = 'END_FITTING_IMAGE';\nexport const BEGIN_DRAGGING_HOLE = 'BEGIN_DRAGGING_HOLE';\nexport const UPDATE_DRAGGING_HOLE = 'UPDATE_DRAGGING_HOLE';\nexport const END_DRAGGING_HOLE = 'END_DRAGGING_HOLE';\n\n//ACTIONS vertices\nexport const BEGIN_DRAGGING_VERTEX = 'BEGIN_DRAGGING_VERTEX';\nexport const UPDATE_DRAGGING_VERTEX = 'UPDATE_DRAGGING_VERTEX';\nexport const END_DRAGGING_VERTEX = 'END_DRAGGING_VERTEX';\n\n//ACTIONS scene\nexport const SET_LAYER_PROPERTIES = 'SET_LAYER_PROPERTIES';\nexport const ADD_LAYER = 'ADD_LAYER';\nexport const SELECT_LAYER = 'SELECT_LAYER';\nexport const REMOVE_LAYER = 'REMOVE_LAYER';\n\n//GROUPING ACTIONS\nexport const PROJECT_ACTIONS = {\n  NEW_PROJECT,\n  LOAD_PROJECT,\n  SAVE_PROJECT,\n  OPEN_CATALOG,\n  SELECT_TOOL_EDIT,\n  UNSELECT_ALL,\n  SET_PROPERTIES,\n  SET_ITEMS_ATTRIBUTES,\n  SET_LINES_ATTRIBUTES,\n  SET_HOLES_ATTRIBUTES,\n  REMOVE,\n  UNDO,\n  ROLLBACK,\n  SET_PROJECT_PROPERTIES,\n  OPEN_PROJECT_CONFIGURATOR,\n  INIT_CATALOG,\n  UPDATE_MOUSE_COORDS,\n  UPDATE_ZOOM_SCALE,\n  TOGGLE_SNAP,\n  CHANGE_CATALOG_PAGE,\n  GO_BACK_TO_CATALOG_PAGE,\n  THROW_ERROR,\n  THROW_WARNING,\n  COPY_PROPERTIES,\n  PASTE_PROPERTIES,\n  PUSH_LAST_SELECTED_CATALOG_ELEMENT_TO_HISTORY,\n  ALTERATE_STATE,\n  SET_MODE,\n  ADD_HORIZONTAL_GUIDE,\n  ADD_VERTICAL_GUIDE,\n  ADD_CIRCULAR_GUIDE,\n  REMOVE_HORIZONTAL_GUIDE,\n  REMOVE_VERTICAL_GUIDE,\n  REMOVE_CIRCULAR_GUIDE\n};\n\nexport const VIEWER2D_ACTIONS = {\n  SELECT_TOOL_ZOOM_IN,\n  SELECT_TOOL_ZOOM_OUT,\n  SELECT_TOOL_PAN,\n  UPDATE_2D_CAMERA\n};\n\n/*\nexport const VIEWER3D_ACTIONS = {\n  SELECT_TOOL_3D_VIEW,\n  SELECT_TOOL_3D_FIRST_PERSON\n};\n*/\n\nexport const ITEMS_ACTIONS = {\n  SELECT_ITEM,\n  SELECT_TOOL_DRAWING_ITEM,\n  UPDATE_DRAWING_ITEM,\n  END_DRAWING_ITEM,\n  BEGIN_DRAGGING_ITEM,\n  UPDATE_DRAGGING_ITEM,\n  END_DRAGGING_ITEM,\n  BEGIN_ROTATING_ITEM,\n  UPDATE_ROTATING_ITEM,\n  END_ROTATING_ITEM\n};\n\nexport const HOLE_ACTIONS = {\n  SELECT_HOLE,\n  SELECT_TOOL_DRAWING_HOLE,\n  UPDATE_DRAWING_HOLE,\n  END_DRAWING_HOLE,\n  BEGIN_DRAGGING_HOLE,\n  UPDATE_DRAGGING_HOLE,\n  END_DRAGGING_HOLE\n};\n\nexport const LINE_ACTIONS = {\n  SELECT_LINE,\n  SELECT_TOOL_DRAWING_LINE,\n  BEGIN_DRAWING_LINE,\n  UPDATE_DRAWING_LINE,\n  END_DRAWING_LINE,\n  BEGIN_DRAGGING_LINE,\n  UPDATE_DRAGGING_LINE,\n  END_DRAGGING_LINE\n};\n\nexport const AREA_ACTIONS = {\n  SELECT_AREA\n};\n\nexport const GROUP_ACTIONS = {\n  ADD_GROUP,\n  ADD_GROUP_FROM_SELECTED,\n  SELECT_GROUP,\n  UNSELECT_GROUP,\n  ADD_TO_GROUP,\n  REMOVE_FROM_GROUP,\n  SET_GROUP_PROPERTIES,\n  SET_GROUP_ATTRIBUTES,\n  SET_GROUP_BARYCENTER,\n  REMOVE_GROUP,\n  REMOVE_GROUP_AND_DELETE_ELEMENTS,\n  GROUP_TRANSLATE,\n  GROUP_ROTATE\n};\n\nexport const SCENE_ACTIONS = {\n  ADD_LAYER,\n  SET_LAYER_PROPERTIES,\n  SELECT_LAYER,\n  REMOVE_LAYER\n};\n\nexport const VERTEX_ACTIONS = {\n  BEGIN_DRAGGING_VERTEX,\n  UPDATE_DRAGGING_VERTEX,\n  END_DRAGGING_VERTEX\n};\n\n//MODES\nexport const MODE_IDLE = 'MODE_IDLE';\nexport const MODE_2D_ZOOM_IN = 'MODE_2D_ZOOM_IN';\nexport const MODE_2D_ZOOM_OUT = 'MODE_2D_ZOOM_OUT';\nexport const MODE_2D_PAN = 'MODE_2D_PAN';\nexport const MODE_3D_VIEW = 'MODE_3D_VIEW';\nexport const MODE_3D_FIRST_PERSON = 'MODE_3D_FIRST_PERSON';\nexport const MODE_WAITING_DRAWING_LINE = 'MODE_WAITING_DRAWING_LINE';\nexport const MODE_DRAGGING_LINE = 'MODE_DRAGGING_LINE';\nexport const MODE_DRAGGING_VERTEX = 'MODE_DRAGGING_VERTEX';\nexport const MODE_DRAGGING_ITEM = 'MODE_DRAGGING_ITEM';\nexport const MODE_DRAGGING_HOLE = 'MODE_DRAGGING_HOLE';\nexport const MODE_DRAWING_LINE = 'MODE_DRAWING_LINE';\nexport const MODE_DRAWING_HOLE = 'MODE_DRAWING_HOLE';\nexport const MODE_DRAWING_ITEM = 'MODE_DRAWING_ITEM';\nexport const MODE_ROTATING_ITEM = 'MODE_ROTATING_ITEM';\nexport const MODE_UPLOADING_IMAGE = 'MODE_UPLOADING_IMAGE';\nexport const MODE_FITTING_IMAGE = 'MODE_FITTING_IMAGE';\nexport const MODE_VIEWING_CATALOG = 'MODE_VIEWING_CATALOG';\nexport const MODE_CONFIGURING_PROJECT = 'MODE_CONFIGURING_PROJECT';\n\n//Thinking about it...\n//https://developer.mozilla.org/it/docs/Web/JavaScript/Reference/Global_Objects/Proxy\n/*\nlet MODE_DEF = [\n  'IDLE',\n  '2D_ZOOM_IN',\n  '2D_ZOOM_OUT',\n  '2D_PAN',\n  '3D_VIEW',\n  '3D_FIRST_PERSON',\n  'WAITING_DRAWING_LINE',\n  'DRAGGING_LINE',\n  'DRAGGING_VERTEX',\n  'DRAGGING_ITEM',\n  'DRAGGING_HOLE',\n  'DRAWING_LINE',\n  'DRAWING_HOLE',\n  'DRAWING_ITEM',\n  'ROTATING_ITEM',\n  'UPLOADING_IMAGE',\n  'FITTING_IMAGE',\n  'VIEWING_CATALOG',\n  'CONFIGURING_PROJECT',\n];\n\nexport const MODE = new Proxy( MODE_DEF, { get: (target, name) => { return target.indexOf(name) !== -1 ? name : null } } );\n*/\n\nexport const MODE_SNAPPING = [\n  MODE_IDLE, MODE_2D_ZOOM_IN, MODE_2D_ZOOM_OUT, MODE_2D_PAN,\n  MODE_WAITING_DRAWING_LINE, MODE_DRAWING_LINE, MODE_DRAWING_HOLE,\n  MODE_DRAWING_ITEM, MODE_DRAGGING_LINE, MODE_DRAGGING_VERTEX,\n  MODE_DRAGGING_ITEM, MODE_DRAGGING_HOLE, MODE_FITTING_IMAGE,\n  MODE_UPLOADING_IMAGE, MODE_ROTATING_ITEM\n];\n\n//UNITS\nexport const UNIT_MILLIMETER = 'mm';\nexport const UNIT_CENTIMETER = 'cm';\nexport const UNIT_METER = 'm';\nexport const UNIT_INCH = 'in';\nexport const UNIT_FOOT = 'ft';\nexport const UNIT_MILE = 'mi';\n\nexport const UNITS_LENGTH = [\n  UNIT_MILLIMETER,\n  UNIT_CENTIMETER,\n  UNIT_METER,\n  UNIT_INCH,\n  UNIT_FOOT,\n  UNIT_MILE\n];\n\nexport const EPSILON = 1e-6;\n\nexport const KEYBOARD_BUTTON_CODE = {\n  DELETE: 46,\n  BACKSPACE: 8,\n  ESC: 27,\n  Z: 90,\n  ALT: 18,\n  C: 67,\n  V: 86,\n  CTRL: 17,\n  ENTER: 13,\n  TAB: 9\n};","// COLORS\nexport const COLORS = {\n  white: '#FFF',\n  black: '#000'\n};\n\nexport const MATERIAL_COLORS = {\n  500: {\n    amber: '#FFC107',\n    blue_grey: '#607D8B',\n    blue: '#2196F3',\n    brown: '#795548',\n    cyan: '#00BCD4',\n    deep_orange: '#FF5722',\n    deep_purple: '#673AB7',\n    green: '#4CAF50',\n    grey: '#9E9E9E',\n    indigo: '#3F51B5',\n    light_blue: '#03A9F4',\n    light_green: '#8BC34A',\n    lime: '#CDDC39',\n    orange: '#FF9800',\n    pink: '#E91E63',\n    purple: '#9C27B0',\n    red: '#F44336',\n    teal: '#009688',\n    yellow: '#FFEB3B'\n  }\n};\n\nexport const PRIMARY_COLOR = {\n  main: '#28292D',\n  alt: '#2E2F33',\n  icon: '#C2C2C2',\n  border: '1px solid #555',\n  text_main: COLORS.white,\n  text_alt: '#EBEBEB',\n  input: '#55595C'\n};\n\nexport const SECONDARY_COLOR = {\n  main: '#1CA6FC',\n  alt: '#005FAF',\n  icon: '#1CA6FC',\n  border: '1px solid #FFF'\n};\n\nexport const MESH_SELECTED = '#99C3FB';\n\nexport const AREA_MESH_COLOR = {\n  selected: MESH_SELECTED,\n  unselected: '#F5F4F4'\n};\n\nexport const LINE_MESH_COLOR = {\n  selected: MESH_SELECTED,\n  unselected: '#8E9BA2'\n}","import Project from './project';\nimport Group from './group';\nimport Layer from './layer';\nimport Line from './line';\nimport Hole from './hole';\nimport Vertex from './vertex';\nimport Area from './area';\nimport Item from './item';\nimport { HorizontalGuide, VerticalGuide } from './guide';\n\nexport {\n  Project,\n  Group,\n  Layer,\n  Line,\n  Hole,\n  Vertex,\n  Area,\n  Item,\n  HorizontalGuide,\n  VerticalGuide\n};\n\nexport default {\n  Project,\n  Group,\n  Layer,\n  Line,\n  Hole,\n  Vertex,\n  Area,\n  Item,\n  HorizontalGuide,\n  VerticalGuide\n};\n","import * as GeometryUtils from './geometry';\nimport * as GraphInnerCycles from './graph-inner-cycles';\nimport * as MathUtils from './math';\nimport * as SnapUtils from './snap';\nimport * as SnapSceneUtils from './snap-scene';\nimport * as history from './history';\nimport * as ObjectUtils from './objects-utils';\nimport IDBroker from './id-broker';\nimport NameGenerator from './name-generator';\n\nexport {\n  GeometryUtils,\n  GraphInnerCycles,\n  MathUtils,\n  SnapUtils,\n  SnapSceneUtils,\n  history,\n  IDBroker,\n  NameGenerator,\n  ObjectUtils\n};\n\nexport default {\n  GeometryUtils,\n  GraphInnerCycles,\n  MathUtils,\n  SnapUtils,\n  SnapSceneUtils,\n  history,\n  IDBroker,\n  NameGenerator,\n  ObjectUtils\n};\n","import Button from './button';\nimport CancelButton from './cancel-button';\nimport ContentContainer from './content-container';\nimport ContentTitle from './content-title';\nimport DeleteButton from './delete-button';\nimport FormBlock from './form-block';\nimport FormColorInput from './form-color-input';\nimport FormLabel from './form-label';\nimport FormNumberInput from './form-number-input';\nimport FormSelect from './form-select';\nimport FormSlider from './form-slider';\nimport FormSubmitButton from './form-submit-button';\nimport FormTextInput from './form-text-input';\n\nexport {\n  Button,\n  CancelButton,\n  ContentContainer,\n  ContentTitle,\n  DeleteButton,\n  FormBlock,\n  FormColorInput,\n  FormLabel,\n  FormNumberInput,\n  FormSelect,\n  FormSlider,\n  FormSubmitButton,\n  FormTextInput\n};\n\nexport default {\n  Button,\n  CancelButton,\n  ContentContainer,\n  ContentTitle,\n  DeleteButton,\n  FormBlock,\n  FormColorInput,\n  FormLabel,\n  FormNumberInput,\n  FormSelect,\n  FormSlider,\n  FormSubmitButton,\n  FormTextInput\n};\n","const tableStyle = {width: '100%', borderSpacing: '2px 0', marginBottom: '2px'};\nconst firstTdStyle = {width: '6em', textTransform:'capitalize'};\n\nconst PropertyStyle = {\n  tableStyle,\n  firstTdStyle\n};\n\nexport default PropertyStyle;\n","import React, {Component} from 'react';\nimport PropTypes from 'prop-types';\nimport * as SharedStyle from '../../shared-style';\nimport { FaAngleDown, FaAngleUp } from 'react-icons/fa';\n\nconst STYLE = {\n  borderTop: '1px solid #222',\n  borderBottom: '1px solid #48494E',\n  userSelect: 'none'\n};\nconst STYLE_TITLE = {\n  fontSize: '11px',\n  color: SharedStyle.PRIMARY_COLOR.text_alt,\n  padding: '5px 15px 8px 15px',\n  backgroundColor: SharedStyle.PRIMARY_COLOR.alt,\n  textShadow: '-1px -1px 2px rgba(0, 0, 0, 1)',\n  boxShadow: 'inset 0px -3px 19px 0px rgba(0,0,0,0.5)',\n  margin: '0px',\n  cursor: 'pointer'\n};\nconst STYLE_CONTENT = {\n  fontSize: '11px',\n  color: SharedStyle.PRIMARY_COLOR.text_alt,\n  border: '1px solid #222',\n  padding: '0px',\n  backgroundColor: SharedStyle.PRIMARY_COLOR.alt,\n  textShadow: '-1px -1px 2px rgba(0, 0, 0, 1)'\n};\nconst STYLE_ARROW = {\n  float: 'right'\n};\n\nexport default class Panel extends Component {\n\n  constructor(props, context) {\n    super(props, context);\n\n    this.state = {\n      opened: props.hasOwnProperty('opened') ? props.opened : false,\n      hover: false\n    };\n  }\n\n  toggleOpen() {\n    this.setState({opened: !this.state.opened});\n  }\n\n  toggleHover() {\n    this.setState({hover: !this.state.hover});\n  }\n\n  render() {\n\n    let { name, headComponents, children } = this.props;\n    let { opened, hover } = this.state;\n\n    return (\n      <div style={STYLE}>\n        <h3\n          style={{...STYLE_TITLE, color: hover ? SharedStyle.SECONDARY_COLOR.main : SharedStyle.PRIMARY_COLOR.text_alt}}\n          onMouseEnter={() => this.toggleHover()}\n          onMouseLeave={() => this.toggleHover()}\n          onClick={() => this.toggleOpen()}\n        >\n          {name}\n          {headComponents}\n          {\n            opened ?\n              <FaAngleUp style={STYLE_ARROW} /> :\n              <FaAngleDown style={STYLE_ARROW} />\n          }\n        </h3>\n\n        <div style={{...STYLE_CONTENT, display: opened ? 'block' : 'none'}}>\n          {children}\n        </div>\n      </div>\n    )\n  }\n}\n\nPanel.propTypes = {\n  name: PropTypes.string.isRequired,\n  headComponents: PropTypes.array,\n  opened: PropTypes.bool\n};\n","import {Record, List, Map, fromJS} from 'immutable';\nimport {MODE_IDLE} from './constants';\nimport {SNAP_MASK} from './utils/snap';\n\nlet safeLoadMapList = (mapList, Model, defaultMap) => {\n  return mapList\n    ? new Map(mapList).map(m => new Model(m)).toMap()\n    : (defaultMap || new Map());\n};\n\n\nexport class Grid extends Record({\n  id: '',\n  type: '',\n  properties: Map()\n}, 'Grid') {\n  constructor(json = {}) {\n    super({\n      ...json,\n      properties: fromJS(json.properties || {})\n    });\n  }\n}\n\nexport const DefaultGrids = new Map({\n  'h1': new Grid({\n    id: 'h1',\n    type: 'horizontal-streak',\n    properties: {\n      step: 20,\n      colors: ['#808080', '#ddd', '#ddd', '#ddd', '#ddd']\n    }\n  }),\n  'v1': new Grid({\n    id: 'v1',\n    type: 'vertical-streak',\n    properties: {\n      step: 20,\n      colors: ['#808080', '#ddd', '#ddd', '#ddd', '#ddd']\n    }\n  })\n});\n\n\nexport class ElementsSet extends Record({\n  vertices: new List(),\n  lines: new List(),\n  holes: new List(),\n  areas: new List(),\n  items: new List(),\n}, 'ElementsSet') {\n  constructor(json = {}) {\n    super({\n      vertices: new List(json.vertices || []),\n      lines: new List(json.lines || []),\n      holes: new List(json.holes || []),\n      areas: new List(json.areas || []),\n      items: new List(json.items || [])\n    });\n  }\n}\n\nconst sharedAttributes =\n{\n  id: '',\n  type: '',\n  prototype: '',\n  name: '',\n  misc: new Map(),\n  selected: false,\n  properties: new Map(),\n  visible: true\n};\n\nexport class Vertex extends Record({\n  ...sharedAttributes,\n  x: -1,\n  y: -1,\n  prototype: 'vertices',\n  lines: new List(),\n  areas: new List()\n}, 'Vertex') {\n  constructor(json = {}) {\n    super({\n      ...json,\n      lines: new List(json.lines || []),\n      areas: new List(json.areas || [])\n    });\n  }\n}\n\nexport class Line extends Record({\n  ...sharedAttributes,\n  prototype: 'lines',\n  vertices: new List(),\n  holes: new List()\n}, 'Line') {\n  constructor(json = {}) {\n    super({\n      ...json,\n      properties: fromJS(json.properties || {}),\n      vertices: new List(json.vertices || []),\n      holes: new List(json.holes || []),\n    });\n  }\n}\n\nexport class Hole extends Record({\n  ...sharedAttributes,\n  prototype: 'holes',\n  offset: -1,\n  line: ''\n}, 'Hole') {\n  constructor(json = {}) {\n    super({\n      ...json,\n      properties: fromJS(json.properties || {})\n    });\n  }\n}\n\nexport class Area extends Record({\n  ...sharedAttributes,\n  prototype: 'areas',\n  vertices: new List(),\n  holes: new List()\n}, 'Area') {\n  constructor(json = {}) {\n    super({\n      ...json,\n      properties: fromJS(json.properties || {}),\n      vertices: new List(json.vertices || [])\n    });\n  }\n}\n\nexport class Item extends Record({\n  ...sharedAttributes,\n  prototype: 'items',\n  x: 0,\n  y: 0,\n  rotation: 0\n}, 'Item') {\n  constructor(json = {}) {\n    super({\n      ...json,\n      properties: fromJS(json.properties || {})\n    });\n  }\n}\n\nexport class Layer extends Record({\n  id: '',\n  altitude: 0,\n  order: 0,\n  opacity: 1,\n  name: '',\n  visible: true,\n  vertices: new Map(),\n  lines: new Map(),\n  holes: new Map(),\n  areas: new Map(),\n  items: new Map(),\n  selected: new ElementsSet(),\n}, 'Layer') {\n  constructor(json = {}) {\n    super({\n      ...json,\n      vertices: safeLoadMapList(json.vertices, Vertex),\n      lines: safeLoadMapList(json.lines, Line),\n      holes: safeLoadMapList(json.holes, Hole),\n      areas: safeLoadMapList(json.areas, Area),\n      items: safeLoadMapList(json.items, Item),\n      selected: new ElementsSet(json.selected)\n    });\n  }\n}\n\nexport class Group extends Record({\n  ...sharedAttributes,\n  prototype: 'groups',\n  x: 0,\n  y: 0,\n  rotation: 0,\n  elements: new Map()\n}, 'Group') {\n  constructor(json = {}) {\n    super({\n      ...json,\n      properties: fromJS(json.properties || {}),\n      elements: fromJS(json.elements || {})\n    });\n  }\n}\n\n\nexport const DefaultLayers = new Map({\n  'layer-1': new Layer({id: 'layer-1', name: 'default'})\n});\n\n\nexport class Scene extends Record({\n  unit: 'cm',\n  layers: new Map(),\n  grids: new Map(),\n  selectedLayer: null,\n  groups: new Map(),\n  width: 3000,\n  height: 2000,\n  meta: new Map(),   //additional info\n  guides: new Map()\n}, 'Scene') {\n  constructor(json = {}) {\n    let layers = safeLoadMapList(json.layers, Layer, DefaultLayers);\n    super({\n      ...json,\n      grids: safeLoadMapList(json.grids, Grid, DefaultGrids),\n      layers,\n      selectedLayer: layers.first().id,\n      groups: safeLoadMapList(json.groups || {}, Group),\n      meta: json.meta ? fromJS(json.meta) : new Map(),\n      guides: json.guides ? fromJS(json.guides) : new Map({ horizontal: new Map(), vertical: new Map(), circular: new Map() })\n    });\n  }\n}\n\nexport class CatalogElement extends Record({\n  name: '',\n  prototype: '',\n  info: new Map(),\n  properties: new Map(),\n}, 'CatalogElement') {\n  constructor(json = {}) {\n    super({\n      ...json,\n      info: fromJS(json.info),\n      properties: fromJS(json.properties)\n    });\n  }\n}\n\nexport class Catalog extends Record({\n  ready: false,\n  page: 'root',\n  path: new List(),\n  elements: new Map(),\n}, 'Catalog') {\n  constructor(json = {}) {\n    let elements = safeLoadMapList(json.elements, CatalogElement);\n    super({\n      elements,\n      ready: !elements.isEmpty()\n    });\n  }\n\n  factoryElement(type, options, initialProperties) {\n    if (!this.elements.has(type)) {\n      let catList = this.elements.map(element => element.name).toArray();\n      throw new Error(`Element ${type} does not exist in catalog ${catList}`);\n    }\n\n    let element = this.elements.get(type);\n    let properties = element.properties.map((value, key) => initialProperties && initialProperties.has(key) ? initialProperties.get(key) : value.get('defaultValue'));\n\n    switch (element.prototype) {\n      case 'lines':\n        return new Line(options).merge({properties});\n\n      case 'holes':\n        return new Hole(options).merge({properties});\n\n      case 'areas':\n        return new Area(options).merge({properties});\n\n      case 'items':\n        return new Item(options).merge({properties});\n\n      default:\n        throw new Error('prototype not valid');\n    }\n  }\n}\n\nexport class HistoryStructure extends Record({\n  list: new List(),\n  first: null,\n  last: null\n}, 'HistoryStructure' ){\n  constructor( json = {} ){\n    super({\n      list: fromJS( json.list || [] ),\n      first: new Scene( json.scene ),\n      last: new Scene( json.last || json.scene )\n    });\n  }\n}\n\nexport class State extends Record({\n  mode: MODE_IDLE,\n  scene: new Scene(),\n  sceneHistory: new HistoryStructure(),\n  catalog: new Catalog(),\n  viewer2D: new Map(),\n  mouse: new Map({x: 0, y: 0}),\n  zoom: 0,\n  snapMask: SNAP_MASK,\n  snapElements: new List(),\n  activeSnapElement: null,\n  drawingSupport: new Map(),\n  draggingSupport: new Map(),\n  rotatingSupport: new Map(),\n  errors: new List(),\n  warnings: new List(),\n  clipboardProperties: new Map(),\n  selectedElementsHistory: new List(),\n  misc: new Map(),   //additional info\n  alterate: false\n}, 'State') {\n  constructor(json = {}) {\n    super({\n      ...json,\n      scene: new Scene(json.scene),\n      sceneHistory: new HistoryStructure(json),\n      catalog: new Catalog(json.catalog || {}),\n      viewer2D: new Map(json.viewer2D || {}),\n      drawingSupport: new Map(json.drawingSupport || {}),\n      draggingSupport: new Map(json.draggingSupport || {}),\n      rotatingSupport: new Map(json.rotatingSupport || {}),\n      misc: json.misc ? fromJS(json.misc) : new Map()\n    });\n  }\n}\n\n\n\n","import Catalog from './catalog/catalog';\nimport Translator from './translator/translator';\nimport * as Models from './models';\nimport reducer from './reducers/reducer';\nimport ReactPlanner from './react-planner';\nimport Plugins from './plugins/export';\nimport * as ReactPlannerConstants from './constants';\nimport * as ReactPlannerSharedStyle from './shared-style';\nimport ReactPlannerComponents from './components/export';\nimport ReactPlannerActions from './actions/export';\nimport ReactPlannerReducers from './reducers/export';\nimport ReactPlannerClasses from './class/export';\nimport ElementsFactories from './catalog/factories/export';\nimport ReactPlannerUtils from './utils/export';\n\nexport {\n  Catalog,\n  Translator,\n  Models,\n  reducer,\n  ReactPlanner,\n  Plugins,\n  ReactPlannerConstants,\n  ReactPlannerSharedStyle,\n  ReactPlannerComponents,\n  ReactPlannerActions,\n  ReactPlannerReducers,\n  ReactPlannerClasses,\n  ElementsFactories,\n  ReactPlannerUtils\n};\n","import {Map, List, Record} from 'immutable';\nimport * as Geometry from './geometry';\n\nexport const SNAP_POINT = 'SNAP_POINT';\nexport const SNAP_LINE = 'SNAP_LINE';\nexport const SNAP_SEGMENT = 'SNAP_SEGMENT';\nexport const SNAP_GRID = 'SNAP_GRID';\nexport const SNAP_GUIDE = 'SNAP_GUIDE';\n\nexport const SNAP_MASK = new Map({\n  SNAP_POINT : true,\n  SNAP_LINE : true,\n  SNAP_SEGMENT : true,\n  SNAP_GRID : false,\n  SNAP_GUIDE : true\n});\n\nclass PointSnap extends Record({\n  type: 'point',\n  x: -1, y: -1,\n  radius: 1, priority: 1,\n  related: new List()\n}) {\n  nearestPoint(x, y) {\n    return {\n      x: this.x,\n      y: this.y,\n      distance: Geometry.pointsDistance(this.x, this.y, x, y)\n    };\n  }\n  isNear(x,y,distance){ return ~(this.x - x) + 1 < distance && ~(this.y - y) + 1 < distance; }\n}\n\nclass LineSnap extends Record({\n  type: 'line',\n  a: -1, b: -1, c: -1,\n  radius: 1, priority: 1,\n  related: new List()\n}) {\n  nearestPoint(x, y) {\n    return {\n      ...Geometry.closestPointFromLine(this.a, this.b, this.c, x, y),\n      distance: Geometry.distancePointFromLine(this.a, this.b, this.c, x, y)\n    };\n  }\n  isNear(x,y,distance){ return true; }\n}\n\nclass LineSegmentSnap extends Record({\n  type: 'line-segment',\n  x1: -1, y1: -1, x2: -1, y2: -1,\n  radius: 1, priority: 1,\n  related: new List()\n}) {\n  nearestPoint(x, y) {\n    return {\n      ...Geometry.closestPointFromLineSegment(this.x1, this.y1, this.x2, this.y2, x, y),\n      distance: Geometry.distancePointFromLineSegment(this.x1, this.y1, this.x2, this.y2, x, y)\n    };\n  }\n  isNear(x,y,distance){ return true; }\n}\n\nclass GridSnap extends Record({\n  type: 'grid',\n  x: -1, y: -1,\n  radius: 1, priority: 1,\n  related: new List()\n}) {\n  nearestPoint(x, y) {\n    return {\n      x: this.x,\n      y: this.y,\n      distance: Geometry.pointsDistance(this.x, this.y, x, y)\n    };\n  }\n  isNear(x,y,distance){ return ~(this.x - x) + 1 < distance && ~(this.y - y) + 1 < distance; }\n}\n\nexport function nearestSnap(snapElements, x, y, snapMask) {\n\n  let filter = {\n    'point': snapMask.get(SNAP_POINT),\n    'line': snapMask.get(SNAP_LINE),\n    'line-segment': snapMask.get(SNAP_SEGMENT),\n    'grid': snapMask.get(SNAP_GRID)\n  };\n\n  return snapElements\n  .valueSeq()\n  .filter( ( el ) => filter[el.type] && el.isNear(x,y, el.radius) )\n  .map(snap => { return {snap, point: snap.nearestPoint(x, y)} })\n  .filter(({snap: {radius}, point: {distance}}) => distance < radius)\n  .min(\n    (\n      {snap: { priority : p1 }, point: { distance : d1 }},\n      {snap: { priority : p2 }, point: { distance : d2 }}\n    ) => p1 === p2 ? ( d1 < d2 ? -1 : 1 ) : ( p1 > p2 ? -1 : 1 )\n  );\n}\n\nexport function addPointSnap(snapElements, x, y, radius, priority, related) {\n  related = new List([related]);\n  return snapElements.push(new PointSnap({x, y, radius, priority, related}));\n}\n\nexport function addLineSnap(snapElements, a, b, c, radius, priority, related) {\n  related = new List([related]);\n\n  return snapElements.withMutations(snapElements => {\n\n    let alreadyPresent = snapElements.some(lineSnap =>\n    lineSnap.type === 'line' &&\n    a === lineSnap.a &&\n    b === lineSnap.b &&\n    c === lineSnap.c);\n    if (alreadyPresent) return snapElements;\n\n    let intersections = snapElements\n      .valueSeq()\n      .filter(snap => snap.type === 'line')\n      .map(snap => Geometry.twoLinesIntersection(snap.a, snap.b, snap.c, a, b, c))\n      .filter(intersection => intersection !== undefined)\n      .forEach(({x, y}) => addPointSnap(snapElements, x, y, 20, 40));\n\n    snapElements.push(new LineSnap({a, b, c, radius, priority, related}));\n  })\n}\n\nexport function addLineSegmentSnap(snapElements, x1, y1, x2, y2, radius, priority, related) {\n  related = new List([related]);\n  return snapElements.push(new LineSegmentSnap({x1, y1, x2, y2, radius, priority, related}));\n}\n\nexport function addGridSnap(snapElements, x, y, radius, priority, related) {\n  related = new List([related]);\n  return snapElements.push(new GridSnap({x, y, radius, priority, related}));\n}\n","/** @description Determines the distance between two points\n *  @param {number} x0 Vertex 0 x\n *  @param {number} y0 Vertex 0 y\n *  @param {number} x1 Vertex 1 x\n *  @param {number} y1 Vertex 1 y\n *  @return {number}\n */\nimport {toFixedFloat, fAbs} from './math.js';\nimport {EPSILON} from '../constants';\n\nexport function compareVertices(v0, v1) {\n  return v0.x === v1.x ? v0.y - v1.y : v0.x - v1.x;\n}\n\nexport function minVertex(v0, v1) {\n  return compareVertices(v0, v1) > 0 ? v1 : v0;\n}\n\nexport function maxVertex(v0, v1) {\n  return compareVertices(v0, v1) > 0 ? v0 : v1;\n}\n\nexport function orderVertices(vertices) {\n  return vertices.sort(compareVertices);\n}\n\nexport function pointsDistance(x0, y0, x1, y1) {\n  let diff_x = x0 - x1;\n  let diff_y = y0 - y1;\n\n  return Math.sqrt((diff_x * diff_x) + (diff_y * diff_y));\n}\n\nexport function verticesDistance(v1, v2) {\n\n  let {x: x0, y: y0} = v1;\n  let {x: x1, y: y1} = v2;\n\n  return pointsDistance(x0, y0, x1, y1);\n}\n\nexport function horizontalLine(y) {\n  return {a: 0, b: 1, c: -y};\n}\n\nexport function verticalLine(x) {\n  return {a: 1, b: 0, c: -x};\n}\n\nexport function linePassingThroughTwoPoints(x1, y1, x2, y2) {\n  if (x1 === x2 && y1 == y2) throw new Error('Geometry error');\n  if (x1 === x2) return verticalLine(x);\n  if (y1 === y2) return horizontalLine(y1);\n\n  return {\n    a: y1 - y2,\n    b: x2 - x1,\n    c: y2 * x1 - x2 * y1\n  };\n}\n\nexport function distancePointFromLine(a, b, c, x, y) {\n  //https://en.wikipedia.org/wiki/Distance_from_a_point_to_a_line\n  return fAbs(a * x + b * y + c) / Math.sqrt(a * a + b * b);\n}\n\nexport function closestPointFromLine(a, b, c, x, y) {\n  //https://en.wikipedia.org/wiki/Distance_from_a_point_to_a_line\n  let denom = a * a + b * b;\n  return {\n    x: (b * (b * x - a * y) - a * c) / denom,\n    y: ((a * -b * x + a * y) - b * c) / denom,\n  }\n}\n\n/** @description Get point of intersection between two lines using ax+by+c line's equation\n *  @param {number} a x coefficent of first line\n *  @param {number} b y coefficent of first line\n *  @param {number} c costant of first line\n *  @param {number} j x coefficent of second line\n *  @param {number} k y coefficent of second line\n *  @param {number} l costant of second line\n *  @return {object} {x,y} point's coordinates\n */\nexport function twoLinesIntersection(a, b, c, j, k, l) {\n  let angularCoefficientsDiff = (b * j - a * k);\n\n  if (angularCoefficientsDiff === 0) return undefined; //no intersection\n\n  let y = (a * l - c * j) / angularCoefficientsDiff;\n  let x = (c * k - b * l) / angularCoefficientsDiff;\n  return {x, y};\n}\n\nexport function twoLineSegmentsIntersection(p1, p2, p3, p4) {\n  //https://github.com/psalaets/line-intersect/blob/master/lib/check-intersection.js\n\n  let {x: x1, y: y1} = p1;\n  let {x: x2, y: y2} = p2;\n  let {x: x3, y: y3} = p3;\n  let {x: x4, y: y4} = p4;\n\n  let denom = ((y4 - y3) * (x2 - x1)) - ((x4 - x3) * (y2 - y1));\n  let numA = ((x4 - x3) * (y1 - y3)) - ((y4 - y3) * (x1 - x3));\n  let numB = ((x2 - x1) * (y1 - y3)) - ((y2 - y1) * (x1 - x3));\n\n  if (fAbs(denom) <= EPSILON) {\n    if (fAbs(numA) <= EPSILON && fAbs(numB) <= EPSILON) {\n\n      let comparator = (pa, pb) => pa.x === pb.x ? pa.y - pb.y : pa.x - pb.x;\n      let line0 = [p1, p2].sort(comparator);\n      let line1 = [p3.toJS(), p4.toJS()].sort(comparator);\n\n      let [lineSX, lineDX] = [line0, line1].sort((lineA, lineB) => comparator(lineA[0], lineB[0]));\n\n      if (lineSX[1].x === lineDX[0].x) {\n        return {type: (lineDX[0].y <= lineSX[1].y) ? 'colinear' : 'none'};\n      } else {\n        return {type: (lineDX[0].x <= lineSX[1].x) ? 'colinear' : 'none'};\n      }\n    }\n    return {type: 'parallel'};\n  }\n\n  let uA = numA / denom;\n  let uB = numB / denom;\n\n  if (uA >= (0 - EPSILON) && uA <= (1 + EPSILON) && uB >= (0 - EPSILON) && uB <= (1 + EPSILON)) {\n    let point = {\n      x: x1 + (uA * (x2 - x1)),\n      y: y1 + (uA * (y2 - y1))\n    };\n    return {type: 'intersecting', point};\n  }\n\n  return {type: 'none'};\n}\n\nexport function distancePointFromLineSegment(x1, y1, x2, y2, xp, yp) {\n  //http://stackoverflow.com/a/6853926/1398836\n\n  let A = xp - x1;\n  let B = yp - y1;\n  let C = x2 - x1;\n  let D = y2 - y1;\n\n  let dot = A * C + B * D;\n  let len_sq = C * C + D * D;\n  let param = -1;\n  if (len_sq != 0) //in case of 0 length line\n    param = dot / len_sq;\n\n  let xx, yy;\n\n  if (param < 0) {\n    xx = x1;\n    yy = y1;\n  }\n  else if (param > 1) {\n    xx = x2;\n    yy = y2;\n  }\n  else {\n    xx = x1 + param * C;\n    yy = y1 + param * D;\n  }\n\n  let dx = xp - xx;\n  let dy = yp - yy;\n  return Math.sqrt(dx * dx + dy * dy);\n}\n\n/**\n *\n * @param x1 {number} x for first vertex of the segment\n * @param y1 {number} y for first vertex of the segment\n * @param x2 {number} x for second vertex of the segment\n * @param y2 {number} y for second vertex of the segment\n * @param xp {number} x for point we want to verify\n * @param yp {number} y for point we want to verify\n * @param maxDistance {number} the epsilon value used for comparisons\n * @returns {boolean} true if the point lies on the line segment false otherwise\n */\nexport function isPointOnLineSegment(x1, y1, x2, y2, xp, yp, maxDistance = EPSILON) {\n  return distancePointFromLineSegment(x1, y1, x2, y2, xp, yp) <= maxDistance;\n}\n\nexport function closestPointFromLineSegment(x1, y1, x2, y2, xp, yp) {\n  if (x1 === x2) return {x: x1, y: yp};\n  if (y1 === y2) return {x: xp, y: y1};\n\n  let m = (y2 - y1) / (x2 - x1);\n  let q = y1 - m * x1;\n\n  let mi = -1 / m;\n  let qi = yp - mi * xp;\n\n  let x = (qi - q) / (m - mi);\n  let y = (m * x + q);\n\n  return {x, y};\n}\n\nexport function pointPositionOnLineSegment(x1, y1, x2, y2, xp, yp) {\n  let length = pointsDistance(x1, y1, x2, y2);\n  let distance = pointsDistance(x1, y1, xp, yp);\n\n  let offset = distance / length;\n  if (x1 > x2) offset = mapRange(offset, 0, 1, 1, 0);\n\n  return offset;\n}\n\nexport function mapRange(value, low1, high1, low2, high2) {\n  return low2 + (high2 - low2) * (value - low1) / (high1 - low1);\n}\n\nexport function angleBetweenTwoPointsAndOrigin(x1, y1, x2, y2) {\n  return -(Math.atan2(y1 - y2, x2 - x1)) * 180 / Math.PI;\n}\n\nexport function angleBetweenTwoPoints(x1, y1, x2, y2) {\n  return Math.atan2(y2 - y1, x2 - x1);\n}\n\nexport function absAngleBetweenTwoPoints(x1, y1, x2, y2) {\n  return Math.atan2(Math.abs(y2 - y1), Math.abs(x2 - x1));\n}\n\nexport function samePoints({x: x1, y: y1}, {x: x2, y: y2}) {\n  return fAbs(x1 - x2) <= EPSILON && fAbs(y1 - y2) <= EPSILON;\n}\n\n/** @description Extend line based on coordinates and new line length\n *  @param {number} x1 Vertex 1 x\n *  @param {number} y1 Vertex 1 y\n *  @param {number} x2 Vertex 2 x\n *  @param {number} y2 Vertex 2 y\n *  @param {number} newDistance New line length\n *  @return {object}\n */\nexport function extendLine(x1, y1, x2, y2, newDistance, precision = 6) {\n  let rad = angleBetweenTwoPoints( x1, y1, x2, y2 );\n\n  return {\n    x: toFixedFloat(x1 + (Math.cos(rad) * newDistance), precision),\n    y: toFixedFloat(y1 + (Math.sin(rad) * newDistance), precision),\n  };\n}\n\nexport function roundVertex(vertex, precision = 6) {\n  vertex.set('x', toFixedFloat(vertex.get('x'), precision));\n  vertex.set('y', toFixedFloat(vertex.get('y'), precision));\n\n  return vertex;\n}\n\n//https://github.com/MartyWallace/PolyK\nexport function ContainsPoint(polygon, pointX, pointY) {\n  let n = polygon.length >> 1;\n\n  let ax, lup;\n  let ay = polygon[2 * n - 3] - pointY;\n  let bx = polygon[2 * n - 2] - pointX;\n  let by = polygon[2 * n - 1] - pointY;\n\n  if (bx === 0 && by === 0) return false; // point on edge\n\n  // let lup = by > ay;\n  for (let ii = 0; ii < n; ii++) {\n    ax = bx;\n    ay = by;\n    bx = polygon[2 * ii] - pointX;\n    by = polygon[2 * ii + 1] - pointY;\n    if (bx === 0 && by === 0) return false; // point on edge\n    if (ay === by) continue;\n    lup = by > ay;\n  }\n\n  let depth = 0;\n  for (let i = 0; i < n; i++) {\n    ax = bx;\n    ay = by;\n    bx = polygon[2 * i] - pointX;\n    by = polygon[2 * i + 1] - pointY;\n    if (ay < 0 && by < 0) continue;  // both 'up' or both 'down'\n    if (ay > 0 && by > 0) continue;  // both 'up' or both 'down'\n    if (ax < 0 && bx < 0) continue;   // both points on the left\n\n    if (ay === by && Math.min(ax, bx) < 0) return true;\n    if (ay === by) continue;\n\n    let lx = ax + (bx - ax) * (-ay) / (by - ay);\n    if (lx === 0) return false;      // point on edge\n    if (lx > 0) depth++;\n    if (ay === 0 && lup && by > ay) depth--;  // hit vertex, both up\n    if (ay === 0 && !lup && by < ay) depth--; // hit vertex, both down\n    lup = by > ay;\n  }\n  return (depth & 1) === 1;\n}\n\nexport function cosWithThreshold(alpha, threshold) {\n  let cos = Math.cos(alpha);\n  return cos < threshold ? 0 : cos;\n}\n\nexport function sinWithThreshold(alpha, threshold) {\n  let sin = Math.sin(alpha);\n  return sin < threshold ? 0 : sin;\n}\n\nexport function midPoint( x1, y1, x2, y2 ) {\n  return { x: (x1+x2)/2, y: (y1+y2)/2 };\n}\n\nexport function verticesMidPoint( verticesArray ) {\n  let res = verticesArray.reduce( ( incr, vertex ) => { return { x: incr.x + vertex.x, y: incr.y + vertex.y } }, { x: 0, y: 0 });\n  return { x: res.x / verticesArray.length, y: res.y / verticesArray.length };\n}\n\nexport function rotatePointAroundPoint( px, py, ox, oy, theta ) {\n\n  let thetaRad = theta * Math.PI / 180;\n\n  let cos = Math.cos( thetaRad );\n  let sin = Math.sin( thetaRad );\n\n  let deltaX = px - ox;\n  let deltaY = py - oy;\n\n  return {\n    x: cos * deltaX - sin * deltaY + ox,\n    y: sin * deltaX + cos * deltaY + oy\n  };\n\n}\n","import React from 'react';\nimport PropTypes from 'prop-types';\n\n/**\n * @return {null}\n */\nexport default function If({condition, style, children}) {\n  return condition ? ( Array.isArray(children) ? <div style={style}>{children}</div> : children ) : null;\n}\n\nIf.propTypes = {\n  condition: PropTypes.bool.isRequired,\n  style: PropTypes.object\n};\n","import MTLLoader from './mtl-loader';\nimport OBJLoader from './obj-loader';\n\nexport function loadObjWithMaterial(mtlFile, objFile, imgPath) {\n  let mtlLoader = new MTLLoader();\n  mtlLoader.setTexturePath(imgPath);\n  let url = mtlFile;\n  return new Promise((resolve, reject) => {\n\n    mtlLoader.load(url, materials => {\n      materials.preload();\n      let objLoader = new OBJLoader();\n      objLoader.setMaterials(materials);\n      objLoader.load(objFile, object => resolve(object));\n\n    });\n  });\n}\n\n","import React, {Component} from 'react';\nimport PropTypes from 'prop-types';\nimport * as SharedStyle from '../../shared-style';\n\nconst BASE_STYLE = {\n  display: \"inline-block\",\n  fontWeight: \"400\",\n  lineHeight: \"1.25\",\n  textAlign: \"center\",\n  whiteSpace: \"nowrap\",\n  verticalAlign: \"middle\",\n  cursor: \"pointer\",\n  WebkitUserSelect: \"none\",\n  MozUserSelect: \"none\",\n  MsUserSelect: \"none\",\n  userSelect: \"none\",\n  padding: \"5px 14px\",\n  fontSize: \"14px\",\n  color: SharedStyle.COLORS.black,\n  fonWeight: \"400px\",\n  transition: \"background-color 175ms ease, border 175ms ease\",\n  outline: \"none\",\n  borderRadius: \"2px\",\n  borderWidth: \"1px\",\n  borderType: \"solid\",\n  width: '100%'\n};\n\nconst BASE_STYLE_SIZE = {\n  small: {\n    fontSize: \"12px\",\n    padding: \"3px 8px\",\n  },\n  normal: {},\n  large: {\n    padding: \"8px 20px\",\n  },\n};\n\nexport default class Button extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {hover: false};\n  }\n\n  render() {\n    let {hover} = this.state;\n    let {type, style: customStyle, styleHover: customStyleHover, children, size, ...rest} = this.props;\n    let styleMerged = Object.assign({}, BASE_STYLE, BASE_STYLE_SIZE[size], hover ? customStyleHover : customStyle);\n\n    return <button\n      type={type}\n      onMouseEnter={e => this.setState({hover: true})}\n      onMouseLeave={e => this.setState({hover: false})}\n      style={styleMerged}\n      {...rest}>{children}</button>\n  }\n}\n\nButton.defaultProps = {\n  type: \"button\",\n  size: \"normal\",\n  style: {\n    backgroundColor: \"#e6e6e6\",\n    borderColor: \"#adadad\",\n  },\n  styleHover: {\n    backgroundColor: \"#d4d4d4\",\n    borderColor: \"#8c8c8c\"\n  },\n};\n\nButton.propTypes = {\n  type: PropTypes.string,\n  style: PropTypes.object,\n  styleHover: PropTypes.object,\n  size: PropTypes.oneOf(['large', 'normal', 'small']),\n};\n\n","import React, { Component } from 'react';\nimport * as SharedStyle from '../../shared-style';\n\nconst STYLE_INPUT = {\n  display: 'block',\n  width: '100%',\n  padding: '0 2px',\n  fontSize: '13px',\n  lineHeight: '1.25',\n  color: SharedStyle.PRIMARY_COLOR.input,\n  backgroundColor: SharedStyle.COLORS.white,\n  backgroundImage: 'none',\n  border: '1px solid rgba(0,0,0,.15)',\n  outline: 'none',\n  height: '30px',\n};\n\n\nexport default class FormTextInput extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = { focus: false };\n  }\n\n  render() {\n    let { style, ...rest } = this.props;\n\n    let textInputStyle = { ...STYLE_INPUT, ...style };\n    if (this.state.focus) textInputStyle.border = `1px solid ${SharedStyle.SECONDARY_COLOR.main}`;\n\n    return <input\n      onFocus={e => this.setState({ focus: true })}\n      onBlur={e => this.setState({ focus: false })}\n      style={textInputStyle}\n      type=\"text\"\n      {...rest}\n    />\n  }\n}\n\nFormTextInput.defaultProps = {\n  style: {}\n};\n","import EN from './en'\nimport IT from './it'\nimport RU from './ru'\n\nconst DEFAULT_LOCALE = 'en'\n\nexport default class Translator {\n  constructor() {\n    this.locale = null\n    this.translations = {}\n\n    this.registerTranslation('en', EN)\n    this.registerTranslation('it', IT)\n    this.registerTranslation('ru', RU)\n\n    let locale = null\n    let languages = Translator.getBrowserLanguages()\n    for (let i = 0; i < languages.length; i++) {\n      let lang = languages[i]\n      if (this.translations.hasOwnProperty(lang)) {\n        locale = lang\n        break\n      }\n    }\n    locale = locale ? locale : DEFAULT_LOCALE\n\n    this.setLocale(locale)\n  }\n\n  t(phrase, ...params) {\n    return this.translate(phrase, ...params)\n  }\n\n  translate(phrase, ...params) {\n    let locale = this.locale\n\n    let translation = this.translations[locale]\n    if (!translation.hasOwnProperty(phrase)) {\n      console.warn(`translation '${phrase}' not found in language '${locale}'`)\n      return phrase\n    }\n\n    let translatedPhrase = translation[phrase]\n\n    translatedPhrase = translatedPhrase.replace(/{(\\d+)}/g, function(match, number) {\n      return typeof params[number] != 'undefined' ? params[number] : match\n    })\n\n    return translatedPhrase\n  }\n\n  setLocale(locale) {\n    locale = locale.toLowerCase()\n\n    if (this.translations.hasOwnProperty(locale)) {\n      this.locale = locale\n    } else {\n      console.warn(`locale '${locale}' not available, switch to ${DEFAULT_LOCALE}`)\n      this.locale = DEFAULT_LOCALE.toLowerCase()\n    }\n  }\n\n  registerTranslation(locale, translations) {\n    if (!this.translations.hasOwnProperty(locale)) {\n      this.translations[locale] = translations\n    } else {\n      Object.assign(this.translations[locale], translations)\n    }\n  }\n\n  static getBrowserLanguages() {\n    return navigator.languages\n      ? navigator.languages\n      : [navigator.language || navigator.userLanguage]\n  }\n}\n","import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport * as SharedStyle from '../../shared-style';\n\n//http://www.cssportal.com/css-tooltip-generator/\n\nconst STYLE = {\n  width: '30px',\n  height: '30px',\n  display: 'flex',\n  alignItems: 'center',\n  justifyContent: 'center',\n  marginBottom: '5px',\n  fontSize: '25px',\n  position: 'relative',\n  cursor: 'pointer'\n};\n\nconst STYLE_TOOLTIP = {\n  position: 'absolute',\n  width: '140px',\n  color: SharedStyle.COLORS.white,\n  background: SharedStyle.COLORS.black,\n  height: '30px',\n  lineHeight: '30px',\n  textAlign: 'center',\n  visibility: 'visible',\n  borderRadius: '6px',\n  opacity: '0.8',\n  left: '100%',\n  top: '50%',\n  marginTop: '-15px',\n  marginLeft: '15px',\n  zIndex: '999',\n  fontSize: '12px'\n};\n\nconst STYLE_TOOLTIP_PIN = {\n  position: 'absolute',\n  top: '50%',\n  right: '100%',\n  marginTop: '-8px',\n  width: '0',\n  height: '0',\n  borderRight: '8px solid #000000',\n  borderTop: '8px solid transparent',\n  borderBottom: '8px solid transparent'\n};\n\nexport default class ToolbarButton extends Component {\n\n  constructor(props, context) {\n    super(props, context);\n    this.state = { active: false };\n  }\n\n  render() {\n    let { state, props } = this;\n    let color = props.active || state.active ? SharedStyle.SECONDARY_COLOR.icon : SharedStyle.PRIMARY_COLOR.icon;\n\n    return (\n      <div style={STYLE}\n        onMouseOver={event => this.setState({ active: true })}\n        onMouseOut={event => this.setState({ active: false })}>\n        <div style={{ color }} onClick={props.onClick}>\n          {props.children}\n        </div>\n\n        {\n          state.active ?\n          <div style={STYLE_TOOLTIP}>\n            <span style={STYLE_TOOLTIP_PIN} />\n            {props.tooltip}\n          </div>\n          : null\n        }\n\n      </div>\n    )\n  }\n}\n\nToolbarButton.propTypes = {\n  active: PropTypes.bool.isRequired,\n  tooltip: PropTypes.string.isRequired,\n  onClick: PropTypes.func.isRequired\n};\n","import Viewer2D from './viewer2d';\nimport Vertex from './vertex';\nimport State from './state';\nimport Snap from './snap';\nimport Scene from './scene';\nimport Ruler from './ruler';\nimport Line from './line';\nimport Layer from './layer';\nimport Item from './item';\nimport Area from './area';\nimport Grids from './grids/grids';\nimport Group from './group';\nimport RulerX from './rulerX';\nimport RulerY from './rulerY';\n\nexport {\n  Viewer2D,\n  Vertex,\n  State,\n  Snap,\n  Scene,\n  Ruler,\n  Line,\n  Layer,\n  Item,\n  Area,\n  Grids,\n  Group,\n  RulerX,\n  RulerY\n};\n\nexport default {\n  Viewer2D,\n  Vertex,\n  State,\n  Snap,\n  Scene,\n  Ruler,\n  Line,\n  Layer,\n  Item,\n  Area,\n  Grids,\n  Group,\n  RulerX,\n  RulerY\n};\n","/** @description Return float fixed to desired precision\n *  @param {number} num Float to fix\n *  @param {number} precision Desired precision, or 6 if not specified\n *  @return {number}\n*/\nexport function toFixedFloat(num, precision = 6) {\n  if (num && precision) {\n    return parseFloat(parseFloat(num).toFixed(precision));\n  }\n  return 0;\n}\n\n/** @description Return absolute value of a number\n *  @param {number} n Number of wich get value without sign\n *  @return {number}\n*/\nexport const fAbs = n => { let x = n; (x < 0) && (x = ~x + 1); return x; };\n\n/** @description Multiply two matrices\n *  @param {Array} m1 Matrix 1\n *  @param {Array} m2 Matrix 2\n *  @return {Array}\n*/\nexport const multiplyMatrices = (m1, m2) => {\n  let result = [];\n  for (let i = 0; i < m1.length; i++) {\n    result[i] = [];\n    for (let j = 0; j < m2[0].length; j++) {\n      let sum = 0;\n      for (let k = 0; k < m1[0].length; k++) {\n        sum += m1[i][k] * m2[k][j];\n      }\n      result[i][j] = sum;\n    }\n  }\n  return result;\n};\n","import * as projectActions from './project-actions';\nimport * as viewer2DActions from './viewer2d-actions';\n//import * as viewer3DActions from './viewer3d-actions';\nimport * as linesActions from './lines-actions';\nimport * as holesActions from './holes-actions';\nimport * as sceneActions from './scene-actions';\nimport * as verticesActions from './vertices-actions';\nimport * as itemsActions from './items-actions';\nimport * as areaActions from './area-actions';\nimport * as groupsActions from './groups-actions';\n\nexport {\n  projectActions,\n  viewer2DActions,\n  // viewer3DActions,\n  linesActions,\n  holesActions,\n  sceneActions,\n  verticesActions,\n  itemsActions,\n  areaActions,\n  groupsActions\n};\n\nexport default {\n  projectActions,\n  viewer2DActions,\n  // viewer3DActions,\n  linesActions,\n  holesActions,\n  sceneActions,\n  verticesActions,\n  itemsActions,\n  areaActions,\n  groupsActions\n};\n","import {\n  NEW_PROJECT,\n  LOAD_PROJECT,\n  SAVE_PROJECT,\n  OPEN_CATALOG,\n  SELECT_TOOL_EDIT,\n  UNSELECT_ALL,\n  SET_PROPERTIES,\n  SET_ITEMS_ATTRIBUTES,\n  SET_LINES_ATTRIBUTES,\n  SET_HOLES_ATTRIBUTES,\n  REMOVE,\n  UNDO,\n  ROLLBACK,\n  OPEN_PROJECT_CONFIGURATOR,\n  SET_PROJECT_PROPERTIES,\n  INIT_CATALOG,\n  UPDATE_MOUSE_COORDS,\n  UPDATE_ZOOM_SCALE,\n  TOGGLE_SNAP,\n  CHANGE_CATALOG_PAGE,\n  GO_BACK_TO_CATALOG_PAGE,\n  THROW_ERROR,\n  THROW_WARNING,\n  COPY_PROPERTIES,\n  PASTE_PROPERTIES,\n  PUSH_LAST_SELECTED_CATALOG_ELEMENT_TO_HISTORY,\n  ALTERATE_STATE,\n  SET_MODE,\n  ADD_HORIZONTAL_GUIDE,\n  ADD_VERTICAL_GUIDE,\n  ADD_CIRCULAR_GUIDE,\n  REMOVE_HORIZONTAL_GUIDE,\n  REMOVE_VERTICAL_GUIDE,\n  REMOVE_CIRCULAR_GUIDE\n} from '../constants';\n\nexport function loadProject(sceneJSON) {\n  return {\n    type: LOAD_PROJECT,\n    sceneJSON\n  };\n}\n\nexport function newProject() {\n  return {\n    type: NEW_PROJECT\n  };\n}\n\nexport function saveProject() {\n  return {\n    type: SAVE_PROJECT\n  };\n}\n\nexport function openCatalog() {\n  return {\n    type: OPEN_CATALOG\n  };\n}\n\nexport function changeCatalogPage(newPage, oldPage) {\n  return {\n    type: CHANGE_CATALOG_PAGE,\n    newPage,\n    oldPage\n  };\n}\n\nexport function goBackToCatalogPage(newPage) {\n  return {\n    type: GO_BACK_TO_CATALOG_PAGE,\n    newPage\n  };\n}\n\nexport function selectToolEdit() {\n  return {\n    type: SELECT_TOOL_EDIT\n  };\n}\n\nexport function unselectAll() {\n  return {\n    type: UNSELECT_ALL\n  };\n}\n\n\nexport function setProperties(properties) {\n  return {\n    type: SET_PROPERTIES,\n    properties\n  };\n}\n\nexport function setItemsAttributes(itemsAttributes) {\n\n  itemsAttributes = itemsAttributes.set('rotation', parseFloat(itemsAttributes.get('rotation')));\n\n  return {\n    type: SET_ITEMS_ATTRIBUTES,\n    itemsAttributes\n  };\n}\n\nexport function setLinesAttributes(linesAttributes) {\n\n  linesAttributes = linesAttributes.withMutations(attributes => {\n    attributes.setIn(['vertexOne', 'x'], parseFloat(linesAttributes.getIn(['vertexOne', 'x'])));\n    attributes.setIn(['vertexOne', 'y'], parseFloat(linesAttributes.getIn(['vertexOne', 'y'])));\n    attributes.setIn(['vertexTwo', 'x'], parseFloat(linesAttributes.getIn(['vertexTwo', 'x'])));\n    attributes.setIn(['vertexTwo', 'y'], parseFloat(linesAttributes.getIn(['vertexTwo', 'y'])));\n  });\n\n  return {\n    type: SET_LINES_ATTRIBUTES,\n    linesAttributes\n  };\n}\n\nexport function setHolesAttributes(holesAttributes) {\n\n  holesAttributes = holesAttributes.set('offset', parseFloat(holesAttributes.get('offset')));\n\n  return {\n    type: SET_HOLES_ATTRIBUTES,\n    holesAttributes\n  };\n}\n\nexport function remove() {\n  return {\n    type: REMOVE\n  };\n}\n\nexport function undo() {\n  return {\n    type: UNDO\n  };\n}\n\nexport function rollback() {\n  return {\n    type: ROLLBACK\n  };\n}\n\nexport function openProjectConfigurator() {\n  return {\n    type: OPEN_PROJECT_CONFIGURATOR\n  };\n}\n\nexport function setProjectProperties(properties) {\n  return {\n    type: SET_PROJECT_PROPERTIES,\n    properties\n  };\n}\n\nexport function initCatalog(catalog) {\n  return {\n    type: INIT_CATALOG,\n    catalog\n  };\n}\n\nexport function updateMouseCoord(coords = {x, y}) {\n  return {\n    type: UPDATE_MOUSE_COORDS,\n    coords\n  };\n}\n\nexport function updateZoomScale(scale) {\n  return {\n    type: UPDATE_ZOOM_SCALE,\n    scale\n  };\n}\n\nexport function toggleSnap(mask) {\n  return {\n    type: TOGGLE_SNAP,\n    mask\n  };\n}\n\nexport function throwError(error) {\n  return {\n    type: THROW_ERROR,\n    error\n  };\n}\n\nexport function throwWarning(warning) {\n  return {\n    type: THROW_WARNING,\n    warning\n  };\n}\n\nexport function copyProperties(properties) {\n  return {\n    type: COPY_PROPERTIES,\n    properties\n  };\n}\n\nexport function pasteProperties() {\n  return {\n    type: PASTE_PROPERTIES\n  };\n}\n\nexport function pushLastSelectedCatalogElementToHistory( element ) {\n  return {\n    type: PUSH_LAST_SELECTED_CATALOG_ELEMENT_TO_HISTORY,\n    element\n  };\n}\n\nexport function setAlterateState() {\n  return {\n    type: ALTERATE_STATE\n  };\n}\n\nexport function setMode( mode ) {\n  return {\n    type: SET_MODE,\n    mode\n  };\n}\n\nexport function addHorizontalGuide( coordinate ) {\n  return {\n    type: ADD_HORIZONTAL_GUIDE,\n    coordinate\n  };\n}\n\nexport function addVerticalGuide( coordinate ) {\n  return {\n    type: ADD_VERTICAL_GUIDE,\n    coordinate\n  };\n}\n\nexport function addCircularGuide( x, y, radius ) {\n  return {\n    type: ADD_CIRCULAR_GUIDE,\n    x,\n    y,\n    radius\n  };\n}\nexport function removeHorizontalGuide( guideID ) {\n  return {\n    type: REMOVE_HORIZONTAL_GUIDE,\n    guideID\n  };\n}\n\nexport function removeVerticalGuide( guideID ) {\n  return {\n    type: REMOVE_VERTICAL_GUIDE,\n    guideID\n  };\n}\n\nexport function removeCircularGuide( guideID ) {\n  return {\n    type: REMOVE_CIRCULAR_GUIDE,\n    guideID\n  };\n}","import {\n  PropertyColor,\n  PropertyEnum,\n  PropertyString,\n  PropertyNumber,\n  PropertyLengthMeasure,\n  PropertyToggle,\n  PropertyCheckbox,\n  PropertyHidden,\n  PropertyReadOnly\n} from './properties/export';\n\nimport {UNIT_CENTIMETER} from '../constants';\n\nexport default class Catalog {\n\n  constructor(unit = UNIT_CENTIMETER) {\n    this.elements = {};\n    this.categories = {root: {name: 'root', label: '/', elements: [], categories: []}};\n    this.propertyTypes = {};\n    this.unit = unit;\n\n    this.registerMultiplePropertyType([\n      ['color', PropertyColor, PropertyColor],\n      ['enum', PropertyEnum, PropertyEnum],\n      ['string', PropertyString, PropertyString],\n      ['number', PropertyNumber, PropertyNumber],\n      ['length-measure', PropertyLengthMeasure, PropertyLengthMeasure],\n      ['toggle', PropertyToggle, PropertyToggle],\n      ['checkbox', PropertyCheckbox, PropertyCheckbox],\n      ['hidden', PropertyHidden, PropertyHidden],\n      ['read-only', PropertyReadOnly, PropertyReadOnly]\n    ]);\n  }\n\n  /** @description Get catalog's element\n   *  @param {string} type Element's type\n   *  @return {?object} Element\n  */\n  getElement(type) {\n    if (this.hasElement(type)) {\n      return this.elements[type];\n    }\n    throw new Error(`Element ${type} does not exist in catalog`);\n  }\n\n  /** @description Get catalog category\n   *  @param {string} categoryName Name of category\n   *  @return {object} Category\n  */\n  getCategory(categoryName) {\n    if (this.hasCategory(categoryName)) {\n      return this.categories[categoryName];\n    }\n    throw new Error(`Category ${categoryName} does not exist in catalog`);\n  }\n\n  /** @description Return type of a specfied property\n   *  @param {string} type Property type\n   *  @return {?object} Property\n  */\n  getPropertyType(type) {\n    if (this.propertyTypes.hasOwnProperty(type)) {\n      return this.propertyTypes[type];\n    }\n    throw new Error(`Element ${type} does not exist in catalog`);\n  }\n\n  /** @description Register a new element\n   *  @param {object} json Element structure\n   *  @return {void}\n  */\n  registerElement(json) {\n    json.properties = json.properties || {};\n    if (this.validateElement(json)) {\n      this.elements[json.name] = json;\n      this.categories.root.elements.push(this.elements[json.name]);\n    }\n  }\n\n  /** @description Register multiple elements\n   *  @param {array} [elementArray] Array of elements\n   *  @return {void}\n  */\n  registerMultipleElements(elementArray) {\n    elementArray.forEach(el => this.registerElement(el));\n  }\n\n  /** @description Register a new property\n   *  @param {string} type Type of property\n   *  @param {object} Viewer Property viewer component\n   *  @param {object} Editor Property editor component\n   *  @return {void}\n  */\n  registerPropertyType(type, Viewer, Editor) {\n    this.propertyTypes[type] = {type, Viewer, Editor};\n  }\n\n  /** @description Register multiple property\n   *  @param {array} propertyTypeArray Array of properties\n   *  @return {void}\n  */\n  registerMultiplePropertyType(propertyTypeArray) {\n    propertyTypeArray.forEach(el => this.registerPropertyType(...el));\n  }\n\n  /** @description Validate an element\n   *  @param {object} json Element's structure\n   *  @return {?boolean}\n  */\n  validateElement(json) {\n    if (!json.hasOwnProperty('name')) throw new Error('Element not valid');\n\n    let name = json.name;\n    if (!json.hasOwnProperty('prototype')) throw new Error(`Element ${name} doesn't have prototype`);\n\n    if (!json.hasOwnProperty('info')) throw new Error(`Element ${name} doesn't have info`);\n    if (!json.info.hasOwnProperty('tag')) throw new Error(`Element ${name} doesn't have tag`);\n    if (!json.info.hasOwnProperty('description')) throw new Error(`Element ${name} doesn't have description`);\n    if (!json.info.hasOwnProperty('image')) throw new Error(`Element ${name} doesn't have image`);\n\n    if (!json.hasOwnProperty('render2D')) throw new Error(`Element ${name} doesn't have render2D handler`);\n    if (!json.hasOwnProperty('render3D')) throw new Error(`Element ${name} doesn't have render3D handler`);\n    if (!json.hasOwnProperty('properties')) throw new Error(`Element ${name} doesn't have properties`);\n\n    for (let propertyName in json.properties) {\n      let propertyConfigs = json.properties[propertyName];\n      if (!propertyConfigs.hasOwnProperty('type')) throw new Error(`Element ${name}, Property ${propertyName} doesn't have type`);\n      if (!propertyConfigs.hasOwnProperty('defaultValue')) throw new Error(`Element ${name}, Property ${propertyName} doesn't have defaultValue`);\n    }\n\n    return true;\n  }\n\n  /** @description Check if catalog has element\n   *  @param {string} type Element's type\n   *  @return {boolean}\n  */\n  hasElement(type) {\n    return this.elements.hasOwnProperty(type);\n  }\n\n  /** @description Register a new category\n   *  @param {string} name Name of category\n   *  @param {string} label Label of category\n   *  @param {array} [childs] Category's childs\n   *  @return {?object} Registered category\n  */\n  registerCategory(name, label, childs) {\n    if (this.validateCategory(name, label)) {\n      this.categories[name] = {name, label, categories: [], elements: []};\n      this.categories.root.categories.push(this.categories[name]);\n\n      if(childs && childs.length) {\n        childs.forEach( el => this.addToCategory( name, el ) );\n      }\n\n      return this.categories[name];\n    }\n    return null;\n  }\n\n  /** @description Add an element to the specified category\n   *  @param {string} name Name of category\n   *  @param {object} child Element's structure\n   *  @return {?void}\n  */\n  addToCategory(name, child) {\n    if (this.hasElement(child.name)) {\n      this.categories[name].elements.push(child);\n      this.categories.root.elements.splice(this.categories.root.elements.indexOf(child), 1);\n    } else if (this.hasCategory(child.name)) {\n      this.categories[name].categories.push(child);\n      this.categories.root.categories.splice(this.categories.root.categories.indexOf(child), 1);\n    } else {\n      throw new Error(`child ${child} is either category nor element`);\n    }\n  }\n\n  /** @description Check if category contain element\n   *  @param {string} categoryName Name of category\n   *  @param {string} elementName Name of element\n   *  @return {boolean}\n  */\n  categoryHasElement(categoryName, elementName) {\n    return this.hasCategory(categoryName) && this.categories[categoryName].elements.some(el => el.name === elementName);\n  }\n\n  /** @description Validate a category\n   *  @param {string} name Name of category\n   *  @param {string} label Label of category\n   *  @return {?boolean}\n  */\n  validateCategory(name, label) {\n    if (!name) {\n      throw new Error('Category has undefined name');\n    }\n    if (name === '') {\n      throw new Error('Category has empty name');\n    }\n    if (this.hasCategory(name)) {\n      throw new Error('Category has already been registered');\n    }\n\n    return true;\n  }\n\n  /** @description Verify if catalog already contain a category with specified name\n   *  @param {string} categoryName Name of category\n   *  @return {boolean}\n  */\n  hasCategory(categoryName) {\n    return this.categories.hasOwnProperty(categoryName);\n  }\n\n}\n","import PropertyColor from './property-color';\nimport PropertyEnum from './property-enum';\nimport PropertyString from './property-string';\nimport PropertyNumber from './property-number';\nimport PropertyLengthMeasure from './property-lenght-measure';\nimport PropertyToggle from './property-toggle';\nimport PropertyCheckbox from './property-checkbox';\nimport PropertyHidden from './property-hidden';\nimport PropertyReadOnly from './property-read-only';\n\nexport {\n  PropertyColor,\n  PropertyEnum,\n  PropertyString,\n  PropertyNumber,\n  PropertyLengthMeasure,\n  PropertyToggle,\n  PropertyCheckbox,\n  PropertyHidden,\n  PropertyReadOnly\n};\n\nexport default {\n  PropertyColor,\n  PropertyEnum,\n  PropertyString,\n  PropertyNumber,\n  PropertyLengthMeasure,\n  PropertyToggle,\n  PropertyCheckbox,\n  PropertyHidden,\n  PropertyReadOnly\n};\n","import React from 'react';\nimport PropTypes from 'prop-types';\n\nconst STYLE = {\n  padding: '0 20px',\n  overflowY: 'auto'\n};\n\nexport default function ContentContainer({children, width, height, style = {}}) {\n  return <div style={{width, height, ...STYLE, ...style}} onWheel={event => event.stopPropagation()}>{children}</div>\n}\n\nContentContainer.propsType = {\n  width: PropTypes.number.isRequired,\n  height: PropTypes.number.isRequired,\n  style: PropTypes.object\n};\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport * as SharedStyle from '../../shared-style';\n\nconst STYLE = {\n  color: SharedStyle.PRIMARY_COLOR.alt,\n  fontWeight: 300,\n};\n\nexport default function ContentTitle({children, style = {}, ...rest}) {\n  return <h1 style={{...STYLE, ...style}} {...rest}>{children}</h1>\n}\n\nContentTitle.propsType = {\n  style: PropTypes.object\n};\n","import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport * as SharedStyle from '../../shared-style';\nimport { MdUpdate } from 'react-icons/md';\nimport { KEYBOARD_BUTTON_CODE } from '../../constants';\n\nconst STYLE_INPUT = {\n  display: 'block',\n  width: '100%',\n  padding: '0 2px',\n  fontSize: '13px',\n  lineHeight: '1.25',\n  color: SharedStyle.PRIMARY_COLOR.input,\n  backgroundColor: SharedStyle.COLORS.white,\n  backgroundImage: 'none',\n  border: '1px solid rgba(0,0,0,.15)',\n  outline: 'none',\n  height: '30px',\n};\n\nconst confirmStyle = {\n  position: 'absolute',\n  cursor: 'pointer',\n  width: '2em',\n  height: '2em',\n  right: '0.35em',\n  top: '0.35em',\n  backgroundColor: SharedStyle.SECONDARY_COLOR.main,\n  color: '#FFF',\n  transition: 'all 0.1s linear'\n};\n\nexport default class FormNumberInput extends Component {\n\n  constructor(props, context) {\n    super(props, context);\n    this.state = {\n      focus: false,\n      valid: true,\n      showedValue: props.value\n    };\n  }\n\n  componentWillReceiveProps( nextProps ) {\n    if( this.props.value !== nextProps.value ) {\n      this.setState({ showedValue: nextProps.value });\n    }\n  }\n\n  render() {\n\n    let { value, min, max, precision, onChange, onValid, onInvalid, style, placeholder } = this.props;\n    let numericInputStyle = { ...STYLE_INPUT, ...style };\n\n    if (this.state.focus) numericInputStyle.border = `1px solid ${SharedStyle.SECONDARY_COLOR.main}`;\n\n    let regexp = new RegExp(`^-?([0-9]+)?\\\\.?([0-9]{0,${precision}})?$`);\n\n    if (!isNaN(min) && isFinite(min) && this.state.showedValue < min) this.setState({ showedValue: min }); // value = min;\n    if (!isNaN(max) && isFinite(max) && this.state.showedValue > max) this.setState({ showedValue: max }); // value = max;\n\n    let currValue = regexp.test(this.state.showedValue) ? this.state.showedValue : parseFloat(this.state.showedValue).toFixed(precision);\n\n    let different = parseFloat(this.props.value).toFixed(precision) !== parseFloat(this.state.showedValue).toFixed(precision);\n\n    let saveFn = (e) => {\n      e.stopPropagation();\n\n      if (this.state.valid) {\n        let savedValue = (this.state.showedValue !== '' && this.state.showedValue !== '-') ? parseFloat(this.state.showedValue) : 0;\n\n        this.setState({ showedValue: savedValue });\n        onChange({ target: { value: savedValue } });\n      }\n    };\n\n    return (\n      <div style={{ position: 'relative' }}>\n        <input\n          type=\"text\"\n          value={currValue}\n          style={numericInputStyle}\n          onChange={(evt) => {\n            let valid = regexp.test(evt.nativeEvent.target.value);\n\n            if (valid) {\n              this.setState({ showedValue: evt.nativeEvent.target.value });\n              if (onValid) onValid(evt.nativeEvent);\n            }\n            else {\n              if (onInvalid) onInvalid(evt.nativeEvent);\n            }\n\n            this.setState({ valid });\n          }}\n          onFocus={e => this.setState({ focus: true })}\n          onBlur={e => this.setState({ focus: false })}\n          onKeyDown={e => {\n            var keyCode = e.keyCode || e.which;\n            if ((keyCode == KEYBOARD_BUTTON_CODE.ENTER || keyCode == KEYBOARD_BUTTON_CODE.TAB) && different) {\n              saveFn(e);\n            }\n          }}\n          placeholder={placeholder}\n        />\n        <div\n          onClick={e => { if (different) saveFn(e); }}\n          title={this.context.translator.t('Confirm')}\n          style={{ ...confirmStyle, visibility: different ? 'visible' : 'hidden', opacity: different ? '1' : '0' }}\n        >\n          <MdUpdate style={{ width: '100%', height: '100%', padding: '0.2em', color: '#FFF' }} />\n        </div>\n      </div>\n    );\n  }\n}\n\nFormNumberInput.propTypes = {\n  value: PropTypes.oneOfType([PropTypes.number, PropTypes.string]),\n  style: PropTypes.object,\n  onChange: PropTypes.func.isRequired,\n  onValid: PropTypes.func,\n  onInvalid: PropTypes.func,\n  min: PropTypes.number,\n  max: PropTypes.number,\n  precision: PropTypes.number,\n  placeholder: PropTypes.string\n};\n\nFormNumberInput.contextTypes = {\n  translator: PropTypes.object.isRequired\n};\n\nFormNumberInput.defaultProps = {\n  value: 0,\n  style: {},\n  min: Number.MIN_SAFE_INTEGER,\n  max: Number.MAX_SAFE_INTEGER,\n  precision: 3\n};\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { FormLabel, FormTextInput } from '../../components/style/export';\nimport PropertyStyle from './shared-property-style';\n\nconst tableStyle = {width: \"100%\", borderSpacing: \"2px 0\", marginBottom: \"2px\"};\nconst firstTdStyle = {width: '6em', textTransform:'capitalize'};\n\nexport default function PropertyString({value, onUpdate, configs, sourceElement, internalState, state}) {\n\n  let update = (val) => {\n\n    if (configs.hook) {\n      return configs.hook(val, sourceElement, internalState, state).then(_val => {\n        return onUpdate(_val);\n      });\n    }\n\n    return onUpdate(val);\n  };\n\n  return (\n    <table className=\"PropertyString\" style={PropertyStyle.tableStyle}>\n      <tbody>\n      <tr>\n        <td style={PropertyStyle.firstTdStyle}><FormLabel>{configs.label}</FormLabel></td>\n        <td>\n          <FormTextInput\n            value={value}\n            onChange={event => update(event.target.value)}/>\n        </td>\n      </tr>\n      </tbody>\n    </table>\n  );\n}\n\nPropertyString.propTypes = {\n  value: PropTypes.any.isRequired,\n  onUpdate: PropTypes.func.isRequired,\n  configs: PropTypes.object.isRequired,\n  sourceElement: PropTypes.object,\n  internalState: PropTypes.object,\n  state: PropTypes.object.isRequired\n};\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport {UNITS_LENGTH, UNIT_CENTIMETER} from './../../constants';\nimport convert from 'convert-units';\nimport { FormLabel, FormNumberInput, FormSelect } from '../../components/style/export';\nimport {Map} from 'immutable';\nimport {toFixedFloat} from '../../utils/math';\nimport PropertyStyle from './shared-property-style';\n\nconst internalTableStyle = {borderCollapse: 'collapse'};\nconst secondTdStyle = {padding: 0};\nconst unitContainerStyle = {width: '5em'};\n\nexport default function PropertyLengthMeasure({value, onUpdate, onValid, configs, sourceElement, internalState, state}, {catalog}) {\n\n  let length = value.get('length') || 0;\n  let _length = value.get('_length') || length;\n  let _unit = value.get('_unit') || UNIT_CENTIMETER;\n  let { hook, label, ...configRest} = configs;\n\n  let update = (lengthInput, unitInput) => {\n\n    let newLength = toFixedFloat(lengthInput);\n    let merged = value.merge({\n      length: unitInput !== UNIT_CENTIMETER ? convert(newLength).from(unitInput).to(UNIT_CENTIMETER) : newLength,\n      _length: lengthInput,\n      _unit: unitInput\n    });\n\n    if (hook) {\n      return hook(merged, sourceElement, internalState, state).then(val => {\n        return onUpdate(val);\n      });\n    }\n\n    return onUpdate(merged);\n  };\n\n  return (\n    <table className=\"PropertyLengthMeasure\" style={PropertyStyle.tableStyle}>\n      <tbody>\n      <tr>\n        <td style={PropertyStyle.firstTdStyle}><FormLabel>{label}</FormLabel></td>\n        <td style={secondTdStyle}>\n          <table style={internalTableStyle}>\n            <tbody>\n            <tr>\n              <td>\n                <FormNumberInput\n                  value={_length}\n                  onChange={event => update(event.target.value, _unit)}\n                  onValid={onValid}\n                  {...configRest}\n                />\n              </td>\n              <td style={unitContainerStyle}>\n                <FormSelect value={_unit} onChange={event => update(_length, event.target.value) }>\n                  {\n                    UNITS_LENGTH.map(el => <option key={el} value={el}>{el}</option>)\n                  }\n                </FormSelect>\n              </td>\n            </tr>\n            </tbody>\n          </table>\n        </td>\n      </tr>\n      </tbody>\n    </table>\n  );\n\n}\n\nPropertyLengthMeasure.propTypes = {\n  value: PropTypes.instanceOf(Map).isRequired,\n  onUpdate: PropTypes.func.isRequired,\n  onValid: PropTypes.func,\n  configs: PropTypes.object.isRequired,\n  sourceElement: PropTypes.object,\n  internalState: PropTypes.object,\n  state: PropTypes.object.isRequired\n};\n\nPropertyLengthMeasure.contextTypes = {\n  catalog: PropTypes.object.isRequired\n};\n","import ReactPlannerAreasReducer from './areas-reducer';\nimport ReactPlannerHolesReducer from './holes-reducer';\nimport ReactPlannerItemsReducer from './items-reducer';\nimport ReactPlannerLinesReducer from './lines-reducer';\nimport ReactPlannerGroupsReducer from './groups-reducer';\nimport ReactPlannerProjectReducer from './project-reducer';\nimport ReactPlannerSceneReducer from './scene-reducer';\nimport ReactPlannerVerticesReducer from './vertices-reducer';\nimport ReactPlannerViewer2dReducer from './viewer2d-reducer';\nimport ReactPlannerViewer3dReducer from './viewer3d-reducer';\n\nexport {\n  ReactPlannerAreasReducer,\n  ReactPlannerHolesReducer,\n  ReactPlannerItemsReducer,\n  ReactPlannerLinesReducer,\n  ReactPlannerGroupsReducer,\n  ReactPlannerProjectReducer,\n  ReactPlannerSceneReducer,\n  ReactPlannerVerticesReducer,\n  ReactPlannerViewer2dReducer,\n  ReactPlannerViewer3dReducer\n};\n\nexport default {\n  ReactPlannerAreasReducer,\n  ReactPlannerHolesReducer,\n  ReactPlannerItemsReducer,\n  ReactPlannerLinesReducer,\n  ReactPlannerGroupsReducer,\n  ReactPlannerProjectReducer,\n  ReactPlannerSceneReducer,\n  ReactPlannerVerticesReducer,\n  ReactPlannerViewer2dReducer,\n  ReactPlannerViewer3dReducer\n}\n","export function objectsMap(object, func){\n  let mappedObject = {};\n  for (let key in object) {\n    mappedObject[key] = func(key, mappedObject[key]);\n  }\n  return mappedObject;\n}\n\nexport function objectsCompare( x, y ) {\n  if ( x === y ) return true;\n  if ( ! ( x instanceof Object ) || ! ( y instanceof Object ) ) return false;\n  if ( x.constructor !== y.constructor ) return false;\n  \n  for ( let p in x ) {\n    if ( ! x.hasOwnProperty( p ) ) continue;\n    if ( ! y.hasOwnProperty( p ) ) return false;\n    if ( x[ p ] === y[ p ] ) continue;\n    if ( typeof( x[ p ] ) !== 'object' ) return false;\n    if ( ! objectsCompare( x[ p ],  y[ p ] ) ) return false;\n  }\n\n  for ( let p in y ) {\n    if ( y.hasOwnProperty( p ) && ! x.hasOwnProperty( p ) ) return false;\n  }\n\n  return true;\n}","import ToolbarComponents from './toolbar/export';\nimport Content from './content';\nimport SidebarComponents from './sidebar/export';\nimport FooterBarComponents from './footerbar/export';\nimport Viewer2DComponents from './viewer2d/export';\nimport StyleComponents from './style/export';\n\nexport {\n  ToolbarComponents,\n  Content,\n  SidebarComponents,\n  FooterBarComponents,\n  Viewer2DComponents,\n  StyleComponents\n};\n\nexport default {\n  ToolbarComponents,\n  Content,\n  SidebarComponents,\n  FooterBarComponents,\n  Viewer2DComponents,\n  StyleComponents\n};\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport {FaSave as IconSave} from 'react-icons/fa';\nimport ToolbarButton from './toolbar-button';\nimport {browserDownload}  from '../../utils/browser';\nimport { Project } from '../../class/export';\n\nexport default function ToolbarSaveButton({state}, {translator}) {\n\n  let saveProjectToFile = e => {\n    e.preventDefault();\n    state = Project.unselectAll( state ).updatedState;\n    browserDownload(state.get('scene').toJS());\n  };\n\n  return (\n    <ToolbarButton active={false} tooltip={translator.t('Save project')} onClick={saveProjectToFile}>\n      <IconSave />\n    </ToolbarButton>\n  );\n}\n\nToolbarSaveButton.propTypes = {\n  state: PropTypes.object.isRequired,\n};\n\nToolbarSaveButton.contextTypes = {\n  translator: PropTypes.object.isRequired,\n};\n","export function browserDownload(json) {\n  let fileOutputLink = document.createElement('a');\n\n  let filename = 'output' + Date.now() + '.json';\n  filename = window.prompt('Insert output filename', filename);\n  if (!filename) return;\n\n  let output = JSON.stringify(json);\n  let data = new Blob([output], {type: 'text/plain'});\n  let url = window.URL.createObjectURL(data);\n  fileOutputLink.setAttribute('download', filename);\n  fileOutputLink.href = url;\n  fileOutputLink.style.display = 'none';\n  document.body.appendChild(fileOutputLink);\n  fileOutputLink.click();\n  document.body.removeChild(fileOutputLink);\n}\n\nexport function browserUpload() {\n  return new Promise(function (resolve, reject) {\n\n    let fileInput = document.createElement('input');\n    fileInput.type = 'file';\n\n    fileInput.addEventListener('change', function (event) {\n      let file = event.target.files[0];\n      let reader = new FileReader();\n      reader.addEventListener('load', (fileEvent) => {\n        let loadedData = fileEvent.target.result;\n        resolve(loadedData);\n      });\n      reader.readAsText(file);\n    });\n\n    fileInput.click();\n  });\n}\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport {FaFolderOpen as IconLoad} from 'react-icons/fa';\nimport ToolbarButton from './toolbar-button';\nimport {browserUpload}  from '../../utils/browser';\n\nexport default function ToolbarLoadButton({state}, {translator, projectActions}) {\n\n  let loadProjectFromFile = event => {\n    event.preventDefault();\n    browserUpload().then((data) => {\n      projectActions.loadProject(JSON.parse(data));\n    });\n  };\n\n  return (\n    <ToolbarButton active={false} tooltip={translator.t(\"Load project\")} onClick={loadProjectFromFile}>\n      <IconLoad />\n    </ToolbarButton>\n  );\n}\n\nToolbarLoadButton.propTypes = {\n  state: PropTypes.object.isRequired,\n};\n\nToolbarLoadButton.contextTypes = {\n  projectActions: PropTypes.object.isRequired,\n  translator: PropTypes.object.isRequired,\n};\n","import React from 'react';\nimport PropTypes from 'prop-types';\n\nimport { ReactSVGPanZoom, TOOL_NONE, TOOL_PAN, TOOL_ZOOM_IN, TOOL_ZOOM_OUT, TOOL_AUTO } from 'react-svg-pan-zoom';\nimport * as constants from '../../constants';\nimport State from './state';\nimport * as SharedStyle from '../../shared-style';\nimport { RulerX, RulerY } from './export';\n\nfunction mode2Tool(mode) {\n  switch (mode) {\n    case constants.MODE_2D_PAN:\n      return TOOL_PAN;\n    case constants.MODE_2D_ZOOM_IN:\n      return TOOL_ZOOM_IN;\n    case constants.MODE_2D_ZOOM_OUT:\n      return TOOL_ZOOM_OUT;\n    case constants.MODE_IDLE:\n      return TOOL_AUTO;\n    default:\n      return TOOL_NONE;\n  }\n}\n\nfunction mode2PointerEvents(mode) {\n  switch (mode) {\n    case constants.MODE_DRAWING_LINE:\n    case constants.MODE_DRAWING_HOLE:\n    case constants.MODE_DRAWING_ITEM:\n    case constants.MODE_DRAGGING_HOLE:\n    case constants.MODE_DRAGGING_ITEM:\n    case constants.MODE_DRAGGING_LINE:\n    case constants.MODE_DRAGGING_VERTEX:\n      return { pointerEvents: 'none' };\n\n    default:\n      return {};\n  }\n}\n\nfunction mode2Cursor(mode) {\n  switch (mode) {\n    case constants.MODE_DRAGGING_HOLE:\n    case constants.MODE_DRAGGING_LINE:\n    case constants.MODE_DRAGGING_VERTEX:\n    case constants.MODE_DRAGGING_ITEM:\n      return { cursor: 'move' };\n\n    case constants.MODE_ROTATING_ITEM:\n      return { cursor: 'ew-resize' };\n\n    case constants.MODE_WAITING_DRAWING_LINE:\n    case constants.MODE_DRAWING_LINE:\n      return { cursor: 'crosshair' };\n    default:\n      return { cursor: 'default' };\n  }\n}\n\nfunction mode2DetectAutopan(mode) {\n  switch (mode) {\n    case constants.MODE_DRAWING_LINE:\n    case constants.MODE_DRAGGING_LINE:\n    case constants.MODE_DRAGGING_VERTEX:\n    case constants.MODE_DRAGGING_HOLE:\n    case constants.MODE_DRAGGING_ITEM:\n    case constants.MODE_DRAWING_HOLE:\n    case constants.MODE_DRAWING_ITEM:\n      return true;\n\n    default:\n      return false;\n  }\n}\n\nfunction extractElementData(node) {\n  while (!node.attributes.getNamedItem('data-element-root') && node.tagName !== 'svg') {\n    node = node.parentNode;\n  }\n  if (node.tagName === 'svg') return null;\n\n  return {\n    part: node.attributes.getNamedItem('data-part') ? node.attributes.getNamedItem('data-part').value : undefined,\n    layer: node.attributes.getNamedItem('data-layer').value,\n    prototype: node.attributes.getNamedItem('data-prototype').value,\n    selected: node.attributes.getNamedItem('data-selected').value === 'true',\n    id: node.attributes.getNamedItem('data-id').value\n  }\n}\n\nexport default function Viewer2D(\n  { state, width, height },\n  { viewer2DActions, linesActions, holesActions, verticesActions, itemsActions, areaActions, projectActions, catalog }) {\n\n\n  let { viewer2D, mode, scene } = state;\n\n  let layerID = scene.selectedLayer;\n\n  let mapCursorPosition = ({ x, y }) => {\n    return { x, y: -y + scene.height }\n  };\n\n  let onMouseMove = viewerEvent => {\n\n    //workaround that allow imageful component to work\n    let evt = new Event('mousemove-planner-event');\n    evt.viewerEvent = viewerEvent;\n    document.dispatchEvent(evt);\n\n    let { x, y } = mapCursorPosition(viewerEvent);\n\n    projectActions.updateMouseCoord({ x, y });\n\n    switch (mode) {\n      case constants.MODE_DRAWING_LINE:\n        linesActions.updateDrawingLine(x, y, state.snapMask);\n        break;\n\n      case constants.MODE_DRAWING_HOLE:\n        holesActions.updateDrawingHole(layerID, x, y);\n        break;\n\n      case constants.MODE_DRAWING_ITEM:\n        itemsActions.updateDrawingItem(layerID, x, y);\n        break;\n\n      case constants.MODE_DRAGGING_HOLE:\n        holesActions.updateDraggingHole(x, y);\n        break;\n\n      case constants.MODE_DRAGGING_LINE:\n        linesActions.updateDraggingLine(x, y, state.snapMask);\n        break;\n\n      case constants.MODE_DRAGGING_VERTEX:\n        verticesActions.updateDraggingVertex(x, y, state.snapMask);\n        break;\n\n      case constants.MODE_DRAGGING_ITEM:\n        itemsActions.updateDraggingItem(x, y);\n        break;\n\n      case constants.MODE_ROTATING_ITEM:\n        itemsActions.updateRotatingItem(x, y);\n        break;\n    }\n\n    viewerEvent.originalEvent.stopPropagation();\n  };\n\n  let onMouseDown = viewerEvent => {\n    let event = viewerEvent.originalEvent;\n\n    //workaround that allow imageful component to work\n    let evt = new Event('mousedown-planner-event');\n    evt.viewerEvent = viewerEvent;\n    document.dispatchEvent(evt);\n\n    let { x, y } = mapCursorPosition(viewerEvent);\n\n    if (mode === constants.MODE_IDLE) {\n      let elementData = extractElementData(event.target);\n      if (!elementData || !elementData.selected) return;\n\n      switch (elementData.prototype) {\n        case 'lines':\n          linesActions.beginDraggingLine(elementData.layer, elementData.id, x, y, state.snapMask);\n          break;\n\n        case 'vertices':\n          verticesActions.beginDraggingVertex(elementData.layer, elementData.id, x, y, state.snapMask);\n          break;\n\n        case 'items':\n          if (elementData.part === 'rotation-anchor')\n            itemsActions.beginRotatingItem(elementData.layer, elementData.id, x, y);\n          else\n            itemsActions.beginDraggingItem(elementData.layer, elementData.id, x, y);\n          break;\n\n        case 'holes':\n          holesActions.beginDraggingHole(elementData.layer, elementData.id, x, y);\n          break;\n\n        default: break;\n      }\n    }\n    event.stopPropagation();\n  };\n\n  let onMouseUp = viewerEvent => {\n    let event = viewerEvent.originalEvent;\n\n    let evt = new Event('mouseup-planner-event');\n    evt.viewerEvent = viewerEvent;\n    document.dispatchEvent(evt);\n\n    let { x, y } = mapCursorPosition(viewerEvent);\n\n    switch (mode) {\n\n      case constants.MODE_IDLE:\n        let elementData = extractElementData(event.target);\n\n        if (elementData && elementData.selected) return;\n\n        switch (elementData ? elementData.prototype : 'none') {\n          case 'areas':\n            areaActions.selectArea(elementData.layer, elementData.id);\n            break;\n\n          case 'lines':\n            linesActions.selectLine(elementData.layer, elementData.id);\n            break;\n\n          case 'holes':\n            holesActions.selectHole(elementData.layer, elementData.id);\n            break;\n\n          case 'items':\n            itemsActions.selectItem(elementData.layer, elementData.id);\n            break;\n\n          case 'none':\n            projectActions.unselectAll();\n            break;\n        }\n        break;\n\n      case constants.MODE_WAITING_DRAWING_LINE:\n        linesActions.beginDrawingLine(layerID, x, y, state.snapMask);\n        break;\n\n      case constants.MODE_DRAWING_LINE:\n        linesActions.endDrawingLine(x, y, state.snapMask);\n        linesActions.beginDrawingLine(layerID, x, y, state.snapMask);\n        break;\n\n      case constants.MODE_DRAWING_HOLE:\n        holesActions.endDrawingHole(layerID, x, y);\n        break;\n\n      case constants.MODE_DRAWING_ITEM:\n        itemsActions.endDrawingItem(layerID, x, y);\n        break;\n\n      case constants.MODE_DRAGGING_LINE:\n        linesActions.endDraggingLine(x, y, state.snapMask);\n        break;\n\n      case constants.MODE_DRAGGING_VERTEX:\n        verticesActions.endDraggingVertex(x, y, state.snapMask);\n        break;\n\n      case constants.MODE_DRAGGING_ITEM:\n        itemsActions.endDraggingItem(x, y);\n        break;\n\n      case constants.MODE_DRAGGING_HOLE:\n        holesActions.endDraggingHole(x, y);\n        break;\n\n      case constants.MODE_ROTATING_ITEM:\n        itemsActions.endRotatingItem(x, y);\n        break;\n    }\n\n    event.stopPropagation();\n  };\n\n  let onChangeValue = (value) => {\n    projectActions.updateZoomScale(value.a);\n    return viewer2DActions.updateCameraView(value)\n  };\n\n  let onChangeTool = (tool) => {\n    switch (tool) {\n      case TOOL_NONE:\n        projectActions.selectToolEdit();\n        break;\n\n      case TOOL_PAN:\n        viewer2DActions.selectToolPan();\n        break;\n\n      case TOOL_ZOOM_IN:\n        viewer2DActions.selectToolZoomIn();\n        break;\n\n      case TOOL_ZOOM_OUT:\n        viewer2DActions.selectToolZoomOut();\n        break;\n    }\n  };\n\n  let { e, f, SVGWidth, SVGHeight } = state.get('viewer2D').toJS();\n\n  let rulerSize = 15; //px\n  let rulerUnitPixelSize = 100;\n  let rulerBgColor = SharedStyle.PRIMARY_COLOR.main;\n  let rulerFnColor = SharedStyle.COLORS.white;\n  let rulerMkColor = SharedStyle.SECONDARY_COLOR.main;\n  let sceneWidth = SVGWidth || state.getIn(['scene', 'width']);\n  let sceneHeight = SVGHeight || state.getIn(['scene', 'height']);\n  let sceneZoom = state.zoom || 1;\n  let rulerXElements = Math.ceil( sceneWidth / rulerUnitPixelSize ) + 1;\n  let rulerYElements = Math.ceil( sceneHeight / rulerUnitPixelSize ) + 1;\n\n  return (\n    <div style={{\n      margin: 0,\n      padding: 0,\n      display: 'grid',\n      gridRowGap: '0',\n      gridColumnGap: '0',\n      gridTemplateColumns: `${rulerSize}px ${width - rulerSize}px`,\n      gridTemplateRows: `${rulerSize}px ${height - rulerSize}px`,\n      position: 'relative'\n    }}>\n      <div style={{ gridColumn: 1, gridRow: 1, backgroundColor: rulerBgColor }}></div>\n      <div style={{ gridRow: 1, gridColumn: 2, position: 'relative', overflow: 'hidden' }} id=\"rulerX\">\n      { sceneWidth ? <RulerX\n          unitPixelSize={rulerUnitPixelSize}\n          zoom={sceneZoom}\n          mouseX={state.mouse.get('x')}\n          width={width - rulerSize}\n          zeroLeftPosition={e || 0}\n          backgroundColor={rulerBgColor}\n          fontColor={rulerFnColor}\n          markerColor={rulerMkColor}\n          positiveUnitsNumber={rulerXElements}\n          negativeUnitsNumber={0}\n        /> : null }\n      </div>\n      <div style={{ gridColumn: 1, gridRow: 2, position: 'relative', overflow: 'hidden' }} id=\"rulerY\">\n        { sceneHeight ? <RulerY\n          unitPixelSize={rulerUnitPixelSize}\n          zoom={sceneZoom}\n          mouseY={state.mouse.get('y')}\n          height={height - rulerSize}\n          zeroTopPosition={((sceneHeight * sceneZoom) + f) || 0}\n          backgroundColor={rulerBgColor}\n          fontColor={rulerFnColor}\n          markerColor={rulerMkColor}\n          positiveUnitsNumber={rulerYElements}\n          negativeUnitsNumber={0}\n        /> : null }\n      </div>\n      <ReactSVGPanZoom\n        style={{ gridColumn: 2, gridRow: 2 }}\n        width={width - rulerSize}\n        height={height - rulerSize}\n        value={viewer2D.isEmpty() ? null : viewer2D.toJS()}\n        onChangeValue={onChangeValue}\n        tool={mode2Tool(mode)}\n        onChangeTool={onChangeTool}\n        detectAutoPan={mode2DetectAutopan(mode)}\n        onMouseDown={onMouseDown}\n        onMouseMove={onMouseMove}\n        onMouseUp={onMouseUp}\n        miniaturePosition=\"none\"\n        toolbarPosition=\"none\"\n      >\n\n        <svg width={scene.width} height={scene.height}>\n          <defs>\n            <pattern id=\"diagonalFill\" patternUnits=\"userSpaceOnUse\" width=\"4\" height=\"4\" fill=\"#FFF\">\n              <rect x=\"0\" y=\"0\" width=\"4\" height=\"4\" fill=\"#000\" />\n              <path d=\"M-1,1 l2,-2 M0,4 l4,-4 M3,5 l2,-2\" style={{ stroke: '#000', strokeWidth: 1 }} />\n            </pattern>\n          </defs>\n          <g style={Object.assign(mode2Cursor(mode), mode2PointerEvents(mode))}>\n            <State state={state} catalog={catalog} />\n          </g>\n        </svg>\n\n      </ReactSVGPanZoom>\n\n      <svg width={0} height={0}>\n          <defs>\n            <pattern id=\"diagonalFillInvisible\" patternUnits=\"userSpaceOnUse\" width=\"4\" height=\"4\" fill=\"#FFF\">\n              <rect x=\"0\" y=\"0\" width=\"4\" height=\"4\" fill=\"#FFF\" />\n              <path d=\"M-1,1 l2,-2 M0,4 l4,-4 M3,5 l2,-2\" style={{ stroke: '#FFF', strokeWidth: 1 }} />\n            </pattern>\n          </defs>\n          <g style={Object.assign(mode2Cursor(mode), mode2PointerEvents(mode))}>\n            <State state={state} catalog={catalog} />\n          </g>\n        </svg>\n    </div>\n  );\n}\n\n\nViewer2D.propTypes = {\n  state: PropTypes.object.isRequired,\n  width: PropTypes.number.isRequired,\n  height: PropTypes.number.isRequired,\n};\n\nViewer2D.contextTypes = {\n  viewer2DActions: PropTypes.object.isRequired,\n  linesActions: PropTypes.object.isRequired,\n  holesActions: PropTypes.object.isRequired,\n  verticesActions: PropTypes.object.isRequired,\n  itemsActions: PropTypes.object.isRequired,\n  areaActions: PropTypes.object.isRequired,\n  projectActions: PropTypes.object.isRequired,\n  catalog: PropTypes.object.isRequired,\n};\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport Scene from './scene';\nimport Snap from './snap';\nimport * as SharedStyle from '../../shared-style';\n\nconst guideStyle = {\n  stroke: SharedStyle.SECONDARY_COLOR.main,\n  strokewidth:'2.5px'\n};\n\nexport default function State({state, catalog}) {\n\n  let {activeSnapElement, snapElements, scene} = state;\n  let {width, height} = scene;\n\n  activeSnapElement = activeSnapElement ?\n    <Snap snap={activeSnapElement} width={scene.width} height={scene.height}/> : null;\n// snapElements = snapElements.map((snap,id) => <Snap key={id} snap={snap} width={scene.width} height={scene.height}/>);\n  snapElements = null; //only for debug purpose\n\n  return (\n    <g>\n      <rect x=\"0\" y=\"0\" width={width} height={height} fill={SharedStyle.COLORS.white}/>\n      <g transform={`translate(0, ${scene.height}) scale(1, -1)`} id=\"svg-drawing-paper\">\n\n        <Scene scene={scene} catalog={catalog}/>\n        {scene.getIn(['guides','horizontal']).entrySeq().map( ([ hgKey, hgVal ]) => <line id={'hGuide' + hgKey} key={hgKey} x1={0} y1={hgVal} x2={width} y2={hgVal} style={guideStyle}/> )}\n        {scene.getIn(['guides','vertical']).entrySeq().map( ([ vgKey, vgVal ]) => <line key={vgKey} x1={vgVal} y1={0} x2={vgVal} y2={height} style={guideStyle}/> )}\n        {activeSnapElement}\n        {snapElements}\n\n      </g>\n    </g>\n  )\n}\n\nState.propTypes = {\n  state: PropTypes.object.isRequired,\n  catalog: PropTypes.object.isRequired\n};\n","import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport { Layer, Grids } from './export';\n\nexport default class Scene extends Component {\n\n  shouldComponentUpdate(nextProps, nextState) {\n    return this.props.scene.hashCode() !== nextProps.scene.hashCode();\n  }\n\n  render() {\n    let {scene, catalog} = this.props;\n    let {height, layers} = scene;\n    let selectedLayer = layers.get(scene.selectedLayer);\n\n    return (\n      <g>\n        <Grids scene={scene}/>\n\n        <g style={{pointerEvents: 'none'}}>\n          {\n            layers\n            .entrySeq()\n            .filter(([layerID, layer]) => layerID !== scene.selectedLayer && layer.visible)\n            .map(([layerID, layer]) => <Layer key={layerID} layer={layer} scene={scene} catalog={catalog}/>)\n          }\n        </g>\n\n        <Layer key={selectedLayer.id} layer={selectedLayer} scene={scene} catalog={catalog}/>\n      </g>\n    );\n  }\n}\n\n\nScene.propTypes = {\n  scene: PropTypes.object.isRequired,\n  catalog: PropTypes.object.isRequired\n};\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport * as Geometry from '../../utils/geometry';\n\nconst STYLE = {\n  stroke: '#D32F2F',\n  strokeWidth: \"1px\"\n};\n\nexport default function ActiveDrawingHelper({snap, width, height}) {\n  switch (snap.type) {\n    case 'point':\n      return (\n        <g transform={`translate(${snap.x} ${snap.y})`}>\n          <line x1=\"0\" y1=\"-70\" x2=\"0\" y2=\"70\" style={STYLE}/>\n          <line x1=\"-70\" y1=\"0\" x2=\"70\" y2=\"0\" style={STYLE}/>\n        </g>);\n\n    case 'line':\n      let h0 = Geometry.horizontalLine(0);\n      let h1 = Geometry.horizontalLine(height);\n      let pointH0 = Geometry.twoLinesIntersection(snap.a, snap.b, snap.c, h0.a, h0.b, h0.c);\n      let pointH1 = Geometry.twoLinesIntersection(snap.a, snap.b, snap.c, h1.a, h1.b, h1.c);\n\n      let v0 = Geometry.verticalLine(0);\n      let v1 = Geometry.verticalLine(width);\n      let pointV0 = Geometry.twoLinesIntersection(snap.a, snap.b, snap.c, v0.a, v0.b, v0.c);\n      let pointV1 = Geometry.twoLinesIntersection(snap.a, snap.b, snap.c, v1.a, v1.b, v1.c);\n\n      if (pointH0 && pointH1)\n        return <line x1={pointH0.x} y1={pointH0.y} x2={pointH1.x} y2={pointH1.y} style={STYLE}/>;\n      if (pointV0 && pointV1)\n        return <line x1={pointV0.x} y1={pointV0.y} x2={pointV1.x} y2={pointV1.y} style={STYLE}/>;\n      return null;\n\n    case'line-segment':\n      return <line x1={snap.x1} y1={snap.y1} x2={snap.x2} y2={snap.y2} style={STYLE}/>;\n\n    default:\n      return null;\n  }\n}\n\nActiveDrawingHelper.propTypes = {\n  snap: PropTypes.object.isRequired,\n  width: PropTypes.number.isRequired,\n  height: PropTypes.number.isRequired\n};\n","import React from 'react';\nimport PropTypes from 'prop-types';\n\nconst STYLE = {\n  stroke: \"#0096fd\",\n  strokeWidth: \"1px\"\n};\n\nconst STYLE_TEXT = {\n  textAnchor: \"middle\",\n  fontSize: \"12px\",\n  fontFamily: \"'Courier New', Courier, monospace\",\n  pointerEvents: \"none\",\n  fontWeight: \"bold\",\n\n  //http://stackoverflow.com/questions/826782/how-to-disable-text-selection-highlighting-using-css\n  WebkitTouchCallout: \"none\", /* iOS Safari */\n  WebkitUserSelect: \"none\",   /* Chrome/Safari/Opera */\n  MozUserSelect: \"none\",      /* Firefox */\n  MsUserSelect: \"none\",       /* Internet Explorer/Edge */\n  userSelect: \"none\"\n};\n\n\nexport default function Ruler({length, unit, transform}) {\n\n  let distanceText = `${length.toFixed(2)} ${unit}`;\n\n  return (\n    <g transform={transform}>\n      <text x={length / 2} y=\"-3\" transform={`scale(1, -1)`} style={STYLE_TEXT}>{distanceText}</text>\n      <line x1=\"0\" y1=\"-5\" x2=\"0\" y2=\"5\" style={STYLE}/>\n      <line x1={length} y1=\"-5\" x2={length} y2=\"5\" style={STYLE}/>\n      <line x1=\"0\" y1=\"0\" x2={length} y2=\"0\" style={STYLE}/>\n    </g>\n  );\n\n}\n\nRuler.propTypes = {\n  length: PropTypes.number.isRequired,\n  unit: PropTypes.string.isRequired,\n  transform: PropTypes.string.isRequired\n};\n","import React, {Component} from 'react';\nimport PropTypes from 'prop-types';\nimport { Map } from 'immutable';\nimport Panel from './panel';\nimport {TiPlus, TiDelete} from 'react-icons/ti';\nimport {FaPencilAlt, FaTrash, FaEye} from 'react-icons/fa';\nimport {\n  FormTextInput,\n  FormNumberInput,\n  FormSubmitButton,\n  FormSlider,\n  CancelButton\n} from '../style/export';\n\nimport {\n  MODE_IDLE, MODE_2D_ZOOM_IN, MODE_2D_ZOOM_OUT, MODE_2D_PAN, MODE_3D_VIEW, MODE_3D_FIRST_PERSON,\n  MODE_WAITING_DRAWING_LINE, MODE_DRAWING_LINE, MODE_DRAWING_HOLE, MODE_DRAWING_ITEM, MODE_DRAGGING_LINE,\n  MODE_DRAGGING_VERTEX, MODE_DRAGGING_ITEM, MODE_DRAGGING_HOLE, MODE_FITTING_IMAGE, MODE_UPLOADING_IMAGE,\n  MODE_ROTATING_ITEM\n} from '../../constants';\nimport * as SharedStyle from '../../shared-style';\n\nconst VISIBILITY_MODE = {\n  MODE_IDLE, MODE_2D_ZOOM_IN, MODE_2D_ZOOM_OUT, MODE_2D_PAN,\n  MODE_3D_VIEW, MODE_3D_FIRST_PERSON,\n  MODE_WAITING_DRAWING_LINE, MODE_DRAWING_LINE, MODE_DRAWING_HOLE, MODE_DRAWING_ITEM,\n  MODE_DRAGGING_LINE, MODE_DRAGGING_VERTEX, MODE_DRAGGING_ITEM, MODE_DRAGGING_HOLE,\n  MODE_ROTATING_ITEM, MODE_UPLOADING_IMAGE, MODE_FITTING_IMAGE\n};\n\nconst styleEditButton = {\n  cursor: 'pointer',\n  marginLeft: '5px',\n  border: '0px',\n  background: 'none',\n  color: SharedStyle.COLORS.white,\n  fontSize: '14px',\n  outline: '0px'\n};\n\nconst tableLayerStyle = {\n  width: '100%',\n  cursor: 'pointer',\n  overflowY: 'auto',\n  maxHeight: '20em',\n  display: 'block',\n  padding: '0 1em',\n  marginLeft: '1px'\n};\n\nconst iconColStyle = {width: '2em'};\nconst styleHoverColor = {color: SharedStyle.SECONDARY_COLOR.main};\nconst styleEditButtonHover = {...styleEditButton, ...styleHoverColor};\nconst styleAddLabel = {fontSize: '10px', marginLeft: '5px'};\nconst styleEyeVisible = {fontSize: '1.25em'};\nconst styleEyeHidden = {...styleEyeVisible, color: '#a5a1a1'};\nconst firstTdStyle = {width: '6em'};\nconst newLayerLableStyle = {margin: '0.5em 0', fontSize: '1.3em', cursor: 'pointer', textAlign: 'center'};\nconst newLayerLableHoverStyle = {...newLayerLableStyle, ...styleHoverColor};\nconst layerInputTableStyle = {width: '100%', borderSpacing: '2px 0', padding: '5px 15px'};\nconst inputTableButtonStyle = {float: 'right', marginTop: '0.5em', borderSpacing: '0'};\n\nexport default class PanelLayers extends Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      headHovered: false,\n      layerAddUIVisible: false,\n      editingLayer: new Map()\n    };\n  }\n\n  shouldComponentUpdate(nextProps, nextState) {\n    if(\n      this.props.state.scene.layers.size !== nextProps.state.scene.layers.size ||\n      nextState.layerAddUIVisible != this.state.layerAddUIVisible ||\n      this.state.editingLayer.hashCode() !== nextState.editingLayer.hashCode() ||\n      this.props.state.sceneHistory.hashCode() !== nextProps.state.sceneHistory.hashCode()\n    ) return true;\n\n    return false;\n  }\n\n  addLayer(e) {\n    e.stopPropagation();\n    if (!this.state.layerAddUIVisible) {\n      this.context.sceneActions.addLayer('', 0);\n      this.setState({layerAddUIVisible: false});\n    }\n    else this.setState({layerAddUIVisible: !this.state.layerAddUIVisible});\n  }\n\n  resetLayerMod(e) {\n    e.stopPropagation();\n    this.setState({layerAddUIVisible: false, editingLayer: new Map()});\n  }\n\n  updateLayer(e, layerData) {\n    e.stopPropagation();\n    let {id, name, opacity, altitude, order} = layerData.toJS();\n\n    altitude = parseInt(altitude);\n\n    this.context.sceneActions.setLayerProperties(id, {name, opacity, altitude, order});\n    this.setState({layerAddUIVisible: false, editingLayer: new Map()});\n  }\n\n  delLayer(e, layerID) {\n    e.stopPropagation();\n    this.context.sceneActions.removeLayer(layerID);\n    this.setState({layerAddUIVisible: false, editingLayer: new Map()});\n  }\n\n  render() {\n    if (!VISIBILITY_MODE[this.props.state.mode]) return null;\n\n    let scene = this.props.state.scene;\n    let isLastLayer = scene.layers.size === 1;\n\n    return (\n      <Panel name={this.context.translator.t('Layers')}>\n        <table style={tableLayerStyle}>\n          <thead>\n            <tr>\n              <th colSpan='3'></th>\n              <th>{this.context.translator.t('Altitude')}</th>\n              <th>{this.context.translator.t('Name')}</th>\n            </tr>\n          </thead>\n          <tbody>\n            {\n              scene.layers.entrySeq().map(([layerID, layer]) => {\n\n                let selectClick = e => this.context.sceneActions.selectLayer(layerID);\n                let configureClick = e => this.setState({editingLayer: layer, layerAddUIVisible: true});\n\n                let swapVisibility = e => {\n                  e.stopPropagation();\n                  this.context.sceneActions.setLayerProperties(layerID, {visible: !layer.visible});\n                };\n\n                let isCurrentLayer = layerID === scene.selectedLayer;\n\n                return (\n                  <tr\n                    key={layerID}\n                    onClick={selectClick}\n                    onDoubleClick={configureClick}\n                    style={!isCurrentLayer ? null : styleHoverColor}\n                  >\n                    <td style={iconColStyle}>\n                      {\n                        !isCurrentLayer ?\n                          <FaEye\n                            onClick={swapVisibility}\n                            style={!layer.visible ? styleEyeHidden : styleEyeVisible}\n                          />\n                          : null\n                      }\n                    </td>\n                    <td style={iconColStyle}>\n                      <FaPencilAlt\n                        onClick={configureClick}\n                        style={!isCurrentLayer ? styleEditButton : styleEditButtonHover}\n                        title={this.context.translator.t('Configure layer')}\n                      />\n                    </td>\n                    <td style={iconColStyle}>\n                      {\n                        !isLastLayer ?\n                          <FaTrash\n                            onClick={ e => this.delLayer(e, layerID) }\n                            style={!isCurrentLayer ? styleEditButton : styleEditButtonHover}\n                            title={this.context.translator.t('Delete layer')}\n                          />\n                          : null\n                      }\n                    </td>\n                    <td style={{width: '6em', textAlign: 'center'}}>\n                      [ h : {layer.altitude} ]\n                    </td>\n                    <td>\n                      {layer.name}\n                    </td>\n                  </tr>\n                );\n\n              })\n            }\n          </tbody>\n        </table>\n        <p\n          style={ !this.state.headHovered ? newLayerLableStyle : newLayerLableHoverStyle }\n          onMouseOver={ () => this.setState({headHovered: true}) }\n          onMouseOut={ () => this.setState({headHovered: false}) }\n          onClick={ (e) => this.addLayer(e) }\n        >\n          { !this.state.layerAddUIVisible ? <TiPlus /> : <TiDelete /> }\n          <b style={styleAddLabel}>{this.context.translator.t('New layer')}</b>\n        </p>\n\n        {\n          this.state.layerAddUIVisible && this.state.editingLayer ?\n            <table style={layerInputTableStyle}>\n              <tbody>\n                <tr style={{marginTop: '1em'}}>\n                  <td style={firstTdStyle}>{this.context.translator.t('Name')}:</td>\n                  <td>\n                    <FormTextInput\n                      value={this.state.editingLayer.get('name')}\n                      onChange={e => this.setState({editingLayer: this.state.editingLayer.merge({name: e.target.value})})}\n                    />\n                  </td>\n                </tr>\n                <tr>\n                  <td style={firstTdStyle}>{this.context.translator.t('opacity')}:</td>\n                  <td>\n                    <FormSlider\n                      min={0}\n                      max={100}\n                      value={Math.round(this.state.editingLayer.get('opacity') * 100)}\n                      onChange={e => this.setState({editingLayer: this.state.editingLayer.merge({opacity: (e.target.value / 100)})})}\n                    />\n                  </td>\n                </tr>\n                <tr>\n                  <td style={firstTdStyle}>{this.context.translator.t('altitude')}:</td>\n                  <td>\n                    <FormNumberInput\n                      value={this.state.editingLayer.get('altitude')}\n                      onChange={e => this.setState({editingLayer: this.state.editingLayer.merge({altitude: e.target.value})})}\n                    />\n                  </td>\n                </tr>\n                <tr>\n                  <td style={firstTdStyle}>{this.context.translator.t('order')}:</td>\n                  <td>\n                    <FormNumberInput\n                      value={this.state.editingLayer.get('order')}\n                      onChange={e => this.setState({editingLayer: this.state.editingLayer.merge({order: e.target.value})})}\n                    />\n                  </td>\n                </tr>\n                <tr>\n                  <td colSpan=\"2\">\n                    <table style={inputTableButtonStyle}>\n                      <tbody>\n                        <tr>\n                          <td><CancelButton size=\"small\" onClick={ e => {\n                            this.resetLayerMod(e);\n                          } }>{this.context.translator.t('Reset')}</CancelButton></td>\n                          <td><FormSubmitButton size=\"small\" onClick={ e => {\n                            this.updateLayer(e, this.state.editingLayer);\n                          } }>{this.context.translator.t('Save')}</FormSubmitButton></td>\n                        </tr>\n                      </tbody>\n                    </table>\n                  </td>\n                </tr>\n              </tbody>\n            </table>\n            : null\n        }\n\n      </Panel>\n    )\n  }\n\n}\n\nPanelLayers.propTypes = {\n  state: PropTypes.object.isRequired,\n};\n\nPanelLayers.contextTypes = {\n  sceneActions: PropTypes.object.isRequired,\n  translator: PropTypes.object.isRequired,\n};\n","import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport Panel from './panel';\nimport * as SharedStyle from '../../shared-style';\nimport { Tab, Tabs, TabList, TabPanel } from 'react-tabs';\nimport { FaPencil, FaTrash, FaTimes } from 'react-icons/fa';\nimport { FormNumberInput } from '../../components/style/export';\n\nconst tabStyle = { margin: '1em' };\n\nconst iconStyle = {\n  fontSize: '14px',\n  margin: '2px',\n  cursor: 'pointer'\n};\n\nconst addGuideStyle = {\n  cursor: 'pointer',\n  height: '2em'\n};\n\nconst tableTabStyle = {\n  width: '100%',\n  textAlign: 'center'\n};\n\nexport default class PanelGuides extends Component {\n  constructor(props, context) {\n    super(props, context);\n\n    this.state = {\n      addHGVisible: true,\n      addVGVisible: true,\n      addCGVisible: true\n    };\n  }\n\n  shouldComponentUpdate(nextProps, nextState) {\n    return (\n      this.state.addHGVisible !== nextState.addHGVisible ||\n      this.state.addVGVisible !== nextState.addVGVisible ||\n      this.state.addCGVisible !== nextState.addCGVisible ||\n      this.props.state.getIn(['scene', 'guides']).hashCode() !==\n        nextProps.state.getIn(['scene', 'guides']).hashCode()\n    );\n  }\n\n  render() {\n    let { state } = this.props;\n    let { projectActions, translator } = this.context;\n    let { guides } = state.scene;\n\n    return (\n      <Panel name={translator.t('Guides')}>\n        <Tabs id='guidesTabs' style={tabStyle}>\n          <TabList>\n            <Tab>{translator.t('Horizontal')}</Tab>\n            <Tab>{translator.t('Vertical')}</Tab>\n            {/*<Tab>{translator.t('Circular')}</Tab>*/}\n          </TabList>\n\n          <TabPanel>\n            <table style={tableTabStyle}>\n              <tbody>\n                {guides\n                  .get('horizontal')\n                  .entrySeq()\n                  .map(([hgKey, hgVal], ind) => {\n                    return (\n                      <tr key={hgKey}>\n                        <td style={{ width: '2em' }}>{ind + 1}</td>\n                        <td>{hgVal}</td>\n                        <td style={{ width: '5em' }}>\n                          {/*<FaPencil style={iconStyle} />*/}\n                          <FaTrash\n                            style={iconStyle}\n                            onClick={e =>\n                              projectActions.removeHorizontalGuide(hgKey)\n                            }\n                          />\n                        </td>\n                      </tr>\n                    );\n                  })}\n                {this.state.addHGVisible ? (\n                  <tr>\n                    <td\n                      colSpan='3'\n                      style={addGuideStyle}\n                      onClick={e => this.setState({ addHGVisible: false })}\n                    >\n                      {translator.t('+ Add Horizontal Giude')}\n                    </td>\n                  </tr>\n                ) : (\n                  <tr>\n                    <td colSpan='2'>\n                      <FormNumberInput\n                        value={0}\n                        onChange={e => {\n                          projectActions.addHorizontalGuide(e.target.value);\n                          return this.setState({ addHGVisible: true });\n                        }}\n                        min={0}\n                        max={this.props.state.getIn(['scene', 'height'])}\n                      />\n                    </td>\n                    <td>\n                      <FaTimes\n                        style={iconStyle}\n                        onClick={e => this.setState({ addHGVisible: true })}\n                      />\n                    </td>\n                  </tr>\n                )}\n              </tbody>\n            </table>\n          </TabPanel>\n          <TabPanel>\n            <table style={tableTabStyle}>\n              <tbody>\n                {guides\n                  .get('vertical')\n                  .entrySeq()\n                  .map(([hgKey, hgVal], ind) => {\n                    return (\n                      <tr key={hgKey}>\n                        <td style={{ width: '2em' }}>{ind + 1}</td>\n                        <td>{hgVal}</td>\n                        <td style={{ width: '5em' }}>\n                          {/*<FaPencil style={iconStyle} />*/}\n                          <FaTrash\n                            style={iconStyle}\n                            onClick={e =>\n                              projectActions.removeVerticalGuide(hgKey)\n                            }\n                          />\n                        </td>\n                      </tr>\n                    );\n                  })}\n                {this.state.addVGVisible ? (\n                  <tr>\n                    <td\n                      colSpan='3'\n                      style={addGuideStyle}\n                      onClick={e => this.setState({ addVGVisible: false })}\n                    >\n                      {translator.t('+ Add Vertical Giude')}\n                    </td>\n                  </tr>\n                ) : (\n                  <tr>\n                    <td colSpan='2'>\n                      <FormNumberInput\n                        value={0}\n                        onChange={e => {\n                          projectActions.addVerticalGuide(e.target.value);\n                          return this.setState({ addVGVisible: true });\n                        }}\n                        min={0}\n                        max={this.props.state.getIn(['scene', 'height'])}\n                      />\n                    </td>\n                    <td>\n                      <FaTimes\n                        style={iconStyle}\n                        onClick={e => this.setState({ addVGVisible: true })}\n                      />\n                    </td>\n                  </tr>\n                )}\n              </tbody>\n            </table>\n          </TabPanel>\n          {/*<TabPanel>\n            <b>TODO Circular Giudes</b>\n          </TabPanel>*/}\n        </Tabs>\n      </Panel>\n    );\n  }\n}\n\nPanelGuides.propTypes = {\n  state: PropTypes.object.isRequired\n};\n\nPanelGuides.contextTypes = {\n  translator: PropTypes.object.isRequired,\n  projectActions: PropTypes.object.isRequired\n};\n","import React, {Component} from 'react';\nimport PropTypes from 'prop-types';\nimport Panel from './panel';\nimport {\n  MODE_IDLE, MODE_2D_ZOOM_IN, MODE_2D_ZOOM_OUT, MODE_2D_PAN, MODE_3D_VIEW, MODE_3D_FIRST_PERSON,\n  MODE_WAITING_DRAWING_LINE, MODE_DRAWING_LINE, MODE_DRAWING_HOLE, MODE_DRAWING_ITEM, MODE_DRAGGING_LINE,\n  MODE_DRAGGING_VERTEX, MODE_DRAGGING_ITEM, MODE_DRAGGING_HOLE, MODE_FITTING_IMAGE, MODE_UPLOADING_IMAGE,\n  MODE_ROTATING_ITEM\n} from '../../constants';\nimport * as SharedStyle from '../../shared-style';\nimport {MdSearch} from 'react-icons/md';\n\nconst VISIBILITY_MODE = {\n  MODE_IDLE, MODE_2D_ZOOM_IN, MODE_2D_ZOOM_OUT, MODE_2D_PAN, MODE_3D_VIEW, MODE_3D_FIRST_PERSON,\n  MODE_WAITING_DRAWING_LINE, MODE_DRAWING_LINE, MODE_DRAWING_HOLE, MODE_DRAWING_ITEM, MODE_DRAGGING_LINE,\n  MODE_DRAGGING_VERTEX, MODE_DRAGGING_ITEM, MODE_DRAGGING_HOLE, MODE_FITTING_IMAGE, MODE_UPLOADING_IMAGE,\n  MODE_ROTATING_ITEM\n};\n\nconst contentArea = {\n  height: 'auto',\n  maxHeight: '15em',\n  overflowY: 'auto',\n  padding: '0.25em 1.15em',\n  cursor: 'pointer',\n  marginBottom: '1em',\n  userSelect: 'none'\n};\n\nconst elementStyle = {\n  width: 'auto',\n  height: '2.5em',\n  margin: '0.25em 0.25em 0 0',\n  padding: '0.5em',\n  textAlign: 'center',\n  display: 'inline-block',\n  border: '1px solid #CCC',\n  borderRadius: '0.2em'\n};\n\nconst elementSelectedStyle = {\n  ...elementStyle,\n  color: SharedStyle.SECONDARY_COLOR.main,\n  borderColor: SharedStyle.SECONDARY_COLOR.main,\n};\n\nconst categoryDividerStyle = {\n  paddingBottom: '0.5em',\n  borderBottom: '1px solid #888',\n};\n\nconst tableSearchStyle = {width: '100%', marginTop: '0.8em'};\nconst searchIconStyle = {fontSize: '1.5em'};\nconst searchInputStyle = {fontSize: '1em', width: '100%', height: '1em', padding: '1em 0.5em'};\n\nexport default class PanelLayerElement extends Component {\n\n  constructor(props, context) {\n    super(props, context);\n\n    let layer = props.layers.get(props.selectedLayer);\n    let elements = {\n      lines: layer.lines,\n      holes: layer.holes,\n      items: layer.items,\n    };\n\n    this.state = {\n      elements,\n      matchString: '',\n      matchedElements: elements\n    };\n  }\n\n  shouldComponentUpdate(nextProps, nextState) {\n    if (this.state.matchString !== nextState.matchString) return true;\n\n    let oldElements = this.state.elements;\n    let newElements = nextState.elements;\n\n    if(\n      oldElements.lines.hashCode() !== newElements.lines.hashCode() ||\n      oldElements.holes.hashCode() !== newElements.holes.hashCode() ||\n      oldElements.items.hashCode() !== newElements.items.hashCode()\n    ) return true;\n\n    return false;\n  }\n\n  componentWillReceiveProps(nextProps) {\n    let layer = nextProps.layers.get(nextProps.selectedLayer);\n\n    if ( this.props.layers.hashCode() === nextProps.layers.hashCode() ) return;\n\n    let elements = {\n      lines: layer.lines,\n      holes: layer.holes,\n      items: layer.items,\n    };\n\n    if (this.state.matchString !== '') {\n      let regexp = new RegExp(this.state.matchString, 'i');\n      let filterCb = el => regexp.test(el.get('name'));\n\n      this.setState({\n        matchedElements: {\n          elements,\n          lines: elements.lines.filter(filterCb),\n          holes: elements.holes.filter(filterCb),\n          items: elements.items.filter(filterCb)\n        }\n      });\n    } else {\n      this.setState({elements, matchedElements: elements});\n    }\n  }\n\n  matcharray(text) {\n    if (text === '') {\n      this.setState({\n        matchString: '',\n        matchedElements: this.state.elements\n      });\n      return;\n    }\n\n    let regexp = new RegExp(text, 'i');\n    let filterCb = el => regexp.test(el.get('name'));\n\n    this.setState({\n      matchString: text,\n      matchedElements: {\n        lines: this.state.elements.lines.filter(filterCb),\n        holes: this.state.elements.holes.filter(filterCb),\n        items: this.state.elements.items.filter(filterCb)\n      }\n    });\n  }\n\n  render() {\n    if (!VISIBILITY_MODE[this.props.mode]) return null;\n\n    let layer = this.props.layers.get(this.props.selectedLayer);\n\n    return (\n      <Panel name={this.context.translator.t('Elements on layer {0}', layer.name)}>\n        <div style={contentArea} onWheel={e => e.stopPropagation()}>\n\n          <table style={tableSearchStyle}>\n            <tbody>\n            <tr>\n              <td><MdSearch style={searchIconStyle}/></td>\n              <td><input type=\"text\" style={searchInputStyle} onChange={(e) => {\n                this.matcharray(e.target.value);\n              }}/></td>\n            </tr>\n            </tbody>\n          </table>\n\n          {\n            this.state.matchedElements.lines.count() ?\n              <div>\n                <p style={categoryDividerStyle}>{this.context.translator.t('Lines')}</p>\n                {\n                  this.state.matchedElements.lines.entrySeq().map(([lineID, line]) => {\n                    return (\n                      <div\n                        key={lineID}\n                        onClick={e => this.context.linesActions.selectLine(layer.id, line.id)}\n                        style={line.selected ? elementSelectedStyle : elementStyle}\n                      >\n                        {line.name}\n                      </div>\n                    )\n                  })\n                }\n              </div>\n              : null\n          }\n\n          {\n            this.state.matchedElements.holes.count() ?\n              <div>\n                <p style={categoryDividerStyle}>{this.context.translator.t('Holes')}</p>\n                {\n                  this.state.matchedElements.holes.entrySeq().map(([holeID, hole]) => {\n                    return (\n                      <div\n                        key={holeID}\n                        onClick={e => this.context.holesActions.selectHole(layer.id, hole.id)}\n                        style={hole.selected ? elementSelectedStyle : elementStyle}\n                      >\n                        {hole.name}\n                      </div>\n                    )\n                  })\n                }\n              </div>\n              : null\n          }\n\n          {\n            this.state.matchedElements.items.count() ?\n              <div>\n                <p style={categoryDividerStyle}>{this.context.translator.t('Items')}</p>\n                {\n                  this.state.matchedElements.items.entrySeq().map(([itemID, item]) => {\n                    return (\n                      <div\n                        key={itemID}\n                        onClick={e => this.context.itemsActions.selectItem(layer.id, item.id)}\n                        style={item.selected ? elementSelectedStyle : elementStyle}\n                      >\n                        {item.name}\n                      </div>\n                    )\n                  })\n                }\n              </div>\n              : null\n          }\n\n        </div>\n      </Panel>\n    );\n  }\n\n}\n\nPanelLayerElement.propTypes = {\n  mode: PropTypes.string.isRequired,\n  layers: PropTypes.object.isRequired,\n};\n\nPanelLayerElement.contextTypes = {\n  catalog: PropTypes.object.isRequired,\n  translator: PropTypes.object.isRequired,\n  itemsActions: PropTypes.object.isRequired,\n  linesActions: PropTypes.object.isRequired,\n  holesActions: PropTypes.object.isRequired,\n  projectActions: PropTypes.object.isRequired\n};\n","import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport * as SharedStyle from '../../shared-style';\n\nconst toggleButtonStyle = {\n  width: '5.5em',\n  color: '#CCC',\n  textAlign: 'center',\n  cursor: 'pointer',\n  userSelect: 'none',\n  border: '1px solid transparent',\n  margin: '-1px 5px 0 5px',\n  borderRadius: '2px',\n  display: 'inline-block'\n};\n\nconst toggleButtonStyleOver = {\n  ...toggleButtonStyle,\n  backgroundColor: '#1c82c6',\n  border: '1px solid #FFF',\n  color: SharedStyle.COLORS.white\n};\n\nexport default class FooterToggleButton extends Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      over: false,\n      active: this.props.toggleState || false\n    };\n  }\n\n  toggleOver(e) { this.setState({ over: true }); }\n  toggleOut(e) { this.setState({ over: false }); }\n\n  toggle(e) {\n    let isActive = !this.state.active;\n    this.setState({ active: isActive });\n\n    if (isActive)\n    {\n      this.props.toggleOn();\n    }\n    else\n    {\n      this.props.toggleOff();\n    }\n  }\n\n  shouldComponentUpdate(nextProps, nextState) {\n    if( this.state.over != nextState.over ) return true;\n    if( this.state.active != nextState.active ) return true;\n    if( this.props.toggleState != nextProps.toggleState ) return true;\n\n    return false;\n  }\n\n  componentWillReceiveProps(nextProps) {\n    if( nextProps.toggleState != this.props.toggleState  )\n      this.state.active = nextProps.toggleState;\n  }\n\n  render() {\n\n    return (\n      <div\n        style={this.state.over || this.state.active ? toggleButtonStyleOver : toggleButtonStyle}\n        onMouseOver={e => this.toggleOver(e)}\n        onMouseOut={e => this.toggleOut(e)}\n        onClick={e => this.toggle(e)}\n        title={this.props.title}\n      >\n        {this.props.text}\n      </div>\n    );\n  }\n}\n\nFooterToggleButton.propTypes = {\n  state: PropTypes.object.isRequired,\n  toggleOn: PropTypes.func.isRequired,\n  toggleOff: PropTypes.func.isRequired,\n  text: PropTypes.string.isRequired,\n  toggleState: PropTypes.bool,\n  title: PropTypes.string\n};\n\nFooterToggleButton.contextTypes = {\n  projectActions: PropTypes.object.isRequired,\n  viewer2DActions: PropTypes.object.isRequired,\n  linesActions: PropTypes.object.isRequired,\n  holesActions: PropTypes.object.isRequired,\n  itemsActions: PropTypes.object.isRequired,\n  translator: PropTypes.object.isRequired,\n};\n","import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport * as SharedStyle from '../../shared-style';\nimport {FaTimes as IconClose} from 'react-icons/fa';\n\nconst labelContainerStyle = {\n  width: 'auto',\n  display: 'inline-block',\n  margin:0,\n  padding:'0px 5px 0px 0px'\n};\n\nconst toggleButtonStyle = {\n  color: '#CCC',\n  textAlign: 'center',\n  cursor: 'pointer',\n  userSelect: 'none'\n};\n\nconst toggleButtonStyleOver = {\n  ...toggleButtonStyle,\n  color: SharedStyle.COLORS.white\n};\n\nconst contentContainerStyleActive = {\n  position:'fixed',\n  width:'calc( 100% - 2px )',\n  height:'40%',\n  left:0,\n  bottom:20,\n  backgroundColor:SharedStyle.PRIMARY_COLOR.alt,\n  borderTop: SharedStyle.PRIMARY_COLOR.border,\n  zIndex:0,\n  padding:0,\n  margin:0,\n  transition:'all 300ms ease'\n};\n\nconst contentContainerStyleInactive = {\n  ...contentContainerStyleActive,\n  visibility:'hidden',\n  height:0\n};\n\nconst contentHeaderStyle = {\n  position:'relative',\n  width:'100%',\n  height:'2em',\n  top:0,\n  left:0,\n  borderBottom:SharedStyle.PRIMARY_COLOR.border\n};\n\nconst titleStyle = {\n  position:'relative',\n  height:'2em',\n  lineHeight:'2em',\n  marginLeft:'1em'\n};\n\nconst contentAreaStyle = {\n  position:'relative',\n  width:'100%',\n  height:'calc( 100% - 2em )',\n  padding:'1em',\n  overflowY:'auto'\n};\n\nconst iconCloseStyleOut = {\n  position:'absolute',\n  width:'2em',\n  height:'2em',\n  right:0,\n  top:0,\n  padding:'0.5em',\n  borderLeft:SharedStyle.PRIMARY_COLOR.border,\n  cursor:'pointer'\n};\n\nconst iconCloseStyleOver = {\n  ...iconCloseStyleOut,\n  color:SharedStyle.COLORS.white,\n  backgroundColor:SharedStyle.SECONDARY_COLOR.alt\n};\n\nconst iconStyle = {\n  width:'15px',\n  height:'15px',\n  marginTop:'-2px',\n  marginRight:'2px'\n};\n\nconst textStyle = {\n  position: 'relative'\n}\n\nexport default class FooterContentButton extends Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      over: false,\n      closeOver: false,\n      active: this.props.toggleState || false\n    };\n  }\n\n  toggleOver(e) { this.setState({ over: true }); }\n  toggleOut(e) { this.setState({ over: false }); }\n\n  toggle(e) {\n    let isActive = !this.state.active;\n    this.setState({ active: isActive });\n  }\n\n  shouldComponentUpdate(nextProps, nextState) {\n    if( this.state.over != nextState.over ) return true;\n    if( this.state.closeOver != nextState.closeOver ) return true;\n    if( this.state.active != nextState.active ) return true;\n\n    if( this.props.content.length != nextProps.content.length ) return true;\n    if( this.props.toggleState != nextProps.toggleState ) return true;\n\n    return false;\n  }\n\n  componentWillReceiveProps(nextProps) {\n    if( nextProps.toggleState != this.props.toggleState  )\n      this.state.active = nextProps.toggleState;\n  }\n\n  render() {\n\n    let s = this.state;\n    let p = this.props;\n\n    let LabelIcon = p.icon || null;\n    let labelIconStyle = p.iconStyle || {};\n    let labelTextStyle = p.textStyle || {};\n    let inputTitleStyle = p.titleStyle || {};\n\n    return (\n      <div style={labelContainerStyle}>\n        <div\n          style={s.over || s.active ? toggleButtonStyleOver : toggleButtonStyle}\n          onClick={e => this.toggle(e)}\n          title={p.title}\n        >\n          <LabelIcon style={{...labelIconStyle, ...iconStyle}}/>\n          <span style={{...textStyle, ...labelTextStyle}}>{p.text}</span>\n        </div>\n        <div style={s.active ? contentContainerStyleActive : contentContainerStyleInactive}>\n          <div style={contentHeaderStyle}>\n            <b style={{...titleStyle, ...inputTitleStyle}}>{p.title}</b>\n            <IconClose\n              style={ s.closeOver ? iconCloseStyleOver : iconCloseStyleOut}\n              onMouseOver={e => this.setState({closeOver:true})}\n              onMouseOut={e => this.setState({closeOver:false})}\n              onClick={e => this.toggle(e)}\n            />\n          </div>\n          <div style={contentAreaStyle}>\n            {p.content}\n          </div>\n        </div>\n      </div>\n    );\n  }\n}\n\nFooterContentButton.propTypes = {\n  state: PropTypes.object.isRequired,\n  text: PropTypes.string.isRequired,\n  textStyle: PropTypes.object,\n  icon: PropTypes.func,\n  iconStyle: PropTypes.object,\n  content: PropTypes.array.isRequired,\n  toggleState: PropTypes.bool,\n  title: PropTypes.string,\n  titleStyle: PropTypes.object\n};\n\nFooterContentButton.contextTypes = {\n  projectActions: PropTypes.object.isRequired,\n  viewer2DActions: PropTypes.object.isRequired,\n  linesActions: PropTypes.object.isRequired,\n  holesActions: PropTypes.object.isRequired,\n  itemsActions: PropTypes.object.isRequired,\n  translator: PropTypes.object.isRequired,\n};\n","// THIS IS AN AUTOGENERATED FILE. DO NOT EDIT THIS FILE DIRECTLY.\nexport const VERSION = '2.0.5';","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport ContainerDimensions from 'react-container-dimensions';\nimport Immutable, {Map} from 'immutable';\nimport immutableDevtools from 'immutable-devtools';\nimport {createStore} from 'redux';\nimport {Provider} from 'react-redux';\n\nimport MyCatalog from './catalog/mycatalog';\n\nimport ToolbarScreenshotButton from './ui/toolbar-screenshot-button';\n\nimport {\n  Models as PlannerModels,\n  reducer as PlannerReducer,\n  ReactPlanner,\n  Plugins as PlannerPlugins,\n} from 'react-planner'; //react-planner\n\n//define state\nlet AppState = Map({\n  'react-planner': new PlannerModels.State()\n});\n\n//define reducer\nlet reducer = (state, action) => {\n  state = state || AppState;\n  state = state.update('react-planner', plannerState => PlannerReducer(plannerState, action));\n  return state;\n};\n\nlet blackList = isProduction === true ? [] : [\n  'UPDATE_MOUSE_COORDS',\n  'UPDATE_ZOOM_SCALE',\n  'UPDATE_2D_CAMERA'\n];\n\nif( !isProduction ) {\n  console.info('Environment is in development and these actions will be blacklisted', blackList);\n  console.info('Enable Chrome custom formatter for Immutable pretty print');\n  immutableDevtools( Immutable );\n}\n\n//init store\nlet store = createStore(\n  reducer,\n  null,\n  !isProduction && window.devToolsExtension ?\n    window.devToolsExtension({\n      features: {\n        pause   : true,     // start/pause recording of dispatched actions\n        lock    : true,     // lock/unlock dispatching actions and side effects\n        persist : true,     // persist states on page reloading\n        export  : true,     // export history of actions in a file\n        import  : 'custom', // import history of actions from a file\n        jump    : true,     // jump back and forth (time travelling)\n        skip    : true,     // skip (cancel) actions\n        reorder : true,     // drag and drop actions in the history list\n        dispatch: true,     // dispatch custom actions or action creators\n        test    : true      // generate tests for the selected actions\n      },\n      actionsBlacklist: blackList,\n      maxAge: 999999\n    }) :\n    f => f\n);\n\nlet plugins = [\n  PlannerPlugins.Keyboard(),\n  PlannerPlugins.Autosave('react-planner_v0'),\n  PlannerPlugins.ConsoleDebugger(),\n];\n\nlet toolbarButtons = [\n  ToolbarScreenshotButton,\n];\n\n//render\nReactDOM.render(\n  (\n    <Provider store={store}>\n      <ContainerDimensions>\n        {({width, height}) =>\n          <ReactPlanner\n            catalog={MyCatalog}\n            width={width}\n            height={height}\n            plugins={plugins}\n            toolbarButtons={toolbarButtons}\n            stateExtractor={state => state.get('react-planner')}\n          />\n        }\n      </ContainerDimensions>\n    </Provider>\n  ),\n  document.getElementById('app')\n);\n\n","import {Catalog} from 'react-planner';\n\nlet catalog = new Catalog();\n\nimport * as Areas from './areas/**/planner-element.jsx';\nimport * as Lines from './lines/**/planner-element.jsx';\nimport * as Holes from './holes/**/planner-element.jsx';\nimport * as Items from './items/**/planner-element.jsx';\n\nfor( let x in Areas ) catalog.registerElement( Areas[x] );\nfor( let x in Lines ) catalog.registerElement( Lines[x] );\nfor( let x in Holes ) catalog.registerElement( Holes[x] );\nfor( let x in Items ) catalog.registerElement( Items[x] );\n\ncatalog.registerCategory('windows', 'Windows', [Holes.window, Holes.sashWindow, Holes.venetianBlindWindow, Holes.windowCurtain] );\ncatalog.registerCategory('doors', 'Doors', [Holes.door, Holes.doorDouble, Holes.panicDoor, Holes.panicDoorDouble, Holes.slidingDoor] );\n\nexport default catalog;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { FormLabel, FormColorInput } from '../../components/style/export';\nimport PropertyStyle from './shared-property-style';\n\nexport default function PropertyColor({value, onUpdate, configs, sourceElement, internalState, state}) {\n\n  let update = (val) => {\n\n    if (configs.hook) {\n      return configs.hook(val, sourceElement, internalState, state).then(_val => {\n        return onUpdate(_val);\n      });\n    }\n\n    return onUpdate(val);\n  };\n\n  return (\n    <table className=\"PropertyColor\" style={PropertyStyle.tableStyle}>\n      <tbody>\n      <tr>\n        <td style={PropertyStyle.firstTdStyle}>\n          <FormLabel>{configs.label}</FormLabel>\n        </td>\n        <td>\n          <FormColorInput value={value} onChange={event => update(event.target.value)}/>\n        </td>\n      </tr>\n      </tbody>\n    </table>\n  );\n}\n\nPropertyColor.propTypes = {\n  value: PropTypes.any.isRequired,\n  onUpdate: PropTypes.func.isRequired,\n  configs: PropTypes.object.isRequired,\n  sourceElement: PropTypes.object,\n  internalState: PropTypes.object,\n  state: PropTypes.object.isRequired\n};\n","import React from 'react';\nimport Button from './button';\n\nconst STYLE = {\n  borderColor: \"#adadad\",\n  backgroundColor: \"#e6e6e6\"\n};\n\nconst STYLE_HOVER = {\n  backgroundColor: \"#d4d4d4\",\n  borderColor: \"#8c8c8c\"\n};\n\nexport default function CancelButton({children, ...rest}) {\n  return <Button style={STYLE} styleHover={STYLE_HOVER} {...rest}>{children}</Button>\n}\n","import React from 'react';\nimport Button from './button';\nimport * as SharedStyle from '../../shared-style';\n\nconst STYLE = {\n  borderColor: \"#c12e2a\",\n  backgroundColor: \"#c9302c\",\n  color: SharedStyle.COLORS.white\n};\n\nconst STYLE_HOVER = {\n  backgroundColor: \"#972726\",\n  borderColor: \"#c12e2a\",\n  color: SharedStyle.COLORS.white\n};\n\nexport default function FormDeleteButton({children, ...rest}) {\n  return <Button style={STYLE} styleHover={STYLE_HOVER} {...rest}>{children}</Button>\n}\n","import React from 'react';\n\nconst BASE_STYLE = {\n  marginBottom: \"16px\"\n};\n\nexport default function FormBlock({children, style, ...rest}) {\n  return <div style={{...BASE_STYLE, style}} {...rest}>{children}</div>\n}\n","import React from 'react';\nimport FormTextInput from './form-text-input';\n\n\nconst STYLE = {\n  padding: 0,\n  border: 0,\n};\nconst EREG_NUMBER = /^.*$/;\n\nexport default function FormColorInput({onChange, ...rest}) {\n  let onChangeCustom = event => {\n    let value = event.target.value;\n    if (EREG_NUMBER.test(value)) {\n      onChange(event);\n    }\n  };\n\n  return <FormTextInput type=\"color\" style={STYLE} onChange={onChangeCustom} autoComplete=\"off\" {...rest}/>;\n}\n","import React from 'react';\n\nconst BASE_STYLE = {\n  display: \"block\",\n  marginBottom: \"5px\"\n};\n\nexport default function FormLabel({children, style, ...rest}) {\n  return <label style={{...BASE_STYLE, style}} {...rest}>{children}</label>\n}\n","import React from 'react';\nimport * as SharedStyle from '../../shared-style';\n\nconst BASE_STYLE = {\n  display: \"block\",\n  width: \"100%\",\n  padding: \"0px 4px\",\n  fontSize: \"13px\",\n  color: SharedStyle.PRIMARY_COLOR.input,\n  backgroundColor: SharedStyle.COLORS.white,\n  backgroundImage: \"none\",\n  border: \"1px solid rgba(0,0,0,.15)\",\n  outline: \"none\",\n  borderRadius: \"0px\",\n  height: \"30px\",\n  WebkitAppearance: \"none\",\n  WebkitBorderRadius: \"0px\",\n  background: `url(\"data:image/svg+xml;utf8,<svg version='1.1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' width='24' height='24' viewBox='0 0 24 24'><path fill='#444' d='M7.406 7.828l4.594 4.594 4.594-4.594 1.406 1.406-6 6-6-6z'></path></svg>\") #fff`,\n  backgroundPosition: \"100% 50%\",\n  backgroundRepeat: \"no-repeat\",\n};\n\nexport default function FormSelect({children, style, ...rest}) {\n  return <select type=\"text\" style={{...BASE_STYLE, ...style}} {...rest}>{children}</select>;\n}\n","import React from 'react';\nimport ReactRange from '@mapbox/react-range';\nimport FormTextInput from './form-text-input';\n\nconst sliderContainerStyle = {display: 'inline-block', width: '80%', marginRight: '5%'};\nconst sliderStyle = { display: 'block', width: '100%', height: '30px' };\nconst textContainerStyle = {display: 'inline-block', width: '15%', float: 'right'};\nconst textStyle = {height:'34px', textAlign:'center'};\n\nexport default function FormNumberInput({value, onChange, ...rest}) {\n  return (\n    <div>\n      <div style={sliderContainerStyle}>\n        <ReactRange type='range' style={sliderStyle} onChange={onChange} value={value} {...rest}/>\n      </div>\n\n      <div style={textContainerStyle}>\n        <FormTextInput value={value} onChange={onChange} style={textStyle}/>\n      </div>\n    </div>\n  )\n}\n","import React from 'react';\nimport Button from './button';\nimport * as SharedStyle from '../../shared-style';\n\nconst STYLE = {\n  borderColor: \"#415375\",\n  backgroundColor: \"#415375\",\n  color: SharedStyle.COLORS.white\n};\n\nconst STYLE_HOVER = {\n  borderColor: \"#1f3149\",\n  backgroundColor: \"#1f3149\",\n  color: SharedStyle.COLORS.white\n};\n\nexport default function FormSubmitButton({children, ...rest}) {\n  return <Button type=\"submit\" style={STYLE} styleHover={STYLE_HOVER} {...rest}>{children}</Button>\n}\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport {Seq} from 'immutable';\nimport { FormLabel, FormSelect } from '../../components/style/export';\nimport PropertyStyle from './shared-property-style';\n\nexport default function PropertyEnum({value, onUpdate, configs, sourceElement, internalState, state}) {\n\n  let update = (val) => {\n\n    if (configs.hook) {\n      return configs.hook(val, sourceElement, internalState, state).then(_val => {\n        return onUpdate(_val);\n      });\n    }\n\n    return onUpdate(val);\n  };\n\n  return (\n    <table className=\"PropertyEnum\" style={PropertyStyle.tableStyle}>\n      <tbody>\n      <tr>\n        <td style={PropertyStyle.firstTdStyle}><FormLabel>{configs.label}</FormLabel></td>\n        <td>\n          <FormSelect value={value} onChange={event => update(event.target.value)}>\n            {Seq(configs.values)\n              .entrySeq()\n              .map(([key, value]) => <option key={key} value={key}>{value}</option>)}\n          </FormSelect>\n        </td>\n      </tr>\n      </tbody>\n    </table>\n  );\n}\n\nPropertyEnum.propTypes = {\n  value: PropTypes.any.isRequired,\n  onUpdate: PropTypes.func.isRequired,\n  configs: PropTypes.object.isRequired,\n  sourceElement: PropTypes.object,\n  internalState: PropTypes.object,\n  state: PropTypes.object.isRequired\n};\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { FormLabel, FormNumberInput } from '../../components/style/export';\nimport PropertyStyle from './shared-property-style';\n\nexport default function PropertyNumber({value, onUpdate, onValid, configs, sourceElement, internalState, state}) {\n\n  let update = (val) => {\n    let number = parseFloat(val);\n\n    if (isNaN(number)) {\n      number = 0;\n    }\n\n    if (configs.hook) {\n      return configs.hook(number, sourceElement, internalState, state).then(_val => {\n        return onUpdate(_val);\n      });\n    }\n\n    return onUpdate(number);\n  };\n\n  return (\n    <table className=\"PropertyNumber\" style={PropertyStyle.tableStyle}>\n      <tbody>\n      <tr>\n        <td style={PropertyStyle.firstTdStyle}><FormLabel>{configs.label}</FormLabel></td>\n        <td>\n          <FormNumberInput\n            value={value}\n            onChange={event => update(event.target.value)}\n            onValid={onValid}\n            min={configs.min}\n            max={configs.max}/>\n        </td>\n      </tr>\n      </tbody>\n    </table>\n  );\n\n}\n\nPropertyNumber.propTypes = {\n  value: PropTypes.any.isRequired,\n  onUpdate: PropTypes.func.isRequired,\n  onValid: PropTypes.func,\n  configs: PropTypes.object.isRequired,\n  sourceElement: PropTypes.object,\n  internalState: PropTypes.object,\n  state: PropTypes.object.isRequired\n};\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { FormLabel, Button } from '../../components/style/export';\nimport PropertyStyle from './shared-property-style';\n\n\nexport default function PropertyToggle({value, onUpdate, configs, sourceElement, internalState, state}) {\n\n  let update = (val) => {\n\n    if (configs.hook) {\n      return configs.hook(val, sourceElement, internalState, state).then(_val => {\n        return onUpdate(_val);\n      });\n    }\n\n    return onUpdate(val);\n  };\n\n  return (\n    <table className=\"PropertyToggle\" style={PropertyStyle.tableStyle}>\n      <tbody>\n      <tr>\n        <td style={PropertyStyle.firstTdStyle}><FormLabel>{configs.label}</FormLabel></td>\n        <td>\n          <Button onClick={e => update(!value)} size=\"small\">{configs.actionName}</Button>\n        </td>\n      </tr>\n      </tbody>\n    </table>\n  );\n}\n\nPropertyToggle.propTypes = {\n  value: PropTypes.any.isRequired,\n  onUpdate: PropTypes.func.isRequired,\n  configs: PropTypes.object.isRequired,\n  sourceElement: PropTypes.object,\n  internalState: PropTypes.object,\n  state: PropTypes.object.isRequired\n};\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { FormLabel } from '../../components/style/export';\nimport PropertyStyle from './shared-property-style';\n\nconst checkboxStyle = {margin: 0};\n\nexport default function PropertyCheckbox({value, onUpdate, configs, sourceElement, internalState, state}) {\n\n  let update = (val) => {\n\n    if (configs.hook) {\n      return configs.hook(val, sourceElement, internalState, state).then(_val => {\n        return onUpdate(_val);\n      });\n    }\n\n    return onUpdate(val);\n  };\n\n  return (\n    <table className=\"PropertyCheckbox\" style={PropertyStyle.tableStyle}>\n      <tbody>\n      <tr>\n        <td style={PropertyStyle.firstTdStyle}><FormLabel>{configs.label}</FormLabel></td>\n        <td>\n          <input style={checkboxStyle} type=\"checkbox\" checked={value} onChange={e => update(!value)}/>\n        </td>\n      </tr>\n      </tbody>\n    </table>\n  );\n}\n\nPropertyCheckbox.propTypes = {\n  value: PropTypes.any.isRequired,\n  onUpdate: PropTypes.func.isRequired,\n  configs: PropTypes.object.isRequired,\n  sourceElement: PropTypes.object,\n  internalState: PropTypes.object,\n  state: PropTypes.object.isRequired\n};\n","import React from 'react';\nimport PropTypes from 'prop-types';\n\nexport default function PropertyHidden({value, onUpdate, configs, sourceElement, internalState, state}) {\n  return null\n}\n\nPropertyHidden.propTypes = {\n  value: PropTypes.any.isRequired,\n  onUpdate: PropTypes.func.isRequired,\n  configs: PropTypes.object.isRequired,\n  sourceElement: PropTypes.object,\n  internalState: PropTypes.object,\n  state: PropTypes.object.isRequired\n};\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { FormLabel } from '../../components/style/export';\nimport PropertyStyle from './shared-property-style';\n\nexport default function PropertyReadOnly({value, onUpdate, configs, sourceElement, internalState, state}) {\n  return (\n    <table className=\"PropertyReadOnly\" style={PropertyStyle.tableStyle}>\n      <tbody>\n      <tr>\n        <td style={PropertyStyle.firstTdStyle}><FormLabel>{configs.label}</FormLabel></td>\n        <td>\n          <div>{value}</div>\n        </td>\n      </tr>\n      </tbody>\n    </table>\n  );\n}\n\nPropertyReadOnly.propTypes = {\n  value: PropTypes.any.isRequired,\n  onUpdate: PropTypes.func.isRequired,\n  configs: PropTypes.object.isRequired,\n  sourceElement: PropTypes.object,\n  internalState: PropTypes.object,\n  state: PropTypes.object.isRequired\n};\n","export default {\n  \"+ Add Horizontal Giude\":\"+ Add Horizontal Giude\",\n  \"+ Add Vertical Giude\":\"+ Add Vertical Giude\",\n  \"2D View\": \"2D View\",\n  \"3D First Person\": \"3D First Person\",\n  \"3D View\": \"3D View\",\n  \"altitude\": \"altitude\",\n  \"Altitude\": \"Altitude\",\n  \"Areas\":\"Areas\",\n  \"Cancel\": \"Cancel\",\n  \"Catalog\" : \"Catalog\",\n  \"Chain selected Elements to Group\":\"Chain selected Elements to Group\",\n  \"Circular\":\"Circular\",\n  \"color\":\"color\",\n  \"Configure layer\": \"Configure layer\",\n  \"Configure project\": \"Configure project\",\n  \"Confirm\": \"Confirm\",\n  \"Copy\":\"Copy\",\n  \"Delete group and all Elements\":\"Delete group and all Elements\",\n  \"Delete layer\": \"Delete layer\",\n  \"Delete\": \"Delete\",\n  \"Elements on layer {0}\": \"Elements on layer {0}\",\n  \"Elements\":\"Elements\",\n  \"Get Screenshot\" : \"Get Screenshot\",\n  \"Group [{0}]\":\"Group [{0}]\",\n  \"Group's Barycenter\":\"Group's Barycenter\",\n  \"Group's Elements\":\"Group's Elements\",\n  \"Groups\":\"Groups\",\n  \"Guides\":\"Guides\",\n  \"height\": \"height\",\n  \"Holes\":\"Holes\",\n  \"Horizontal\":\"Horizontal\",\n  \"Items\":\"Items\",\n  \"Last Selected\":\"Last Selected\",\n  \"Layer config\": \"Layer config\",\n  \"Layer\":\"Layer\",\n  \"Layers\": \"Layers\",\n  \"Length\":\"Length\",\n  \"Lines\":\"Lines\",\n  \"Load project\": \"Load project\",\n  \"Mouse X Coordinate\":\"Mouse X Coordinate\",\n  \"Mouse Y Coordinate\":\"Mouse Y Coordinate\",\n  \"Name\": \"Name\",\n  \"New Empty Group\":\"New Empty Group\",\n  \"New Group from selected\":\"New Group from selected\",\n  \"New layer\": \"New layer\",\n  \"New project\": \"New project\",\n  \"opacity\": \"opacity\",\n  \"Open catalog\": \"Open catalog\",\n  \"order\": \"order\",\n  \"Pan\": \"Pan\",\n  \"Paste\":\"Paste\",\n  \"Project config\": \"Project config\",\n  \"Properties: [{0}] {1}\": \"Properties: [{0}] {1}\",\n  \"Prototype\":\"Prototype\",\n  \"Reset\": \"Reset\",\n  \"Rotation\" : \"Rotation\",\n  \"Save project\": \"Save project\",\n  \"Save\": \"Save\",\n  \"Scene Zoom Level\":\"Scene Zoom Level\",\n  \"Search Element\":\"Search Element\",\n  \"Snap to Grid\":\"Snap to Grid\",\n  \"Snap to Guide\":\"Snap to Guide\",\n  \"Snap to Line\":\"Snap to Line\",\n  \"Snap to Point\":\"Snap to Point\",\n  \"Snap to Segment\":\"Snap to Segment\",\n  \"texture\":\"texture\",\n  \"thickness\":\"thickness\",\n  \"Toggle Group Visibility\":\"Toggle Group Visibility\",\n  \"Un-chain all Group\\'s Elements and remove Group\":\"Un-chain all Group\\'s Elements and remove Group\",\n  \"Un-chain Element from Group\":\"Un-chain Element from Group\",\n  \"Undo (CTRL-Z)\": \"Undo (CTRL-Z)\",\n  \"Unselect\": \"Unselect\",\n  \"Vertical\":\"Vertical\",\n  \"width\": \"width\",\n  \"Would you want to start a new Project?\": \"Would you want to start a new Project?\",\n  \"Zoom in\": \"Zoom in\",\n  \"Zoom out\": \"Zoom out\"\n};\n","export default {\n  \"+ Add Horizontal Giude\":\"+ Aggiungi Guida Orizzontale\",\n  \"+ Add Vertical Giude\":\"+ Aggiungi Guida Verticale\",\n  \"2D View\": \"Vista 2D\",\n  \"3D First Person\": \"3D Prima persona\",\n  \"3D View\": \"Vista 3D\",\n  \"Altitude\": \"Quota\",\n  \"altitude\": \"Quota\",\n  \"Areas\":\"Aree\",\n  \"Cancel\": \"Annulla\",\n  \"Catalog\" : \"Catalogo\",\n  \"Chain selected Elements to Group\":\"Collega l'Elemento selzionato al Gruppo\",\n  \"Circular\":\"Circolare\",\n  \"color\":\"colore\",\n  \"Configure layer\": \"Configura livello\",\n  \"Configure project\": \"Configura progetto\",\n  \"Confirm\": \"Conferma\",\n  \"Copy\":\"Copia\",\n  \"Delete group and all Elements\":\"Elimina Gruppo e tutti i suoi Elementi\",\n  \"Delete layer\": \"Elimina livello\",\n  \"Delete\": \"Elimina\",\n  \"Elements on layer {0}\": \"Elementi nel livello {0}\",\n  \"Elements\":\"Elementi\",\n  \"Get Screenshot\" : \"Cattura uno screenshot\",\n  \"Group [{0}]\":\"Gruppo [{0}]\",\n  \"Group's Barycenter\":\"Baricentro del Gruppo\",\n  \"Group's Elements\":\"Elementi del Gruppo\",\n  \"Groups\":\"Gruppi\",\n  \"Guides\":\"Guide\",\n  \"height\": \"Altezza\",\n  \"Holes\":\"Buchi\",\n  \"Horizontal\":\"Orizzontale\",\n  \"Items\":\"Oggetti\",\n  \"Last Selected\":\"Ultimi Selezionati\",\n  \"Layer config\": \"Configurazione livello\",\n  \"Layer\":\"Livello\",\n  \"Layers\": \"Livelli\",\n  \"Length\":\"Lunghezza\",\n  \"Lines\":\"Linee\",\n  \"Load project\": \"Carica progetto\",\n  \"Mouse X Coordinate\":\"Coordinata X del Mouse\",\n  \"Mouse Y Coordinate\":\"Coordinata Y del Mouse\",\n  \"Name\" : \"Nome\",\n  \"New Empty Group\":\"Crea Gruppo Vuoto\",\n  \"New Group from selected\":\"Crea Gruppo dai selezionati\",\n  \"New layer\": \"Nuovo livello\",\n  \"New project\": \"Nuovo progetto\",\n  \"opacity\": \"Opacità\",\n  \"Open catalog\": \"Apri catalogo\",\n  \"order\":\"Ordine\",\n  \"Pan\": \"Muovi\",\n  \"Paste\":\"Incolla\",\n  \"Project config\": \"Configurazione progetto\",\n  \"Properties: [{0}] {1}\": \"Proprietà: [{0}] {1}\",\n  \"Prototype\":\"Prototipo\",\n  \"Reset\": \"Annulla\",\n  \"Rotation\" : \"Rotazione\",\n  \"Save project\": \"Salva progetto\",\n  \"Save\" : \"Salva\",\n  \"Scene Zoom Level\":\"Livello di Zoom della Scena\",\n  \"Search Element\":\"Cerca Elemento\",\n  \"Snap to Grid\":\"Snap alla Griglia\",\n  \"Snap to Guide\":\"Snap alla Guida\",\n  \"Snap to Line\":\"Snap alla Linea\",\n  \"Snap to Point\":\"Snap al Punto\",\n  \"Snap to Segment\":\"Snap al Segmento\",\n  \"texture\":\"texture\",\n  \"thickness\":\"spessore\",\n  \"Toggle Group Visibility\":\"Varia la visibilità del Gruppo\",\n  \"Un-chain all Group\\'s Elements and remove Group\":\"Elimina il Gruppo e scollega tutti gli Elementi appartenenti\",\n  \"Un-chain Element from Group\":\"Scollega l'Elemento dal Gruppo\",\n  \"Undo (CTRL-Z)\": \"Annulla (CTRL-Z)\",\n  \"Unselect\": \"Deseleziona\",\n  \"Vertical\":\"Verticale\",\n  \"width\": \"Larghezza\",\n  \"Would you want to start a new Project?\": \"Vuoi iniziare un nuovo progetto?\",\n  \"Zoom in\": \"Ingrandisci\",\n  \"Zoom out\": \"Riduci\"\n};\n","export default {\n  \"+ Add Horizontal Giude\":\"+ Добавить горизонтальное руководство\",\n  \"+ Add Vertical Giude\":\"+ Добавить вертикальное руководство\",\n  \"2D View\": \"Плоский вид\",\n  \"3D First Person\": \"3D от первого лица\",\n  \"3D View\": \"Объёмный вид\",\n  \"altitude\": \"высота\",\n  \"Altitude\": \"Высота\",\n  \"Areas\": \"Поверхности\",\n  \"Cancel\": \"Отмена\",\n  \"Catalog\": \"Каталог\",\n  \"Chain selected Elements to Group\":\"Цепочка выбранных элементов в группу\",\n  \"Circular\":\"круговой\",\n  \"color\":\"цвет\",\n  \"Configure layer\": \"Настроить слой\",\n  \"Configure project\": \"Настроить проект\",\n  \"Confirm\": \"подтвердить\",\n  \"Copy\": \"Копировать\",\n  \"Delete group and all Elements\":\"Удалить группу и все элементы\",\n  \"Delete layer\": \"Удалить слой\",\n  \"Delete\": \"Удалить\",\n  \"Elements on layer {0}\": \"Элементов на слое {0}\",\n  \"Elements\":\"элементы\",\n  \"Get Screenshot\": \"Сделать снимок экрана\",\n  \"Group [{0}]\":\"группа [{0}]\",\n  \"Group's Barycenter\":\"Барицентр группы\",\n  \"Group's Elements\":\"Элементы группы\",\n  \"Groups\":\"группы\",\n  \"Guides\":\"руководства\",\n  \"height\": \"высота\",\n  \"Holes\": \"Проёмы\",\n  \"Horizontal\":\"горизонтальный\",\n  \"Items\": \"Предметы\",\n  \"Last Selected\": \"Последний выбраный\",\n  \"Layer config\": \"Настройка слоя\",\n  \"Layer\":\"Слой\",\n  \"Layers\": \"Слои\",\n  \"Length\": \"Длинна\",\n  \"Lines\": \"Линии\",\n  \"Load project\": \"Загрузить проект\",\n  \"Mouse X Coordinate\": \"X-координата курсора\",\n  \"Mouse Y Coordinate\": \"Y-координата курсора\",\n  \"Name\": \"Название\",\n  \"New Empty Group\":\"Новая пустая группа\",\n  \"New Group from selected\":\"Новая группа из выбранных\",\n  \"New layer\": \"Новый слой\",\n  \"New project\": \"Новый проект\",\n  \"opacity\": \"непрозрачность\",\n  \"Open catalog\": \"Открыть каталог\",\n  \"order\": \"порядок\",\n  \"Pan\": \"Двигать\",\n  \"Paste\": \"Вставить\",\n  \"Project config\": \"Настройка проекта\",\n  \"Properties: [{0}] {1}\": \"Свойства: [{0}] {1}\",\n  \"Prototype\":\"Опытный образец\",\n  \"Reset\": \"Сброс\",\n  \"Rotation\": \"Вращение\",\n  \"Save project\": \"Сохранить проект\",\n  \"Save\": \"Сохранить\",\n  \"Scene Zoom Level\": \"Уровень приближениия сцены\",\n  \"Search Element\": \"Поиск\",\n  \"Snap to Grid\": \"Привязка к сетке\",\n  \"Snap to Guide\": \"Привязать к руководству\",\n  \"Snap to Line\": \"Привязка к линии\",\n  \"Snap to Point\": \"Привязка к точке\",\n  \"Snap to Segment\": \"Привязка к сегменту\",\n  \"texture\":\"текстура\",\n  \"thickness\":\"толщина\",\n  \"Toggle Group Visibility\":\"Переключить видимость группы\",\n  \"Un-chain all Group\\'s Elements and remove Group\":\"Удалить цепочку элементов группы и удалить группу\",\n  \"Un-chain Element from Group\":\"Unchain Element из группы\",\n  \"Undo (CTRL-Z)\": \"Отменить действие (CTRL-Z)\",\n  \"Unselect\": \"Снять выделене\",\n  \"Vertical\":\"вертикальный\",\n  \"width\": \"ширина\",\n  \"Would you want to start a new Project?\": \"Начать новый проект?\",\n  \"Zoom in\": \"Приблизить\",\n  \"Zoom out\": \"Отдалить\"\n};\n","import {\n  PROJECT_ACTIONS,\n  VIEWER2D_ACTIONS,\n  //VIEWER3D_ACTIONS,\n  GROUP_ACTIONS,\n  ITEMS_ACTIONS,\n  HOLE_ACTIONS,\n  LINE_ACTIONS,\n  AREA_ACTIONS,\n  SCENE_ACTIONS,\n  VERTEX_ACTIONS\n} from '../constants';\n\nimport {\n  ReactPlannerAreasReducer,\n  ReactPlannerHolesReducer,\n  ReactPlannerItemsReducer,\n  ReactPlannerLinesReducer,\n  ReactPlannerGroupsReducer,\n  ReactPlannerProjectReducer,\n  ReactPlannerSceneReducer,\n  ReactPlannerVerticesReducer,\n  ReactPlannerViewer2dReducer,\n  // ReactPlannerViewer3dReducer\n} from './export';\n\nimport {State} from '../models';\n\nexport const initialState = new State();\n\nexport default function appReducer(state, action) {\n  if( PROJECT_ACTIONS[action.type] ) return ReactPlannerProjectReducer(...arguments);\n  if( VIEWER2D_ACTIONS[action.type] ) return ReactPlannerViewer2dReducer(...arguments);\n  // if( VIEWER3D_ACTIONS[action.type] ) return ReactPlannerViewer3dReducer(...arguments);\n  if( ITEMS_ACTIONS[action.type] ) return ReactPlannerItemsReducer(...arguments);\n  if( HOLE_ACTIONS[action.type] ) return ReactPlannerHolesReducer(...arguments);\n  if( LINE_ACTIONS[action.type] ) return ReactPlannerLinesReducer(...arguments);\n  if( AREA_ACTIONS[action.type] ) return ReactPlannerAreasReducer(...arguments);\n  if( GROUP_ACTIONS[action.type] ) return ReactPlannerGroupsReducer(...arguments);\n  if( SCENE_ACTIONS[action.type] ) return ReactPlannerSceneReducer(...arguments);\n  if( VERTEX_ACTIONS[action.type] ) return ReactPlannerVerticesReducer(...arguments);\n\n  return state || initialState;\n};\n","import { Area } from '../class/export';\nimport { SELECT_AREA } from '../constants';\n\nexport default function (state, action) {\n  switch (action.type) {\n    case SELECT_AREA:\n      return Area.select(state, action.layerID, action.areaID).updatedState;\n    default:\n      return state;\n  }\n}\n","import { Map, List } from 'immutable';\nimport {\n  MODE_VIEWING_CATALOG,\n  MODE_CONFIGURING_PROJECT,\n  MODE_IDLE\n} from '../constants';\nimport { State, Catalog } from '../models';\nimport { history } from '../utils/export';\nimport {\n  Layer,\n  Group,\n  Line,\n  Hole,\n  Item,\n  HorizontalGuide,\n  VerticalGuide\n} from '../class/export';\n\nclass Project{\n\n  static setAlterate( state ){\n    return { updatedState: state.set('alterate', !state.alterate ) };\n  }\n\n  static openCatalog( state ) {\n    state = this.setMode( state, MODE_VIEWING_CATALOG ).updatedState;\n\n    return { updatedState: state };\n  }\n\n  static newProject(state) {\n    state = new State({'viewer2D': state.get('viewer2D')});\n\n    return { updatedState: state };\n  }\n\n  static loadProject(state, sceneJSON) {\n    state = new State({ scene: sceneJSON, catalog: state.catalog.toJS() });\n\n    return { updatedState: state };\n  }\n\n  static setProperties(state, layerID, properties) {\n    state = Layer.setPropertiesOnSelected( state, layerID, properties ).updatedState;\n\n    return { updatedState: state };\n  }\n\n  static updateProperties(state, layerID, properties) {\n    state = Layer.updatePropertiesOnSelected( state, layerID, properties ).updatedState;\n\n    return { updatedState: state };\n  }\n\n  static setItemsAttributes(state, attributes) {\n    //TODO apply only to items\n    state.getIn(['scene', 'layers']).forEach( layer => { state = Layer.setAttributesOnSelected( state, layer.id, attributes ).updatedState; } );\n\n    return { updatedState: state };\n  }\n\n  static setLinesAttributes(state, attributes) {\n    //TODO apply only to lines\n    state.getIn(['scene', 'layers']).forEach( layer => { state = Layer.setAttributesOnSelected( state, layer.id, attributes ).updatedState; } );\n\n    return { updatedState: state };\n  }\n\n  static setHolesAttributes(state, attributes) {\n    //TODO apply only to holes\n    state.getIn(['scene', 'layers']).forEach( layer => { state = Layer.setAttributesOnSelected( state, layer.id, attributes ).updatedState; } );\n\n    return { updatedState: state };\n  }\n\n  static unselectAll(state) {\n    state.getIn(['scene', 'layers']).forEach( ({ id: layerID }) => { state = Layer.unselectAll( state, layerID ).updatedState; });\n    state.getIn(['scene', 'groups']).forEach( group => { state = Group.unselect( state, group.get('id') ).updatedState; });\n\n    return { updatedState: state };\n  }\n\n  static remove(state) {\n    let selectedLayer = state.getIn(['scene', 'selectedLayer']);\n    let {\n      lines: selectedLines,\n      holes: selectedHoles,\n      items: selectedItems\n    } = state.getIn(['scene', 'layers', selectedLayer, 'selected']);\n\n    state = Layer.unselectAll( state, selectedLayer ).updatedState;\n\n    selectedLines.forEach(lineID => { state = Line.remove( state, selectedLayer, lineID ).updatedState; });\n    selectedHoles.forEach(holeID => { state = Hole.remove( state, selectedLayer, holeID ).updatedState; });\n    selectedItems.forEach(itemID => { state = Item.remove( state, selectedLayer, itemID ).updatedState; });\n\n    state = Layer.detectAndUpdateAreas( state, selectedLayer ).updatedState;\n\n    return { updatedState: state };\n  }\n\n  static undo(state) {\n    let sceneHistory = state.sceneHistory;\n    if (state.scene === sceneHistory.last && sceneHistory.list.size > 1) {\n      sceneHistory = history.historyPop(sceneHistory);\n    }\n\n    state = state.merge({\n      mode: MODE_IDLE,\n      scene: sceneHistory.last,\n      sceneHistory: history.historyPop(sceneHistory)\n    });\n\n    return { updatedState: state };\n  }\n\n  static rollback(state) {\n    let sceneHistory = state.sceneHistory;\n\n    if (!sceneHistory.last && sceneHistory.list.isEmpty()) {\n      return { updatedState: state };\n    }\n\n    state = this.unselectAll( state ).updatedState;\n\n    state = state.merge({\n      mode: MODE_IDLE,\n      scene: sceneHistory.last,\n      sceneHistory: history.historyPush(sceneHistory, sceneHistory.last),\n      snapElements: new List(),\n      activeSnapElement: null,\n      drawingSupport: new Map(),\n      draggingSupport: new Map(),\n      rotatingSupport: new Map(),\n    });\n\n    return { updatedState: state };\n  }\n\n  static setProjectProperties(state, properties) {\n    let scene = state.scene.merge(properties);\n    state = state.merge({\n      mode: MODE_IDLE,\n      scene\n    });\n\n    return { updatedState: state };\n  }\n\n  static openProjectConfigurator(state) {\n    state = state.merge({\n      mode: MODE_CONFIGURING_PROJECT,\n    });\n\n    return { updatedState: state };\n  }\n\n  static initCatalog(state, catalog) {\n    state = state.set('catalog', new Catalog(catalog));\n\n    return { updatedState: state };\n  }\n\n  static updateMouseCoord(state, coords) {\n    state = state.set('mouse', new Map(coords));\n\n    return { updatedState: state };\n  }\n\n  static updateZoomScale(state, scale) {\n    state = state.set('zoom', scale);\n\n    return { updatedState: state };\n  }\n\n  static toggleSnap(state, mask) {\n    state = state.set('snapMask', mask);\n    return { updatedState: state };\n  }\n\n  static throwError(state, error) {\n    state = state.set('errors', state.get('errors').push({\n      date: Date.now(),\n      error\n    }));\n\n    return { updatedState: state };\n  }\n\n  static throwWarning(state, warning) {\n    state = state.set('warnings', state.get('warnings').push({\n      date: Date.now(),\n      warning\n    }));\n\n    return { updatedState: state };\n  }\n\n  static copyProperties(state, properties){\n    state = state.set('clipboardProperties', properties);\n\n    return { updatedState: state };\n  }\n\n  static pasteProperties(state) {\n    state = this.updateProperties(state, state.getIn(['scene', 'selectedLayer']), state.get('clipboardProperties')).updatedState;\n\n    return { updatedState: state };\n  }\n\n  static pushLastSelectedCatalogElementToHistory(state, element) {\n    let currHistory = state.selectedElementsHistory;\n\n    let previousPosition = currHistory.findIndex(el => el.name === element.name);\n    if (previousPosition !== -1) {\n      currHistory = currHistory.splice(previousPosition, 1);\n    }\n    currHistory = currHistory.splice(0, 0, element);\n\n    state = state.set('selectedElementsHistory', currHistory);\n    return { updatedState: state };\n  }\n\n  static changeCatalogPage( state, oldPage, newPage ) {\n    state = state.setIn(['catalog', 'page'], newPage)\n      .updateIn(['catalog', 'path'], path => path.push(oldPage));\n\n    return { updatedState: state };\n  }\n\n  static goBackToCatalogPage( state, newPage ){\n    let pageIndex = state.catalog.path.findIndex(page => page === newPage);\n    state =  state.setIn(['catalog', 'page'], newPage)\n      .updateIn(['catalog', 'path'], path => path.take(pageIndex));\n\n    return { updatedState: state };\n  }\n\n  static setMode( state, mode ){\n    state = state.set('mode', mode);\n    return { updatedState: state };\n  }\n\n  static addHorizontalGuide( state, coordinate ){\n    state = HorizontalGuide.create( state, coordinate ).updatedState;\n\n    return { updatedState: state };\n  }\n\n  static addVerticalGuide( state, coordinate ){\n    state = VerticalGuide.create( state, coordinate ).updatedState;\n\n    return { updatedState: state };\n  }\n\n  static addCircularGuide( state, x, y, radius ){\n    console.log('adding horizontal guide at', x, y, radius);\n\n    return { updatedState: state };\n  }\n\n  static removeHorizontalGuide( state, guideID ){\n    state = HorizontalGuide.remove( state, guideID ).updatedState;\n\n    return { updatedState: state };\n  }\n\n  static removeVerticalGuide( state, guideID ){\n    state = VerticalGuide.remove( state, guideID ).updatedState;\n\n    return { updatedState: state };\n  }\n\n  static removeCircularGuide( state, guideID ){\n    console.log('removeing horizontal guide ', guideID);\n\n    return { updatedState: state };\n  }\n\n}\n\nexport { Project as default };\n","import Graph from './graph';\nimport getEdgesOfSubgraphs from './get-edges-of-subgraphs';\nimport graphCycles from './graph-cycles';\nimport {List} from 'immutable';\n\nexport function calculateInnerCycles(verticesArray, edgesArray) {\n  let innerCycles = new List();\n\n  let graph = new Graph(verticesArray.length);\n  edgesArray.forEach(line => {\n    graph.addEdge(line[0], line[1]);\n    graph.addEdge(line[1], line[0]);\n  });\n\n  graph.BCC();\n\n  let subgraphs = graph.subgraphs.filter(subgraph => subgraph.length >= 3);\n  let edgesOfSubgraphsArray = getEdgesOfSubgraphs(subgraphs, graph);\n\n  let edges = [];\n  edgesOfSubgraphsArray.forEach(es => {\n    es.forEach(edge => edges.push(edge))\n  });\n\n  let cycles = graphCycles(verticesArray, edges);\n  cycles.v_cycles.forEach(cycle => {\n    cycle.shift();\n    innerCycles = innerCycles.push(cycle);\n  });\n\n  return innerCycles;\n}\n\nexport function isClockWiseOrder(innerCycleWithCoords) {\n  // See: https://stackoverflow.com/a/1165943 and http://blog.element84.com/polygon-winding.html\n\n  let i = 0;\n  let twiceEnclosedArea = 0;\n  let size = innerCycleWithCoords.size;\n\n  for (i = 0; i < size; i++) {\n\n    let { x: x1, y: y1 } = innerCycleWithCoords.get(i);\n    let { x: x2, y: y2 } = innerCycleWithCoords.get((i + 1) % size);\n\n    twiceEnclosedArea += (x2 - x1) * (y2 + y1);\n  }\n\n  return twiceEnclosedArea > 0;\n}\n","//JS porting of this code http://www.geeksforgeeks.org/biconnected-components/\n\nfunction create_array(length) {\n  let array = [];\n  for (let i = 0; i < length; ++i) {\n    array.push([]);\n  }\n  return array;\n}\n\n\nclass Edge {\n  constructor(u, v) {\n    this.u = u;\n    this.v = v;\n  }\n}\n\nclass Graph {\n\n  constructor(v) {\n    this.count = 0; // count is number of biconnected components\n    this.subgraphs = []; //biconnected components\n    this.time = 0;  // time is used to find discovery times\n\n    this.V = v;     // No. of vertices\n    this.E = 0;     // No. of Edges\n    this.adj = [];  // Adjacency List\n\n    this.adj = create_array(v);\n  }\n\n  //Function to add an edge into the graph\n  addEdge(v, w) {\n    this.adj[v].push(w);\n    this.E++;\n  }\n\n  // A recursive function that finds and prints strongly connected\n  // components using DFS traversal\n  // u --> The vertex to be visited next\n  // disc[] --> Stores discovery times of visited vertices\n  // low[] -- >> earliest visited vertex (the vertex with minimum\n  //             discovery time) that can be reached from subtree\n  //             rooted with current vertex\n  // *st -- >> To store visited edges\n  // // A recursive function that finds and prints strongly connected\n  // components using DFS traversal\n  // u --> The vertex to be visited next\n  // disc[] --> Stores discovery times of visited vertices\n  // low[] -- >> earliest visited vertex (the vertex with minimum\n  //             discovery time) that can be reached from subtree\n  //             rooted with current vertex\n  // *st -- >> To store visited edges\n  _BCCUtil(u, disc, low, st, parent) {\n    // Initialize discovery time and low value\n    disc[u] = low[u] = ++this.time;\n    this.children = 0;\n\n    // Go through all vertices adjacent to this\n    // v is current adjacent of 'u'\n    this.adj[u].forEach(v => {\n\n      // If v is not visited yet, then recur for it\n      if (disc[v] == -1) {\n        this.children++;\n        parent[v] = u;\n\n        // store the edge in stack\n        st.push(new Edge(u, v));\n        this._BCCUtil(v, disc, low, st, parent);\n\n        // Check if the subtree rooted with 'v' has a\n        // connection to one of the ancestors of 'u'\n        // Case 1 -- per Strongly Connected Components Article\n        if (low[u] > low[v])\n          low[u] = low[v];\n\n        // If u is an articulation point,\n        // pop all edges from stack till u -- v\n        if ((disc[u] == 1 && this.children > 1) || (disc[u] > 1 && low[v] >= disc[u])) {\n          let subgraph = [];\n          while (st[st.length - 1].u != u || st[st.length - 1].v != v) {\n            subgraph.push(st[st.length - 1]);\n            //console.log(st[st.length - 1].u + \"--\" + st[st.length - 1].v + \" \");\n            st.splice(st.length - 1, 1);\n          }\n\n          subgraph.push(st[st.length - 1]);\n          //console.log(st[st.length - 1].u + \"--\" + st[st.length - 1].v + \" \");\n          this.subgraphs.push(subgraph);\n          subgraph = [];\n          //console.log()\n          st.splice(st.length - 1, 1);\n\n          this.count++;\n        }\n      }\n\n      // Update low value of 'u' only of 'v' is still in stack\n      // (i.e. it's a back edge, not cross edge).\n      // Case 2 -- per Strongly Connected Components Article\n      else if (v != parent[u] && disc[v] < low[u]) {\n        if (low[u] > disc[v])\n          low[u] = disc[v];\n        st.push(new Edge(u, v));\n      }\n    })\n  }\n\n  BCC() {\n    let V = this.V;\n    let disc = create_array(V);\n    let low = create_array(V);\n    let parent = create_array(V);\n    let st = [];\n\n    // Initialize disc and low, and parent arrays\n    for (let i = 0; i < V; i++) {\n      disc[i] = -1;\n      low[i] = -1;\n      parent[i] = -1;\n    }\n\n    for (let i = 0; i < V; i++) {\n      if (disc[i] == -1)\n        this._BCCUtil(i, disc, low, st, parent);\n\n      let j = 0;\n\n      // If stack is not empty, pop all edges from stack\n      let subgraph = [];\n      while (st.length > 0) {\n        j = 1;\n        subgraph.push(st[st.length - 1]);\n        //console.log(st[st.length - 1].u + \"--\" + st[st.length - 1].v + \" \");\n        st.splice(st.length - 1, 1);\n      }\n\n      if (j == 1) {\n        this.subgraphs.push(subgraph);\n        subgraph = [];\n        //console.log();\n        this.count++;\n      }\n    }\n  }\n}\n\nmodule.exports = Graph;\n","function getEdgesOfSubgraphs(subgraphs, graph) {\n\n    let edges = [];\n\n    subgraphs.forEach(component => {\n        edges.push([]);\n        let vertices = getVerticesFromBiconnectedComponent(component);\n        let inserted = [];\n        vertices.forEach(vertex => {\n            let adjacents = graph.adj[vertex];\n            adjacents.forEach(adj => {\n                if (vertex <= adj && vertices.has(adj)) {\n                    edges[edges.length - 1].push([vertex,adj]);\n                }\n            });\n        });\n    });\n    return edges;\n\n}\n\nfunction getVerticesFromBiconnectedComponent(component) {\n    let vertices = new Set();\n    component.forEach(edge => {\n        vertices.add(edge.u);\n        vertices.add(edge.v);\n    });\n    return vertices;\n}\n\nmodule.exports = getEdgesOfSubgraphs;\n","/**\n * UTILS\n */\n\nfunction sub (v1, v2) {\n  return [v1[0] - v2[0], v1[1] - v2[1]]\n}\n\nfunction mod (n, m) {\n  return ((n % m) + m) % m\n}\n\n/**\n * CYCLES\n */\n\nfunction compute_ev_mapping (EV) {\n  let ev_mapping = EV.map(function (ev) {\n    return {\n      ev: ev,\n      color: 0,\n      direction: -1\n    }\n  })\n\n  return ev_mapping\n}\n\nfunction compute_angle (P, V) {\n  let point = sub(V, P)\n  let angle = Math.atan2(point[1], point[0])\n  return angle\n}\n\nfunction compute_incidences (V, EV) {\n  let incidences = V.map(function (vertex, i) {\n    let incidence = []\n    EV.forEach(function (edge, j) {\n      let endpoint\n      let position\n\n      if (edge[0] === i) {\n        endpoint = edge[1]\n        position = 1\n      }\n\n      if (edge[1] === i) {\n        endpoint = edge[0]\n        position = 0\n      }\n\n      endpoint !== undefined && incidence.push({\n        index: j,\n        endpoint: endpoint,\n        angle: compute_angle(vertex, V[endpoint]),\n        edge: edge,\n        position: position\n      })\n    })\n\n    incidence.sort(function (i1, i2) {\n      return i2.angle - i1.angle\n    })\n\n    return incidence\n  })\n\n  return incidences\n}\n\nfunction get_starting_edge (incidences, ev_mapping) {\n  let e\n  let position\n  let direction\n  for (e = 0; e < ev_mapping.length; e += 1) {\n    if (ev_mapping[e].color < 2) {\n      direction = -1 * ev_mapping[e].direction\n      color(ev_mapping, e, direction)\n      return {\n        edge: e,\n        direction: direction,\n        position: direction === -1 ? 0 : 1\n      }\n    }\n  }\n}\n\nfunction get_next_edge (incidences, edge, position, EV) {\n  let items = incidences[EV[edge][position]]\n  //console.log(items, incidences, EV, edge, position);\n  let n_items = items.length\n  let item\n  let out\n  let j\n  for (j = 0; j < n_items; j += 1) {\n    item = items[j]\n    if (item.index === edge) {\n      out = items[mod(j + 1, items.length)]\n      return {\n        edge: out.index,\n        vertex: out.endpoint,\n        position: out.position,\n        direction: out.position ? 1 : -1\n      }\n    }\n  }\n}\n\nfunction color (ev_mapping, index, direction) {\n  ev_mapping[index].color += 1\n  ev_mapping[index].direction = direction\n}\n\nfunction find_cycles (V, EV) {\n  let ev_mapping = compute_ev_mapping(EV)\n  let incidences = compute_incidences(V, EV)\n  let V_cycles = []\n  let E_cycles = []\n  let dir_E_cycles = []\n  let V_cycle\n  let E_cycle\n  let dir_E_cycle\n  let next\n  let counter = 0\n  let start = get_starting_edge(incidences, ev_mapping)\n\n  while (start !== undefined) {\n    V_cycle = [EV[start.edge][mod(start.position + 1, 2)], EV[start.edge][start.position]]\n    E_cycle = [start.edge]\n    dir_E_cycle = [start.direction]\n    next = get_next_edge(incidences, start.edge, start.position, EV)\n    while (next.edge !== start.edge) {\n      V_cycle.push(next.vertex)\n      E_cycle.push(next.edge)\n      dir_E_cycle.push(next.direction)\n      color(ev_mapping, next.edge, next.direction)\n      next = get_next_edge(incidences, next.edge, next.position, EV)\n    }\n    E_cycles.push(E_cycle)\n    V_cycles.push(V_cycle)\n    dir_E_cycles.push(dir_E_cycle)\n\n    //console.log('############## CYCLE ', ++counter)\n    //console.log('EDGES:', E_cycle)\n    //console.log('VERTICES:', V_cycle)\n    //console.log('START', 'edge:', start.edge, 'position:', start.position)\n    //console.log('COUNTER:', ev_mapping.map(e => e.color), ev_mapping.map(e => e.color).reduce((a, b) => a + b));\n    //console.log('\\n')\n\n    start = get_starting_edge(incidences, ev_mapping)\n  }\n\n  return {\n    v_cycles: V_cycles,\n    e_cycles: E_cycles,\n    dir_e_cycles: dir_E_cycles,\n    ev_mapping: ev_mapping\n  }\n}\n\nfunction find_short_cycles_indexes (v_cycles, e_cycles) {\n  let indexes = [];\n  let e_cycle;\n  let v_cycle;\n  let i;\n\n  for (i = 0; i < e_cycles.length; i += 1) {\n    e_cycle = e_cycles[i];\n    v_cycle = v_cycles[i];\n    if ((e_cycle.length < 3) || (v_cycle[0] !== v_cycle[v_cycle.length - 1])) {\n      indexes.push(i);\n    }\n  }\n\n  return indexes;\n}\n\nfunction find_inner_cycles (V, EV) {\n  let cycles = find_cycles(V, EV);\n  let v_cycles = cycles.v_cycles;\n  let e_cycles = cycles.e_cycles;\n  let short_cycles_indexes = find_short_cycles_indexes(v_cycles, e_cycles);\n  short_cycles_indexes.forEach(indx => {\n    v_cycles.splice(indx, 1);\n    e_cycles.splice(indx, 1);\n  })\n  let dir_e_cycles = cycles.dir_e_cycles;\n  let rooms_values = cycles.e_cycles.map((cycle, i) => cycle.map(function (edge, j) {\n    let v1;\n    let v2;\n\n    let dir = dir_e_cycles[i][j] > 0\n\n    if (dir > 0) {\n      v1 = EV[edge][0];\n      v2 = EV[edge][1];\n    } else {\n      v1 = EV[edge][1];\n      v2 = EV[edge][0];\n    }\n\n    return (V[v2][0]  - V[v1][0]) * (V[v2][1] + V[v1][1]);\n  }));\n\n  let rooms_sums = rooms_values.map(room => room.reduce((a, b) => a + b))\n\n  let positive_count = rooms_sums.filter(sum => sum > 0).length;\n  let negative_count = rooms_sums.length - positive_count;\n\n  let rm_neg =  positive_count >= negative_count ? 1 : -1;\n\n  return {\n    v_cycles: cycles.v_cycles.filter((v, i) => (rm_neg * rooms_sums[i]) > 0 ),\n    e_cycles: cycles.e_cycles.filter((v, i) => (rm_neg * rooms_sums[i]) > 0 ),\n    ev_mapping: cycles.ev_mapping\n  }\n}\n\n// export default find_inner_cycles;\nmodule.exports = find_inner_cycles\n\n/**\n* DATA\n*/\n\n// let V = [[0.5774, 1.0], [1.0, 1.0], [1.1547, 0.0], [1.0, 0.0], [0.0, 0.0], [0.0, 0.732], [1.0, 0.1547], [0.732, 0.0], [1.0491, 0.183], [-0.317, 0.549], [1.0, 0.268], [0.183, -0.3169], [0.5491, 1.049], [0.4642, 1.0], [0.0, -0.4226], [0.0, 1.0]]\n// let EV = [[0, 1], [2, 3], [5, 4], [7, 6], [2, 8], [3, 6], [4, 9], [0, 10], [9, 5], [8, 10], [7, 11], [12, 13], [6, 8], [6, 10], [4, 7], [4, 11], [4, 14], [5, 15], [11, 14], [0, 12], [13, 15], [0, 13], [1, 10], [3, 7], [5, 13]]\n\n// let V = [[0,0],[10,0],[10,10],[0,10], [100,100],[110,100],[110,110],[100,110], [5,0], [5,10]]\n// let V = [[0,0.5],[12,-0.7],[14,14],[-2,10], [103,106],[117,98],[96,112],[104,109], [5.5,0.8], [4.8,10.5]]\n// let EV = [[3,9],[9,2],[2,1],[1,8],[8,0],[0,3],[8,9]] // IT WORKS\n// let EV = [[3,9],[9,2],[2,1],[1,8],[8,0],[0,3],[8,9], [5,6], [6,7], [2,5]] // IT DOESN'T WORK\n// let EV = [[3,2],[2,1],[1,0],[0,3]] // IT WORKS\n// let EV = [[2,3],[1,2],[0,1],[3,0]] // IT WORKS\n// let EV = [[2,3],[1,2],[0,1],[3,0],[6,7],[5,6],[4,5],[7,4]] // IT WORKS\n// let EV = [[3,2],[2,1],[1,0],[0,3],[7,6],[6,5],[5,4],[4,7]] // IT WORKS\n\n// let V = [[2,5],[5,6],[10,6.8],[23,8],[9.6,11.3],[20,15],[25,16],[29,18],[30,22],[4,11],[6,10],[24,25],[18,20],[27,7]]\n// let EV = [[0,1],[10,0],[9,10],[9,1],[1,2],[4,2],[3,13],[2,3],[4,5],[5,6],[6,7],[12,5],[12,11],[11,6],[11,8],[7,8],[9,4]]\n\n/**\n* MAIN\n*/\n\n// let cycles_data = find_inner_cycles(V, EV)\n// console.log('############## OUTPUT')\n// console.log('EDGES:')\n// console.log(cycles_data.e_cycles)\n// console.log('\\n')\n// console.log('VERTICES:')\n// console.log(cycles_data.v_cycles)\n// console.log('\\n')\n// console.log(cycles_data.ev_mapping.every(m => m.color === 2))\n\n","import {\n  SNAP_POINT,\n  SNAP_LINE,\n  SNAP_SEGMENT,\n  SNAP_GRID,\n  SNAP_GUIDE,\n  addPointSnap,\n  addLineSnap,\n  addLineSegmentSnap,\n  addGridSnap\n} from './snap';\nimport { GeometryUtils } from './export';\nimport { Map, List } from 'immutable';\n\nexport function sceneSnapElements(scene, snapElements = new List(), snapMask = new Map()) {\n\n  let { width, height } = scene;\n\n  let a, b, c;\n  return snapElements.withMutations(snapElements => {\n    scene.layers.forEach(layer => {\n\n      let { lines, vertices } = layer;\n\n      vertices.forEach(({ id: vertexID, x, y }) => {\n\n        if (snapMask.get(SNAP_POINT)) {\n          addPointSnap(snapElements, x, y, 10, 10, vertexID);\n        }\n\n        if (snapMask.get(SNAP_LINE)) {\n          ({ a, b, c } = GeometryUtils.horizontalLine(y));\n          addLineSnap(snapElements, a, b, c, 10, 1, vertexID);\n          ({ a, b, c } = GeometryUtils.verticalLine(x));\n          addLineSnap(snapElements, a, b, c, 10, 1, vertexID);\n        }\n\n      });\n\n      if (snapMask.get(SNAP_SEGMENT)) {\n        lines.forEach(({ id: lineID, vertices: [v0, v1] }) => {\n          let { x: x1, y: y1 } = vertices.get(v0);\n          let { x: x2, y: y2 } = vertices.get(v1);\n\n          addLineSegmentSnap(snapElements, x1, y1, x2, y2, 20, 1, lineID);\n        });\n      }\n\n    });\n\n    if (snapMask.get(SNAP_GRID)) {\n      let divider = 5;\n      let gridCellSize = 100 / divider;\n      let xCycle = width / gridCellSize;\n      let yCycle = height / gridCellSize;\n\n      for (let x = 0; x < xCycle; x++) {\n        let xMul = x * gridCellSize;\n\n        for (let y = 0; y < yCycle; y++) {\n          let yMul = y * gridCellSize;\n\n          let onXCross = !(x % divider) ? true : false;\n          let onYCross = !(y % divider) ? true : false;\n\n          addGridSnap(snapElements, xMul, yMul, 10, onXCross && onYCross ? 15 : 10, null);\n        }\n      }\n    }\n\n    if (snapMask.get(SNAP_GUIDE)) {\n\n      let horizontal = scene.getIn(['guides', 'horizontal']);\n      let vertical = scene.getIn(['guides', 'vertical']);\n\n      let hValues = horizontal.valueSeq();\n      let vValues = vertical.valueSeq();\n\n      hValues.forEach(hVal => {\n        vValues.forEach(vVal => {\n          addPointSnap(snapElements, vVal, hVal, 10, 10);\n        });\n      });\n\n      hValues.forEach(hVal => addLineSegmentSnap(snapElements, 0, hVal, width, hVal, 20, 1));\n      vValues.forEach(vVal => addLineSegmentSnap(snapElements, vVal, 0, vVal, height, 20, 1));\n\n    }\n\n  })\n}\n","import { Map } from 'immutable';\nimport diff from 'immutablediff';\nimport patch from 'immutablepatch';\n\nexport const historyPush = (historyStructure, item) => {\n  if (historyStructure.last) {\n    if (historyStructure.last.hashCode() !== item.hashCode()) {\n      let toPush = new Map({\n        time: Date.now(),\n        diff: diff(historyStructure.last, item)\n      });\n\n      historyStructure = historyStructure\n        .set('last', item)\n        .set('list', historyStructure.list.push(toPush));\n    }\n  }\n  else {\n    historyStructure = historyStructure.set('last', item);\n  }\n  return historyStructure;\n};\n\nexport const historyPop = (historyStructure) => {\n  if (historyStructure.last) {\n    if (historyStructure.list.size) {\n      let last = historyStructure.first;\n      for (let x = 0; x < historyStructure.list.size - 1; x++) {\n        last = patch(last, historyStructure.list.get(x).get('diff'));\n      }\n\n      historyStructure = historyStructure\n        .set('last', last)\n        .set('list', historyStructure.list.pop());\n    }\n  }\n  return historyStructure;\n};\n","let shortid = require('shortid');\n\nexport class IDBroker {\n  static acquireID() {\n    return shortid.generate();\n  }\n}\n\nexport default IDBroker;\n","export default class NameGenerator {\n  static generateName( prototype, type ) {\n    return type.substr(0, 1).toUpperCase() + type.substr(1);\n  }\n}\n","import {\n  Project,\n  Line,\n  Hole,\n  Item,\n  Area,\n  Layer,\n  Vertex\n} from './export';\nimport { Map, List } from 'immutable';\nimport { Group as GroupModel } from '../models';\nimport { IDBroker, MathUtils, GeometryUtils } from '../utils/export';\n\nclass Group{\n\n  static select( state, groupID ){\n    let layerList = state.getIn([ 'scene', 'groups', groupID, 'elements' ]);\n\n    state = Project.setAlterate( state ).updatedState;\n\n    layerList.entrySeq().forEach( ([groupLayerID, groupLayerElements]) => {\n      state = Layer.unselectAll( state, groupLayerID ).updatedState;\n\n      let lines = groupLayerElements.get('lines');\n      let holes = groupLayerElements.get('holes');\n      let items = groupLayerElements.get('items');\n      let areas = groupLayerElements.get('areas');\n\n      if( lines ) lines.forEach( lineID => { state = Line.select( state, groupLayerID, lineID ).updatedState; });\n      if( holes ) holes.forEach( holeID => { state = Hole.select( state, groupLayerID, holeID ).updatedState; });\n      if( items ) items.forEach( itemID => { state = Item.select( state, groupLayerID, itemID ).updatedState; });\n      if( areas ) areas.forEach( areaID => { state = Area.select( state, groupLayerID, areaID ).updatedState; });\n    });\n\n    state = Project.setAlterate( state ).updatedState;\n\n    let groups = state.getIn(['scene', 'groups']).map( g  => g.set('selected', false) );\n\n    state = state.setIn(['scene', 'groups'], groups).setIn([ 'scene', 'groups', groupID, 'selected' ], true);\n\n    return { updatedState: state };\n  }\n\n  static unselect( state, groupID ){\n    let layerList = state.getIn([ 'scene', 'groups', groupID, 'elements' ]);\n    let reduced = layerList.reduce( ( newState, layer, layerID ) => Layer.unselectAll( newState, layerID ).updatedState, state );\n    state = reduced.setIn([ 'scene', 'groups', groupID, 'selected' ], false);\n\n    return { updatedState: state };\n  }\n\n  static create( state ){\n    let groupID = IDBroker.acquireID();\n\n    state = state.setIn(['scene', 'groups', groupID], new GroupModel({ id: groupID, name: groupID}) );\n\n    return { updatedState: state };\n  }\n\n  static createFromSelectedElements( state ){\n    let groupID = IDBroker.acquireID();\n\n    state = state.setIn(['scene', 'groups', groupID], new GroupModel({ id: groupID, name: groupID}) );\n\n    state.getIn(['scene', 'layers']).forEach((layer) => {\n\n      let layerID = layer.get('id');\n      let layerElements = {\n        'lines': layer.get('lines').filter( el => el.get('selected') ),\n        'items': layer.get('items').filter( el => el.get('selected') ),\n        'holes': layer.get('holes').filter( el => el.get('selected') ),\n        'areas': layer.get('areas').filter( el => el.get('selected') )\n      };\n\n      for( let elementPrototype in layerElements ) {\n        layerElements[elementPrototype].forEach( el => state = this.addElement( state, groupID, layerID, elementPrototype, el.get('id') ).updatedState );\n      }\n    });\n\n    return {updatedState: state};\n  }\n\n  static addElement( state, groupID, layerID, elementPrototype, elementID ){\n    let actualList = state.getIn(['scene', 'groups', groupID, 'elements', layerID, elementPrototype]) || new List();\n\n    if( !actualList.contains(elementID) ) {\n      state = state.setIn(['scene', 'groups', groupID, 'elements', layerID, elementPrototype], actualList.push(elementID));\n\n      state = this.reloadBaricenter( state, groupID ).updatedState;\n    }\n\n    return { updatedState: state };\n  }\n\n  static setBarycenter( state, groupID, x, y ) {\n    if (typeof x !== 'undefined') state = state.setIn(['scene', 'groups', groupID, 'x'], x);\n    if (typeof y !== 'undefined') state = state.setIn(['scene', 'groups', groupID, 'y'], y);\n\n    return { updatedState: state };\n  }\n\n  static reloadBaricenter( state, groupID ) {\n    let layerList = state.getIn([ 'scene', 'groups', groupID, 'elements' ]);\n\n    let { a, b, c, d, e, f, SVGHeight } = state.get('viewer2D').toJS();\n\n    let m1 = [\n      [ a, b, c ],\n      [ d, e, f ],\n      [ 0, 0, 1 ]\n    ];\n\n    let xBar = 0;\n    let yBar = 0;\n    let elementCount = 0;\n\n    layerList.entrySeq().forEach( ([groupLayerID, groupLayerElements]) => {\n      state = Layer.unselectAll( state, groupLayerID ).updatedState;\n\n      let lines = groupLayerElements.get('lines');\n      let holes = groupLayerElements.get('holes');\n      let items = groupLayerElements.get('items');\n      let areas = groupLayerElements.get('areas');\n\n      if( lines ) lines.forEach( ( lineID ) => {\n        let vertices = state.getIn(['scene', 'layers', groupLayerID, 'lines', lineID, 'vertices'])\n          .map( vID => state.getIn(['scene', 'layers', groupLayerID, 'vertices', vID]) );\n\n        let { x: x1, y: y1 } = vertices.get(0);\n        let { x: x2, y: y2 } = vertices.get(1);\n        let { x: xM, y: yM } = GeometryUtils.midPoint( x1, y1, x2, y2 );\n\n        xBar += xM;\n        yBar += yM;\n        elementCount++;\n      });\n\n      if( holes ) holes.forEach( holeID => {\n        let hole = state.getIn(['scene', 'layers', groupLayerID, 'holes', holeID]);\n        let lineVertices = state.getIn(['scene', 'layers', groupLayerID, 'lines', hole.line, 'vertices'])\n          .map( vID => state.getIn(['scene', 'layers', groupLayerID, 'vertices', vID]) );\n        let { x: x1, y: y1 } = lineVertices.get(0);\n        let { x: x2, y: y2 } = lineVertices.get(1);\n        let { x, y } = GeometryUtils.extendLine( x1, y1, x2, y2, hole.offset * GeometryUtils.pointsDistance( x1, y1, x2, y2 ) );\n\n        xBar += x;\n        yBar += y;\n        elementCount++;\n      });\n\n      if( items ) items.forEach( itemID => {\n        let { x, y } = state.getIn(['scene', 'layers', groupLayerID, 'items', itemID]);\n\n        xBar += x;\n        yBar += y;\n        elementCount++;\n      });\n\n      if( areas ) areas.forEach( areaID => {\n        let areaVertices = state.getIn(['scene', 'layers', groupLayerID, 'areas', areaID, 'vertices'])\n          .map( vID => state.getIn(['scene', 'layers', groupLayerID, 'vertices', vID]) ).toJS();\n        let { x, y } = GeometryUtils.verticesMidPoint( areaVertices );\n\n        xBar += x;\n        yBar += y;\n        elementCount++;\n      });\n    });\n\n    if( elementCount ) {\n      state = this.setBarycenter( state, groupID, xBar / elementCount, yBar / elementCount ).updatedState;\n    }\n\n    return { updatedState: state };\n  }\n\n  static removeElement( state, groupID, layerID, elementPrototype, elementID ) {\n    let actualList = state.getIn(['scene', 'groups', groupID, 'elements', layerID, elementPrototype]);\n\n    if( !actualList || !actualList.contains(elementID) )\n    {\n      return { updatedState: state };\n    }\n\n    state = state.setIn(['scene', 'groups', groupID, 'elements', layerID, elementPrototype], actualList.filterNot( el => el === elementID ));\n\n    return { updatedState : state };\n  }\n\n  static setAttributes( state, groupID, attributes ){\n    state = state.mergeIn(['scene', 'groups', groupID], attributes);\n\n    return { updatedState : state };\n  }\n\n  static setProperties( state, groupID, properties ){\n    state = state.mergeIn(['scene', 'groups', groupID, 'properties'], properties);\n\n    return { updatedState : state };\n  }\n\n  static remove( state, groupID ) {\n    state = state.removeIn(['scene', 'groups', groupID]);\n\n    return { updatedState : state };\n  }\n\n  static removeAndDeleteElements( state, groupID ) {\n    let layerList = state.getIn([ 'scene', 'groups', groupID, 'elements' ]);\n\n    layerList.entrySeq().forEach( ([groupLayerID, groupLayerElements]) => {\n      state = Layer.unselectAll( state, groupLayerID ).updatedState;\n\n      let lines = groupLayerElements.get('lines');\n      let holes = groupLayerElements.get('holes');\n      let items = groupLayerElements.get('items');\n      let areas = groupLayerElements.get('areas');\n\n      if( lines ) {\n        lines.forEach( lineID => {\n          state = Line.remove( state, groupLayerID, lineID ).updatedState;\n          state = Layer.detectAndUpdateAreas( state, groupLayerID ).updatedState;\n        });\n      }\n\n      if( holes ) holes.forEach( holeID => { state = Hole.remove( state, groupLayerID, holeID ).updatedState; });\n      if( items ) items.forEach( itemID => { state = Item.remove( state, groupLayerID, itemID ).updatedState; });\n      //( actually ) no effect by area's destruction\n      if( false && areas ) areas.forEach( areaID => { state = Area.remove( state, groupLayerID, areaID ).updatedState; });\n    });\n\n    state = state.deleteIn([ 'scene', 'groups', groupID ]);\n\n    return { updatedState: state };\n  }\n\n  static translate( state, groupID, x, y ) {\n    let deltaX = x - state.getIn(['scene', 'groups', groupID, 'x']);\n    let deltaY = y - state.getIn(['scene', 'groups', groupID, 'y']);\n\n    let layerList = state.getIn([ 'scene', 'groups', groupID, 'elements' ]);\n\n    layerList.entrySeq().forEach( ([groupLayerID, groupLayerElements]) => {\n      let lines = groupLayerElements.get('lines');\n      //let holes = groupLayerElements.get('holes');\n      let items = groupLayerElements.get('items');\n      //let areas = groupLayerElements.get('areas');\n\n      //move vertices instead lines avoiding multiple vertex translation\n      if( lines ) {\n        let vertices = {};\n        lines.forEach( lineID => {\n          let line = state.getIn(['scene', 'layers', groupLayerID, 'lines', lineID]);\n          if( !vertices[ line.vertices.get(0) ] ) vertices[ line.vertices.get(0) ] = state.getIn(['scene', 'layers', groupLayerID, 'vertices', line.vertices.get(0)])\n          if( !vertices[ line.vertices.get(1) ] ) vertices[ line.vertices.get(1) ] = state.getIn(['scene', 'layers', groupLayerID, 'vertices', line.vertices.get(1)])\n        });\n\n        for( let vertexID in vertices ) {\n          let { x: xV, y: yV } = vertices[ vertexID ];\n          state = Vertex.setAttributes( state, groupLayerID, vertexID, new Map({ x: xV + deltaX, y: yV + deltaY }) ).updatedState;\n        }\n\n        //need to be separated from setAttributes cycle\n        for( let vertexID in vertices ) {\n          state = Vertex.beginDraggingVertex( state, groupLayerID, vertexID ).updatedState;\n          state = Vertex.endDraggingVertex( state ).updatedState;\n        }\n      }\n\n      if( items ) state = items\n        .map( itemID => state.getIn(['scene', 'layers', groupLayerID, 'items', itemID]) )\n        .reduce( ( newState, item ) => {\n          let { x: xI, y: yI } = item;\n          return Item.setAttributes( newState, groupLayerID, item.id, new Map({ x: xI + deltaX, y: yI + deltaY }) ).updatedState;\n        }, state );\n\n      //translation of holes and areas should not take any effect\n      //if( holes ) holes.forEach( holeID => { state = Hole.select( state, groupLayerID, holeID ).updatedState; });\n      //if( areas ) areas.forEach( areaID => { state = Area.select( state, groupLayerID, areaID ).updatedState; });\n\n      state = Layer.detectAndUpdateAreas( state, groupLayerID ).updatedState;\n    });\n\n    state = this.setBarycenter( state, groupID, x, y ).updatedState;\n\n    state = Group.select( state, groupID ).updatedState;\n\n    return { updatedState: state };\n  }\n\n  static rotate( state, groupID, newAlpha ) {\n\n\n    let { x: barX, y: barY, rotation } = state.getIn(['scene', 'groups', groupID]);\n\n    let alpha = newAlpha - rotation;\n\n    state = Group.setAttributes( state, groupID, new Map({ rotation: newAlpha }) ).updatedState;\n\n    let layerList = state.getIn([ 'scene', 'groups', groupID, 'elements' ]);\n\n    layerList.entrySeq().forEach( ([groupLayerID, groupLayerElements]) => {\n      let lines = groupLayerElements.get('lines');\n      let holes = groupLayerElements.get('holes');\n      let items = groupLayerElements.get('items');\n      let areas = groupLayerElements.get('areas');\n\n      //move vertices instead lines avoiding multiple vertex translation\n      if( lines ) {\n        let vertices = {};\n        lines.forEach( lineID => {\n          let line = state.getIn(['scene', 'layers', groupLayerID, 'lines', lineID]);\n          if( !vertices[ line.vertices.get(0) ] ) vertices[ line.vertices.get(0) ] = state.getIn(['scene', 'layers', groupLayerID, 'vertices', line.vertices.get(0)])\n          if( !vertices[ line.vertices.get(1) ] ) vertices[ line.vertices.get(1) ] = state.getIn(['scene', 'layers', groupLayerID, 'vertices', line.vertices.get(1)])\n        });\n\n        for( let vertexID in vertices ) {\n          let { x: xV, y: yV } = vertices[ vertexID ];\n          let { x: newX, y: newY } = GeometryUtils.rotatePointAroundPoint( xV, yV, barX, barY, alpha );\n          state = Vertex.setAttributes( state, groupLayerID, vertexID, new Map({ x: newX, y: newY }) ).updatedState;\n        }\n        //need to be separated from setAttributes cycle\n        for( let vertexID in vertices ) {\n          state = Vertex.beginDraggingVertex( state, groupLayerID, vertexID ).updatedState;\n          state = Vertex.endDraggingVertex( state ).updatedState;\n        }\n      }\n\n      if( items ) state = items\n        .map( itemID => state.getIn(['scene', 'layers', groupLayerID, 'items', itemID]) )\n        .reduce( ( newState, item ) => {\n          let { x: xI, y: yI, rotation: rI } = item;\n\n          let { x: newX, y: newY } = GeometryUtils.rotatePointAroundPoint( xI, yI, barX, barY, alpha );\n\n          return Item.setAttributes( newState, groupLayerID, item.id, new Map({ x: newX, y: newY, rotation: rI + alpha }) ).updatedState;\n        }, state );\n\n      //rotation of holes and areas should not take any effect\n      //if( holes ) holes.forEach( holeID => { state = Hole.select( state, groupLayerID, holeID ).updatedState; });\n      //if( areas ) areas.forEach( areaID => { state = Area.select( state, groupLayerID, areaID ).updatedState; });\n\n      state = Layer.detectAndUpdateAreas( state, groupLayerID ).updatedState;\n    });\n\n    state = Group.select( state, groupID ).updatedState;\n\n    return { updatedState: state };\n  }\n\n}\n\nexport { Group as default };\n","import { List } from 'immutable';\nimport { Project, Area, Line, Hole, Item, Vertex } from './export';\nimport {\n  GraphInnerCycles,\n  GeometryUtils,\n  IDBroker\n} from '../utils/export';\nimport { Layer as LayerModel } from '../models';\n\nconst sameSet = (set1, set2) => set1.size === set2.size && set1.isSuperset(set2) && set1.isSubset(set2);\n\nclass Layer{\n\n  static create( state, name, altitude ) {\n    let layerID = IDBroker.acquireID();\n    name = name || `layer ${layerID}`;\n    altitude = altitude || 0;\n\n    let layer = new LayerModel({ id: layerID, name, altitude });\n\n    state = state.setIn(['scene', 'selectedLayer'], layerID );\n    state = state.setIn(['scene', 'layers', layerID], layer);\n\n    return { updatedState: state };\n  }\n\n  static select( state, layerID ) {\n    if( !state.get('alterate') ) state = Project.unselectAll( state ).updatedState;\n    state = state.setIn(['scene', 'selectedLayer'], layerID);\n\n    return { updatedState: state };\n  }\n\n  static selectElement( state, layerID, elementPrototype, elementID ){\n    state = state.setIn(['scene', 'layers', layerID, elementPrototype, elementID, 'selected'], true);\n    state = state.updateIn(['scene', 'layers', layerID, 'selected', elementPrototype], elems => elems.push(elementID));\n\n    return { updatedState: state };\n  }\n\n  static unselect( state, layerID, elementPrototype, elementID ){\n    state = state.setIn(['scene', 'layers', layerID, elementPrototype, elementID, 'selected'], false);\n    state = state.updateIn(['scene', 'layers', layerID, 'selected', elementPrototype], elems => elems.filter( el => el.id === elementID ));\n    return { updatedState: state };\n  }\n\n  static unselectAll( state, layerID ) {\n    let { lines, holes, items, areas } = state.getIn(['scene', 'layers', layerID]);\n\n    if( lines ) lines.forEach( line => { state = Line.unselect( state, layerID, line.id ).updatedState; });\n    if( holes ) holes.forEach( hole => { state = Hole.unselect( state, layerID, hole.id ).updatedState; });\n    if( items ) items.forEach( item => { state = Item.unselect( state, layerID, item.id ).updatedState; });\n    if( areas ) areas.forEach( area => { state = Area.unselect( state, layerID, area.id ).updatedState; });\n\n    return { updatedState: state };\n  }\n\n  static setProperties( state, layerID, properties ) {\n    state = state.mergeIn(['scene', 'layers', layerID], properties);\n    state = state.updateIn(['scene', 'layers'], layers => layers.sort( ( a, b ) => a.altitude !== b.altitude ? a.altitude - b.altitude : a.order - b.order ));\n\n    return { updatedState: state };\n  }\n\n  static remove( state, layerID ) {\n    state = state.removeIn(['scene', 'layers', layerID]);\n\n    state = state.setIn(\n      ['scene', 'selectedLayer'],\n      state.scene.selectedLayer !== layerID ? state.scene.selectedLayer : state.scene.layers.first().id\n    );\n\n    return { updatedState: state };\n  }\n\n  static removeElement( state, layerID, elementPrototype, elementID ) {\n    state = state.deleteIn(['scene', 'layers', layerID, elementPrototype, elementID]);\n\n    return { updatedState: state };\n  }\n\n  static detectAndUpdateAreas( state, layerID ) {\n\n    console.log(state, layerID);\n\n    let verticesArray = [];           //array with vertices coords\n    let linesArray;                   //array with edges\n\n    let vertexID_to_verticesArrayIndex = {};\n    let verticesArrayIndex_to_vertexID = {};\n\n    state.getIn(['scene', 'layers', layerID, 'vertices']).forEach(vertex => {\n      let verticesCount = verticesArray.push([vertex.x, vertex.y]);\n      let latestVertexIndex = verticesCount - 1;\n      vertexID_to_verticesArrayIndex[vertex.id] = latestVertexIndex;\n      verticesArrayIndex_to_vertexID[latestVertexIndex] = vertex.id;\n    });\n\n    linesArray = state.getIn(['scene', 'layers', layerID, 'lines'])\n      .map(line => line.vertices.map(vertexID => vertexID_to_verticesArrayIndex[vertexID]).toArray());\n\n    let innerCyclesByVerticesArrayIndex = GraphInnerCycles.calculateInnerCycles(verticesArray, linesArray);\n\n    let innerCyclesByVerticesID = new List(innerCyclesByVerticesArrayIndex)\n      .map(cycle => new List(cycle.map(vertexIndex => verticesArrayIndex_to_vertexID[vertexIndex])));\n\n    // All area vertices should be ordered in counterclockwise order\n    innerCyclesByVerticesID = innerCyclesByVerticesID.map( ( area ) =>\n      GraphInnerCycles.isClockWiseOrder( area.map(vertexID => state.getIn(['scene', 'layers', layerID, 'vertices', vertexID]) ) ) ? area.reverse() : area\n    );\n\n    let areaIDs = [];\n\n    //remove areas\n    state.getIn(['scene', 'layers', layerID, 'areas']).forEach(area => {\n      let areaInUse = innerCyclesByVerticesID.some(vertices => sameSet(vertices, area.vertices));\n      if (!areaInUse) {\n        state = Area.remove( state, layerID, area.id ).updatedState;\n      }\n    });\n\n    //add new areas\n    innerCyclesByVerticesID.forEach((cycle, ind) => {\n      let areaInUse = state.getIn(['scene', 'layers', layerID, 'areas']).find(area => sameSet(area.vertices, cycle));\n\n      if (areaInUse) {\n        areaIDs[ind] = areaInUse.id;\n        state = state.setIn(['scene', 'layers', layerID, 'areas', areaIDs[ind], 'holes'], new List());\n      } else {\n        let areaVerticesCoords = cycle.map(vertexID => state.getIn(['scene', 'layers', layerID, 'vertices', vertexID]));\n        let resultAdd = Area.add(state, layerID, 'area', areaVerticesCoords, state.catalog);\n\n        areaIDs[ind] = resultAdd.area.id;\n        state = resultAdd.updatedState;\n      }\n    });\n\n    // Build a relationship between areas and their coordinates\n    let verticesCoordsForArea = areaIDs.map(id => {\n      let vertices = state.getIn(['scene', 'layers', layerID, 'areas', id]).vertices.map(vertexID => {\n        let { x, y } = state.getIn(['scene', 'layers', layerID, 'vertices', vertexID]);\n        return new List([x,y]);\n      });\n      return { id, vertices };\n    });\n\n    // Find all holes for an area\n    let i, j;\n    for (i = 0; i < verticesCoordsForArea.length; i++) {\n      let holesList = new List(); // The holes for this area\n      let areaVerticesList = verticesCoordsForArea[i].vertices.flatten().toArray();\n      for (j = 0; j < verticesCoordsForArea.length; j++) {\n        if (i !== j) {\n          let isHole = GeometryUtils.ContainsPoint(areaVerticesList,\n            verticesCoordsForArea[j].vertices.get(0).get(0),\n            verticesCoordsForArea[j].vertices.get(0).get(1));\n          if (isHole) {\n            holesList = holesList.push(verticesCoordsForArea[j].id);\n          }\n        }\n      }\n      state = state.setIn(['scene', 'layers', layerID, 'areas', verticesCoordsForArea[i].id, 'holes'], holesList);\n    }\n\n    // Remove holes which are already holes for other areas\n    areaIDs.forEach(areaID => {\n      let doubleHoles = new Set();\n      let areaHoles = state.getIn(['scene', 'layers', layerID, 'areas', areaID, 'holes']);\n      areaHoles.forEach((areaHoleID) => {\n        let holesOfholes = state.getIn(['scene', 'layers', layerID, 'areas', areaHoleID, 'holes']);\n        holesOfholes.forEach((holeID) => {\n          if (areaHoles.indexOf(holeID) !== -1) doubleHoles.add(holeID);\n        });\n      });\n      doubleHoles.forEach(doubleHoleID => {\n        areaHoles = areaHoles.remove( areaHoles.indexOf(doubleHoleID) );\n      });\n      state = state.setIn(['scene', 'layers', layerID, 'areas', areaID, 'holes'], areaHoles);\n    });\n\n    return { updatedState: state };\n  }\n\n  static removeZeroLengthLines( state, layerID ) {\n    let updatedState = state.getIn(['scene', 'layers', layerID, 'lines']).reduce(\n      ( newState, line ) =>\n      {\n        let v_id0 = line.getIn(['vertices', 0]);\n        let v_id1 = line.getIn(['vertices', 1]);\n\n        let v0 = newState.getIn(['scene', 'layers', layerID, 'vertices', v_id0]);\n        let v1 = newState.getIn(['scene', 'layers', layerID, 'vertices', v_id1]);\n\n        if( GeometryUtils.verticesDistance( v0, v1 ) === 0 )\n        {\n          newState = Line.remove( newState, layerID, line.id ).updatedState;\n        }\n\n        return newState;\n      },\n      state\n    );\n\n    return { updatedState };\n  }\n\n  static mergeEqualsVertices( state, layerID, vertexID ) {\n    //1. find vertices to remove\n    let vertex = state.getIn(['scene', 'layers', layerID, 'vertices', vertexID]);\n\n    let doubleVertices = state.getIn(['scene', 'layers', layerID, 'vertices'])\n      .filter(v => {\n        return (\n          v.id !== vertexID &&\n          GeometryUtils.samePoints(vertex, v)// &&\n          //!v.lines.contains( vertexID ) &&\n          //!v.areas.contains( vertexID )\n        );\n      });\n\n    if (doubleVertices.isEmpty()) return { updatedState: state };\n\n    doubleVertices.forEach(doubleVertex => {\n      let reduced = doubleVertex.lines.reduce(\n        ( reducedState, lineID ) => {\n\n          reducedState = reducedState.updateIn(['scene', 'layers', layerID, 'lines', lineID, 'vertices'], vertices => {\n            if( vertices ) {\n              return vertices.map(v => v === doubleVertex.id ? vertexID : v);\n            }\n          });\n          reducedState = Vertex.addElement( reducedState, layerID, vertexID, 'lines', lineID ).updatedState;\n\n          return reducedState;\n        },\n        state\n      );\n\n      let biReduced = doubleVertex.areas.reduce(\n        ( reducedState, areaID ) => {\n\n          reducedState = reducedState.updateIn(['scene', 'layers', layerID, 'areas', areaID, 'vertices'], vertices => {\n            if( vertices ) return vertices.map(v => v === doubleVertex.id ? vertexID : v);\n          });\n          reducedState = Vertex.addElement( reducedState, layerID, vertexID, 'areas', areaID ).updatedState;\n\n          return reducedState;\n        },\n        reduced\n      );\n\n      state = Vertex.remove( biReduced, layerID, doubleVertex.id, null, null, true ).updatedState;\n    });\n\n    return { updatedState: state };\n  }\n\n  static setPropertiesOnSelected( state, layerID, properties ) {\n    let selected = state.getIn(['scene', 'layers', layerID, 'selected']);\n\n    selected.lines.forEach(lineID => state = Line.setProperties(state, layerID, lineID, properties).updatedState);\n    selected.holes.forEach(holeID => state = Hole.setProperties(state, layerID, holeID, properties).updatedState);\n    selected.areas.forEach(areaID => state = Area.setProperties(state, layerID, areaID, properties).updatedState);\n    selected.items.forEach(itemID => state = Item.setProperties(state, layerID, itemID, properties).updatedState);\n\n    return { updatedState: state };\n  }\n\n  static updatePropertiesOnSelected( state, layerID, properties ) {\n    let selected = state.getIn(['scene', 'layers', layerID, 'selected']);\n\n    selected.lines.forEach(lineID => state = Line.updateProperties(state, layerID, lineID, properties).updatedState);\n    selected.holes.forEach(holeID => state = Hole.updateProperties(state, layerID, holeID, properties).updatedState);\n    selected.areas.forEach(areaID => state = Area.updateProperties(state, layerID, areaID, properties).updatedState);\n    selected.items.forEach(itemID => state = Item.updateProperties(state, layerID, itemID, properties).updatedState);\n\n    return { updatedState: state };\n  }\n\n  static setAttributesOnSelected( state, layerID, attributes ) {\n    let selected = state.getIn(['scene', 'layers', layerID, 'selected']);\n\n    selected.lines.forEach(lineID => state = Line.setAttributes( state, layerID, lineID, attributes ).updatedState);\n    selected.holes.forEach(holeID => state = Hole.setAttributes( state, layerID, holeID, attributes ).updatedState);\n    selected.items.forEach(itemID => state = Item.setAttributes( state, layerID, itemID, attributes ).updatedState);\n    //selected.areas.forEach(areaID => state = Area.setAttributes( state, layerID, areaID, attributes ).updatedState);\n\n    return { updatedState: state };\n  }\n\n}\n\nexport { Layer as default };\n","import {Map, List, fromJS} from 'immutable';\nimport {\n  Group,\n  Layer,\n  Hole,\n  Vertex\n} from './export';\nimport {\n  IDBroker,\n  NameGenerator,\n  GeometryUtils,\n  SnapUtils,\n  SnapSceneUtils,\n} from '../utils/export';\nimport {\n  MODE_IDLE,\n  MODE_WAITING_DRAWING_LINE,\n  MODE_DRAWING_LINE,\n  MODE_DRAGGING_LINE\n} from '../constants';\n\nclass Line{\n\n  static create( state, layerID, type, x0, y0, x1, y1, properties ) {\n\n    let lineID = IDBroker.acquireID();\n\n    let { updatedState: stateV0, vertex: v0 } = Vertex.add( state  , layerID, x0, y0, 'lines', lineID );\n    let { updatedState: stateV1, vertex: v1 } = Vertex.add( stateV0, layerID, x1, y1, 'lines', lineID );\n    state = stateV1;\n\n    let line = state.catalog.factoryElement(type, {\n      id: lineID,\n      name: NameGenerator.generateName('lines', state.catalog.getIn(['elements', type, 'info', 'title'])),\n      vertices: new List([v0.id, v1.id]),\n      type\n    }, properties);\n\n    console.log(state, layerID, type, x0, y0, x1, y1, properties, line);\n\n    state = state.setIn(['scene', 'layers', layerID, 'lines', lineID], line);\n\n    return {updatedState: state, line};\n  }\n\n  static select( state, layerID, lineID ){\n    state = Layer.select( state, layerID ).updatedState;\n\n    let line = state.getIn([ 'scene','layers', layerID, 'lines', lineID ]);\n\n    state = Layer.selectElement( state, layerID, 'lines', lineID ).updatedState;\n    state = Layer.selectElement( state, layerID, 'vertices', line.vertices.get(0) ).updatedState;\n    state = Layer.selectElement( state, layerID, 'vertices', line.vertices.get(1) ).updatedState;\n\n    return {updatedState: state};\n  }\n\n  static remove( state, layerID, lineID ) {\n    let line = state.getIn(['scene', 'layers', layerID, 'lines', lineID]);\n\n    if( line ) {\n      state = this.unselect( state, layerID, lineID ).updatedState;\n      line.holes.forEach(holeID => state = Hole.remove(state, layerID, holeID).updatedState);\n      state = Layer.removeElement( state, layerID, 'lines', lineID ).updatedState;\n\n      line.vertices.forEach(vertexID => state = Vertex.remove( state, layerID, vertexID, 'lines', lineID ).updatedState);\n\n      state.getIn(['scene', 'groups']).forEach( group => state = Group.removeElement(state, group.id, layerID, 'lines', lineID).updatedState );\n    }\n\n    return {updatedState: state};\n  }\n\n  static unselect( state, layerID, lineID ) {\n    let line = state.getIn([ 'scene','layers', layerID, 'lines', lineID ]);\n\n    if( line ) {\n      state = Layer.unselect( state, layerID, 'vertices', line.vertices.get(0) ).updatedState;\n      state = Layer.unselect( state, layerID, 'vertices', line.vertices.get(1) ).updatedState;\n      state = Layer.unselect( state, layerID, 'lines', lineID ).updatedState;\n    }\n\n    return {updatedState: state};\n  }\n\n  static split( state, layerID, lineID, x, y ) {\n    let line = state.getIn(['scene', 'layers', layerID, 'lines', lineID]);\n    let v0 = state.getIn(['scene', 'layers', layerID, 'vertices', line.vertices.get(0)]);\n    let v1 = state.getIn(['scene', 'layers', layerID, 'vertices', line.vertices.get(1)]);\n    let {x: x0, y: y0} = v0;\n    let {x: x1, y: y1} = v1;\n\n    let { updatedState: stateL1, line: line0 } = Line.create( state  , layerID, line.type, x0, y0, x, y, line.get('properties'));\n    let { updatedState: stateL2, line: line1 } = Line.create( stateL1, layerID, line.type, x1, y1, x, y, line.get('properties'));\n    state = stateL2;\n\n    let splitPointOffset = GeometryUtils.pointPositionOnLineSegment(x0, y0, x1, y1, x, y);\n    let minVertex = GeometryUtils.minVertex(v0, v1);\n\n    line.holes.forEach(holeID => {\n      let hole = state.getIn(['scene', 'layers', layerID, 'holes', holeID]);\n\n      let holeOffset = hole.offset;\n      if (minVertex.x === x1 && minVertex.y === y1) {\n        splitPointOffset = 1 - splitPointOffset;\n        holeOffset = 1 - hole.offset;\n      }\n\n      if (holeOffset < splitPointOffset) {\n        let offset = holeOffset / splitPointOffset;\n        if (minVertex.x === x1 && minVertex.y === y1) {\n          offset = 1 - offset;\n        }\n        state = Hole.create( state, layerID, hole.type, line0.id, offset, hole.properties ).updatedState;\n      } else {\n        let offset = (holeOffset - splitPointOffset) / (1 - splitPointOffset);\n        if (minVertex.x === x1 && minVertex.y === y1) {\n          offset = 1 - offset;\n        }\n        state = Hole.create( state, layerID, hole.type, line1.id, offset, hole.properties ).updatedState;\n      }\n    });\n\n    //add splitted lines to the original line's group\n    let lineGroups = state\n      .getIn(['scene', 'groups'])\n      .filter( group => {\n        const lines = group.getIn(['elements', layerID, 'lines']);\n        return lines && lines.contains(lineID);\n      });\n\n    lineGroups.forEach( group => {\n      state = Group.addElement( state, group.id, layerID, 'lines', line0.id ).updatedState;\n      state = Group.addElement( state, group.id, layerID, 'lines', line1.id ).updatedState;\n    });\n\n    state = Line.remove( state, layerID, lineID ).updatedState;\n\n    return { updatedState: state, lines: new List([line0, line1]) };\n  }\n\n  static addFromPoints( state, layerID, type, points, properties, holes ) {\n    points = new List(points)\n      .sort(({x: x1, y: y1}, {x: x2, y: y2}) => x1 === x2 ? y1 - y2 : x1 - x2 );\n\n    let pointsPair = points.zip(points.skip(1))\n      .filterNot(([{x: x1, y: y1}, {x: x2, y: y2}]) => x1 === x2 && y1 === y2 );\n\n    let lines = [];\n\n    pointsPair.forEach( ([{x: x1, y: y1}, {x: x2, y: y2}]) => {\n      let { updatedState: stateL, line } = this.create( state, layerID, type, x1, y1, x2, y2, properties );\n      state = stateL;\n\n      if( holes ) {\n        holes.forEach(holeWithOffsetPoint => {\n          let {x: xp, y: yp} = holeWithOffsetPoint.offsetPosition;\n\n          if (GeometryUtils.isPointOnLineSegment(x1, y1, x2, y2, xp, yp)) {\n\n            let newOffset = GeometryUtils.pointPositionOnLineSegment(x1, y1, x2, y2, xp, yp);\n\n            if (newOffset >= 0 && newOffset <= 1) {\n              state = Hole.create( state, layerID, holeWithOffsetPoint.hole.type, line.id, newOffset, holeWithOffsetPoint.hole.properties ).updatedState;\n            }\n          }\n        });\n      }\n\n      lines.push( line );\n    });\n\n    return { updatedState: state, lines: new List(lines) };\n  }\n\n  static createAvoidingIntersections( state, layerID, type, x0, y0, x1, y1, oldProperties, oldHoles ) {\n    let points = [{x: x0, y: y0}, {x: x1, y: y1}];\n\n    state = state.getIn(['scene', 'layers', layerID, 'lines']).reduce( ( reducedState, line ) => {\n      let [v0, v1] = line.vertices.map(vertexID => reducedState.getIn(['scene', 'layers', layerID, 'vertices']).get(vertexID)).toArray();\n\n      let hasCommonEndpoint = (\n        GeometryUtils.samePoints(v0, points[0]) ||\n        GeometryUtils.samePoints(v0, points[1]) ||\n        GeometryUtils.samePoints(v1, points[0]) ||\n        GeometryUtils.samePoints(v1, points[1])\n      );\n\n      let intersection = GeometryUtils.twoLineSegmentsIntersection( points[0], points[1], v0, v1 );\n\n      if (intersection.type === 'colinear') {\n        if (!oldHoles) { oldHoles = []; }\n\n        let orderedVertices = GeometryUtils.orderVertices(points);\n\n        reducedState.getIn(['scene', 'layers', layerID, 'lines', line.id, 'holes']).forEach(holeID => {\n          let hole = reducedState.getIn(['scene', 'layers', layerID, 'holes', holeID]);\n          let oldLineLength = GeometryUtils.pointsDistance(v0.x, v0.y, v1.x, v1.y);\n          let offset = GeometryUtils.samePoints( orderedVertices[1], line.vertices.get(1) ) ? ( 1 - hole.offset ) : hole.offset;\n          let offsetPosition = GeometryUtils.extendLine( v0.x, v0.y, v1.x, v1.y, oldLineLength * offset );\n\n          oldHoles.push({hole, offsetPosition});\n        });\n\n        reducedState = this.remove( reducedState, layerID, line.id ).updatedState;\n\n        points.push(v0, v1);\n      }\n\n      if (intersection.type === 'intersecting' && (!hasCommonEndpoint)) {\n        reducedState = this.split( reducedState, layerID, line.id, intersection.point.x, intersection.point.y ).updatedState;\n        points.push(intersection.point);\n      }\n\n      return reducedState;\n\n    }, state );\n\n    let { updatedState, lines } = Line.addFromPoints( state, layerID, type, points, oldProperties, oldHoles );\n\n    return { updatedState, lines };\n  }\n\n  static replaceVertex ( state, layerID, lineID, vertexIndex, x, y ) {\n    let vertexID = state.getIn(['scene', 'layers', layerID, 'lines', lineID, 'vertices', vertexIndex]);\n\n    state = Vertex.remove( state, layerID, vertexID, 'lines', lineID ).updatedState;\n    let { updatedState: stateV, vertex } = Vertex.add( state, layerID, x, y, 'lines', lineID );\n    state = stateV;\n\n    state = state.setIn(['scene', 'layers', layerID, 'lines', lineID, 'vertices', vertexIndex], vertex.id);\n    state = state.setIn(['scene', 'layers', layerID, 'lines', lineID], state.getIn(['scene', 'layers', layerID, 'lines', lineID]) );\n\n    return { updatedState: state, line: state.getIn(['scene', 'layers', layerID, 'lines', lineID]), vertex };\n  }\n\n  static selectToolDrawingLine(state, sceneComponentType) {\n    state = state.merge({\n      mode: MODE_WAITING_DRAWING_LINE,\n      drawingSupport: new Map({\n        type: sceneComponentType\n      })\n    });\n\n    return { updatedState: state };\n  }\n\n  static beginDrawingLine(state, layerID, x, y) {\n    let snapElements = SnapSceneUtils.sceneSnapElements(state.scene, new List(), state.snapMask);\n    let snap = null;\n\n    if (state.snapMask && !state.snapMask.isEmpty()) {\n      snap = SnapUtils.nearestSnap(snapElements, x, y, state.snapMask);\n      if (snap) ({x, y} = snap.point);\n\n      snapElements = snapElements.withMutations(snapElements => {\n        let a, b, c;\n        ({a, b, c} = GeometryUtils.horizontalLine(y));\n        SnapUtils.addLineSnap(snapElements, a, b, c, 10, 3, null);\n        ({a, b, c} = GeometryUtils.verticalLine(x));\n        SnapUtils.addLineSnap(snapElements, a, b, c, 10, 3, null);\n      });\n    }\n\n    let drawingSupport = state.get('drawingSupport').set('layerID', layerID);\n\n    state = Layer.unselectAll( state, layerID ).updatedState;\n\n    let { updatedState: stateL, line } = Line.create( state, layerID, drawingSupport.get('type'), x, y, x, y );\n    state = Line.select( stateL, layerID, line.id ).updatedState;\n\n    state = state.merge({\n      mode: MODE_DRAWING_LINE,\n      snapElements,\n      activeSnapElement: snap ? snap.snap : null,\n      drawingSupport\n    });\n\n    return { updatedState: state };\n  }\n\n  static updateDrawingLine(state, x, y) {\n    let snap = null;\n    if (state.snapMask && !state.snapMask.isEmpty()) {\n      snap = SnapUtils.nearestSnap(state.snapElements, x, y, state.snapMask);\n      if (snap) ({x, y} = snap.point);\n    }\n\n    let layerID = state.getIn(['drawingSupport', 'layerID']);\n    let lineID = state.getIn(['scene', 'layers', layerID, 'selected', 'lines']).first();\n\n    let { updatedState: stateLV, vertex } = Line.replaceVertex( state, layerID, lineID, 1, x, y );\n    state = stateLV;\n\n    state = this.select( state, layerID, lineID ).updatedState;\n    state = state.merge({ activeSnapElement: snap ? snap.snap : null });\n\n    return { updatedState: state };\n  }\n\n  static endDrawingLine(state, x, y) {\n\n    if (state.snapMask && !state.snapMask.isEmpty()) {\n      let snap = SnapUtils.nearestSnap(state.snapElements, x, y, state.snapMask);\n      if (snap) ({x, y} = snap.point);\n    }\n\n    let layerID = state.getIn(['drawingSupport', 'layerID']);\n    let layer = state.getIn(['scene','layers', layerID]);\n\n    let lineID = state.getIn(['scene', 'layers', layerID, 'selected', 'lines']).first();\n    let line = state.getIn(['scene', 'layers', layerID, 'lines', lineID]);\n\n    let v0 = layer.vertices.get(line.vertices.get(0));\n\n    state = Line.remove( state, layerID, lineID ).updatedState;\n    state = Line.createAvoidingIntersections( state, layerID, line.type, v0.x, v0.y, x, y ).updatedState;\n    state = Layer.detectAndUpdateAreas( state, layerID ).updatedState;\n\n    state = state.merge({\n      mode: MODE_WAITING_DRAWING_LINE,\n      snapElements: new List(),\n      activeSnapElement: null\n    });\n\n    return { updatedState: state };\n  }\n\n  static beginDraggingLine(state, layerID, lineID, x, y) {\n\n    let snapElements = SnapSceneUtils.sceneSnapElements(state.scene, new List(), state.snapMask);\n\n    let layer = state.scene.layers.get(layerID);\n    let line = layer.lines.get(lineID);\n\n    let vertex0 = layer.vertices.get(line.vertices.get(0));\n    let vertex1 = layer.vertices.get(line.vertices.get(1));\n\n    state = state.merge({\n      mode: MODE_DRAGGING_LINE,\n      snapElements,\n      draggingSupport: Map({\n        layerID, lineID,\n        startPointX: x,\n        startPointY: y,\n        startVertex0X: vertex0.x,\n        startVertex0Y: vertex0.y,\n        startVertex1X: vertex1.x,\n        startVertex1Y: vertex1.y,\n      })\n    });\n\n    return { updatedState: state };\n  }\n\n  static updateDraggingLine(state, x, y) {\n\n    let draggingSupport = state.draggingSupport;\n    let snapElements = state.snapElements;\n\n    let layerID = draggingSupport.get('layerID');\n    let lineID = draggingSupport.get('lineID');\n    let diffX = x - draggingSupport.get('startPointX');\n    let diffY = y - draggingSupport.get('startPointY');\n    let newVertex0X = draggingSupport.get('startVertex0X') + diffX;\n    let newVertex0Y = draggingSupport.get('startVertex0Y') + diffY;\n    let newVertex1X = draggingSupport.get('startVertex1X') + diffX;\n    let newVertex1Y = draggingSupport.get('startVertex1Y') + diffY;\n\n\n    let activeSnapElement = null;\n    let curSnap0 = null, curSnap1 = null;\n    if (state.snapMask && !state.snapMask.isEmpty()) {\n      curSnap0 = SnapUtils.nearestSnap(snapElements, newVertex0X, newVertex0Y, state.snapMask);\n      curSnap1 = SnapUtils.nearestSnap(snapElements, newVertex1X, newVertex1Y, state.snapMask);\n    }\n\n    let deltaX = 0, deltaY = 0;\n    if (curSnap0 && curSnap1) {\n      if (curSnap0.point.distance < curSnap1.point.distance) {\n        deltaX = curSnap0.point.x - newVertex0X;\n        deltaY = curSnap0.point.y - newVertex0Y;\n        activeSnapElement = curSnap0.snap;\n      } else {\n        deltaX = curSnap1.point.x - newVertex1X;\n        deltaY = curSnap1.point.y - newVertex1Y;\n        activeSnapElement = curSnap1.snap;\n      }\n    } else {\n      if (curSnap0) {\n        deltaX = curSnap0.point.x - newVertex0X;\n        deltaY = curSnap0.point.y - newVertex0Y;\n        activeSnapElement = curSnap0.snap;\n      }\n      if (curSnap1) {\n        deltaX = curSnap1.point.x - newVertex1X;\n        deltaY = curSnap1.point.y - newVertex1Y;\n        activeSnapElement = curSnap1.snap;\n      }\n    }\n\n    newVertex0X += deltaX;\n    newVertex0Y += deltaY;\n    newVertex1X += deltaX;\n    newVertex1Y += deltaY;\n\n    state = state.merge({\n      activeSnapElement,\n      scene: state.scene.updateIn(['layers', layerID], layer => layer.withMutations(layer => {\n        let lineVertices = layer.getIn(['lines', lineID, 'vertices']);\n        layer.updateIn(['vertices', lineVertices.get(0)], vertex => vertex.merge({x: newVertex0X, y: newVertex0Y}));\n        layer.updateIn(['vertices', lineVertices.get(1)], vertex => vertex.merge({x: newVertex1X, y: newVertex1Y}));\n        return layer;\n      }))\n    });\n\n    return { updatedState: state };\n  }\n\n  static endDraggingLine(state, x, y) {\n    let {draggingSupport} = state;\n    let layerID = draggingSupport.get('layerID');\n    let layer = state.scene.layers.get(layerID);\n    let lineID = draggingSupport.get('lineID');\n    let line = layer.lines.get(lineID);\n\n    let vertex0 = layer.vertices.get(line.vertices.get(0));\n    let vertex1 = layer.vertices.get(line.vertices.get(1));\n\n    let maxV = GeometryUtils.maxVertex(vertex0, vertex1);\n    let minV = GeometryUtils.minVertex(vertex0, vertex1);\n\n    let lineLength = GeometryUtils.verticesDistance(minV,maxV);\n    let alpha = Math.atan2(maxV.y - minV.y, maxV.x - minV.x);\n\n    let holesWithOffsetPosition = [];\n    layer.lines.get(lineID).holes.forEach(holeID => {\n      let hole = layer.holes.get(holeID);\n      let pointOnLine = lineLength * hole.offset;\n\n      let offsetPosition = {\n        x: pointOnLine * Math.cos(alpha) + minV.x,\n        y: pointOnLine * Math.sin(alpha) + minV.y\n      };\n\n      holesWithOffsetPosition.push({hole, offsetPosition});\n    });\n\n    let diffX = x - draggingSupport.get('startPointX');\n    let diffY = y - draggingSupport.get('startPointY');\n    let newVertex0X = draggingSupport.get('startVertex0X') + diffX;\n    let newVertex0Y = draggingSupport.get('startVertex0Y') + diffY;\n    let newVertex1X = draggingSupport.get('startVertex1X') + diffX;\n    let newVertex1Y = draggingSupport.get('startVertex1Y') + diffY;\n\n    if (state.snapMask && !state.snapMask.isEmpty()) {\n\n      let curSnap0 = SnapUtils.nearestSnap(state.snapElements, newVertex0X, newVertex0Y, state.snapMask);\n      let curSnap1 = SnapUtils.nearestSnap(state.snapElements, newVertex1X, newVertex1Y, state.snapMask);\n\n      let deltaX = 0, deltaY = 0;\n      if (curSnap0 && curSnap1) {\n        if (curSnap0.point.distance < curSnap1.point.distance) {\n          deltaX = curSnap0.point.x - newVertex0X;\n          deltaY = curSnap0.point.y - newVertex0Y;\n        } else {\n          deltaX = curSnap1.point.x - newVertex1X;\n          deltaY = curSnap1.point.y - newVertex1Y;\n        }\n      } else {\n        if (curSnap0) {\n          deltaX = curSnap0.point.x - newVertex0X;\n          deltaY = curSnap0.point.y - newVertex0Y;\n        }\n        if (curSnap1) {\n          deltaX = curSnap1.point.x - newVertex1X;\n          deltaY = curSnap1.point.y - newVertex1Y;\n        }\n      }\n\n      newVertex0X += deltaX;\n      newVertex0Y += deltaY;\n      newVertex1X += deltaX;\n      newVertex1Y += deltaY;\n    }\n\n    let lineGroups = state   //get groups membership if present\n      .getIn(['scene', 'groups'])\n      .filter( group => {\n        const lines = group.getIn(['elements', layerID, 'lines']);\n        return lines && lines.contains(lineID);\n      });\n\n    state = Layer.mergeEqualsVertices( state, layerID, line.vertices.get(0) ).updatedState;\n    state = Layer.mergeEqualsVertices( state, layerID, line.vertices.get(1) ).updatedState;\n\n    state = Line.remove( state, layerID, lineID ).updatedState;\n\n    if(!GeometryUtils.samePoints({newVertex0X, newVertex0Y}, {newVertex1X, newVertex1Y})) {\n      let ret = Line.createAvoidingIntersections(\n        state,\n        layerID,\n        line.type,\n        newVertex0X,\n        newVertex0Y,\n        newVertex1X,\n        newVertex1Y,\n        line.properties,\n        holesWithOffsetPosition\n      );\n\n      state = ret.updatedState;\n\n      //re-add to old line's groups if present\n      ret.lines.forEach( addedLine => {\n        lineGroups.forEach( oldLineGroup => {\n          state = Group.addElement( state, oldLineGroup.id, layerID, 'lines', addedLine.id ).updatedState;\n        });\n      });\n    }\n\n    state = Layer.detectAndUpdateAreas( state, layerID ).updatedState;\n\n    state = state.merge({\n      mode: MODE_IDLE,\n      draggingSupport: null,\n      activeSnapElement: null,\n      snapElements: new List()\n    });\n\n    return { updatedState: state };\n  }\n\n  static setProperties( state, layerID, lineID, properties ) {\n    state = state.mergeIn(['scene', 'layers', layerID, 'lines', lineID, 'properties'], properties);\n\n    return { updatedState: state };\n  }\n\n  static setJsProperties( state, layerID, lineID, properties ) {\n    return this.setProperties( state, layerID, lineID, fromJS(properties) );\n  }\n\n  static updateProperties( state, layerID, lineID, properties) {\n    properties.forEach( ( v, k ) => {\n      if( state.hasIn(['scene', 'layers', layerID, 'lines', lineID, 'properties', k]) )\n        state = state.mergeIn(['scene', 'layers', layerID, 'lines', lineID, 'properties', k], v);\n    });\n\n    return { updatedState: state };\n  }\n\n  static updateJsProperties( state, layerID, lineID, properties) {\n    return this.updateProperties( state, layerID, lineID, fromJS(properties) );\n  }\n\n  static setAttributes( state, layerID, lineID, lineAttributes ) {\n\n    let lAttr = lineAttributes.toJS();\n    let {vertexOne, vertexTwo, lineLength} = lAttr;\n\n    delete lAttr['vertexOne'];\n    delete lAttr['vertexTwo'];\n    delete lAttr['lineLength'];\n\n    state = state\n      .mergeIn(['scene', 'layers', layerID, 'lines', lineID], fromJS(lAttr))\n      .mergeIn(['scene', 'layers', layerID, 'vertices', vertexOne.id], {x: vertexOne.x, y: vertexOne.y})\n      .mergeIn(['scene', 'layers', layerID, 'vertices', vertexTwo.id], {x: vertexTwo.x, y: vertexTwo.y})\n      .mergeIn(['scene', 'layers', layerID, 'lines', lineID, 'misc'], new Map({'_unitLength': lineLength._unit}));\n\n    state = Layer.mergeEqualsVertices( state, layerID, vertexOne.id ).updatedState;\n\n    if (vertexOne.x != vertexTwo.x && vertexOne.y != vertexTwo.y) {\n      state = Layer.mergeEqualsVertices( state, layerID, vertexTwo.id ).updatedState;\n    }\n\n    state = Layer.detectAndUpdateAreas( state, layerID ).updatedState;\n\n    return { updatedState: state };\n  }\n\n  static setVerticesCoords( state, layerID, lineID, x1, y1, x2, y2 ) {\n    let line = state.getIn(['scene', 'layers', layerID, 'lines', lineID]);\n    state = Vertex.setAttributes( state, layerID, line.vertices.get(0), new Map({ x: x1, y: y1 }) ).updatedState;\n    state = Vertex.setAttributes( state, layerID, line.vertices.get(1), new Map({ x: x2, y: y2 }) ).updatedState;\n\n    return { updatedState: state };\n  }\n\n}\n\nexport { Line as default };\n","import {Map, List, fromJS} from 'immutable';\nimport {Layer, Group} from './export';\n\nimport {\n  IDBroker,\n  NameGenerator\n} from '../utils/export';\n\nimport {\n  nearestSnap,\n  addLineSegmentSnap,\n} from '../utils/snap';\n\nimport {\n  MODE_IDLE,\n  MODE_DRAWING_HOLE,\n  MODE_DRAGGING_HOLE,\n} from '../constants';\n\nimport {\n  GeometryUtils\n} from '../utils/export';\n\nclass Hole {\n\n  static create(state, layerID, type, lineID, offset, properties) {\n\n    let holeID = IDBroker.acquireID();\n\n    let hole = state.catalog.factoryElement(type, {\n      id: holeID,\n      name: NameGenerator.generateName('holes', state.catalog.getIn(['elements', type, 'info', 'title'])),\n      type,\n      offset,\n      line: lineID\n    }, properties);\n\n    state = state.setIn(['scene', 'layers', layerID, 'holes', holeID], hole);\n    state = state.updateIn(['scene', 'layers', layerID, 'lines', lineID, 'holes'],\n      holes => holes.push(holeID));\n\n    console.log(hole);\n\n    return {updatedState: state, hole};\n  }\n\n  static select(state, layerID, holeID) {\n    state = Layer.select(state, layerID).updatedState;\n    state = Layer.selectElement(state, layerID, 'holes', holeID).updatedState;\n\n    return {updatedState: state};\n  }\n\n  static remove(state, layerID, holeID) {\n    let hole = state.getIn(['scene', 'layers', layerID, 'holes', holeID]);\n    state = this.unselect(state, layerID, holeID).updatedState;\n    state = Layer.removeElement(state, layerID, 'holes', holeID).updatedState;\n\n    state = state.updateIn(['scene', 'layers', layerID, 'lines', hole.line, 'holes'], holes => {\n      let index = holes.findIndex(ID => holeID === ID);\n      return index !== -1 ? holes.remove(index) : holes;\n    });\n\n    state.getIn(['scene', 'groups']).forEach(group => state = Group.removeElement(state, group.id, layerID, 'holes', holeID).updatedState);\n\n    return {updatedState: state};\n  }\n\n  static unselect(state, layerID, holeID) {\n    state = Layer.unselect(state, layerID, 'holes', holeID).updatedState;\n\n    return {updatedState: state};\n  }\n\n  static selectToolDrawingHole(state, sceneComponentType) {\n\n    let snapElements = (new List()).withMutations(snapElements => {\n      let {lines, vertices} = state.getIn(['scene', 'layers', state.scene.selectedLayer]);\n\n      lines.forEach(line => {\n        let {x: x1, y: y1} = vertices.get(line.vertices.get(0));\n        let {x: x2, y: y2} = vertices.get(line.vertices.get(1));\n\n        addLineSegmentSnap(snapElements, x1, y1, x2, y2, 20, 1, line.id);\n      });\n    });\n\n    state = state.merge({\n      mode: MODE_DRAWING_HOLE,\n      snapElements,\n      drawingSupport: Map({\n        type: sceneComponentType\n      })\n    });\n\n    return {updatedState: state};\n  }\n\n  static updateDrawingHole(state, layerID, x, y) {\n    let catalog = state.catalog;\n\n    //calculate snap and overwrite coords if needed\n    //force snap to segment\n    let snap = nearestSnap(state.snapElements, x, y, state.snapMask.merge({SNAP_SEGMENT: true}));\n    if (snap) ({x, y} = snap.point);\n\n    let selectedHole = state.getIn(['scene', 'layers', layerID, 'selected', 'holes']).first();\n\n    if (snap) {\n      let lineID = snap.snap.related.get(0);\n\n      let vertices = state.getIn(['scene', 'layers', layerID, 'lines', lineID, 'vertices']);\n      let {x: x1, y: y1} = state.getIn(['scene', 'layers', layerID, 'vertices', vertices.get(0)]);\n      let {x: x2, y: y2} = state.getIn(['scene', 'layers', layerID, 'vertices', vertices.get(1)]);\n\n      // I need min and max vertices on this line segment\n      let minVertex = GeometryUtils.minVertex({x: x1, y: y1}, {x: x2, y: y2});\n      let maxVertex = GeometryUtils.maxVertex({x: x1, y: y1}, {x: x2, y: y2});\n      let width = catalog.factoryElement(state.drawingSupport.get('type')).properties.getIn(['width', 'length']);\n\n      // Now I need min and max possible coordinates for the hole on the line. They depend on the width of the hole\n      let lineLength = GeometryUtils.pointsDistance(x1, y1, x2, y2);\n      let alpha = GeometryUtils.absAngleBetweenTwoPoints(x1, y1, x2, y2);\n\n      let cosAlpha = GeometryUtils.cosWithThreshold(alpha, 0.0000001);\n      let sinAlpha = GeometryUtils.sinWithThreshold(alpha, 0.0000001);\n\n      let minLeftVertexHole = {\n        x: minVertex.x + width / 2 * cosAlpha,\n        y: minVertex.y + width / 2 * sinAlpha\n      };\n\n      let maxRightVertexHole = {\n        x: minVertex.x + lineLength * cosAlpha - width / 2 * cosAlpha,\n        y: minVertex.y + lineLength * sinAlpha - width / 2 * sinAlpha\n      };\n\n      let offset;\n      if (x < minLeftVertexHole.x) {\n        offset = GeometryUtils.pointPositionOnLineSegment(minVertex.x, minVertex.y,\n          maxVertex.x, maxVertex.y,\n          minLeftVertexHole.x, minLeftVertexHole.y);\n      } else if (x > maxRightVertexHole.x) {\n        offset = GeometryUtils.pointPositionOnLineSegment(minVertex.x, minVertex.y,\n          maxVertex.x, maxVertex.y,\n          maxRightVertexHole.x, maxRightVertexHole.y);\n      } else {\n\n        if (x === minLeftVertexHole.x && x === maxRightVertexHole.x) {\n          if (y < minLeftVertexHole.y) {\n            offset = GeometryUtils.pointPositionOnLineSegment(minVertex.x, minVertex.y,\n              maxVertex.x, maxVertex.y,\n              minLeftVertexHole.x, minLeftVertexHole.y);\n            offset = minVertex.x === x1 && minVertex.y === y1 ? offset : 1 - offset;\n          } else if (y > maxRightVertexHole.y) {\n            offset = GeometryUtils.pointPositionOnLineSegment(minVertex.x, minVertex.y,\n              maxVertex.x, maxVertex.y,\n              maxRightVertexHole.x, maxRightVertexHole.y);\n            offset = minVertex.x === x1 && minVertex.y === y1 ? offset : 1 - offset;\n          } else {\n            offset = GeometryUtils.pointPositionOnLineSegment(x1, y1, x2, y2, x, y);\n          }\n        } else {\n          offset = GeometryUtils.pointPositionOnLineSegment(x1, y1, x2, y2, x, y);\n        }\n      }\n\n      //if hole does exist, update\n      if (selectedHole && snap) {\n        state = state.mergeIn(['scene', 'layers', layerID, 'holes', selectedHole], {offset, line: lineID});\n\n        //remove from old line ( if present )\n        let index = state.getIn(['scene', 'layers', layerID, 'lines']).findEntry(line => {\n          return line.id !== lineID && line.get('holes').contains(selectedHole);\n        });\n\n        if (index) {\n          let removed = index[1].get('holes').filter(hl => hl !== selectedHole);\n          state = state.setIn(['scene', 'layers', layerID, 'lines', index[0], 'holes'], removed);\n        }\n\n        //add to line\n        let line_holes = state.getIn(['scene', 'layers', layerID, 'lines', lineID, 'holes']);\n        if (!line_holes.contains(selectedHole)) {\n          state = state.setIn(['scene', 'layers', layerID, 'lines', lineID, 'holes'], line_holes.push(selectedHole));\n        }\n      } else if (!selectedHole && snap) {\n        //if hole does not exist, create\n        let {updatedState: stateH, hole} = this.create(state, layerID, state.drawingSupport.get('type'), lineID, offset);\n        state = Hole.select(stateH, layerID, hole.id).updatedState;\n      }\n    }\n    //i've lost the snap while trying to drop the hole\n    else if (false && selectedHole)  //think if enable\n    {\n      state = Hole.remove(state, layerID, selectedHole).updatedState;\n    }\n\n    return {updatedState: state};\n  }\n\n  static endDrawingHole(state, layerID, x, y) {\n    state = this.updateDrawingHole(state, layerID, x, y).updatedState;\n    state = Layer.unselectAll(state, layerID).updatedState;\n\n    return {updatedState: state};\n  }\n\n  static beginDraggingHole(state, layerID, holeID, x, y) {\n    let layer = state.getIn(['scene', 'layers', layerID]);\n    let hole = layer.getIn(['holes', holeID]);\n    let line = layer.getIn(['lines', hole.line]);\n    let v0 = layer.getIn(['vertices', line.vertices.get(0)]);\n    let v1 = layer.getIn(['vertices', line.vertices.get(1)]);\n\n    let snapElements = addLineSegmentSnap(List(), v0.x, v0.y, v1.x, v1.y, 9999999, 1, null);\n\n    state = state.merge({\n      mode: MODE_DRAGGING_HOLE,\n      snapElements,\n      draggingSupport: Map({\n        layerID,\n        holeID,\n        startPointX: x,\n        startPointY: y,\n      })\n    });\n\n    return {updatedState: state};\n  }\n\n  static updateDraggingHole(state, x, y) {\n\n    //calculate snap and overwrite coords if needed\n    //force snap to segment\n    let snap = nearestSnap(state.snapElements, x, y, state.snapMask.merge({SNAP_SEGMENT: true}));\n    if (!snap) return state;\n\n    let {draggingSupport, scene} = state;\n\n    let layerID = draggingSupport.get('layerID');\n    let holeID = draggingSupport.get('holeID');\n    let startPointX = draggingSupport.get('startPointX');\n    let startPointY = draggingSupport.get('startPointY');\n\n    let layer = state.getIn(['scene', 'layers', layerID]);\n    let hole = layer.getIn(['holes', holeID]);\n    let line = layer.getIn(['lines', hole.line]);\n    let v0 = layer.getIn(['vertices', line.vertices.get(0)]);\n    let v1 = layer.getIn(['vertices', line.vertices.get(1)]);\n\n    ({x, y} = snap.point);\n\n    // I need min and max vertices on this line segment\n    let minVertex = GeometryUtils.minVertex(v0, v1);\n    let maxVertex = GeometryUtils.maxVertex(v0, v1);\n\n    // Now I need min and max possible coordinates for the hole on the line. They depend on the width of the hole\n\n    let width = hole.properties.get('width').get('length');\n    let lineLength = GeometryUtils.pointsDistance(v0.x, v0.y, v1.x, v1.y);\n    let alpha = Math.atan2(Math.abs(v1.y - v0.y), Math.abs(v1.x - v0.x));\n\n    let cosWithThreshold = (alpha) => {\n      let cos = Math.cos(alpha);\n      return cos < 0.0000001 ? 0 : cos;\n    };\n\n    let sinWithThreshold = (alpha) => {\n      let sin = Math.sin(alpha);\n      return sin < 0.0000001 ? 0 : sin;\n    };\n\n    let cosAlpha = cosWithThreshold(alpha);\n    let sinAlpha = sinWithThreshold(alpha);\n\n    let minLeftVertexHole = {\n      x: minVertex.x + width / 2 * cosAlpha,\n      y: minVertex.y + width / 2 * sinAlpha\n    };\n\n    let maxRightVertexHole = {\n      x: minVertex.x + lineLength * cosAlpha - width / 2 * cosAlpha,\n      y: minVertex.y + lineLength * sinAlpha - width / 2 * sinAlpha\n    };\n\n    // Now I need to verify if the snap vertex (with coordinates x and y) is on the line segment\n\n    let offset;\n\n    if (x < minLeftVertexHole.x) {\n      // Snap point is previous the the line\n      offset = GeometryUtils.pointPositionOnLineSegment(minVertex.x, minVertex.y,\n        maxVertex.x, maxVertex.y,\n        minLeftVertexHole.x, minLeftVertexHole.y);\n    } else {\n      // Snap point is after the line or on the line\n      if (x > maxRightVertexHole.x) {\n        offset = GeometryUtils.pointPositionOnLineSegment(minVertex.x, minVertex.y,\n          maxVertex.x, maxVertex.y,\n          maxRightVertexHole.x, maxRightVertexHole.y);\n      } else if (x === minLeftVertexHole.x && x === maxRightVertexHole.x) {\n        // I am on a vertical line, I need to check y coordinates\n        if (y < minLeftVertexHole.y) {\n          offset = GeometryUtils.pointPositionOnLineSegment(minVertex.x, minVertex.y,\n            maxVertex.x, maxVertex.y,\n            minLeftVertexHole.x, minLeftVertexHole.y);\n\n          offset = minVertex === v0 ? offset : 1 - offset;\n\n        } else if (y > maxRightVertexHole.y) {\n          offset = GeometryUtils.pointPositionOnLineSegment(minVertex.x, minVertex.y,\n            maxVertex.x, maxVertex.y,\n            maxRightVertexHole.x, maxRightVertexHole.y);\n\n          offset = minVertex === v0 ? offset : 1 - offset;\n\n        } else {\n          offset = GeometryUtils.pointPositionOnLineSegment(minVertex.x, minVertex.y,\n            maxVertex.x, maxVertex.y,\n            x, y);\n\n          offset = minVertex === v0 ? offset : 1 - offset;\n        }\n      } else {\n        offset = GeometryUtils.pointPositionOnLineSegment(minVertex.x, minVertex.y,\n          maxVertex.x, maxVertex.y,\n          x, y);\n      }\n    }\n\n    hole = hole.set('offset', offset);\n\n    state = state.merge({\n      scene: scene.mergeIn(['layers', layerID, 'holes', holeID], hole)\n    });\n\n    return {updatedState: state};\n  }\n\n  static endDraggingHole(state, x, y) {\n    state = this.updateDraggingHole(state, x, y).updatedState;\n    state = state.merge({mode: MODE_IDLE});\n\n    return {updatedState: state};\n  }\n\n  static setProperties(state, layerID, holeID, properties) {\n    state = state.setIn(['scene', 'layers', layerID, 'holes', holeID, 'properties'], properties);\n\n    return {updatedState: state};\n  }\n\n  static setJsProperties(state, layerID, holeID, properties) {\n    return this.setProperties(state, layerID, holeID, fromJS(properties));\n  }\n\n  static updateProperties(state, layerID, holeID, properties) {\n    properties.forEach((v, k) => {\n      if (state.hasIn(['scene', 'layers', layerID, 'holes', holeID, 'properties', k]))\n        state = state.mergeIn(['scene', 'layers', layerID, 'holes', holeID, 'properties', k], v);\n    });\n\n    return {updatedState: state};\n  }\n\n  static updateJsProperties(state, layerID, holeID, properties) {\n    return this.updateProperties(state, layerID, holeID, fromJS(properties));\n  }\n\n  static setAttributes(state, layerID, holeID, holesAttributes) {\n\n    let hAttr = holesAttributes.toJS();\n    let {offsetA, offsetB, offset} = hAttr;\n\n    delete hAttr['offsetA'];\n    delete hAttr['offsetB'];\n    delete hAttr['offset'];\n\n    let misc = new Map({_unitA: offsetA._unit, _unitB: offsetB._unit});\n\n    state = state\n      .mergeIn(['scene', 'layers', layerID, 'holes', holeID], fromJS(hAttr))\n      .mergeDeepIn(['scene', 'layers', layerID, 'holes', holeID], new Map({offset, misc}));\n\n    return {updatedState: state};\n  }\n\n}\n\nexport {Hole as default};\n","import { Map, List } from 'immutable';\nimport { Vertex as VertexModel } from '../models';\nimport {\n  IDBroker,\n  GeometryUtils,\n  SnapSceneUtils,\n  SnapUtils\n} from '../utils/export';\nimport {\n  MODE_DRAGGING_VERTEX,\n  MODE_IDLE\n} from '../constants';\nimport { Layer, Line, Group } from '../class/export';\n\nclass Vertex{\n\n  static add( state, layerID, x, y, relatedPrototype, relatedID ) {\n\n    let vertex = state.getIn(['scene', 'layers', layerID, 'vertices']).find(vertex => GeometryUtils.samePoints(vertex, {x, y}));\n\n    if (vertex) {\n      vertex = vertex.update(relatedPrototype, related => related.push(relatedID));\n    }\n    else {\n      vertex = new VertexModel({\n        id: IDBroker.acquireID(),\n        name: 'Vertex',\n        x, y,\n        [relatedPrototype]: new List([relatedID])\n      });\n    }\n\n    state = state.setIn(['scene', 'layers', layerID, 'vertices', vertex.id], vertex);\n\n    return { updatedState: state, vertex };\n  }\n\n  static setAttributes(state, layerID, vertexID, vertexAttributes) {\n    state = state.mergeIn(['scene', 'layers', layerID, 'vertices', vertexID ], vertexAttributes)\n\n    return { updatedState: state };\n  }\n\n  static addElement( state, layerID, vertexID, elementPrototype, elementID ) {\n    state = state.updateIn(['scene', 'layers', layerID, 'vertices', vertexID, elementPrototype], list => list.push( elementID ) );\n    return { updatedState: state };\n  }\n\n  static removeElement( state, layerID, vertexID, elementPrototype, elementID ) {\n    let elementIndex = state.getIn(['scene', 'layers', layerID, 'vertices', vertexID, elementPrototype]).findIndex( el => el === elementID );\n    if( elementIndex !== -1 ) {\n      state = state.updateIn(['scene', 'layers', layerID, 'vertices', vertexID, elementPrototype], list => list.remove( elementIndex ) );\n    }\n    return { updatedState: state };\n  }\n\n  static select( state, layerID, vertexID ){\n    state = state.setIn(['scene', 'layers', layerID, 'vertices', vertexID, 'selected'], true);\n    state = state.updateIn(['scene', 'layers', layerID, 'selected', 'vertices'], elems => elems.push(vertexID));\n\n    return { updatedState: state };\n  }\n\n  static unselect( state, layerID, vertexID ){\n    state = state.setIn(['scene', 'layers', layerID, 'vertices', vertexID, 'selected'], false);\n    state = state.updateIn(['scene', 'layers', layerID, 'selected', 'vertices'], elems => elems.filter( el => el.id !== vertexID ));\n\n    return { updatedState: state };\n  }\n\n  static remove( state, layerID, vertexID, relatedPrototype, relatedID, forceRemove ) {\n    let vertex = state.getIn(['scene', 'layers', layerID, 'vertices', vertexID]);\n\n\n    if( vertex ) {\n      if( relatedPrototype && relatedID ) vertex = vertex.update(relatedPrototype, related => {\n        let index = related.findIndex(ID => relatedID === ID);\n        return related.delete(index);\n      });\n\n      let inUse = vertex.areas.size || vertex.lines.size;\n\n      if( inUse && !forceRemove ) {\n        state = state.setIn(['scene', 'layers', layerID, 'vertices', vertexID], vertex);\n      }\n      else {\n        state = state.deleteIn(['scene', 'layers', layerID, 'vertices', vertexID]);\n      }\n    }\n\n    return { updatedState: state };\n  }\n\n  static beginDraggingVertex(state, layerID, vertexID, x, y) {\n\n    let snapElements = SnapSceneUtils.sceneSnapElements(state.scene, new List(), state.snapMask);\n\n    state = state.merge({\n      mode: MODE_DRAGGING_VERTEX,\n      snapElements,\n      draggingSupport: Map({\n        layerID,\n        vertexID,\n        previousMode: state.get('mode')\n      })\n    });\n\n    return { updatedState: state };\n  }\n\n  static updateDraggingVertex(state, x, y) {\n    let { draggingSupport, snapElements, scene } = state;\n\n    let snap = null;\n    if (state.snapMask && !state.snapMask.isEmpty()) {\n      snap = SnapUtils.nearestSnap(snapElements, x, y, state.snapMask);\n      if (snap) ({ x, y } = snap.point);\n    }\n\n    let layerID = draggingSupport.get('layerID');\n    let vertexID = draggingSupport.get('vertexID');\n    state =  state.merge({\n      activeSnapElement: snap ? snap.snap : null,\n      scene: scene.mergeIn(['layers', layerID, 'vertices', vertexID], { x, y })\n    });\n\n    return { updatedState: state };\n  }\n\n  static endDraggingVertex(state, x, y) {\n    let { draggingSupport } = state;\n    let layerID = draggingSupport.get('layerID');\n    let vertexID = draggingSupport.get('vertexID');\n    let lines = state.getIn(['scene', 'layers', layerID, 'vertices', vertexID, 'lines']);\n\n    if( lines ) {\n      state = lines.reduce(\n        ( reducedState, lineID ) =>\n        {\n          if( !reducedState.getIn(['scene', 'layers', layerID, 'lines', lineID])) return reducedState;\n\n          let v_id0 = reducedState.getIn(['scene', 'layers', layerID, 'lines', lineID, 'vertices', 0]);\n          let v_id1 = reducedState.getIn(['scene', 'layers', layerID, 'lines', lineID, 'vertices', 1]);\n          let oldVertexID = v_id0 === vertexID ? v_id1 : v_id0;\n\n          let oldVertex = reducedState.getIn(['scene', 'layers', layerID, 'vertices', oldVertexID]);\n          let vertex = reducedState.getIn(['scene', 'layers', layerID, 'vertices', vertexID]);\n\n          let oldHoles = [];\n\n          let orderedVertices = GeometryUtils.orderVertices([oldVertex, vertex]);\n\n          let holes = reducedState\n            .getIn(['scene', 'layers', layerID, 'lines', lineID, 'holes'])\n            .forEach(holeID => {\n              let hole = reducedState.getIn(['scene', 'layers', layerID, 'holes', holeID]);\n              let oldLineLength = GeometryUtils.pointsDistance(oldVertex.x, oldVertex.y, vertex.x, vertex.y);\n              let offset = GeometryUtils.samePoints( orderedVertices[1], reducedState.getIn(['scene', 'layers', layerID, 'lines', lineID, 'vertices', 1]) ) ? ( 1 - hole.offset ) : hole.offset;\n              let offsetPosition = GeometryUtils.extendLine( oldVertex.x, oldVertex.y, vertex.x, vertex.y, oldLineLength * offset );\n\n              oldHoles.push({hole, offsetPosition});\n            });\n\n          let lineType = reducedState.getIn(['scene', 'layers', layerID, 'lines', lineID, 'type']);\n          let lineProps = reducedState.getIn(['scene', 'layers', layerID, 'lines', lineID, 'properties']);\n          let lineGroups = reducedState   //get groups membership if present\n            .getIn(['scene', 'groups'])\n            .filter( group => {\n              const lines = group.getIn(['elements', layerID, 'lines']);\n              return lines && lines.contains(lineID);\n            });\n\n          reducedState = Layer.removeZeroLengthLines( reducedState, layerID ).updatedState;\n          reducedState = Layer.mergeEqualsVertices( reducedState, layerID, vertexID ).updatedState;\n          reducedState = Line.remove( reducedState, layerID, lineID ).updatedState;\n\n          if (!GeometryUtils.samePoints(oldVertex, vertex)) {\n            let ret = Line.createAvoidingIntersections(\n              reducedState,\n              layerID,\n              lineType,\n              oldVertex.x,\n              oldVertex.y,\n              vertex.x,\n              vertex.y,\n              lineProps,\n              oldHoles\n            );\n\n            reducedState = ret.updatedState;\n\n            //re-add to old line's groups if present\n            ret.lines.forEach( addedLine => {\n              lineGroups.forEach( oldLineGroup => {\n                reducedState = Group.addElement( reducedState, oldLineGroup.id, layerID, 'lines', addedLine.id ).updatedState;\n              });\n            });\n          }\n\n          return reducedState;\n        },\n        state\n      );\n    }\n\n    state = Layer.detectAndUpdateAreas( state, layerID ).updatedState;\n\n    state = state.merge({\n      mode: draggingSupport.get('previousMode'),\n      draggingSupport: null,\n      activeSnapElement: null,\n      snapElements: new List()\n    });\n\n    return { updatedState: state };\n  }\n\n}\n\nexport { Vertex as default };\n","import { fromJS } from 'immutable';\nimport { Layer, Vertex, Group } from './export';\nimport {\n  IDBroker,\n  NameGenerator\n} from '../utils/export';\n\nclass Area{\n\n  static add( state, layerID, type, verticesCoords, catalog ) {\n\n    let area;\n\n    let layer = state.getIn(['scene', 'layers', layerID]);\n\n    layer = layer.withMutations(layer => {\n      let areaID = IDBroker.acquireID();\n\n      let vertices = verticesCoords.map( ( v ) => Vertex.add( state, layerID, v.x, v.y, 'areas', areaID).vertex.id );\n\n      area = catalog.factoryElement(type, {\n        id: areaID,\n        name: NameGenerator.generateName('areas', catalog.getIn(['elements', type, 'info', 'title'])),\n        type,\n        prototype: 'areas',\n        vertices\n      });\n\n      layer.setIn(['areas', areaID], area);\n    });\n\n    state = state.setIn(['scene', 'layers', layerID], layer);\n\n    return { updatedState: state, area };\n  }\n\n  static select( state, layerID, areaID ){\n    state = Layer.select( state, layerID ).updatedState;\n    state = Layer.selectElement( state, layerID, 'areas', areaID ).updatedState;\n\n    return {updatedState: state};\n  }\n\n  static remove( state, layerID, areaID ) {\n\n    let area = state.getIn(['scene', 'layers', layerID, 'areas', areaID]);\n\n    if( area.get('selected') === true ) state = this.unselect( state, layerID, areaID ).updatedState;\n\n    area.vertices.forEach(vertexID => { state = Vertex.remove( state, layerID, vertexID, 'areas', areaID).updatedState; });\n\n    state = state.deleteIn(['scene', 'layers', layerID, 'areas', areaID]);\n\n    state.getIn(['scene', 'groups']).forEach( group => state = Group.removeElement(state, group.id, layerID, 'areas', areaID).updatedState );\n\n    return {updatedState: state};\n  }\n\n  static unselect( state, layerID, areaID ) {\n    state = Layer.unselect( state, layerID, 'areas', areaID ).updatedState;\n\n    return {updatedState: state};\n  }\n\n  static setProperties( state, layerID, areaID, properties ) {\n    state = state.mergeIn(['scene', 'layers', layerID, 'areas', areaID, 'properties'], properties);\n\n    return { updatedState: state };\n  }\n\n  static setJsProperties( state, layerID, areaID, properties ) {\n    return this.setProperties( state, layerID, areaID, fromJS(properties) );\n  }\n\n  static updateProperties( state, layerID, areaID, properties) {\n    properties.forEach( ( v, k ) => {\n      if( state.hasIn(['scene', 'layers', layerID, 'areas', areaID, 'properties', k]) )\n        state = state.mergeIn(['scene', 'layers', layerID, 'areas', areaID, 'properties', k], v);\n    });\n\n    return { updatedState: state };\n  }\n\n  static updateJsProperties( state, layerID, areaID, properties) {\n    return this.updateProperties( state, layerID, areaID, fromJS(properties) );\n  }\n\n  static setAttributes( state ) {\n    return { updatedState: state };\n  }\n\n}\n\nexport { Area as default };\n","import { Layer, Group } from './export';\nimport {\n  IDBroker,\n  NameGenerator\n} from '../utils/export';\nimport { Map, fromJS } from 'immutable';\n\nimport {\n  MODE_IDLE,\n  MODE_DRAWING_ITEM,\n  MODE_DRAGGING_ITEM,\n  MODE_ROTATING_ITEM\n} from '../constants';\n\nclass Item{\n\n  static create( state, layerID, type, x, y, width, height, rotation ) {\n    let itemID = IDBroker.acquireID();\n\n    let item = state.catalog.factoryElement(type, {\n      id: itemID,\n      name: NameGenerator.generateName('items', state.catalog.getIn(['elements', type, 'info', 'title'])),\n      type,\n      height,\n      width,\n      x,\n      y,\n      rotation\n    });\n\n    state = state.setIn(['scene', 'layers', layerID, 'items', itemID], item);\n\n    return { updatedState: state, item };\n  }\n\n  static select( state, layerID, itemID ){\n    state = Layer.select( state, layerID ).updatedState;\n    state = Layer.selectElement( state, layerID, 'items', itemID ).updatedState;\n\n    return {updatedState: state};\n  }\n\n  static remove( state, layerID, itemID ) {\n    state = this.unselect( state, layerID, itemID ).updatedState;\n    state = Layer.removeElement( state, layerID, 'items', itemID ).updatedState;\n\n    state.getIn(['scene', 'groups']).forEach( group => state = Group.removeElement(state, group.id, layerID, 'items', itemID).updatedState );\n\n    return { updatedState: state };\n  }\n\n  static unselect( state, layerID, itemID ) {\n    state = Layer.unselect( state, layerID, 'items', itemID ).updatedState;\n\n    return { updatedState: state };\n  }\n\n  static selectToolDrawingItem(state, sceneComponentType) {\n    state = state.merge({\n      mode: MODE_DRAWING_ITEM,\n      drawingSupport: new Map({\n        type: sceneComponentType\n      })\n    });\n\n    return { updatedState: state };\n  }\n\n  static updateDrawingItem(state, layerID, x, y) {\n    if (state.hasIn(['drawingSupport','currentID'])) {\n      state = state.updateIn(['scene', 'layers', layerID, 'items', state.getIn(['drawingSupport','currentID'])], item => item.merge({x, y}));\n    }\n    else {\n      let { updatedState: stateI, item } = this.create( state, layerID, state.getIn(['drawingSupport','type']), x, y, 200, 100, 0);\n      state = Item.select( stateI, layerID, item.id ).updatedState;\n      state = state.setIn(['drawingSupport','currentID'], item.id);\n    }\n\n    return { updatedState: state };\n  }\n\n  static endDrawingItem(state, layerID, x, y) {\n    let catalog = state.catalog;\n    state = this.updateDrawingItem(state, layerID, x, y, catalog).updatedState;\n    state = Layer.unselectAll( state, layerID ).updatedState;\n    state =  state.merge({\n      drawingSupport: Map({\n        type: state.drawingSupport.get('type')\n      })\n    });\n\n    return { updatedState: state };\n  }\n\n  static beginDraggingItem(state, layerID, itemID, x, y) {\n\n    let item = state.getIn(['scene', 'layers', layerID, 'items', itemID]);\n\n    state = state.merge({\n      mode: MODE_DRAGGING_ITEM,\n      draggingSupport: Map({\n        layerID,\n        itemID,\n        startPointX: x,\n        startPointY: y,\n        originalX: item.x,\n        originalY: item.y\n      })\n    });\n\n    return { updatedState: state };\n  }\n\n  static updateDraggingItem(state, x, y) {\n    let {draggingSupport, scene} = state;\n\n    let layerID = draggingSupport.get('layerID');\n    let itemID = draggingSupport.get('itemID');\n    let startPointX = draggingSupport.get('startPointX');\n    let startPointY = draggingSupport.get('startPointY');\n    let originalX = draggingSupport.get('originalX');\n    let originalY = draggingSupport.get('originalY');\n\n    let diffX = startPointX - x;\n    let diffY = startPointY - y;\n\n    let item = scene.getIn(['layers', layerID, 'items', itemID]);\n    item = item.merge({\n      x: originalX - diffX,\n      y: originalY - diffY\n    });\n\n    state = state.merge({\n      scene: scene.mergeIn(['layers', layerID, 'items', itemID], item)\n    });\n\n    return { updatedState: state };\n  }\n\n  static endDraggingItem(state, x, y) {\n    state = this.updateDraggingItem(state, x, y).updatedState;\n    state = state.merge({ mode: MODE_IDLE });\n\n    return { updatedState: state };\n  }\n\n  static beginRotatingItem(state, layerID, itemID, x, y) {\n    state = state.merge({\n      mode: MODE_ROTATING_ITEM,\n      rotatingSupport: Map({\n        layerID,\n        itemID\n      })\n    });\n\n    return { updatedState: state };\n  }\n\n  static updateRotatingItem(state, x, y) {\n    let {rotatingSupport, scene} = state;\n\n    let layerID = rotatingSupport.get('layerID');\n    let itemID = rotatingSupport.get('itemID');\n    let item = state.getIn(['scene', 'layers', layerID, 'items', itemID]);\n\n    let deltaX = x - item.x;\n    let deltaY = y - item.y;\n    let rotation = Math.atan2(deltaY, deltaX) * 180 / Math.PI - 90;\n\n    if (-5 < rotation && rotation < 5) rotation = 0;\n    if (-95 < rotation && rotation < -85) rotation = -90;\n    if (-185 < rotation && rotation < -175) rotation = -180;\n    if (85 < rotation && rotation < 90) rotation = 90;\n    if (-270 < rotation && rotation < -265) rotation = 90;\n\n    item = item.merge({\n      rotation,\n    });\n\n    state = state.merge({\n      scene: scene.mergeIn(['layers', layerID, 'items', itemID], item)\n    });\n\n    return { updatedState: state };\n  }\n\n  static endRotatingItem(state, x, y) {\n    state = this.updateRotatingItem(state, x, y).updatedState;\n    state = state.merge({ mode: MODE_IDLE });\n\n    return { updatedState: state };\n  }\n\n  static setProperties( state, layerID, itemID, properties ) {\n    state = state.mergeIn(['scene', 'layers', layerID, 'items', itemID, 'properties'], properties);\n\n    return { updatedState: state };\n  }\n\n  static setJsProperties( state, layerID, itemID, properties ) {\n    return this.setProperties( state, layerID, itemID, fromJS(properties) );\n  }\n\n  static updateProperties( state, layerID, itemID, properties) {\n    properties.forEach( ( v, k ) => {\n      if( state.hasIn(['scene', 'layers', layerID, 'items', itemID, 'properties', k]) )\n        state = state.mergeIn(['scene', 'layers', layerID, 'items', itemID, 'properties', k], v);\n    });\n\n    return { updatedState: state };\n  }\n\n  static updateJsProperties( state, layerID, itemID, properties) {\n    return this.updateProperties( state, layerID, itemID, fromJS(properties) );\n  }\n\n  static setAttributes( state, layerID, itemID, itemAttributes) {\n    state = state.mergeIn(['scene', 'layers', layerID, 'items', itemID], itemAttributes);\n    return { updatedState: state };\n  }\n\n  static setJsAttributes( state, layerID, itemID, itemAttributes) {\n    itemAttributes = fromJS(itemAttributes);\n    return this.setAttributes(state, layerID, itemID, itemAttributes);\n  }\n\n}\n\nexport { Item as default };\n","import { IDBroker } from '../utils/export';\n\nclass HorizontalGuide {\n  static create(state, coordinate) {\n    let hGuideID = IDBroker.acquireID();\n    state = state.setIn(['scene', 'guides', 'horizontal', hGuideID], coordinate);\n\n    return { updatedState: state };\n  }\n\n  static remove(state, hGuideID) {\n    state = state.deleteIn(['scene', 'guides', 'horizontal', hGuideID]);\n\n    return { updatedState: state };\n  }\n};\n\nclass VerticalGuide {\n  static create(state, coordinate) {\n    let vGuideID = IDBroker.acquireID();\n    state = state.setIn(['scene', 'guides', 'vertical', vGuideID], coordinate);\n\n    return { updatedState: state };\n  }\n\n  static remove(state, vGuideID) {\n    state = state.deleteIn(['scene', 'guides', 'vertical', vGuideID]);\n\n    return { updatedState: state };\n  }\n};\n\nclass CircularGuide {\n};\n\nexport {\n  HorizontalGuide,\n  VerticalGuide,\n  CircularGuide\n};\n\nexport default {\n  HorizontalGuide,\n  VerticalGuide,\n  CircularGuide\n};\n","import { Hole } from '../class/export';\nimport { history } from '../utils/export';\nimport {\n  SELECT_TOOL_DRAWING_HOLE,\n  UPDATE_DRAWING_HOLE,\n  END_DRAWING_HOLE,\n  BEGIN_DRAGGING_HOLE,\n  UPDATE_DRAGGING_HOLE,\n  END_DRAGGING_HOLE,\n  SELECT_HOLE,\n} from '../constants';\n\nexport default function (state, action) {\n  switch (action.type) {\n    case SELECT_TOOL_DRAWING_HOLE:\n      state = state.merge({ sceneHistory: history.historyPush(state.sceneHistory, state.scene) });\n      return Hole.selectToolDrawingHole(state, action.sceneComponentType).updatedState;\n\n    case UPDATE_DRAWING_HOLE:\n      return Hole.updateDrawingHole(state, action.layerID, action.x, action.y).updatedState;\n\n    case END_DRAWING_HOLE:\n      state = state.merge({ sceneHistory: history.historyPush(state.sceneHistory, state.scene) });\n      return Hole.endDrawingHole(state, action.layerID, action.x, action.y).updatedState;\n\n    case BEGIN_DRAGGING_HOLE:\n      state = state.merge({ sceneHistory: history.historyPush(state.sceneHistory, state.scene) });\n      return Hole.beginDraggingHole(state, action.layerID, action.holeID, action.x, action.y).updatedState;\n\n    case UPDATE_DRAGGING_HOLE:\n      return Hole.updateDraggingHole(state, action.x, action.y).updatedState;\n\n    case END_DRAGGING_HOLE:\n      state = state.merge({ sceneHistory: history.historyPush(state.sceneHistory, state.scene) });\n      return Hole.endDraggingHole(state, action.x, action.y).updatedState;\n\n    case SELECT_HOLE:\n      return Hole.select( state, action.layerID, action.holeID ).updatedState;\n\n    default:\n      return state;\n  }\n}\n","import { Item } from '../class/export';\nimport { history } from '../utils/export';\nimport {\n  SELECT_TOOL_DRAWING_ITEM,\n  UPDATE_DRAWING_ITEM,\n  END_DRAWING_ITEM,\n  BEGIN_DRAGGING_ITEM,\n  UPDATE_DRAGGING_ITEM,\n  END_DRAGGING_ITEM,\n  BEGIN_ROTATING_ITEM,\n  UPDATE_ROTATING_ITEM,\n  END_ROTATING_ITEM,\n  SELECT_ITEM\n} from '../constants';\n\nexport default function (state, action) {\n  switch (action.type) {\n    case SELECT_ITEM:\n      return Item.select(state, action.layerID, action.itemID).updatedState;\n\n    case SELECT_TOOL_DRAWING_ITEM:\n      state = state.merge({ sceneHistory: history.historyPush(state.sceneHistory, state.scene) });\n      return Item.selectToolDrawingItem(state, action.sceneComponentType).updatedState;\n\n    case UPDATE_DRAWING_ITEM:\n      return Item.updateDrawingItem(state, action.layerID, action.x, action.y).updatedState;\n\n    case END_DRAWING_ITEM:\n      state = state.merge({ sceneHistory: history.historyPush(state.sceneHistory, state.scene) });\n      return Item.endDrawingItem(state, action.layerID, action.x, action.y).updatedState;\n\n    case BEGIN_DRAGGING_ITEM:\n      state = state.merge({ sceneHistory: history.historyPush(state.sceneHistory, state.scene) });\n      return Item.beginDraggingItem(state, action.layerID, action.itemID, action.x, action.y).updatedState;\n\n    case UPDATE_DRAGGING_ITEM:\n      return Item.updateDraggingItem(state, action.x, action.y).updatedState;\n\n    case END_DRAGGING_ITEM:\n      state = state.merge({ sceneHistory: history.historyPush(state.sceneHistory, state.scene) });\n      return Item.endDraggingItem(state, action.x, action.y).updatedState;\n\n    case BEGIN_ROTATING_ITEM:\n      state = state.merge({ sceneHistory: history.historyPush(state.sceneHistory, state.scene) });\n      return Item.beginRotatingItem(state, action.layerID, action.itemID, action.x, action.y).updatedState;\n\n    case UPDATE_ROTATING_ITEM:\n      return Item.updateRotatingItem(state, action.x, action.y).updatedState;\n\n    case END_ROTATING_ITEM:\n      state = state.merge({ sceneHistory: history.historyPush(state.sceneHistory, state.scene) });\n      return Item.endRotatingItem(state, action.x, action.y).updatedState;\n\n    default:\n      return state;\n  }\n}\n","import { Line } from '../class/export';\nimport { history } from '../utils/export';\nimport {\n  SELECT_TOOL_DRAWING_LINE,\n  BEGIN_DRAWING_LINE,\n  UPDATE_DRAWING_LINE,\n  END_DRAWING_LINE,\n  BEGIN_DRAGGING_LINE,\n  UPDATE_DRAGGING_LINE,\n  END_DRAGGING_LINE,\n  SELECT_LINE\n} from '../constants';\n\nexport default function (state, action) {\n\n  switch (action.type) {\n    case SELECT_TOOL_DRAWING_LINE:\n      return Line.selectToolDrawingLine(state, action.sceneComponentType).updatedState;\n\n    case BEGIN_DRAWING_LINE:\n      state = state.merge({ sceneHistory: history.historyPush(state.sceneHistory, state.scene) });\n      return Line.beginDrawingLine(state, action.layerID, action.x, action.y).updatedState;\n\n    case UPDATE_DRAWING_LINE:\n      return Line.updateDrawingLine(state, action.x, action.y).updatedState;\n\n    case END_DRAWING_LINE:\n      state = state.merge({ sceneHistory: history.historyPush(state.sceneHistory, state.scene) });\n      return Line.endDrawingLine(state, action.x, action.y).updatedState;\n\n    case BEGIN_DRAGGING_LINE:\n      state = state.merge({ sceneHistory: history.historyPush(state.sceneHistory, state.scene) });\n      return Line.beginDraggingLine(state, action.layerID, action.lineID, action.x, action.y).updatedState;\n\n    case UPDATE_DRAGGING_LINE:\n      return Line.updateDraggingLine(state, action.x, action.y).updatedState;\n\n    case END_DRAGGING_LINE:\n      state = state.merge({ sceneHistory: history.historyPush(state.sceneHistory, state.scene) });\n      return Line.endDraggingLine(state, action.x, action.y).updatedState;\n\n    case SELECT_LINE:\n      return Line.select(state, action.layerID, action.lineID).updatedState;\n\n    default:\n      return state;\n  }\n}\n","import { GROUP_ACTIONS } from '../constants';\nimport { Group } from '../class/export';\nimport { history } from '../utils/export';\n\nexport default function (state, action) {\n\n  state = state.merge({ sceneHistory: history.historyPush(state.sceneHistory, state.scene) });\n\n  switch (action.type) {\n    case GROUP_ACTIONS.ADD_GROUP:\n      return Group.create(state).updatedState;\n\n    case GROUP_ACTIONS.ADD_GROUP_FROM_SELECTED:\n      return Group.createFromSelectedElements(state).updatedState;\n\n    case GROUP_ACTIONS.SELECT_GROUP:\n      return Group.select(state, action.groupID).updatedState;\n\n    case GROUP_ACTIONS.UNSELECT_GROUP:\n      return Group.unselect(state, action.groupID).updatedState;\n\n    case GROUP_ACTIONS.ADD_TO_GROUP:\n      return Group.addElement(state, action.groupID, action.layerID, action.elementPrototype, action.elementID).updatedState;\n\n    case GROUP_ACTIONS.REMOVE_FROM_GROUP:\n      return Group.removeElement(state, action.groupID, action.layerID, action.elementPrototype, action.elementID).updatedState;\n\n    case GROUP_ACTIONS.SET_GROUP_ATTRIBUTES:\n      return Group.setAttributes(state, action.groupID, action.attributes).updatedState;\n\n    case GROUP_ACTIONS.SET_GROUP_PROPERTIES:\n      return Group.setProperties(state, action.groupID, action.properties).updatedState;\n\n    case GROUP_ACTIONS.SET_GROUP_BARYCENTER:\n      return Group.setBarycenter(state, action.groupID, action.barycenter.get('x'), action.barycenter.get('y')).updatedState;\n\n    case GROUP_ACTIONS.REMOVE_GROUP:\n      return Group.remove(state, action.groupID).updatedState;\n\n    case GROUP_ACTIONS.REMOVE_GROUP_AND_DELETE_ELEMENTS:\n      return Group.removeAndDeleteElements(state, action.groupID).updatedState;\n\n    case GROUP_ACTIONS.GROUP_TRANSLATE:\n      return Group.translate(state, action.groupID, action.x, action.y).updatedState;\n\n    case GROUP_ACTIONS.GROUP_ROTATE:\n      return Group.rotate(state, action.groupID, action.rotation).updatedState;\n\n    default:\n      return state;\n  }\n}\n\n","import { history } from '../utils/export';\nimport {\n  LOAD_PROJECT,\n  NEW_PROJECT,\n  OPEN_CATALOG,\n  SELECT_TOOL_EDIT,\n  MODE_IDLE,\n  UNSELECT_ALL,\n  SET_PROPERTIES,\n  SET_ITEMS_ATTRIBUTES,\n  SET_LINES_ATTRIBUTES,\n  SET_HOLES_ATTRIBUTES,\n  REMOVE,\n  UNDO,\n  ROLLBACK,\n  SET_PROJECT_PROPERTIES,\n  OPEN_PROJECT_CONFIGURATOR,\n  INIT_CATALOG,\n  UPDATE_MOUSE_COORDS,\n  UPDATE_ZOOM_SCALE,\n  TOGGLE_SNAP,\n  CHANGE_CATALOG_PAGE,\n  GO_BACK_TO_CATALOG_PAGE,\n  THROW_ERROR,\n  THROW_WARNING,\n  COPY_PROPERTIES,\n  PASTE_PROPERTIES,\n  PUSH_LAST_SELECTED_CATALOG_ELEMENT_TO_HISTORY,\n  ALTERATE_STATE,\n  SET_MODE,\n  ADD_HORIZONTAL_GUIDE,\n  ADD_VERTICAL_GUIDE,\n  ADD_CIRCULAR_GUIDE,\n  REMOVE_HORIZONTAL_GUIDE,\n  REMOVE_VERTICAL_GUIDE,\n  REMOVE_CIRCULAR_GUIDE\n} from '../constants';\n\nimport { Project } from '../class/export';\n\nexport default function (state, action) {\n\n  switch (action.type) {\n    case NEW_PROJECT:\n      return Project.newProject(state).updatedState;\n\n    case LOAD_PROJECT:\n      return Project.loadProject(state, action.sceneJSON).updatedState;\n\n    case OPEN_CATALOG:\n      return Project.openCatalog(state).updatedState;\n\n    case CHANGE_CATALOG_PAGE:\n      return Project.changeCatalogPage( state, action.oldPage, action.newPage ).updatedState;\n\n    case GO_BACK_TO_CATALOG_PAGE:\n      return Project.goBackToCatalogPage( state, action.newPage ).updatedState;\n\n    case SELECT_TOOL_EDIT:\n      return Project.setMode(state, MODE_IDLE).updatedState;\n\n    case UNSELECT_ALL:\n      return Project.unselectAll(state).updatedState;\n\n    case SET_PROPERTIES:\n      state = state.merge({ sceneHistory: history.historyPush(state.sceneHistory, state.scene) });\n      return Project.setProperties(state, state.getIn(['scene', 'selectedLayer']), action.properties).updatedState;\n\n    case SET_ITEMS_ATTRIBUTES:\n      state = state.merge({ sceneHistory: history.historyPush(state.sceneHistory, state.scene) });\n      return Project.setItemsAttributes(state, action.itemsAttributes).updatedState;\n\n    case SET_LINES_ATTRIBUTES:\n      state = state.merge({ sceneHistory: history.historyPush(state.sceneHistory, state.scene) });\n      return Project.setLinesAttributes(state, action.linesAttributes).updatedState;\n\n    case SET_HOLES_ATTRIBUTES:\n      state = state.merge({ sceneHistory: history.historyPush(state.sceneHistory, state.scene) });\n      return Project.setHolesAttributes(state, action.holesAttributes).updatedState;\n\n    case REMOVE:\n      state = state.merge({ sceneHistory: history.historyPush(state.sceneHistory, state.scene) });\n      return Project.remove(state).updatedState;\n\n    case UNDO:\n      return Project.undo(state).updatedState;\n\n    case ROLLBACK:\n      return Project.rollback(state).updatedState;\n\n    case SET_PROJECT_PROPERTIES:\n      state = state.merge({ sceneHistory: history.historyPush(state.sceneHistory, state.scene) });\n      return Project.setProjectProperties(state, action.properties).updatedState;\n\n    case OPEN_PROJECT_CONFIGURATOR:\n      state = state.merge({ sceneHistory: history.historyPush(state.sceneHistory, state.scene) });\n      return Project.openProjectConfigurator(state).updatedState;\n\n    case INIT_CATALOG:\n      return Project.initCatalog(state, action.catalog).updatedState;\n\n    case UPDATE_MOUSE_COORDS:\n      return Project.updateMouseCoord(state, action.coords).updatedState;\n\n    case UPDATE_ZOOM_SCALE:\n      return Project.updateZoomScale(state, action.scale).updatedState;\n\n    case TOGGLE_SNAP:\n      return Project.toggleSnap(state, action.mask).updatedState;\n\n    case THROW_ERROR:\n      return Project.throwError(state, action.error).updatedState;\n\n    case THROW_WARNING:\n      return Project.throwWarning(state, action.warning).updatedState;\n\n    case COPY_PROPERTIES:\n      return Project.copyProperties(state, action.properties).updatedState;\n\n    case PASTE_PROPERTIES:\n      state = state.merge({ sceneHistory: history.historyPush(state.sceneHistory, state.scene) });\n      return Project.pasteProperties(state).updatedState;\n\n    case PUSH_LAST_SELECTED_CATALOG_ELEMENT_TO_HISTORY:\n      return Project.pushLastSelectedCatalogElementToHistory(state, action.element).updatedState;\n\n    case ALTERATE_STATE:\n      return Project.setAlterate( state ).updatedState;\n    \n    case SET_MODE:\n      return Project.setMode(state, action.mode).updatedState;\n    \n    case ADD_HORIZONTAL_GUIDE:\n      state = state.merge({ sceneHistory: history.historyPush(state.sceneHistory, state.scene) });\n      return Project.addHorizontalGuide(state, action.coordinate).updatedState;\n    \n    case ADD_VERTICAL_GUIDE:\n      return Project.addVerticalGuide(state, action.coordinate).updatedState;\n    \n    case ADD_CIRCULAR_GUIDE:\n      return Project.addCircularGuide(state, action.x, action.y, action.radius).updatedState;\n\n    case REMOVE_HORIZONTAL_GUIDE:\n      return Project.removeHorizontalGuide(state, action.guideID).updatedState;\n\n    case REMOVE_VERTICAL_GUIDE:\n      return Project.removeVerticalGuide(state, action.guideID).updatedState;\n\n    case REMOVE_CIRCULAR_GUIDE:\n      return Project.removeCircularGuide(state, action.guideID).updatedState;\n\n    default:\n      return state;\n\n  }\n}\n","import { Layer } from '../class/export';\nimport { history } from '../utils/export';\nimport {\n  ADD_LAYER,\n  SELECT_LAYER,\n  SET_LAYER_PROPERTIES,\n  REMOVE_LAYER\n} from '../constants';\n\nexport default function (state, action) {\n\n  state = state.merge({ sceneHistory: history.historyPush(state.sceneHistory, state.scene) });\n\n  switch (action.type) {\n    case ADD_LAYER:\n      return Layer.create( state, action.name, action.altitude).updatedState;\n\n    case SELECT_LAYER:\n      return Layer.select( state, action.layerID ).updatedState;\n\n    case SET_LAYER_PROPERTIES:\n      return Layer.setProperties( state, action.layerID, action.properties ).updatedState;\n\n    case REMOVE_LAYER:\n      return Layer.remove( state, action.layerID ).updatedState;\n\n    default:\n      return state;\n  }\n}\n","import {\n  BEGIN_DRAGGING_VERTEX,\n  UPDATE_DRAGGING_VERTEX,\n  END_DRAGGING_VERTEX\n} from '../constants';\nimport { Vertex } from '../class/export';\n\nexport default function (state, action) {\n  switch (action.type) {\n    case BEGIN_DRAGGING_VERTEX:\n      return Vertex.beginDraggingVertex( state, action.layerID, action.vertexID, action.x, action.y ).updatedState;\n\n    case UPDATE_DRAGGING_VERTEX:\n      return Vertex.updateDraggingVertex( state, action.x, action.y ).updatedState;\n\n    case END_DRAGGING_VERTEX:\n      return Vertex.endDraggingVertex( state, action.x, action.y ).updatedState;\n\n    default:\n      return state;\n  }\n}\n","import {\n  UPDATE_2D_CAMERA,\n  SELECT_TOOL_PAN,\n  SELECT_TOOL_ZOOM_IN,\n  SELECT_TOOL_ZOOM_OUT,\n  MODE_2D_PAN,\n  MODE_2D_ZOOM_IN,\n  MODE_2D_ZOOM_OUT\n} from '../constants';\n\nexport default function (state, action) {\n  switch (action.type) {\n    case UPDATE_2D_CAMERA:\n      return state.merge({viewer2D: action.value});\n\n    case SELECT_TOOL_PAN:\n      return state.set('mode', MODE_2D_PAN);\n\n    case SELECT_TOOL_ZOOM_IN:\n      return state.set('mode', MODE_2D_ZOOM_IN);\n\n    case SELECT_TOOL_ZOOM_OUT:\n      return state.set('mode', MODE_2D_ZOOM_OUT);\n  }\n}\n","import {\n  MODE_3D_VIEW,\n  MODE_3D_FIRST_PERSON,\n  SELECT_TOOL_3D_VIEW,\n  SELECT_TOOL_3D_FIRST_PERSON\n} from '../constants';\nimport { Project } from '../class/export';\nimport { history } from '../utils/export';\n\nexport default function (state, action) {\n\n  state = state.merge({ sceneHistory: history.historyPush(state.sceneHistory, state.scene) });\n\n  switch (action.type) {\n    case SELECT_TOOL_3D_VIEW:\n      state = Project.rollback( state ).updatedState;\n      state = Project.setMode( state, MODE_3D_VIEW ).updatedState;\n      return state;\n\n    case SELECT_TOOL_3D_FIRST_PERSON:\n      state = Project.rollback( state ).updatedState;\n      state = Project.setMode( state, MODE_3D_FIRST_PERSON ).updatedState;\n      return state;\n\n    default:\n      return state;\n  }\n}\n","import React, {Component} from 'react';\nimport PropTypes from 'prop-types';\nimport {bindActionCreators} from 'redux';\nimport {connect} from 'react-redux';\n\nimport Translator from './translator/translator';\nimport Catalog from './catalog/catalog';\nimport actions from './actions/export';\nimport {objectsMap} from './utils/objects-utils';\nimport {\n  ToolbarComponents,\n  Content,\n  SidebarComponents,\n  FooterBarComponents\n} from './components/export';\nimport {VERSION} from './version';\nimport './styles/export';\n\nconst {Toolbar} = ToolbarComponents;\nconst {Sidebar} = SidebarComponents;\nconst {FooterBar} = FooterBarComponents;\n\nconst toolbarW = 50;\nconst sidebarW = 300;\nconst footerBarH= 20;\n\nconst wrapperStyle = {\n  display: 'flex',\n  flexFlow: 'row nowrap'\n};\n\nclass ReactPlanner extends Component {\n\n  getChildContext() {\n    return {\n      ...objectsMap(actions, actionNamespace => this.props[actionNamespace]),\n      translator: this.props.translator,\n      catalog: this.props.catalog,\n    }\n  }\n\n  componentWillMount() {\n    let {store} = this.context;\n    let {projectActions, catalog, stateExtractor, plugins} = this.props;\n    plugins.forEach(plugin => plugin(store, stateExtractor));\n    projectActions.initCatalog(catalog);\n  }\n\n  componentWillReceiveProps(nextProps) {\n    let {stateExtractor, state, projectActions, catalog} = nextProps;\n    let plannerState = stateExtractor(state);\n    let catalogReady = plannerState.getIn(['catalog', 'ready']);\n    if (!catalogReady) {\n      projectActions.initCatalog(catalog);\n    }\n  }\n\n  render() {\n    let {width, height, state, stateExtractor, ...props} = this.props;\n\n    let contentW = width - toolbarW - sidebarW;\n    let toolbarH = height - footerBarH;\n    let contentH = height - footerBarH;\n    let sidebarH = height - footerBarH;\n\n    let extractedState = stateExtractor(state);\n\n    return (\n      <div style={{...wrapperStyle, height}}>\n        <Toolbar width={toolbarW} height={toolbarH} state={extractedState} {...props} />\n        <Content width={contentW} height={contentH} state={extractedState} {...props} onWheel={event => event.preventDefault()} />\n        <Sidebar width={sidebarW} height={sidebarH} state={extractedState} {...props} />\n        <FooterBar width={width} height={footerBarH} state={extractedState} {...props} />\n      </div>\n    );\n  }\n}\n\nReactPlanner.propTypes = {\n  translator: PropTypes.instanceOf(Translator),\n  catalog: PropTypes.instanceOf(Catalog),\n  allowProjectFileSupport: PropTypes.bool,\n  plugins: PropTypes.arrayOf(PropTypes.func),\n  autosaveKey: PropTypes.string,\n  autosaveDelay: PropTypes.number,\n  width: PropTypes.number.isRequired,\n  height: PropTypes.number.isRequired,\n  stateExtractor: PropTypes.func.isRequired,\n  toolbarButtons: PropTypes.array,\n  sidebarComponents: PropTypes.array,\n  footerbarComponents: PropTypes.array,\n  customContents: PropTypes.object,\n  softwareSignature: PropTypes.string\n};\n\nReactPlanner.contextTypes = {\n  store: PropTypes.object.isRequired,\n};\n\nReactPlanner.childContextTypes = {\n  ...objectsMap(actions, () => PropTypes.object),\n  translator: PropTypes.object,\n  catalog: PropTypes.object,\n};\n\nReactPlanner.defaultProps = {\n  translator: new Translator(),\n  catalog: new Catalog(),\n  plugins: [],\n  allowProjectFileSupport: true,\n  softwareSignature: `React-Planner ${VERSION}`,\n  toolbarButtons: [],\n  sidebarComponents: [],\n  footerbarComponents: [],\n  customContents: {},\n};\n\n//redux connect\nfunction mapStateToProps(reduxState) {\n  return {\n    state: reduxState\n  }\n}\n\nfunction mapDispatchToProps(dispatch) {\n  return objectsMap(actions, actionNamespace => bindActionCreators(actions[actionNamespace], dispatch));\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(ReactPlanner);\n","import {UPDATE_2D_CAMERA, SELECT_TOOL_PAN, SELECT_TOOL_ZOOM_IN, SELECT_TOOL_ZOOM_OUT} from '../constants';\n\nexport function updateCameraView(value) {\n  return {\n    type: UPDATE_2D_CAMERA,\n    value\n  }\n}\n\nexport function selectToolPan() {\n  return {\n    type: SELECT_TOOL_PAN\n  };\n}\n\nexport function selectToolZoomOut() {\n  return {\n    type: SELECT_TOOL_ZOOM_OUT\n  };\n}\n\nexport function selectToolZoomIn() {\n  return {\n    type: SELECT_TOOL_ZOOM_IN\n  };\n}\n","import {\n  SELECT_LINE,\n  SELECT_TOOL_DRAWING_LINE,\n  BEGIN_DRAWING_LINE,\n  UPDATE_DRAWING_LINE,\n  END_DRAWING_LINE,\n  BEGIN_DRAGGING_LINE,\n  UPDATE_DRAGGING_LINE,\n  END_DRAGGING_LINE\n} from '../constants';\n\nexport function selectLine(layerID, lineID) {\n  return {\n    type: SELECT_LINE,\n    layerID,\n    lineID\n  }\n}\n\nexport function selectToolDrawingLine(sceneComponentType) {\n  return {\n    type: SELECT_TOOL_DRAWING_LINE,\n    sceneComponentType\n  }\n}\n\nexport function beginDrawingLine(layerID, x, y, snapMask) {\n  return {\n    type: BEGIN_DRAWING_LINE,\n    layerID, x, y, snapMask\n  }\n}\n\nexport function updateDrawingLine(x, y, snapMask) {\n  return {\n    type: UPDATE_DRAWING_LINE,\n    x, y, snapMask\n  }\n}\n\nexport function endDrawingLine(x, y, snapMask) {\n  return {\n    type: END_DRAWING_LINE,\n    x, y, snapMask\n  }\n}\n\nexport function beginDraggingLine(layerID, lineID, x, y, snapMask) {\n  return {\n    type: BEGIN_DRAGGING_LINE,\n    layerID, lineID, x, y, snapMask\n  }\n}\n\nexport function updateDraggingLine(x, y, snapMask) {\n  return {\n    type: UPDATE_DRAGGING_LINE,\n    x, y, snapMask\n  }\n}\n\nexport function endDraggingLine(x, y, snapMask) {\n  return {\n    type: END_DRAGGING_LINE,\n    x, y, snapMask\n  }\n}\n","import {\n  SELECT_HOLE,\n  SELECT_TOOL_DRAWING_HOLE,\n  UPDATE_DRAWING_HOLE,\n  END_DRAWING_HOLE,\n  BEGIN_DRAGGING_HOLE,\n  UPDATE_DRAGGING_HOLE,\n  END_DRAGGING_HOLE\n} from '../constants';\n\nexport function selectHole(layerID, holeID) {\n  return {\n    type: SELECT_HOLE,\n    layerID,\n    holeID\n  }\n}\n\nexport function selectToolDrawingHole(sceneComponentType) {\n  return {\n    type: SELECT_TOOL_DRAWING_HOLE,\n    sceneComponentType\n  }\n}\n\nexport function updateDrawingHole(layerID, x, y) {\n  return {\n    type: UPDATE_DRAWING_HOLE,\n    layerID, x, y\n  }\n}\n\nexport function endDrawingHole(layerID, x, y) {\n  return {\n    type: END_DRAWING_HOLE,\n    layerID, x, y\n  }\n}\n\n\nexport function beginDraggingHole(layerID, holeID, x, y) {\n  return {\n    type: BEGIN_DRAGGING_HOLE,\n    layerID, holeID, x, y\n  };\n}\n\nexport function updateDraggingHole(x, y) {\n  return {\n    type: UPDATE_DRAGGING_HOLE,\n    x, y\n  }\n}\n\nexport function endDraggingHole(x, y) {\n  return {\n    type: END_DRAGGING_HOLE,\n    x, y\n  }\n}\n","import {SELECT_LAYER, ADD_LAYER, SET_LAYER_PROPERTIES, REMOVE_LAYER} from '../constants';\n\nexport function selectLayer(layerID) {\n  return {\n    type: SELECT_LAYER,\n    layerID\n  }\n}\n\nexport function addLayer(name, altitude) {\n  return {\n    type: ADD_LAYER,\n    name, altitude\n  }\n}\n\nexport function setLayerProperties(layerID, properties) {\n  return {\n    type: SET_LAYER_PROPERTIES,\n    layerID,\n    properties\n  }\n}\n\nexport function removeLayer(layerID) {\n  return {\n    type: REMOVE_LAYER,\n    layerID,\n  }\n}\n","import {BEGIN_DRAGGING_VERTEX, UPDATE_DRAGGING_VERTEX, END_DRAGGING_VERTEX} from '../constants'\n\nexport function beginDraggingVertex(layerID, vertexID, x, y, snapMask) {\n  return {\n    type: BEGIN_DRAGGING_VERTEX,\n    layerID, vertexID, x, y, snapMask\n  }\n}\n\nexport function updateDraggingVertex(x, y, snapMask) {\n  return {\n    type: UPDATE_DRAGGING_VERTEX,\n    x, y, snapMask\n  }\n}\n\nexport function endDraggingVertex(x, y, snapMask) {\n  return {\n    type: END_DRAGGING_VERTEX,\n    x, y, snapMask\n\n  }\n}\n","import {\n  SELECT_ITEM,\n  SELECT_TOOL_DRAWING_ITEM,\n  UPDATE_DRAWING_ITEM,\n  END_DRAWING_ITEM,\n  BEGIN_DRAGGING_ITEM,\n  UPDATE_DRAGGING_ITEM,\n  END_DRAGGING_ITEM,\n  BEGIN_ROTATING_ITEM,\n  UPDATE_ROTATING_ITEM,\n  END_ROTATING_ITEM\n} from '../constants';\n\nexport function selectItem(layerID, itemID) {\n  return {\n    type: SELECT_ITEM,\n    layerID,\n    itemID\n  }\n}\n\nexport function selectToolDrawingItem(sceneComponentType) {\n  return {\n    type: SELECT_TOOL_DRAWING_ITEM,\n    sceneComponentType\n  }\n}\n\nexport function updateDrawingItem(layerID, x, y) {\n  return {\n    type: UPDATE_DRAWING_ITEM,\n    layerID, x, y\n  }\n}\n\nexport function endDrawingItem(layerID, x, y) {\n  return {\n    type: END_DRAWING_ITEM,\n    layerID, x, y\n  }\n}\n\nexport function beginDraggingItem(layerID, itemID, x, y) {\n  return {\n    type: BEGIN_DRAGGING_ITEM,\n    layerID, itemID, x, y\n  }\n}\n\nexport function updateDraggingItem(x, y) {\n  return {\n    type: UPDATE_DRAGGING_ITEM,\n    x, y\n  }\n}\n\nexport function endDraggingItem(x, y) {\n  return {\n    type: END_DRAGGING_ITEM,\n    x, y\n  }\n}\n\nexport function beginRotatingItem(layerID, itemID, x, y) {\n  return {\n    type: BEGIN_ROTATING_ITEM,\n    layerID, itemID, x, y\n  }\n}\n\nexport function updateRotatingItem(x, y) {\n  return {\n    type: UPDATE_ROTATING_ITEM,\n    x, y\n  }\n}\n\nexport function endRotatingItem(x, y) {\n  return {\n    type: END_ROTATING_ITEM,\n    x, y\n  }\n}\n","import {SELECT_AREA} from '../constants';\n\nexport function selectArea(layerID, areaID) {\n  return {\n    type: SELECT_AREA,\n    layerID,\n    areaID\n  }\n}\n","import { GROUP_ACTIONS } from '../constants';\n\nexport function addGroup() {\n  return {\n    type: GROUP_ACTIONS.ADD_GROUP\n  };\n}\n\nexport function addGroupFromSelected() {\n  return {\n    type: GROUP_ACTIONS.ADD_GROUP_FROM_SELECTED\n  };\n}\n\nexport function selectGroup(groupID) {\n  return {\n    type: GROUP_ACTIONS.SELECT_GROUP,\n    groupID\n  };\n}\n\nexport function unselectGroup(groupID) {\n  return {\n    type: GROUP_ACTIONS.UNSELECT_GROUP,\n    groupID\n  };\n}\n\nexport function addToGroup( groupID, layerID, elementPrototype, elementID ) {\n  return {\n    type: GROUP_ACTIONS.ADD_TO_GROUP,\n    groupID,\n    layerID,\n    elementPrototype,\n    elementID\n  };\n}\n\nexport function removeFromGroup( groupID, layerID, elementPrototype, elementID ) {\n  return {\n    type: GROUP_ACTIONS.REMOVE_FROM_GROUP,\n    groupID,\n    layerID,\n    elementPrototype,\n    elementID\n  };\n}\n\nexport function setGroupAttributes( groupID, attributes ) {\n  return {\n    type: GROUP_ACTIONS.SET_GROUP_ATTRIBUTES,\n    groupID,\n    attributes\n  };\n}\n\nexport function setGroupProperties( groupID, properties ) {\n  return {\n    type: GROUP_ACTIONS.SET_GROUP_PROPERTIES,\n    groupID,\n    properties\n  };\n}\n\nexport function setGroupBarycenter( groupID, barycenter ) {\n  return {\n    type: GROUP_ACTIONS.SET_GROUP_BARYCENTER,\n    groupID,\n    barycenter\n  };\n}\n\nexport function removeGroup( groupID ) {\n  return {\n    type: GROUP_ACTIONS.REMOVE_GROUP,\n    groupID\n  };\n}\n\nexport function removeGroupAndDeleteElements( groupID ) {\n  return {\n    type: GROUP_ACTIONS.REMOVE_GROUP_AND_DELETE_ELEMENTS,\n    groupID\n  };\n}\n\nexport function groupTranslate( groupID, x, y ) {\n  return {\n    type: GROUP_ACTIONS.GROUP_TRANSLATE,\n    groupID,\n    x,\n    y\n  };\n}\n\nexport function groupRotate( groupID, rotation ) {\n  return {\n    type: GROUP_ACTIONS.GROUP_ROTATE,\n    groupID,\n    rotation\n  };\n}\n","import ToolbarButton from './toolbar-button';\nimport ToolbarSaveButton from './toolbar-save-button';\nimport ToolbarLoadButton from './toolbar-load-button';\nimport Toolbar from './toolbar';\n\nexport {\n  ToolbarButton,\n  ToolbarSaveButton,\n  ToolbarLoadButton,\n  Toolbar\n};\n\nexport default {\n  ToolbarButton,\n  ToolbarSaveButton,\n  ToolbarLoadButton,\n  Toolbar\n};\n","import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport { MdSettings, MdUndo, MdDirectionsRun } from 'react-icons/md';\nimport { FaFile, FaMousePointer, FaPlus } from 'react-icons/fa';\nimport ToolbarButton from './toolbar-button';\nimport ToolbarSaveButton from './toolbar-save-button';\nimport ToolbarLoadButton from './toolbar-load-button';\nimport If from '../../utils/react-if';\nimport {\n  MODE_IDLE,\n  MODE_3D_VIEW,\n  MODE_3D_FIRST_PERSON,\n  MODE_VIEWING_CATALOG,\n  MODE_CONFIGURING_PROJECT\n} from '../../constants';\nimport * as SharedStyle from '../../shared-style';\n\nconst iconTextStyle = {\n  fontSize: '19px',\n  textDecoration: 'none',\n  fontWeight: 'bold',\n  margin: '0px',\n  userSelect: 'none'\n};\n\nconst Icon2D = ( {style} ) => <p style={{...iconTextStyle, ...style}}>2D</p>;\nconst Icon3D = ( {style} ) => <p style={{...iconTextStyle, ...style}}>3D</p>;\n\nconst ASIDE_STYLE = {\n  backgroundColor: SharedStyle.PRIMARY_COLOR.main,\n  padding: '10px'\n};\n\nconst sortButtonsCb = (a, b) => {\n  if (a.index === undefined || a.index === null) {\n    a.index = Number.MAX_SAFE_INTEGER;\n  }\n\n  if (b.index === undefined || b.index === null) {\n    b.index = Number.MAX_SAFE_INTEGER;\n  }\n\n  return a.index - b.index;\n};\n\nconst mapButtonsCb = (el, ind) => {\n  return (\n    <If\n      key={ind}\n      condition={el.condition}\n      style={{ position: 'relative' }}\n    >\n      {el.dom}\n    </If>\n  );\n};\n\nexport default class Toolbar extends Component {\n\n  constructor(props, context) {\n    super(props, context);\n    this.state = {};\n  }\n\n  shouldComponentUpdate(nextProps, nextState) {\n    return this.props.state.mode !== nextProps.state.mode ||\n      this.props.height !== nextProps.height ||\n      this.props.width !== nextProps.width ||\n      this.props.state.alterate !== nextProps.state.alterate;\n  }\n\n  render() {\n\n    let {\n      props: { state, width, height, toolbarButtons, allowProjectFileSupport },\n      context: { projectActions, /*viewer3DActions,*/ translator }\n    } = this;\n\n    let mode = state.get('mode');\n    let alterate = state.get('alterate');\n    let alterateColor = alterate ? SharedStyle.MATERIAL_COLORS[500].orange : '';\n\n    let sorter = [\n      /*{\n        index: 0, condition: allowProjectFileSupport, dom: <ToolbarButton\n          active={false}\n          tooltip={translator.t('New project')}\n          onClick={event => confirm(translator.t('Would you want to start a new Project?')) ? projectActions.newProject() : null}>\n          <FaFile />\n        </ToolbarButton>\n      },\n      */\n      {\n        index: 1, condition: allowProjectFileSupport,\n        dom: <ToolbarSaveButton state={state} />\n      }\n      /*,\n      {\n        index: 2, condition: allowProjectFileSupport,\n        dom: <ToolbarLoadButton state={state} />\n      },\n      {\n        index: 3, condition: true,\n        dom: <ToolbarButton\n          active={[MODE_VIEWING_CATALOG].includes(mode)}\n          tooltip={translator.t('Open catalog')}\n          onClick={event => projectActions.openCatalog()}>\n          <FaPlus />\n        </ToolbarButton>\n      },\n      {\n        index: 4, condition: true, dom: <ToolbarButton\n          active={[MODE_IDLE].includes(mode)}\n          tooltip={translator.t('2D View')}\n          onClick={event => projectActions.setMode( MODE_IDLE )}>\n          {[MODE_3D_FIRST_PERSON, MODE_3D_VIEW].includes(mode) ? <Icon2D style={{color: alterateColor}} /> : <FaMousePointer style={{color: alterateColor}} />}\n        </ToolbarButton>\n      },\n      {\n        index: 5, condition: true, dom: <ToolbarButton\n          active={false}\n          tooltip={translator.t('Undo (CTRL-Z)')}\n          onClick={event => projectActions.undo()}>\n          <MdUndo />\n        </ToolbarButton>\n      },\n      {\n        index: 6, condition: true, dom: <ToolbarButton\n          active={[MODE_CONFIGURING_PROJECT].includes(mode)}\n          tooltip={translator.t('Configure project')}\n          onClick={event => projectActions.openProjectConfigurator()}>\n          <MdSettings />\n        </ToolbarButton>\n      }*/\n    ];\n\n    sorter = sorter.concat(toolbarButtons.map((Component, key) => {\n      return Component.prototype ? //if is a react component\n        {\n          condition: true,\n          dom: React.createElement(Component, { mode, state, key })\n        } :\n        {                           //else is a sortable toolbar button\n          index: Component.index,\n          condition: Component.condition,\n          dom: React.createElement(Component.dom, { mode, state, key })\n        };\n    }));\n\n    return (\n      <aside style={{ ...ASIDE_STYLE, maxWidth: width, maxHeight: height }} className='toolbar'>\n        {sorter.sort(sortButtonsCb).map(mapButtonsCb)}\n      </aside>\n    )\n  }\n}\n\nToolbar.propTypes = {\n  state: PropTypes.object.isRequired,\n  width: PropTypes.number.isRequired,\n  height: PropTypes.number.isRequired,\n  allowProjectFileSupport: PropTypes.bool.isRequired,\n  toolbarButtons: PropTypes.array\n};\n\nToolbar.contextTypes = {\n  projectActions: PropTypes.object.isRequired,\n  viewer2DActions: PropTypes.object.isRequired,\n  //viewer3DActions: PropTypes.object.isRequired,\n  linesActions: PropTypes.object.isRequired,\n  holesActions: PropTypes.object.isRequired,\n  itemsActions: PropTypes.object.isRequired,\n  translator: PropTypes.object.isRequired,\n};\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport Viewer2D from './viewer2d/viewer2d';\n//import Viewer3D from './viewer3d/viewer3d';\n//import Viewer3DFirstPerson from './viewer3d/viewer3d-first-person';\nimport CatalogList from './catalog-view/catalog-list';\nimport ProjectConfigurator from './configurator/project-configurator';\n\nimport * as constants from '../constants';\n\nexport default function Content({width, height, state, customContents}) {\n  let mode = state.get('mode');\n\n  switch (mode) {\n    /*case constants.MODE_3D_VIEW:\n      return <Viewer3D state={state} width={width} height={height}/>;\n\n    case constants.MODE_3D_FIRST_PERSON:\n      return <Viewer3DFirstPerson state={state} width={width} height={height}/>;*/\n\n    case constants.MODE_VIEWING_CATALOG:\n      return <CatalogList state={state} width={width} height={height}/>;\n\n    case constants.MODE_IDLE:\n    case constants.MODE_2D_ZOOM_IN:\n    case constants.MODE_2D_ZOOM_OUT:\n    case constants.MODE_2D_PAN:\n    case constants.MODE_WAITING_DRAWING_LINE:\n    case constants.MODE_DRAGGING_LINE:\n    case constants.MODE_DRAGGING_VERTEX:\n    case constants.MODE_DRAGGING_ITEM:\n    case constants.MODE_DRAWING_LINE:\n    case constants.MODE_DRAWING_HOLE:\n    case constants.MODE_DRAWING_ITEM:\n    case constants.MODE_DRAGGING_HOLE:\n    case constants.MODE_ROTATING_ITEM:\n      return <Viewer2D state={state} width={width} height={height}/>;\n\n    case constants.MODE_CONFIGURING_PROJECT:\n      return <ProjectConfigurator width={width} height={height} state={state}/>;\n\n    default:\n      if (customContents.hasOwnProperty(mode)) {\n        let CustomContent = customContents[mode];\n        return <CustomContent width={width} height={height} state={state}/>\n      } else {\n        throw new Error(`Mode ${mode} doesn't have a mapped content`);\n      }\n  }\n}\n\nContent.propTypes = {\n  state: PropTypes.object.isRequired,\n  width: PropTypes.number.isRequired,\n  height: PropTypes.number.isRequired\n};\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport * as SharedStyle from '../../shared-style';\n\nconst STYLE = {fill: \"#0096fd\", stroke: SharedStyle.COLORS.white, cursor: \"move\"};\n\nexport default function Vertex({vertex, layer}) {\n\n  let {x, y} = vertex;\n\n  return (\n    <g\n      transform={`translate(${x}, ${y})`}\n      data-element-root\n      data-prototype={vertex.prototype}\n      data-id={vertex.id}\n      data-selected={vertex.selected}\n      data-layer={layer.id}\n    >\n      <circle cx=\"0\" cy=\"0\" r=\"7\" style={STYLE}/>\n    </g>\n  );\n}\n\nVertex.propTypes = {\n  vertex: PropTypes.object.isRequired,\n  layer: PropTypes.object.isRequired,\n};\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport {GeometryUtils} from '../../utils/export';\nimport Ruler from './ruler';\n\nexport default function Line({line, layer, scene, catalog}) {\n\n  let vertex0 = layer.vertices.get(line.vertices.get(0));\n  let vertex1 = layer.vertices.get(line.vertices.get(1));\n\n  if (vertex0.id === vertex1.id || GeometryUtils.samePoints(vertex0, vertex1)) return null; //avoid 0-length lines\n\n  let {x: x1, y: y1} = vertex0;\n  let {x: x2, y: y2} = vertex1;\n\n  if (x1 > x2) {\n    ({x: x1, y: y1} = vertex1);\n    ({x: x2, y: y2} = vertex0);\n  }\n\n  let length = GeometryUtils.pointsDistance(x1, y1, x2, y2);\n  let angle = GeometryUtils.angleBetweenTwoPointsAndOrigin(x1, y1, x2, y2);\n\n  let renderedHoles = line.holes.map(holeID => {\n    let hole = layer.holes.get(holeID);\n    let startAt = length * hole.offset;\n    let renderedHole = catalog.getElement(hole.type).render2D(hole, layer, scene);\n\n    return (\n      <g\n        key={holeID}\n        transform={`translate(${startAt}, 0)`}\n        data-element-root\n        data-prototype={hole.prototype}\n        data-id={hole.id}\n        data-selected={hole.selected}\n        data-layer={layer.id}\n      >\n        {renderedHole}\n      </g>\n    );\n  });\n\n  let thickness = line.getIn(['properties', 'thickness', 'length']);\n  let half_thickness = thickness / 2;\n\n  let renderedLine = catalog.getElement(line.type).render2D(line, layer);\n  let renderedRuler = line.selected ?\n    <Ruler unit={scene.unit} length={length} transform={`translate(0, ${half_thickness + 10} )`}/> : null;\n\n  return (\n    <g\n      transform={`translate(${x1}, ${y1}) rotate(${angle}, 0, 0)`}\n      data-element-root\n      data-prototype={line.prototype}\n      data-id={line.id}\n      data-selected={line.selected}\n      data-layer={layer.id}\n      style={line.selected ? {cursor: 'move'} : {}}\n    >\n      {renderedRuler}\n      {renderedLine}\n      {renderedHoles}\n    </g>\n  );\n\n}\n\nLine.propTypes = {\n  line: PropTypes.object.isRequired,\n  layer: PropTypes.object.isRequired,\n  scene: PropTypes.object.isRequired,\n  catalog: PropTypes.object.isRequired,\n};\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport {\n  Line,\n  Area,\n  Vertex,\n  Item,\n  Group\n} from './export';\n\nexport default function Layer({ layer, scene, catalog }) {\n\n  let { unit, groups } = scene;\n  let { lines, areas, vertices, holes, id: layerID, items, opacity } = layer;\n\n  return (\n    <g opacity={opacity}>\n      {\n        areas.valueSeq().map(area =>\n          <Area key={area.id} layer={layer} area={area} unit={unit} catalog={catalog} />)\n      }\n      {\n        lines.valueSeq().map(line =>\n          <Line key={line.id} layer={layer} line={line} scene={scene} catalog={catalog} />)\n      }\n      {\n        items.valueSeq().map(item =>\n          <Item key={item.id} layer={layer} item={item} scene={scene} catalog={catalog} />)\n      }\n      {\n        vertices\n          .valueSeq()\n          .filter(v => v.selected)\n          .map(vertex => <Vertex key={vertex.id} layer={layer} vertex={vertex} />)\n      }\n      {\n        groups\n          .valueSeq()\n          .filter(g => g.hasIn(['elements', layerID]) && g.get('selected'))\n          .map(group => <Group key={group.get('id')} layer={layer} group={group} scene={scene} catalog={catalog} />)\n      }\n    </g>\n  );\n\n}\n\nLayer.propTypes = {\n  layer: PropTypes.object.isRequired,\n  scene: PropTypes.object.isRequired,\n  catalog: PropTypes.object.isRequired\n};\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport If from '../../utils/react-if';\n\nconst STYLE_LINE = {\n  fill: \"#0096fd\",\n  stroke: \"#0096fd\"\n};\n\nconst STYLE_CIRCLE = {\n  fill: \"#0096fd\",\n  stroke: \"#0096fd\",\n  cursor: \"ew-resize\"\n};\n\nconst STYLE_CIRCLE2 = {\n  fill: \"none\",\n  stroke: \"#0096fd\",\n  cursor: \"ew-resize\"\n};\n\nexport default function Item({layer, item, scene, catalog}) {\n\n  let {x, y, rotation} = item;\n\n  let renderedItem = catalog.getElement(item.type).render2D(item, layer, scene);\n\n  return (\n    <g\n      data-element-root\n      data-prototype={item.prototype}\n      data-id={item.id}\n      data-selected={item.selected}\n      data-layer={layer.id}\n      style={item.selected ? {cursor: \"move\"} : {}}\n      transform={`translate(${x},${y}) rotate(${rotation})`}>\n\n      {renderedItem}\n      <If condition={item.selected}>\n        <g data-element-root\n           data-prototype={item.prototype}\n           data-id={item.id}\n           data-selected={item.selected}\n           data-layer={layer.id}\n           data-part=\"rotation-anchor\"\n        >\n          <circle cx=\"0\" cy=\"150\" r=\"10\" style={STYLE_CIRCLE}/>\n          <circle cx=\"0\" cy=\"0\" r=\"150\" style={STYLE_CIRCLE2}/>\n        </g>\n      </If>\n    </g>\n  )\n}\n\nItem.propTypes = {\n  item: PropTypes.object.isRequired,\n  layer: PropTypes.object.isRequired,\n  scene: PropTypes.object.isRequired,\n  catalog: PropTypes.object.isRequired\n};\n\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport polylabel from 'polylabel';\nimport areapolygon from 'area-polygon';\n\nconst STYLE_TEXT = {\n  textAnchor: 'middle',\n  fontSize: '12px',\n  fontFamily: '\"Courier New\", Courier, monospace',\n  pointerEvents: 'none',\n  fontWeight: 'bold',\n\n  //http://stackoverflow.com/questions/826782/how-to-disable-text-selection-highlighting-using-css\n  WebkitTouchCallout: 'none', /* iOS Safari */\n  WebkitUserSelect: 'none', /* Chrome/Safari/Opera */\n  MozUserSelect: 'none', /* Firefox */\n  MsUserSelect: 'none', /* Internet Explorer/Edge */\n  userSelect: 'none'\n};\n\n\nexport default function Area({layer, area, catalog}) {\n\n  let rendered = catalog.getElement(area.type).render2D(area, layer);\n\n  let renderedAreaSize = null;\n\n  if (area.selected) {\n    let polygon = area.vertices.toArray().map(vertexID => {\n      let {x, y} = layer.vertices.get(vertexID);\n      return [x, y];\n    });\n\n    let polygonWithHoles = polygon;\n\n    area.holes.forEach(holeID => {\n\n      let polygonHole = layer.areas.get(holeID).vertices.toArray().map(vertexID => {\n        let {x, y} = layer.vertices.get(vertexID);\n        return [x, y];\n      });\n\n      polygonWithHoles = polygonWithHoles.concat(polygonHole.reverse());\n    });\n\n    let center = polylabel([polygonWithHoles], 1.0);\n    let areaSize = areapolygon(polygon, false);\n\n    //subtract holes area\n    area.holes.forEach(areaID => {\n      let hole = layer.areas.get(areaID);\n      let holePolygon = hole.vertices.toArray().map(vertexID => {\n        let {x, y} = layer.vertices.get(vertexID);\n        return [x, y];\n      });\n      areaSize -= areapolygon(holePolygon, false);\n    });\n\n    renderedAreaSize = (\n      <text x=\"0\" y=\"0\" transform={`translate(${center[0]} ${center[1]}) scale(1, -1)`} style={STYLE_TEXT}>\n        {(areaSize / 10000).toFixed(2)} m{String.fromCharCode(0xb2)}\n      </text>\n    )\n  }\n\n  return (\n    <g\n      data-element-root\n      data-prototype={area.prototype}\n      data-id={area.id}\n      data-selected={area.selected}\n      data-layer={layer.id}\n    >\n      {rendered}\n      {renderedAreaSize}\n    </g>\n  )\n\n}\n\nArea.propTypes = {\n  area: PropTypes.object.isRequired,\n  layer: PropTypes.object.isRequired,\n  catalog: PropTypes.object.isRequired\n};\n\n\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport GridHorizontalStreak from './grid-horizontal-streak';\nimport GridVerticalStreak from './grid-vertical-streak';\n\nexport default function Grids({scene}) {\n\n  let {width, height, grids} = scene;\n\n  let renderedGrids = grids.entrySeq().map(([gridID, grid]) => {\n    switch (grid.type) {\n      case 'horizontal-streak':\n        return (<GridHorizontalStreak key={gridID} width={width} height={height} grid={grid}/>);\n\n      case 'vertical-streak':\n        return (<GridVerticalStreak key={gridID} width={width} height={height} grid={grid}/>);\n\n      default:\n        console.warn(`grid ${grid.type} not allowed`);\n    }\n  }).toList();\n\n  return (<g>{renderedGrids}</g>);\n}\n\nGrids.propTypes = {\n  scene: PropTypes.object.isRequired\n};\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport {List} from 'immutable';\n\nexport default function GridHorizontalStreak({width, height, grid}) {\n  let step = grid.properties.get('step');\n  let colors;\n\n  if (grid.properties.has('color')) {\n    colors = new List([grid.properties.get('color')]);\n  } else {\n    colors = grid.properties.get('colors');\n  }\n\n  let rendered = [];\n  let i = 0;\n  for (let y = 0; y <= height; y += step) {\n    let color = colors.get(i % colors.size);\n    i++;\n    rendered.push(<line key={y} x1=\"0\" y1={y} x2={width} y2={y} strokeWidth=\"1\" stroke={color}/>);\n  }\n\n  return (<g>{rendered}</g>);\n}\n\nGridHorizontalStreak.propTypes = {\n  width: PropTypes.number.isRequired,\n  height: PropTypes.number.isRequired,\n  grid: PropTypes.object.isRequired\n};\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport {List} from 'immutable';\n\nexport default function GridVerticalStreak({width, height, grid}) {\n  let step = grid.properties.get('step');\n  let colors;\n\n  if (grid.properties.has('color')) {\n    colors = new List([grid.properties.get('color')]);\n  } else {\n    colors = grid.properties.get('colors');\n  }\n\n  let rendered = [];\n  let i = 0;\n  for (let x = 0; x <= width; x += step) {\n    let color = colors.get(i % colors.size);\n    i++;\n    rendered.push(<line key={x} x1={x} y1=\"0\" x2={x} y2={height} strokeWidth=\"1\" stroke={color}/>);\n  }\n\n  return (<g>{rendered}</g>);\n}\n\nGridVerticalStreak.propTypes = {\n  width: PropTypes.number.isRequired,\n  height: PropTypes.number.isRequired,\n  grid: PropTypes.object.isRequired\n};\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport If from '../../utils/react-if';\nimport * as sharedStyles from '../../shared-style';\n\nconst cx = 0;\nconst cy = 0;\nconst radius = 5;\n\nconst STYLE_CIRCLE = {\n  fill: sharedStyles.MATERIAL_COLORS[500].orange,\n  stroke: sharedStyles.MATERIAL_COLORS[500].orange,\n  cursor: 'default'\n};\n\nexport default function Group({ layer, group, scene, catalog }, {translator}) {\n  return (\n    <g\n      data-element-root\n      data-prototype={group.prototype}\n      data-id={group.id}\n      data-selected={group.selected}\n      data-layer={layer.id}\n      style={group.selected ? { cursor: 'move' } : {}}\n      transform={`translate(${group.x},${group.y}) rotate(${group.rotation})`}\n    >\n      <If condition={group.selected}>\n        <g\n          data-element-root\n          data-prototype={group.prototype}\n          data-id={group.id}\n          data-selected={group.selected}\n          data-layer={layer.id}\n          data-part=\"rotation-anchor\"\n        >\n          <circle cx={cx} cy={cy} r={radius} style={STYLE_CIRCLE}>\n            <title>{translator.t('Group\\'s Barycenter')}</title>\n          </circle>\n        </g>\n      </If>\n    </g>\n  )\n}\n\nGroup.propTypes = {\n  group: PropTypes.object.isRequired,\n  layer: PropTypes.object.isRequired,\n  scene: PropTypes.object.isRequired,\n  catalog: PropTypes.object.isRequired\n};\n\nGroup.contextTypes = {\n  translator: PropTypes.object.isRequired\n};","import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport * as SharedStyle from '../../shared-style';\n\nexport default class RulerX extends Component {\n\n  constructor(props, context) {\n    super(props, context);\n  }\n\n  render() {\n\n    let elementW = this.props.unitPixelSize * this.props.zoom;\n\n    let elementStyle = {\n      display: 'inline-block',\n      width: elementW,\n      position: 'relative',\n      borderLeft: '1px solid ' + this.props.fontColor,\n      paddingLeft: '0.2em',\n      fontSize: '10px',\n      height: '100%'\n    };\n\n    let insideElementsStyle = {\n      width: '20%',\n      display: 'inline-block',\n      margin: 0,\n      padding: 0\n    };\n\n    let rulerStyle = {\n      backgroundColor: this.props.backgroundColor,\n      position: 'relative',\n      width: this.props.width,\n      height: '100%',\n      color: this.props.fontColor\n    }\n\n    let markerStyle = {\n      position: 'absolute',\n      left: this.props.zeroLeftPosition + (this.props.mouseX * this.props.zoom) - 6.5,\n      top: 8,\n      width: 0,\n      height: 0,\n      borderLeft: '5px solid transparent',\n      borderRight: '5px solid transparent',\n      borderTop: '8px solid ' + this.props.markerColor,\n      zIndex: 9001\n    };\n\n    let rulerContainer = {\n      position: 'absolute',\n      height: '10px',\n      top: '4px',\n      display: 'grid',\n      gridRowGap: '0',\n      gridColumnGap: '0',\n      gridTemplateRows: '100%',\n      grdAutoColumns: `${elementW}px`\n    };\n\n    let positiveRulerContainer = {\n      ...rulerContainer,\n      width: (this.props.positiveUnitsNumber * elementW),\n      left: this.props.zeroLeftPosition\n    };\n\n    let negativeRulerContainer = {\n      ...rulerContainer,\n      width: (this.props.negativeUnitsNumber * elementW),\n      left: this.props.zeroLeftPosition - (this.props.negativeUnitsNumber * elementW)\n    };\n\n    let positiveDomElements = [];\n\n    if (elementW <= 200) {\n      for (let x = 0; x < this.props.positiveUnitsNumber; x++) {\n        positiveDomElements.push(\n          <div key={x} style={{ ...elementStyle, gridColumn: (x + 1), gridRow: 1 }}>\n            {elementW > 30 ? (x * 100) : ''}\n          </div>\n        );\n      }\n    }\n    else if (elementW > 200) {\n      for (let x = 0; x < this.props.positiveUnitsNumber; x++) {\n        let val = x * 100;\n        positiveDomElements.push(\n          <div key={x} style={{ ...elementStyle, gridColumn: (x + 1), gridRow: 1 }}>\n            <div style={insideElementsStyle}>{val}</div>\n            <div style={insideElementsStyle}>{val + (1 * 20)}</div>\n            <div style={insideElementsStyle}>{val + (2 * 20)}</div>\n            <div style={insideElementsStyle}>{val + (3 * 20)}</div>\n            <div style={insideElementsStyle}>{val + (4 * 20)}</div>\n          </div>\n        );\n      }\n    }\n\n    return <div style={rulerStyle}>\n      <div id=\"horizontalMarker\" style={markerStyle}></div>\n      <div id=\"negativeRuler\" style={negativeRulerContainer}></div>\n      <div id=\"positiveRuler\" style={positiveRulerContainer}>{positiveDomElements}</div>\n    </div>;\n  }\n\n}\n\nRulerX.propTypes = {\n  unitPixelSize: PropTypes.number.isRequired,\n  positiveUnitsNumber: PropTypes.number,\n  negativeUnitsNumber: PropTypes.number,\n  zoom: PropTypes.number.isRequired,\n  mouseX: PropTypes.number.isRequired,\n  width: PropTypes.number.isRequired,\n  zeroLeftPosition: PropTypes.number.isRequired,\n  backgroundColor: PropTypes.string,\n  fontColor: PropTypes.string,\n  markerColor: PropTypes.string\n};\n\nRulerX.defaultProps = {\n  positiveUnitsNumber: 50,\n  negativeUnitsNumber: 50,\n  backgroundColor: SharedStyle.PRIMARY_COLOR.main,\n  fontColor: SharedStyle.COLORS.white,\n  markerColor: SharedStyle.SECONDARY_COLOR.main\n}\n\nRulerX.contextTypes = {\n  translator: PropTypes.object.isRequired\n};\n","import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport * as SharedStyle from '../../shared-style';\n\nexport default class RulerY extends Component {\n\n  constructor(props, context) {\n    super(props, context);\n  }\n\n  render() {\n\n    let elementH = this.props.unitPixelSize * this.props.zoom;\n\n    let elementStyle = {\n      width: '8px',\n      borderBottom: '1px solid ' + this.props.fontColor,\n      paddingBottom: '0.2em',\n      fontSize: '10px',\n      height: elementH,\n      textOrientation: 'upright',\n      writingMode: 'vertical-lr',\n      letterSpacing: '-2px',\n      textAlign: 'right'\n    };\n\n    let insideElementsStyle = {\n      height: '20%',\n      width: '100%',\n      textOrientation: 'upright',\n      writingMode: 'vertical-lr',\n      display: 'inline-block',\n      letterSpacing: '-2px',\n      textAlign: 'right'\n    };\n\n    let rulerStyle = {\n      backgroundColor: this.props.backgroundColor,\n      height: this.props.height,\n      width: '100%',\n      color: this.props.fontColor\n    }\n\n    let markerStyle = {\n      position: 'absolute',\n      top: this.props.zeroTopPosition - (this.props.mouseY * this.props.zoom) - 6.5,\n      left: 8,\n      width: 0,\n      height: 0,\n      borderTop: '5px solid transparent',\n      borderBottom: '5px solid transparent',\n      borderLeft: '8px solid ' + this.props.markerColor,\n      zIndex: 9001\n    };\n\n    let rulerContainer = {\n      position: 'absolute',\n      width: '100%',\n      display: 'grid',\n      gridRowGap: '0',\n      gridColumnGap: '0',\n      gridTemplateColumns: '100%',\n      grdAutoRows: `${elementH}px`,\n      paddingLeft: '5px'\n    };\n\n    let positiveRulerContainer = {\n      ...rulerContainer,\n      top: this.props.zeroTopPosition - (this.props.positiveUnitsNumber * elementH),\n      height: (this.props.positiveUnitsNumber * elementH)\n    };\n\n    let negativeRulerContainer = {\n      ...rulerContainer,\n      top: this.props.zeroTopPosition + (this.props.negativeUnitsNumber * elementH),\n      height: (this.props.negativeUnitsNumber * elementH)\n    };\n\n    let positiveDomElements = [];\n\n    if (elementH <= 200) {\n      for (let x = 1; x <= this.props.positiveUnitsNumber; x++) {\n        positiveDomElements.push(\n          <div key={x} style={{ ...elementStyle, gridColumn: 1, gridRow: x }}>\n            {elementH > 30 ? ((this.props.positiveUnitsNumber - x) * 100) : ''}\n          </div>\n        );\n      }\n    }\n    else if (elementH > 200) {\n      for (let x = 1; x <= this.props.positiveUnitsNumber; x++) {\n        let val = (this.props.positiveUnitsNumber - x) * 100;\n        positiveDomElements.push(\n          <div key={x} style={{ ...elementStyle, gridColumn: 1, gridRow: x }}>\n            <div style={insideElementsStyle}>{val + (4 * 20)}</div>\n            <div style={insideElementsStyle}>{val + (3 * 20)}</div>\n            <div style={insideElementsStyle}>{val + (2 * 20)}</div>\n            <div style={insideElementsStyle}>{val + (1 * 20)}</div>\n            <div style={insideElementsStyle}>{val}</div>\n          </div>\n        );\n      }\n    }\n\n    return <div style={rulerStyle}>\n      <div id=\"verticalMarker\" style={markerStyle}></div>\n      <div id=\"negativeRuler\" style={negativeRulerContainer}></div>\n      <div id=\"positiveRuler\" style={positiveRulerContainer}>{positiveDomElements}</div>\n    </div>;\n  }\n\n}\n\nRulerY.propTypes = {\n  unitPixelSize: PropTypes.number.isRequired,\n  zoom: PropTypes.number.isRequired,\n  mouseY: PropTypes.number.isRequired,\n  height: PropTypes.number.isRequired,\n  zeroTopPosition: PropTypes.number.isRequired,\n  backgroundColor: PropTypes.string,\n  fontColor: PropTypes.string,\n  markerColor: PropTypes.string\n};\n\nRulerY.defaultProps = {\n  positiveUnitsNumber: 50,\n  negativeUnitsNumber: 50,\n  backgroundColor: SharedStyle.PRIMARY_COLOR.main,\n  fontColor: SharedStyle.COLORS.white,\n  markerColor: SharedStyle.SECONDARY_COLOR.main\n}\n\nRulerY.contextTypes = {\n  translator: PropTypes.object.isRequired\n};\n","import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport CatalogItem from './catalog-item';\nimport CatalogBreadcrumb from './catalog-breadcrumb';\nimport CatalogPageItem from './catalog-page-item';\nimport CatalogTurnBackPageItem from './catalog-turn-back-page-item';\nimport ContentContainer from '../style/content-container';\nimport ContentTitle from '../style/content-title';\nimport * as SharedStyle from '../../shared-style';\n\nconst containerStyle = {\n  position: 'fixed',\n  width:'calc( 100% - 51px)',\n  height:'calc( 100% - 20px)',\n  backgroundColor:'#FFF',\n  padding:'1em',\n  left:50,\n  overflowY:'auto',\n  overflowX:'hidden',\n  zIndex:10\n};\n\nconst itemsStyle = {\n  display: 'grid',\n  gridTemplateColumns: 'repeat(auto-fit, minmax(14em, 1fr))',\n  gridGap: '10px',\n  marginTop: '1em'\n};\n\nconst searchContainer = {\n  width: '100%',\n  height: '3em',\n  padding: '0.625em',\n  background: '#f7f7f9',\n  border: '1px solid #e1e1e8',\n  cursor: 'pointer',\n  position: 'relative',\n  boxShadow: '0 1px 6px 0 rgba(0, 0, 0, 0.11), 0 1px 4px 0 rgba(0, 0, 0, 0.11)',\n  borderRadius: '2px',\n  transition: 'all .2s ease-in-out',\n  WebkitTransition: 'all .2s ease-in-out',\n  marginBottom: '1em'\n};\n\nconst searchText = {\n  width: '8em',\n  display: 'inline-block'\n};\n\nconst searchInput = {\n  width: 'calc( 100% - 10em )',\n  height: '2em',\n  margin: '0',\n  padding: '0 1em',\n  border: '1px solid #EEE'\n};\n\nconst historyContainer = {\n  ...searchContainer,\n  padding: '0.2em 0.625em'\n};\n\nconst historyElementStyle = {\n  width: 'auto',\n  height: '2em',\n  lineHeight: '2em',\n  textAlign:'center',\n  borderRadius: '1em',\n  display: 'inline-block',\n  cursor: 'pointer',\n  backgroundColor: SharedStyle.PRIMARY_COLOR.alt,\n  color: SharedStyle.PRIMARY_COLOR.text_main,\n  textTransform: 'capitalize',\n  margin: '0.25em',\n  padding: '0 1em'\n};\n\nexport default class CatalogList extends Component {\n\n  constructor(props, context) {\n    super(props);\n\n    let page = props.state.catalog.page;\n    let currentCategory = context.catalog.getCategory(page);\n    let categoriesToDisplay = currentCategory.categories;\n    let elementsToDisplay = currentCategory.elements.filter(element => element.info.visibility ? element.info.visibility.catalog : true );\n\n    this.state = {\n      categories: currentCategory.categories,\n      elements: elementsToDisplay,\n      matchString: '',\n      matchedElements: []\n    };\n  }\n\n  flattenCategories( categories ) {\n    let toRet = [];\n\n    for( let x = 0; x < categories.length; x++ )\n    {\n      let curr = categories[x];\n      toRet = toRet.concat( curr.elements );\n      if( curr.categories.length ) toRet = toRet.concat( this.flattenCategories ( curr.categories ) );\n    }\n\n    return toRet;\n  }\n\n  matcharray( text ) {\n\n    let array = this.state.elements.concat( this.flattenCategories( this.state.categories ) );\n\n    let filtered = [];\n\n    if( text != '' ) {\n      let regexp = new RegExp( text, 'i');\n      for (let i = 0; i < array.length; i++) {\n        if (regexp.test(array[i].info.title)) {\n          filtered.push(array[i]);\n        }\n      }\n    }\n\n    this.setState({\n      matchString: text,\n      matchedElements: filtered\n    });\n  };\n\n  select( element ) {\n\n    switch (element.prototype) {\n      case 'lines':\n        this.context.linesActions.selectToolDrawingLine(element.name);\n        break;\n      case 'items':\n        this.context.itemsActions.selectToolDrawingItem(element.name);\n        break;\n      case 'holes':\n        this.context.holesActions.selectToolDrawingHole(element.name);\n        break;\n    }\n\n    this.context.projectActions.pushLastSelectedCatalogElementToHistory(element);\n  }\n\n  render() {\n\n    let page = this.props.state.catalog.page;\n    let currentCategory = this.context.catalog.getCategory(page);\n    let categoriesToDisplay = currentCategory.categories;\n    let elementsToDisplay = currentCategory.elements.filter(element => element.info.visibility ? element.info.visibility.catalog : true );\n\n    let breadcrumbComponent = null;\n\n    if (page !== 'root') {\n\n      let breadcrumbsNames = [];\n\n      this.props.state.catalog.path.forEach(pathName => {\n        breadcrumbsNames.push({\n          name: this.context.catalog.getCategory(pathName).label,\n          action: () => projectActions.goBackToCatalogPage(pathName)\n        });\n      });\n\n      breadcrumbsNames.push({name: currentCategory.label, action: ''});\n\n      breadcrumbComponent = (<CatalogBreadcrumb names={breadcrumbsNames}/>);\n    }\n\n    let pathSize = this.props.state.catalog.path.size;\n\n    let turnBackButton = pathSize > 0 ? (\n      <CatalogTurnBackPageItem key={pathSize} page={this.context.catalog.categories[this.props.state.catalog.path.get(pathSize - 1)]}/>) : null;\n\n\n    let selectedHistory = this.props.state.get('selectedElementsHistory');\n    let selectedHistoryElements = selectedHistory.map( ( el, ind ) =>\n      <div key={ind} style={historyElementStyle} title={el.name} onClick={() => this.select(el) }>{el.name}</div>\n    );\n\n    return (\n      <ContentContainer width={this.props.width} height={this.props.height} style={{...containerStyle, ...this.props.style}}>\n        <ContentTitle>{this.context.translator.t('Catalog')}</ContentTitle>\n        {breadcrumbComponent}\n        <div style={searchContainer}>\n          <span style={searchText}>{this.context.translator.t('Search Element')}</span>\n          <input type=\"text\" style={searchInput} onChange={( e ) => { this.matcharray( e.target.value ); } }/>\n        </div>\n        { selectedHistory.size ?\n          <div style={historyContainer}>\n            <span>{this.context.translator.t('Last Selected')}</span>\n            {selectedHistoryElements}\n          </div> :\n          null\n        }\n        <div style={itemsStyle}>\n          {\n            this.state.matchString === '' ? [\n              turnBackButton,\n              categoriesToDisplay.map(cat => <CatalogPageItem key={cat.name} page={cat} oldPage={currentCategory}/>),\n              elementsToDisplay.map(elem => <CatalogItem key={elem.name} element={elem}/>)\n            ] :\n            this.state.matchedElements.map(elem => <CatalogItem key={elem.name} element={elem}/>)\n          }\n        </div>\n      </ContentContainer>\n    )\n  }\n}\n\nCatalogList.propTypes = {\n  state: PropTypes.object.isRequired,\n  width: PropTypes.number.isRequired,\n  height: PropTypes.number.isRequired,\n  style: PropTypes.object\n};\n\nCatalogList.contextTypes = {\n  catalog: PropTypes.object.isRequired,\n  translator: PropTypes.object.isRequired,\n  itemsActions: PropTypes.object.isRequired,\n  linesActions: PropTypes.object.isRequired,\n  holesActions: PropTypes.object.isRequired,\n  projectActions: PropTypes.object.isRequired\n};\n","import React, {Component} from 'react';\nimport PropTypes from 'prop-types';\nimport {FaPlusCircle as IconAdd} from 'react-icons/fa';\nimport * as SharedStyle from '../../shared-style';\n\nconst STYLE_BOX = {\n  width: '14em',\n  height: '14em',\n  padding: '0.625em',\n  background: '#f7f7f9',\n  border: '1px solid #e1e1e8',\n  cursor: 'pointer',\n  position: 'relative',\n  boxShadow: '0 1px 6px 0 rgba(0, 0, 0, 0.11), 0 1px 4px 0 rgba(0, 0, 0, 0.11)',\n  borderRadius: '2px',\n  transition: 'all .15s ease-in-out',\n  WebkitTransition: 'all .15s ease-in-out',\n  alignSelf: 'center',\n  justifySelf: 'center',\n};\n\nconst STYLE_BOX_HOVER = {\n  ...STYLE_BOX,\n  background: SharedStyle.SECONDARY_COLOR.main\n};\n\nconst STYLE_TITLE = {\n  width:'100%',\n  textAlign:'center',\n  display:'block',\n  marginBottom:'.5em',\n  textTransform: 'capitalize'\n};\n\nconst STYLE_TITLE_HOVER = {\n  ...STYLE_TITLE,\n  color:SharedStyle.COLORS.white\n};\n\nconst STYLE_IMAGE_CONTAINER = {\n  width: '100%',\n  height: '8em',\n  position:'relative',\n  overflow:'hidden',\n  border: 'solid 1px #e6e6e6',\n  padding:0,\n  margin:0,\n  marginBottom: '5px'\n};\n\nconst STYLE_IMAGE = {\n  position:'absolute',\n  background: '#222',\n  width: '100%',\n  height: '100%',\n  backgroundSize: 'contain',\n  backgroundPosition:'50% 50%',\n  backgroundColor:SharedStyle.COLORS.white,\n  backgroundRepeat:'no-repeat',\n  transition: 'all .2s ease-in-out'\n};\n\nconst STYLE_IMAGE_HOVER = {\n  ...STYLE_IMAGE,\n  transform: 'scale(1.2)'\n};\n\nconst STYLE_PLUS_HOVER = {\n  marginTop:'1.5em',\n  color: SharedStyle.SECONDARY_COLOR.main,\n  fontSize: '2em',\n  opacity: '0.7',\n  width: '100%'\n};\n\nconst STYLE_DESCRIPTION = {\n  display: 'block',\n  display: '-webkit-box',\n  height: '2em',\n  margin: '0 auto',\n  fontSize: '0.75em',\n  fontStyle:'italic',\n  lineHeight: '1em',\n  WebkitLineClamp: '2',\n  WebkitBoxOrient: 'vertical',\n  overflow: 'hidden',\n  textOverflow: 'ellipsis',\n};\n\nconst STYLE_TAGS = {\n  listStyle: 'none',\n  margin: '0px',\n  padding: '0px',\n  fontSize: '11px',\n  marginBottom: '3px'\n};\n\nconst STYLE_TAG = {\n  display: 'inline-block',\n  background: '#337ab7',\n  color: SharedStyle.COLORS.white,\n  padding: '1px 4px',\n  marginRight: '3px',\n  borderRadius: '3px'\n};\n\nexport default class CatalogItem extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {hover: false};\n  }\n\n  select() {\n    let element = this.props.element;\n\n    switch (element.prototype) {\n      case 'lines':\n        this.context.linesActions.selectToolDrawingLine(element.name);\n        break;\n      case 'items':\n        this.context.itemsActions.selectToolDrawingItem(element.name);\n        break;\n      case 'holes':\n        this.context.holesActions.selectToolDrawingHole(element.name);\n        break;\n    }\n\n    this.context.projectActions.pushLastSelectedCatalogElementToHistory(element);\n  }\n\n  render() {\n    let element = this.props.element;\n    let hover = this.state.hover;\n\n    return (\n      <div\n        style={hover ? STYLE_BOX_HOVER : STYLE_BOX}\n        onClick={e => this.select()}\n        onMouseEnter={e => this.setState({hover: true})}\n        onMouseLeave={e => this.setState({hover: false})}\n      >\n        <b style={ !hover ? STYLE_TITLE : STYLE_TITLE_HOVER }>{element.info.title}</b>\n        <div style={ STYLE_IMAGE_CONTAINER }>\n          <div style={{...( !hover ? STYLE_IMAGE: STYLE_IMAGE_HOVER ), backgroundImage: 'url(' + element.info.image + ')'}}>\n            { hover ? <IconAdd style={STYLE_PLUS_HOVER} /> : null }\n          </div>\n        </div>\n        <ul style={STYLE_TAGS}>\n          {element.info.tag.map((tag, index) => <li style={STYLE_TAG} key={index}>{tag}</li>)}\n        </ul>\n        <div style={STYLE_DESCRIPTION}>{element.info.description}</div>\n      </div>\n    );\n  }\n}\n\nCatalogItem.propTypes = {\n  element: PropTypes.object.isRequired,\n};\n\nCatalogItem.contextTypes = {\n  itemsActions: PropTypes.object.isRequired,\n  linesActions: PropTypes.object.isRequired,\n  holesActions: PropTypes.object.isRequired,\n  projectActions: PropTypes.object.isRequired\n};\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport {MdArrowBack as Arrow} from 'react-icons/md';\nimport * as SharedStyle from '../../shared-style';\n\nconst breadcrumbStyle = {\n  margin: '1.5em',\n  display: 'flex'\n};\n\nconst breadcrumbTextStyle = {\n  fontSize: '20px',\n  cursor: 'pointer'\n};\n\nconst breadcrumbLastTextStyle = {\n  ...breadcrumbTextStyle,\n  fontWeight:'bolder',\n  color:SharedStyle.SECONDARY_COLOR.main\n};\n\nconst breadcrumbTabStyle = {\n  fill: SharedStyle.COLORS.black,\n  fontSize: '24px',\n  marginLeft: '10px',\n  marginRight: '10px'\n};\n\nconst CatalogBreadcrumb = ({ names }) => {\n\n  let labelNames = names.map((name, ind) => {\n\n    let lastElement = ind === names.length - 1;\n\n    return <div key={ind} style={{ display: 'flex' }}>\n        <div style={ !lastElement ? breadcrumbTextStyle : breadcrumbLastTextStyle } onClick={name.action || null}>{name.name}</div>\n        { !lastElement ? <Arrow style={breadcrumbTabStyle} /> : null }\n    </div>\n  });\n\n  return <div style={breadcrumbStyle}>{labelNames}</div>;\n};\n\nCatalogBreadcrumb.propTypes = {\n  names: PropTypes.arrayOf(PropTypes.object).isRequired\n};\n\nexport default CatalogBreadcrumb;\n","import React, {Component} from 'react';\nimport PropTypes from 'prop-types';\nimport {MdNavigateNext} from 'react-icons/md';\nimport * as SharedStyle from '../../shared-style';\n\nconst STYLE_BOX = {\n  width: '14em',\n  height: '14em',\n  padding: '0.625em',\n  background: '#f7f7f9',\n  border: '1px solid #e1e1e8',\n  cursor: 'pointer',\n  position: 'relative',\n  boxShadow: '0 1px 6px 0 rgba(0, 0, 0, 0.11), 0 1px 4px 0 rgba(0, 0, 0, 0.11)',\n  borderRadius: '2px',\n  transition: 'all .2s ease-in-out',\n  WebkitTransition: 'all .2s ease-in-out',\n  alignSelf: 'center',\n  justifySelf: 'center',\n};\n\nconst STYLE_BOX_HOVER = {\n  ...STYLE_BOX,\n  background: SharedStyle.SECONDARY_COLOR.main\n};\n\nconst STYLE_TITLE = {\n  width: '100%',\n  position: 'absolute',\n  textAlign: 'center',\n  display: 'block',\n  marginBottom: '.5em',\n  padding:'1em',\n  textTransform: 'capitalize',\n  WebkitTransition: 'all .15s ease-in-out'\n};\n\nconst STYLE_TITLE_HOVERED = {\n  ...STYLE_TITLE,\n  fontSize: '1.4em',\n  transform: 'translateY(-60px)',\n  color:'rgb(28, 166, 252)',\n  marginTop:'0.5em'\n};\n\nconst STYLE_NEXT_HOVER = {\n  position: 'absolute',\n  color: SharedStyle.SECONDARY_COLOR.main,\n  fontSize: '5em',\n  width: '100%',\n};\n\nconst CONTAINER_DIV = {\n  background: SharedStyle.COLORS.white,\n  marginBottom: '5px',\n  border: 'solid 1px #EEE',\n  width: '100%',\n  height: '100%',\n  display: 'flex',\n  alignItems: 'center',\n  justifyContent: 'center'\n};\n\nexport default class CatalogPageItem extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {hover: false};\n  }\n\n  changePage(newPage) {\n    this.context.projectActions.changeCatalogPage(newPage, this.props.oldPage.name)\n  }\n\n  render() {\n    let page = this.props.page;\n    let hover = this.state.hover;\n\n    return (\n      <div\n        style={hover ? STYLE_BOX_HOVER : STYLE_BOX}\n        onClick={e => this.changePage(page.name)}\n        onMouseEnter={e => this.setState({hover: true})}\n        onMouseLeave={e => this.setState({hover: false})}\n      >\n        {hover ?\n          <div style={CONTAINER_DIV}>\n            <b style={STYLE_TITLE_HOVERED}>{page.label}</b>\n            <MdNavigateNext style={STYLE_NEXT_HOVER}/>\n          </div>\n          :\n          <div style={CONTAINER_DIV}>\n            <b style={STYLE_TITLE}>{page.label}</b>\n          </div>}\n\n      </div>\n    );\n  }\n}\n\nCatalogPageItem.propTypes = {\n  page: PropTypes.object.isRequired,\n  oldPage: PropTypes.object.isRequired,\n};\n\nCatalogPageItem.contextTypes = {\n  projectActions: PropTypes.object.isRequired\n};\n","import React, {Component} from 'react';\nimport PropTypes from 'prop-types';\nimport {MdNavigateBefore} from 'react-icons/md';\nimport * as SharedStyle from '../../shared-style';\n\nconst STYLE_BOX = {\n  width: '14em',\n  height: '14em',\n  padding: '0.625em',\n  background: '#f7f7f9',\n  border: '1px solid #e1e1e8',\n  margin: '0.3em',\n  cursor: 'pointer',\n  position: 'relative',\n  boxShadow: '0 1px 6px 0 rgba(0, 0, 0, 0.11), 0 1px 4px 0 rgba(0, 0, 0, 0.11)',\n  borderRadius: '2px',\n  transition: 'all .2s ease-in-out',\n  WebkitTransition: 'all .2s ease-in-out'\n};\n\nconst STYLE_BOX_HOVER = {\n  ...STYLE_BOX,\n  background: SharedStyle.SECONDARY_COLOR.main\n};\n\nconst STYLE_BACK = {\n  position: 'absolute',\n  color: SharedStyle.COLORS.black,\n  fontSize: '5em',\n  width: '100%'\n};\n\nconst STYLE_BACK_HOVER = {\n  ...STYLE_BACK,\n  color: SharedStyle.SECONDARY_COLOR.main\n};\n\nconst CONTAINER_DIV = {\n  background: SharedStyle.COLORS.white,\n  marginBottom: '5px',\n  border: 'solid 1px #e6e6e6',\n  width: '100%',\n  height: '100%',\n  display: 'flex',\n  alignItems: 'center',\n  justifyContent: 'center'\n};\n\nexport default class CatalogTurnBackPageItem extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {hover: false};\n  }\n\n  changePage(newPage) {\n    this.context.projectActions.goBackToCatalogPage(newPage)\n  }\n\n  render() {\n    let page = this.props.page;\n    let hover = this.state.hover;\n\n    return (\n      <div\n        style={hover ? STYLE_BOX_HOVER : STYLE_BOX}\n        onClick={e => this.changePage(page.name)}\n        onMouseEnter={e => this.setState({hover: true})}\n        onMouseLeave={e => this.setState({hover: false})}\n      >\n        <div style={CONTAINER_DIV}>\n          <MdNavigateBefore style={ !hover ? STYLE_BACK : STYLE_BACK_HOVER}/>\n        </div>\n\n      </div>\n    );\n  }\n}\n\nCatalogTurnBackPageItem.propTypes = {\n  page: PropTypes.object.isRequired\n};\n\nCatalogTurnBackPageItem.contextTypes = {\n  projectActions: PropTypes.object.isRequired\n};\n","import React, {Component} from 'react';\nimport PropTypes from 'prop-types';\nimport {\n  ContentTitle,\n  ContentContainer,\n  FormLabel,\n  FormBlock,\n  FormNumberInput,\n  FormSubmitButton,\n  CancelButton\n} from '../style/export';\n\nexport default class ProjectConfigurator extends Component {\n\n  constructor(props, context) {\n    super(props, context);\n\n    let scene = props.state.scene;\n\n    this.state = {\n      dataWidth: scene.width,\n      dataHeight: scene.height,\n    };\n  }\n\n  onSubmit(event) {\n    event.preventDefault();\n\n    let {projectActions} = this.context;\n\n    let {dataWidth, dataHeight} = this.state;\n    dataWidth = parseInt(dataWidth);\n    dataHeight = parseInt(dataHeight);\n    if (dataWidth <= 100 || dataHeight <= 100) {\n      alert('Scene size too small');\n    } else {\n      projectActions.setProjectProperties({width: dataWidth, height: dataHeight});\n    }\n  }\n\n\n  render() {\n    let {width, height} = this.props;\n    let {dataWidth, dataHeight} = this.state;\n    let {projectActions, translator} = this.context;\n\n    return (\n      <ContentContainer width={width} height={height}>\n        <ContentTitle>{translator.t('Project config')}</ContentTitle>\n\n        <form onSubmit={e => this.onSubmit(e)}>\n          <FormBlock>\n            <FormLabel htmlFor='width'>{translator.t('width')}</FormLabel>\n            <FormNumberInput\n              id='width'\n              placeholder='width'\n              value={dataWidth}\n              onChange={e => this.setState({dataWidth: e.target.value})}\n            />\n          </FormBlock>\n\n          <FormBlock>\n            <FormLabel htmlFor='height'>{translator.t('height')}</FormLabel>\n            <FormNumberInput\n              id='height'\n              placeholder='height'\n              value={dataHeight}\n              onChange={e => this.setState({dataHeight: e.target.value})}\n            />\n          </FormBlock>\n\n          <table style={{float: 'right'}}>\n            <tbody>\n            <tr>\n              <td>\n                <CancelButton size='large'\n                              onClick={e => projectActions.rollback()}>{translator.t('Cancel')}</CancelButton>\n              </td>\n              <td>\n                <FormSubmitButton size='large'>{translator.t('Save')}</FormSubmitButton>\n              </td>\n            </tr>\n            </tbody>\n          </table>\n        </form>\n      </ContentContainer>\n    )\n  }\n}\n\nProjectConfigurator.propTypes = {\n  width: PropTypes.number.isRequired,\n  height: PropTypes.number.isRequired,\n  state: PropTypes.object.isRequired,\n};\n\nProjectConfigurator.contextTypes = {\n  projectActions: PropTypes.object.isRequired,\n  translator: PropTypes.object.isRequired,\n};\n","import Sidebar from './sidebar';\nimport Panel from './panel';\nimport PanelLayers from './panel-layers';\nimport PanelLayerElement from './panel-layer-elements';\nimport PanelGuides from './panel-guides';\n\nexport {\n  Sidebar,\n  Panel,\n  PanelLayers,\n  PanelLayerElement,\n  PanelGuides\n};\n\nexport default {\n  Sidebar,\n  Panel,\n  PanelLayers,\n  PanelLayerElement,\n  PanelGuides\n};\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport PanelElementEditor from './panel-element-editor/panel-element-editor';\nimport PanelGroupEditor from './panel-group-editor';\nimport PanelMultiElementsEditor from './panel-element-editor/panel-multi-elements-editor';\nimport PanelLayers from './panel-layers';\nimport PanelGuides from './panel-guides';\nimport PanelGroups from './panel-groups';\nimport PanelLayerElements from './panel-layer-elements';\nimport * as SharedStyle from '../../shared-style';\nimport If from '../../utils/react-if';\n\nconst STYLE = {\n  backgroundColor: SharedStyle.PRIMARY_COLOR.main,\n  display: 'block',\n  overflowY: 'auto',\n  overflowX: 'hidden',\n  paddingBottom: '20px'\n};\n\nconst sortButtonsCb = (a, b) => {\n  if (a.index === undefined || a.index === null) {\n    a.index = Number.MAX_SAFE_INTEGER;\n  }\n\n  if (b.index === undefined || b.index === null) {\n    b.index = Number.MAX_SAFE_INTEGER;\n  }\n\n  return a.index - b.index;\n};\n\nconst mapButtonsCb = (el, ind) => <If key={ind} condition={el.condition} style={{ position: 'relative' }}>{el.dom}</If>;\n\nexport default function Sidebar({ state, width, height, sidebarComponents }) {\n\n  let selectedLayer = state.getIn(['scene', 'selectedLayer']);\n\n  //TODO change in multi-layer check\n  let selected = state.getIn(['scene', 'layers', selectedLayer, 'selected']);\n\n  let multiselected =\n    selected.lines.size > 1 ||\n    selected.items.size > 1 ||\n    selected.holes.size > 1 ||\n    selected.areas.size > 1 ||\n    selected.lines.size + selected.items.size + selected.holes.size + selected.areas.size > 1;\n\n  let selectedGroup = state.getIn(['scene', 'groups']).findEntry( g => g.get('selected') );\n\n  let sorter = [\n    { index: 0, condition: true, dom: <PanelGuides state={state}/> },\n    { index: 1, condition: true, dom: <PanelLayers state={state} /> },\n    { index: 2, condition: true, dom: <PanelLayerElements mode={state.mode} layers={state.scene.layers} selectedLayer={state.scene.selectedLayer} /> },\n    { index: 3, condition: true, dom: <PanelGroups mode={state.mode} groups={state.scene.groups} layers={state.scene.layers} /> },\n    { index: 4, condition: !multiselected, dom: <PanelElementEditor state={state} /> },\n    //{ index: 5, condition: multiselected, dom: <PanelMultiElementsEditor state={state} /> },\n    { index: 6, condition: !!selectedGroup, dom: <PanelGroupEditor state={state} groupID={selectedGroup ? selectedGroup[0] : null} /> }\n  ];\n\n  sorter = sorter.concat(sidebarComponents.map((Component, key) => {\n    return Component.prototype ? //if is a react component\n      {\n        condition: true,\n        dom: React.createElement(Component, { state, key })\n      } :\n      {                           //else is a sortable toolbar button\n        index: Component.index,\n        condition: Component.condition,\n        dom: React.createElement(Component.dom, { state, key })\n      };\n  }));\n\n  return (\n    <aside\n      style={{ width, height, ...STYLE }}\n      onKeyDown={event => event.stopPropagation()}\n      onKeyUp={event => event.stopPropagation()}\n      className=\"sidebar\"\n    >\n      {sorter.sort(sortButtonsCb).map(mapButtonsCb)}\n    </aside>\n  );\n}\n\nSidebar.propTypes = {\n  state: PropTypes.object.isRequired,\n  width: PropTypes.number.isRequired,\n  height: PropTypes.number.isRequired\n};\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport Panel from '../panel';\nimport {Seq} from 'immutable';\nimport {\n  MODE_IDLE, MODE_2D_ZOOM_IN, MODE_2D_ZOOM_OUT, MODE_2D_PAN, MODE_3D_VIEW, MODE_3D_FIRST_PERSON,\n  MODE_WAITING_DRAWING_LINE, MODE_DRAWING_LINE, MODE_DRAWING_HOLE, MODE_DRAWING_ITEM, MODE_DRAGGING_LINE,\n  MODE_DRAGGING_VERTEX, MODE_DRAGGING_ITEM, MODE_DRAGGING_HOLE, MODE_FITTING_IMAGE, MODE_UPLOADING_IMAGE,\n  MODE_ROTATING_ITEM\n} from '../../../constants';\nimport ElementEditor from './element-editor';\n\nexport default function PanelElementEditor({state}, {projectActions, translator}) {\n\n  let {scene, mode} = state;\n\n  if (![MODE_IDLE, MODE_2D_ZOOM_IN, MODE_2D_ZOOM_OUT, MODE_2D_PAN,\n      MODE_3D_VIEW, MODE_3D_FIRST_PERSON,\n      MODE_WAITING_DRAWING_LINE, MODE_DRAWING_LINE, MODE_DRAWING_HOLE, MODE_DRAWING_ITEM,\n      MODE_DRAGGING_LINE, MODE_DRAGGING_VERTEX, MODE_DRAGGING_ITEM, MODE_DRAGGING_HOLE,\n      MODE_ROTATING_ITEM, MODE_UPLOADING_IMAGE, MODE_FITTING_IMAGE].includes(mode)) return null;\n\n  let componentRenderer = (element, layer) =>\n    <Panel key={element.id} name={translator.t('Properties: [{0}] {1}', element.type, element.id)} opened={true}>\n      <div style={{padding: '5px 15px'}}>\n        <ElementEditor element={element} layer={layer} state={state}/>\n      </div>\n    </Panel>;\n\n  let layerRenderer = layer => Seq()\n    .concat(layer.lines, layer.holes, layer.areas, layer.items)\n    .filter(element => element.selected)\n    .map(element => componentRenderer(element, layer))\n    .valueSeq();\n\n  return <div>{scene.layers.valueSeq().map(layerRenderer)}</div>\n\n}\n\nPanelElementEditor.propTypes = {\n  state: PropTypes.object.isRequired,\n};\n\nPanelElementEditor.contextTypes = {\n  projectActions: PropTypes.object.isRequired,\n  translator: PropTypes.object.isRequired\n};\n","import React, {Component} from 'react';\nimport PropTypes from 'prop-types';\nimport {Map, fromJS} from 'immutable';\nimport AttributesEditor from './attributes-editor/attributes-editor';\nimport { GeometryUtils, MathUtils } from '../../../utils/export';\nimport * as SharedStyle from '../../../shared-style';\nimport convert from 'convert-units';\nimport {MdContentCopy, MdContentPaste} from 'react-icons/md';\n\nconst PRECISION = 2;\n\nconst attrPorpSeparatorStyle = {\n  margin: '0.5em 0.25em 0.5em 0',\n  border: '2px solid ' + SharedStyle.SECONDARY_COLOR.alt,\n  position:'relative',\n  height:'2.5em',\n  borderRadius:'2px'\n};\n\nconst headActionStyle = {\n  position:'absolute',\n  right:'0.5em',\n  top:'0.5em'\n};\n\nconst iconHeadStyle = {\n  float:'right',\n  margin:'-3px 4px 0px 0px',\n  padding:0,\n  cursor:'pointer',\n  fontSize:'1.4em'\n};\n\nexport default class ElementEditor extends Component {\n\n  constructor(props, context) {\n    super(props, context);\n\n    this.state = {\n      attributesFormData: this.initAttrData(this.props.element, this.props.layer, this.props.state),\n      propertiesFormData: this.initPropData(this.props.element, this.props.layer, this.props.state)\n    };\n\n    this.updateAttribute = this.updateAttribute.bind(this);\n  }\n\n  shouldComponentUpdate(nextProps, nextState) {\n    if(\n      this.state.attributesFormData.hashCode() !== nextState.attributesFormData.hashCode() ||\n      this.state.propertiesFormData.hashCode() !== nextState.propertiesFormData.hashCode() ||\n      this.props.state.clipboardProperties.hashCode() !== nextProps.state.clipboardProperties.hashCode()\n    ) return true;\n\n    return false;\n  }\n\n  componentWillReceiveProps({ element, layer, state }) {\n    let { prototype, id } = element;\n    let scene = this.props.state.get('scene');\n    let selectedLayer = scene.getIn(['layers', scene.get('selectedLayer')]);\n    let selected = selectedLayer.getIn([prototype, id]);\n\n    if( selectedLayer.hashCode() !== layer.hashCode() ) this.setState({\n      attributesFormData: this.initAttrData(element, layer, state),\n      propertiesFormData: this.initPropData(element, layer, state)\n    });\n  }\n\n  initAttrData(element, layer, state) {\n\n    element = typeof element.misc === 'object' ? element.set('misc', new Map(element.misc)) : element;\n\n    switch (element.prototype) {\n      case 'items': {\n        return new Map(element);\n      }\n      case 'lines': {\n        let v_a = layer.vertices.get(element.vertices.get(0));\n        let v_b = layer.vertices.get(element.vertices.get(1));\n\n        let distance = GeometryUtils.pointsDistance(v_a.x, v_a.y, v_b.x, v_b.y);\n        let _unit = element.misc.get('_unitLength') || this.context.catalog.unit;\n        let _length = convert(distance).from(this.context.catalog.unit).to(_unit);\n\n        return new Map({\n          vertexOne: v_a,\n          vertexTwo: v_b,\n          lineLength: new Map({length: distance, _length, _unit}),\n        });\n      }\n      case 'holes': {\n        let line = layer.lines.get(element.line);\n        let {x: x0, y: y0} = layer.vertices.get(line.vertices.get(0));\n        let {x: x1, y: y1} = layer.vertices.get(line.vertices.get(1));\n        let lineLength = GeometryUtils.pointsDistance(x0, y0, x1, y1);\n        let startAt = lineLength * element.offset - element.properties.get('width').get('length') / 2;\n\n        let _unitA = element.misc.get('_unitA') || this.context.catalog.unit;\n        let _lengthA = convert(startAt).from(this.context.catalog.unit).to(_unitA);\n\n        let endAt = lineLength - lineLength * element.offset - element.properties.get('width').get('length') / 2;\n        let _unitB = element.misc.get('_unitB') || this.context.catalog.unit;\n        let _lengthB = convert(endAt).from(this.context.catalog.unit).to(_unitB);\n\n        return new Map({\n          offset: element.offset,\n          offsetA: new Map({\n            length: MathUtils.toFixedFloat(startAt, PRECISION),\n            _length: MathUtils.toFixedFloat(_lengthA, PRECISION),\n            _unit: _unitA\n          }),\n          offsetB: new Map({\n            length: MathUtils.toFixedFloat(endAt, PRECISION),\n            _length: MathUtils.toFixedFloat(_lengthB, PRECISION),\n            _unit: _unitB\n          })\n        });\n      }\n      case 'areas': {\n        return new Map({});\n      }\n      default:\n        return null;\n    }\n\n\n  }\n\n  initPropData(element, layer, state) {\n    let {catalog} = this.context;\n    let catalogElement = catalog.getElement(element.type);\n\n    let mapped = {};\n    for (let name in catalogElement.properties) {\n      mapped[name] = new Map({\n        currentValue: element.properties.has(name) ? element.properties.get(name) : fromJS(catalogElement.properties[name].defaultValue),\n        configs: catalogElement.properties[name]\n      });\n    }\n\n    return new Map(mapped);\n  }\n\n  updateAttribute(attributeName, value) {\n\n    let {attributesFormData} = this.state;\n\n    switch (this.props.element.prototype) {\n      case 'items': {\n        attributesFormData = attributesFormData.set(attributeName, value);\n        break;\n      }\n      case 'lines': {\n        switch(attributeName)\n        {\n          case 'lineLength':\n          {\n            let v_0 = attributesFormData.get('vertexOne');\n            let v_1 = attributesFormData.get('vertexTwo');\n\n            let [v_a, v_b] = GeometryUtils.orderVertices([v_0, v_1]);\n\n            let v_b_new = GeometryUtils.extendLine(v_a.x, v_a.y, v_b.x, v_b.y, value.get('length'), PRECISION);\n\n            attributesFormData = attributesFormData.withMutations(attr => {\n              attr.set(v_0 === v_a ? 'vertexTwo' : 'vertexOne', v_b.merge(v_b_new));\n              attr.set('lineLength', value);\n            });\n            break;\n          }\n          case 'vertexOne':\n          case 'vertexTwo':\n          {\n            attributesFormData = attributesFormData.withMutations(attr => {\n              attr.set(attributeName, attr.get(attributeName).merge(value));\n\n              let newDistance = GeometryUtils.verticesDistance(attr.get('vertexOne'), attr.get('vertexTwo'));\n\n              attr.mergeIn(['lineLength'], attr.get('lineLength').merge({\n                'length': newDistance,\n                '_length': convert(newDistance).from(this.context.catalog.unit).to(attr.get('lineLength').get('_unit'))\n              }));\n            });\n            break;\n          }\n          default:\n          {\n            attributesFormData = attributesFormData.set(attributeName, value);\n            break;\n          }\n        }\n        break;\n      }\n      case 'holes': {\n        switch( attributeName )\n        {\n          case 'offsetA':\n          {\n            let line = this.props.layer.lines.get(this.props.element.line);\n\n            let orderedVertices = GeometryUtils.orderVertices([\n              this.props.layer.vertices.get(line.vertices.get(0)),\n              this.props.layer.vertices.get(line.vertices.get(1))\n            ]);\n\n            let [ {x: x0, y: y0}, {x: x1, y: y1} ] = orderedVertices;\n\n            let alpha = GeometryUtils.angleBetweenTwoPoints(x0, y0, x1, y1);\n            let lineLength = GeometryUtils.pointsDistance(x0, y0, x1, y1);\n            let widthLength = this.props.element.properties.get('width').get('length');\n            let halfWidthLength = widthLength / 2;\n\n            let lengthValue = value.get('length');\n            lengthValue = Math.max(lengthValue, 0);\n            lengthValue = Math.min(lengthValue, lineLength - widthLength);\n\n            let xp = (lengthValue + halfWidthLength) * Math.cos(alpha) + x0;\n            let yp = (lengthValue + halfWidthLength) * Math.sin(alpha) + y0;\n\n            let offset = GeometryUtils.pointPositionOnLineSegment(x0, y0, x1, y1, xp, yp);\n\n            let endAt = MathUtils.toFixedFloat(lineLength - (lineLength * offset) - halfWidthLength, PRECISION);\n            let offsetUnit = attributesFormData.getIn(['offsetB', '_unit']);\n\n            let offsetB = new Map({\n              length: endAt,\n              _length: convert(endAt).from(this.context.catalog.unit).to(offsetUnit),\n              _unit: offsetUnit\n            });\n\n            attributesFormData = attributesFormData.set('offsetB', offsetB).set('offset', offset);\n\n            let offsetAttribute = new Map({\n              length: MathUtils.toFixedFloat(lengthValue, PRECISION),\n              _unit: value.get('_unit'),\n              _length: MathUtils.toFixedFloat(convert(lengthValue).from(this.context.catalog.unit).to(value.get('_unit')), PRECISION)\n            });\n\n            attributesFormData = attributesFormData.set(attributeName, offsetAttribute);\n\n            break;\n          }\n          case 'offsetB':\n          {\n            let line = this.props.layer.lines.get(this.props.element.line);\n\n            let orderedVertices = GeometryUtils.orderVertices([\n              this.props.layer.vertices.get(line.vertices.get(0)),\n              this.props.layer.vertices.get(line.vertices.get(1))\n            ]);\n\n            let [ {x: x0, y: y0}, {x: x1, y: y1} ] = orderedVertices;\n\n            let alpha = GeometryUtils.angleBetweenTwoPoints(x0, y0, x1, y1);\n            let lineLength = GeometryUtils.pointsDistance(x0, y0, x1, y1);\n            let widthLength = this.props.element.properties.get('width').get('length');\n            let halfWidthLength = widthLength / 2;\n\n            let lengthValue = value.get('length');\n            lengthValue = Math.max(lengthValue, 0);\n            lengthValue = Math.min(lengthValue, lineLength - widthLength);\n\n            let xp = x1 - (lengthValue + halfWidthLength) * Math.cos(alpha);\n            let yp = y1 - (lengthValue + halfWidthLength) * Math.sin(alpha);\n\n            let offset = GeometryUtils.pointPositionOnLineSegment(x0, y0, x1, y1, xp, yp);\n\n            let startAt = MathUtils.toFixedFloat((lineLength * offset) - halfWidthLength, PRECISION);\n            let offsetUnit = attributesFormData.getIn(['offsetA', '_unit']);\n\n            let offsetA = new Map({\n              length: startAt,\n              _length: convert(startAt).from(this.context.catalog.unit).to(offsetUnit),\n              _unit: offsetUnit\n            });\n\n            attributesFormData = attributesFormData.set('offsetA', offsetA).set('offset', offset);\n\n            let offsetAttribute = new Map({\n              length: MathUtils.toFixedFloat(lengthValue, PRECISION),\n              _unit: value.get('_unit'),\n              _length: MathUtils.toFixedFloat(convert(lengthValue).from(this.context.catalog.unit).to(value.get('_unit')), PRECISION)\n            });\n\n            attributesFormData = attributesFormData.set(attributeName, offsetAttribute);\n\n            break;\n          }\n          default:\n          {\n            attributesFormData = attributesFormData.set(attributeName, value);\n            break;\n          }\n        };\n        break;\n      }\n      default:\n        break;\n    }\n\n    this.setState({attributesFormData});\n    this.save({attributesFormData});\n  }\n\n  updateProperty(propertyName, value) {\n    let {state: {propertiesFormData}} = this;\n    propertiesFormData = propertiesFormData.setIn([propertyName, 'currentValue'], value);\n    this.setState({propertiesFormData});\n    this.save({propertiesFormData});\n  }\n\n  reset() {\n    this.setState({propertiesFormData: this.initPropData(this.props.element, this.props.layer, this.props.state)});\n  }\n\n  save({propertiesFormData, attributesFormData}) {\n\n    if( propertiesFormData ) {\n      let properties = propertiesFormData.map(data => {\n        return data.get('currentValue');\n      });\n\n      this.context.projectActions.setProperties(properties);\n    }\n\n    if( attributesFormData ) {\n      switch (this.props.element.prototype) {\n        case 'items': {\n          this.context.projectActions.setItemsAttributes(attributesFormData);\n          break;\n        }\n        case 'lines': {\n          this.context.projectActions.setLinesAttributes(attributesFormData);\n          break;\n        }\n        case 'holes': {\n          this.context.projectActions.setHolesAttributes(attributesFormData);\n          break;\n        }\n      }\n    }\n  }\n\n  copyProperties( properties ) {\n    this.context.projectActions.copyProperties( properties );\n  }\n\n  pasteProperties() {\n    this.context.projectActions.pasteProperties();\n  }\n\n  render() {\n    let {\n      state: {propertiesFormData, attributesFormData},\n      context: {projectActions, catalog, translator},\n      props: {state: appState, element},\n    } = this;\n\n    return (\n      <div>\n\n        <AttributesEditor\n          element={element}\n          onUpdate={this.updateAttribute}\n          attributeFormData={attributesFormData}\n          state={appState}\n        />\n\n        <div style={attrPorpSeparatorStyle}>\n          <div style={headActionStyle}>\n            <div title={translator.t('Copy')} style={iconHeadStyle} onClick={ e => this.copyProperties(element.properties) }><MdContentCopy /></div>\n            {\n              appState.get('clipboardProperties') && appState.get('clipboardProperties').size ?\n                <div title={translator.t('Paste')} style={iconHeadStyle} onClick={ e => this.pasteProperties() }><MdContentPaste /></div> : null\n            }\n          </div>\n        </div>\n\n        {propertiesFormData.entrySeq()\n          .map(([propertyName, data]) => {\n\n            let currentValue = data.get('currentValue'), configs = data.get('configs');\n\n            let {Editor} = catalog.getPropertyType(configs.type);\n\n            return <Editor\n              key={propertyName}\n              propertyName={propertyName}\n              value={currentValue}\n              configs={configs}\n              onUpdate={value => this.updateProperty(propertyName, value)}\n              state={appState}\n              sourceElement={element}\n              internalState={this.state}\n            />\n          })\n        }\n\n      </div>\n    )\n  }\n}\n\nElementEditor.propTypes = {\n  state: PropTypes.object.isRequired,\n  element: PropTypes.object.isRequired,\n  layer: PropTypes.object.isRequired\n};\n\nElementEditor.contextTypes = {\n  projectActions: PropTypes.object.isRequired,\n  catalog: PropTypes.object.isRequired,\n  translator: PropTypes.object.isRequired,\n};\n","import React, {Component} from 'react';\nimport PropTypes from 'prop-types';\nimport ItemAttributesEditor from './item-attributes-editor';\nimport LineAttributesEditor from './line-attributes-editor';\nimport HoleAttributesEditor from './hole-attributes-editor';\n\n\nexport default function AttributesEditor({element, onUpdate, onValid, attributeFormData, state, ...rest}) {\n\n  switch (element.prototype) {\n    case 'items':\n      return <ItemAttributesEditor\n              element={element}\n              onUpdate={onUpdate}\n              onValid={onValid}\n              attributeFormData={attributeFormData}\n              state={state}\n              {...rest}\n            />;\n    case 'lines':\n      return <LineAttributesEditor\n              element={element}\n              onUpdate={onUpdate}\n              onValid={onValid}\n              attributeFormData={attributeFormData}\n              state={state}\n              {...rest}\n            />;\n    case 'holes':\n      return <HoleAttributesEditor\n              element={element}\n              onUpdate={onUpdate}\n              onValid={onValid}\n              attributeFormData={attributeFormData}\n              state={state}\n              {...rest}\n            />;\n    case 'areas':\n      return null;\n\n  }\n\n  return null;\n}\n\nAttributesEditor.propTypes = {\n  element: PropTypes.object.isRequired,\n  onUpdate: PropTypes.func.isRequired,\n  onValid: PropTypes.func,\n  attributeFormData: PropTypes.object.isRequired,\n  state: PropTypes.object.isRequired\n};\n","import React, {Component} from 'react';\nimport PropTypes from 'prop-types';\nimport FormNumberInput from '../../../style/form-number-input';\nimport FormTextInput from '../../../style/form-text-input';\n\nconst tableStyle = { width: '100%' };\nconst firstTdStyle = { width: '6em' };\nconst inputStyle = { textAlign: 'left' };\n\nexport default function ItemAttributesEditor({element, onUpdate, attributeFormData, state, ...rest}, {translator}) {\n  let name = attributeFormData.has('name') ? attributeFormData.get('name') : element.name;\n  let renderedX = attributeFormData.has('x') ? attributeFormData.get('x') : element.x;\n  let renderedY = attributeFormData.has('y') ? attributeFormData.get('y') : element.y;\n  let renderedR = attributeFormData.has('rotation') ? attributeFormData.get('rotation') : element.rotation;\n\n  return (\n    <table style={tableStyle}>\n      <tbody>\n        <tr>\n          <td style={firstTdStyle}>{translator.t('Name')}</td>\n          <td>\n            <FormTextInput\n              value={name}\n              onChange={event => onUpdate('name', event.target.value)}\n              style={inputStyle}\n            />\n          </td>\n        </tr>\n        <tr>\n          <td style={firstTdStyle}>X</td>\n          <td>\n            <FormNumberInput\n              value={renderedX}\n              onChange={event => onUpdate('x', event.target.value)}\n              style={inputStyle}\n              state={state}\n              precision={2}\n              {...rest}\n            />\n          </td>\n        </tr>\n        <tr>\n          <td style={firstTdStyle}>Y</td>\n          <td>\n            <FormNumberInput\n              value={renderedY}\n              onChange={event => onUpdate('y', event.target.value)}\n              style={inputStyle}\n              state={state}\n              precision={2}\n              {...rest}\n            />\n          </td>\n        </tr>\n        <tr>\n          <td style={firstTdStyle}>{translator.t('Rotation')}</td>\n          <td>\n            <FormNumberInput\n              value={renderedR}\n              onChange={event => onUpdate('rotation', event.target.value)}\n              style={inputStyle}\n              state={state}\n              precision={2}\n              {...rest}\n            />\n          </td>\n        </tr>\n      </tbody>\n    </table>\n  );\n}\n\nItemAttributesEditor.propTypes = {\n  element: PropTypes.object.isRequired,\n  onUpdate: PropTypes.func.isRequired,\n  attributeFormData: PropTypes.object.isRequired,\n  state: PropTypes.object.isRequired\n};\n\nItemAttributesEditor.contextTypes = {\n  translator: PropTypes.object.isRequired,\n};\n","import React, {Component} from 'react';\nimport PropTypes from 'prop-types';\nimport { FormNumberInput, FormTextInput } from '../../../style/export';\nimport { PropertyLengthMeasure } from '../../../../catalog/properties/export';\n\nconst tableStyle = { width: '100%' };\nconst firstTdStyle = { width: '6em' };\nconst inputStyle = { textAlign: 'left' };\n\nexport default function LineAttributesEditor({element, onUpdate, attributeFormData, state, ...rest}, {translator}) {\n\n  let name = attributeFormData.has('name') ? attributeFormData.get('name') : element.name;\n  let vertexOne = attributeFormData.has('vertexOne') ? attributeFormData.get('vertexOne') : null;\n  let vertexTwo = attributeFormData.has('vertexTwo') ? attributeFormData.get('vertexTwo') : null;\n  let lineLength = attributeFormData.has('lineLength') ? attributeFormData.get('lineLength') : null;\n\n  return (\n    <div>\n      <table style={tableStyle}>\n        <tbody>\n          <tr>\n            <td style={firstTdStyle}>{translator.t('Name')}</td>\n            <td>\n              <FormTextInput\n                value={name}\n                onChange={event => onUpdate('name', event.target.value)}\n                style={inputStyle}\n              />\n            </td>\n          </tr>\n          <tr>\n            <td style={firstTdStyle}>X1</td>\n            <td>\n              <FormNumberInput\n                value={vertexOne.get('x')}\n                onChange={event => onUpdate('vertexOne', {'x': event.target.value})}\n                style={inputStyle}\n                state={state}\n                precision={2}\n                {...rest}\n              />\n            </td>\n          </tr>\n          <tr>\n            <td style={firstTdStyle}>Y1</td>\n            <td>\n              <FormNumberInput\n                value={vertexOne.get('y')}\n                onChange={event => onUpdate('vertexOne', {'y': event.target.value})}\n                style={inputStyle}\n                state={state}\n                precision={2}\n                {...rest}\n              />\n            </td>\n          </tr>\n          <tr>\n            <td style={firstTdStyle}>X2</td>\n            <td>\n              <FormNumberInput\n                value={vertexTwo.get('x')}\n                onChange={event => onUpdate('vertexTwo', {'x': event.target.value})}\n                style={inputStyle}\n                state={state}\n                precision={2}\n                {...rest}\n              />\n            </td>\n          </tr>\n          <tr>\n            <td style={firstTdStyle}>Y2</td>\n            <td>\n              <FormNumberInput\n                value={vertexTwo.get('y')}\n                onChange={event => onUpdate('vertexTwo', {'y': event.target.value})}\n                style={inputStyle}\n                state={state}\n                precision={2}\n                {...rest}\n              />\n            </td>\n          </tr>\n        </tbody>\n      </table>\n      <PropertyLengthMeasure\n        value={ lineLength }\n        onUpdate={mapped => onUpdate('lineLength', mapped)}\n        configs={{label: translator.t('Length'), min: 0, max: Infinity, precision: 2}}\n        state={state}\n      />\n    </div>\n  );\n}\n\nLineAttributesEditor.propTypes = {\n  element: PropTypes.object.isRequired,\n  onUpdate: PropTypes.func.isRequired,\n  onValid: PropTypes.func,\n  attributeFormData: PropTypes.object.isRequired,\n  state: PropTypes.object.isRequired\n};\n\nLineAttributesEditor.contextTypes = {\n  translator: PropTypes.object.isRequired,\n};\n","import React, {Component} from 'react';\nimport PropTypes from 'prop-types';\nimport PropertyLengthMeasure from '../../../../catalog/properties/property-lenght-measure';\nimport PropertyString from '../../../../catalog/properties/property-string';\n\nexport default function HoleAttributesEditor({element, onUpdate, attributeFormData, state, ...rest}, {translator}) {\n  let name = attributeFormData.has('name') ? attributeFormData.get('name') : element.name;\n  let offsetA = attributeFormData.has('offsetA') ? attributeFormData.get('offsetA') : element.offsetA;\n  let offsetB = attributeFormData.has('offsetB') ? attributeFormData.get('offsetB') : element.offsetA;\n\n  return <div>\n    <PropertyString\n      value={name}\n      onUpdate={mapped => onUpdate('name', mapped)}\n      configs={{label: 'Nome'}}\n      state={state}\n      {...rest}\n    />\n    <PropertyLengthMeasure\n      value={offsetA}\n      onUpdate={mapped => onUpdate('offsetA', mapped)}\n      configs={{label: 'Offset 1', min: 0, max: Infinity, precision: 2}}\n      state={state}\n      {...rest}\n    />\n    <PropertyLengthMeasure\n      value={offsetB}\n      onUpdate={mapped => onUpdate('offsetB', mapped)}\n      configs={{label: 'Offset 2', min: 0, max: Infinity, precision: 2}}\n      state={state}\n      {...rest}\n    />\n  </div>;\n}\n\nHoleAttributesEditor.propTypes = {\n  element: PropTypes.object.isRequired,\n  onUpdate: PropTypes.func.isRequired,\n  attributeFormData: PropTypes.object.isRequired,\n  state: PropTypes.object.isRequired\n};\n\nHoleAttributesEditor.contextTypes = {\n  translator: PropTypes.object.isRequired,\n};\n","import React, {Component} from 'react';\nimport PropTypes from 'prop-types';\nimport Panel from './panel';\nimport * as SharedStyle from '../../shared-style';\nimport { FormNumberInput, FormTextInput } from '../style/export';\nimport { Map } from 'immutable';\n\nimport {FaUnlink} from 'react-icons/fa';\n\nimport {\n  MODE_IDLE, MODE_2D_ZOOM_IN, MODE_2D_ZOOM_OUT, MODE_2D_PAN, MODE_3D_VIEW, MODE_3D_FIRST_PERSON,\n  MODE_WAITING_DRAWING_LINE, MODE_DRAWING_LINE, MODE_DRAWING_HOLE, MODE_DRAWING_ITEM, MODE_DRAGGING_LINE,\n  MODE_DRAGGING_VERTEX, MODE_DRAGGING_ITEM, MODE_DRAGGING_HOLE, MODE_FITTING_IMAGE, MODE_UPLOADING_IMAGE,\n  MODE_ROTATING_ITEM\n} from '../../constants';\n\nconst VISIBILITY_MODE = {\n  MODE_IDLE, MODE_2D_ZOOM_IN, MODE_2D_ZOOM_OUT, MODE_2D_PAN, MODE_3D_VIEW, MODE_3D_FIRST_PERSON,\n  MODE_WAITING_DRAWING_LINE, MODE_DRAWING_LINE, MODE_DRAWING_HOLE, MODE_DRAWING_ITEM, MODE_DRAGGING_LINE,\n  MODE_DRAGGING_VERTEX, MODE_DRAGGING_ITEM, MODE_DRAGGING_HOLE, MODE_FITTING_IMAGE, MODE_UPLOADING_IMAGE,\n  MODE_ROTATING_ITEM\n};\n\nconst tableStyle = { width: '100%' };\nconst firstTdStyle = { width: '6em' };\nconst inputStyle = { textAlign: 'left' };\nconst styleEditButton = {\n  marginLeft: '5px',\n  border: '0px',\n  background: 'none',\n  color: SharedStyle.COLORS.white,\n  fontSize: '14px',\n  outline: '0px'\n};\n\nconst tablegroupStyle = {\n  width: '100%',\n  cursor: 'pointer',\n  maxHeight: '20em',\n  marginLeft: '1px',\n  marginTop: '1em'\n};\n\nconst iconColStyle = {width: '2em'};\n\nexport default class PanelGroupEditor extends Component {\n\n  constructor(props, context) {\n    super(props, context);\n\n    this.state = {};\n  }\n\n  shouldComponentUpdate(nextProps, nextState) {\n    return true;\n  }\n\n  componentWillReceiveProps( nextProps, nextContext ) {\n  }\n\n  render() {\n    if (!this.props.groupID || !VISIBILITY_MODE[this.props.state.mode]) return null;\n\n    let group = this.props.state.getIn(['scene', 'groups', this.props.groupID]);\n    let elements = group.get('elements');\n\n    return (\n      <Panel name={this.context.translator.t('Group [{0}]', group.get('name'))} opened={true}>\n        <div style={{padding: '5px 15px'}}>\n          <table style={tableStyle}>\n            <tbody>\n              <tr>\n                <td style={firstTdStyle}>{this.context.translator.t('Name')}</td>\n                <td>\n                  <FormTextInput\n                    value={group.get('name')}\n                    onChange={e => this.context.groupsActions.setGroupAttributes( this.props.groupID, new Map({ 'name': e.target.value }) ) }\n                    style={inputStyle}\n                  />\n                </td>\n              </tr>\n              <tr>\n                <td style={firstTdStyle}>X</td>\n                <td>\n                  <FormNumberInput\n                    value={group.get('x')}\n                    onChange={e => this.context.groupsActions.groupTranslate( this.props.groupID, e.target.value, group.get('y') ) }\n                    style={inputStyle}\n                    state={this.props.state}\n                    precision={2}\n                  />\n                </td>\n              </tr>\n              <tr>\n                <td style={firstTdStyle}>Y</td>\n                <td>\n                  <FormNumberInput\n                    value={group.get('y')}\n                    onChange={e => this.context.groupsActions.groupTranslate( this.props.groupID, group.get('x'), e.target.value ) }\n                    style={inputStyle}\n                    state={this.props.state}\n                    precision={2}\n                  />\n                </td>\n              </tr>\n              <tr>\n                <td style={firstTdStyle}>{this.context.translator.t('Rotation')}</td>\n                <td>\n                  <FormNumberInput\n                    value={group.get('rotation')}\n                    onChange={e => this.context.groupsActions.groupRotate( this.props.groupID, e.target.value ) }\n                    style={inputStyle}\n                    state={this.props.state}\n                    precision={2}\n                  />\n                </td>\n              </tr>\n            </tbody>\n          </table>\n          {\n            elements.size ?\n              <div>\n                <p style={{textAlign:'center', borderBottom:SharedStyle.PRIMARY_COLOR.border , paddingBottom:'1em'}}>{this.context.translator.t('Group\\'s Elements')}</p>\n                <table style={tablegroupStyle}>\n                  <thead>\n                    <tr>\n                      <th style={iconColStyle}></th>\n                      <th>{this.context.translator.t('Layer')}</th>\n                      <th>{this.context.translator.t('Prototype')}</th>\n                      <th>{this.context.translator.t('Name')}</th>\n                    </tr>\n                  </thead>\n                  <tbody>\n                    {\n                      elements.entrySeq().map(([ layerID, layerElements ]) => {\n\n                        return layerElements.entrySeq().map(([elementPrototype, ElementList]) => {\n\n                          return ElementList.valueSeq().map( elementID => {\n                            let element = this.props.state.getIn(['scene', 'layers', layerID, elementPrototype, elementID]);\n\n                            return <tr\n                              key={elementID}\n                            >\n                              <td style={iconColStyle} title={this.context.translator.t('Un-chain Element from Group')}>\n                                <FaUnlink\n                                  onClick={ e => this.context.groupsActions.removeFromGroup( this.props.groupID, layerID, elementPrototype, elementID ) }\n                                  style={styleEditButton}\n                                />\n                              </td>\n                              <td style={{textAlign:'center'}}>\n                                {layerID}\n                              </td>\n                              <td style={{textAlign:'center', textTransform:'capitalize'}}>\n                                {elementPrototype}\n                              </td>\n                              <td style={{textAlign:'center'}}>\n                                {element.name}\n                              </td>\n                            </tr>;\n                          });\n                        });\n                      })\n                    }\n                  </tbody>\n                </table>\n              </div> :\n              null\n          }\n        </div>\n      </Panel>\n    );\n  }\n\n}\n\nPanelGroupEditor.propTypes = {\n  state: PropTypes.object.isRequired,\n  groupID: PropTypes.string\n};\n\nPanelGroupEditor.contextTypes = {\n  catalog: PropTypes.object.isRequired,\n  translator: PropTypes.object.isRequired,\n  itemsActions: PropTypes.object.isRequired,\n  linesActions: PropTypes.object.isRequired,\n  holesActions: PropTypes.object.isRequired,\n  groupsActions: PropTypes.object.isRequired,\n  projectActions: PropTypes.object.isRequired\n};\n","import React, {Component} from 'react';\nimport PropTypes from 'prop-types';\nimport Panel from '../panel';\nimport {Seq} from 'immutable';\nimport {\n  MODE_IDLE, MODE_2D_ZOOM_IN, MODE_2D_ZOOM_OUT, MODE_2D_PAN, MODE_3D_VIEW, MODE_3D_FIRST_PERSON,\n  MODE_WAITING_DRAWING_LINE, MODE_DRAWING_LINE, MODE_DRAWING_HOLE, MODE_DRAWING_ITEM, MODE_DRAGGING_LINE,\n  MODE_DRAGGING_VERTEX, MODE_DRAGGING_ITEM, MODE_DRAGGING_HOLE, MODE_FITTING_IMAGE, MODE_UPLOADING_IMAGE,\n  MODE_ROTATING_ITEM\n} from '../../../constants';\nimport { FormSelect } from '../../../components/style/export';\nimport { Group } from '../../../class/export';\n\nconst tableStyle = { width: '100%' };\nconst firstTdStyle = { width: '6em' };\n\nexport default class PanelMultiElementsEditor extends Component {\n//export default function PanelMultiElementsEditor({state}, {projectActions, translator}) {\n  constructor(props, context) {\n    super(props, context);\n\n    this.state = {\n      selectedGroupID: ''\n    };\n  }\n\n  addSelectToGroup( state, groupID, layerID, selecteds ) {\n    if( !groupID || groupID === '' || !selecteds || !selecteds.size ) return;\n\n    console.log('need to be added to group', groupID, 'elements', selecteds );\n\n    /*let selectedJs = selecteds.toJS();\n\n    for( let lineID in selectedJs.lines ) Group.addElement( state, groupID, layerID, 'lines', lineID );*/\n\n  }\n\n  render() {\n\n    let { mode } = this.props.state;\n\n    if (![MODE_IDLE, MODE_2D_ZOOM_IN, MODE_2D_ZOOM_OUT, MODE_2D_PAN,\n      MODE_3D_VIEW, MODE_3D_FIRST_PERSON,\n      MODE_WAITING_DRAWING_LINE, MODE_DRAWING_LINE, MODE_DRAWING_HOLE, MODE_DRAWING_ITEM,\n      MODE_DRAGGING_LINE, MODE_DRAGGING_VERTEX, MODE_DRAGGING_ITEM, MODE_DRAGGING_HOLE,\n      MODE_ROTATING_ITEM, MODE_UPLOADING_IMAGE, MODE_FITTING_IMAGE].includes(mode)) return null;\n\n    let groups = this.props.state.getIn(['scene', 'groups']);\n\n    //TODO change in multi-layer check\n    let selectedLayer = this.props.state.getIn(['scene', 'selectedLayer']);\n    let selecteds = this.props.state.getIn(['scene', 'layers', selectedLayer, 'selected']);\n\n    return (\n      <Panel name={'Multiselected'} opened={true}>\n        <div style={{padding: '5px 15px'}}>\n          <p>Multiselection tab</p>\n          <table style={tableStyle}>\n            <tbody>\n              <tr>\n                <td style={firstTdStyle}>Add to Group</td>\n                <td>\n                  <FormSelect value={this.state.selectedGroupID} onChange={ e => this.setState({'selectedGroupID': e.target.value}) }>\n                    <option key={0} value={''}></option>\n                    {\n                      groups.entrySeq().map( ([ groupID, group ]) => <option key={groupID} value={groupID}>{group.get('name')}</option>)\n                    }\n                  </FormSelect>\n                </td>\n                <td style={{cursor:'pointer', padding:'0.5em 0', textAlign:'center'}} onClick={ e => {\n                  if( !this.state.selectedGroupID || this.state.selectedGroupID === '' || !selecteds || !selecteds.size ) return;\n\n                  let selectedJs = selecteds.toJS();\n\n                  for( let x = 0; x < selectedJs.lines.length; x++ )\n                    this.context.groupsActions.addToGroup( this.state.selectedGroupID, selectedLayer, 'lines', selectedJs.lines[x] );\n\n                }}>+</td>\n              </tr>\n            </tbody>\n          </table>\n        </div>\n      </Panel>\n    );\n\n  }\n}\n\nPanelMultiElementsEditor.propTypes = {\n  state: PropTypes.object.isRequired,\n};\n\nPanelMultiElementsEditor.contextTypes = {\n  projectActions: PropTypes.object.isRequired,\n  groupsActions: PropTypes.object.isRequired,\n  translator: PropTypes.object.isRequired\n};\n","import React, {Component} from 'react';\nimport PropTypes from 'prop-types';\nimport Panel from './panel';\nimport * as SharedStyle from '../../shared-style';\nimport {TiPlus, TiDelete} from 'react-icons/ti';\nimport {FaTrash, FaEye, FaLink, FaUnlink} from 'react-icons/fa';\nimport { Map } from 'immutable';\n\nimport {\n  MODE_IDLE, MODE_2D_ZOOM_IN, MODE_2D_ZOOM_OUT, MODE_2D_PAN, MODE_3D_VIEW, MODE_3D_FIRST_PERSON,\n  MODE_WAITING_DRAWING_LINE, MODE_DRAWING_LINE, MODE_DRAWING_HOLE, MODE_DRAWING_ITEM, MODE_DRAGGING_LINE,\n  MODE_DRAGGING_VERTEX, MODE_DRAGGING_ITEM, MODE_DRAGGING_HOLE, MODE_FITTING_IMAGE, MODE_UPLOADING_IMAGE,\n  MODE_ROTATING_ITEM\n} from '../../constants';\n\nconst VISIBILITY_MODE = {\n  MODE_IDLE, MODE_2D_ZOOM_IN, MODE_2D_ZOOM_OUT, MODE_2D_PAN, MODE_3D_VIEW, MODE_3D_FIRST_PERSON,\n  MODE_WAITING_DRAWING_LINE, MODE_DRAWING_LINE, MODE_DRAWING_HOLE, MODE_DRAWING_ITEM, MODE_DRAGGING_LINE,\n  MODE_DRAGGING_VERTEX, MODE_DRAGGING_ITEM, MODE_DRAGGING_HOLE, MODE_FITTING_IMAGE, MODE_UPLOADING_IMAGE,\n  MODE_ROTATING_ITEM\n};\n\nconst styleEditButton = {\n  marginLeft: '5px',\n  border: '0px',\n  background: 'none',\n  color: SharedStyle.COLORS.white,\n  fontSize: '14px',\n  outline: '0px'\n};\n\nconst tablegroupStyle = {\n  width: '100%',\n  cursor: 'pointer',\n  maxHeight: '20em',\n  padding: '0 1em',\n  marginLeft: '1px'\n};\n\nconst iconColStyle = {width: '2em', textAlign: 'center'};\nconst styleHoverColor = {color: SharedStyle.SECONDARY_COLOR.main};\nconst styleEditButtonHover = {...styleEditButton, ...styleHoverColor};\nconst styleAddLabel = {fontSize: '10px', marginLeft: '5px'};\nconst styleEyeVisible = {fontSize: '1.25em'};\nconst styleEyeHidden = {...styleEyeVisible, color: '#a5a1a1'};\nconst newLayerLableStyle = {fontSize: '1.3em', cursor: 'pointer', textAlign: 'center'};\nconst newLayerLableHoverStyle = {...newLayerLableStyle, ...styleHoverColor};\n\nexport default class PanelGroups extends Component {\n\n  constructor(props, context) {\n    super(props, context);\n\n    this.state = {\n      newEmptyHover: false,\n      newSelectedHover: false\n    };\n  }\n\n  shouldComponentUpdate(nextProps, nextState) {\n    return ( \n      this.props.groups.hashCode() !== nextProps.groups.hashCode() ||\n      this.props.layers.hashCode() !== nextProps.layers.hashCode() ||\n      this.props.mode !== nextProps.mode\n    );\n  }\n\n  render() {\n    let { mode, groups, layers } = this.props;\n\n    if (!VISIBILITY_MODE[ mode ]) return null;\n\n    return (\n      <Panel name={this.context.translator.t('Groups')} opened={groups.size > 0}>\n        { groups.size ? <table style={tablegroupStyle}>\n          <thead>\n            <tr>\n              <th colSpan=\"4\"></th>\n              <th>{this.context.translator.t('Elements')}</th>\n              <th>{this.context.translator.t('Name')}</th>\n            </tr>\n          </thead>\n          <tbody>\n            {\n              groups.entrySeq().map(([ groupID, group ]) => {\n\n                let selectClick = e => this.context.groupsActions.selectGroup(groupID);\n\n                let swapVisibility = e => {\n                  e.stopPropagation();\n                  this.context.groupsActions.setGroupProperties(groupID, new Map({visible: !group.get('visible')}));\n                };\n\n                let chainToGroup = e => {\n                  layers.forEach((layer) => {\n\n                    let layerID = layer.get('id');\n                    let layerElements = {\n                      'lines': layer.get('lines'),\n                      'items': layer.get('items'),\n                      'holes': layer.get('holes'),\n                      'areas': layer.get('areas')\n                    };\n\n                    for( let elementPrototype in layerElements )\n                    {\n                      let ElementList = layerElements[elementPrototype];\n                      ElementList.filter( el => el.get('selected') ).forEach( element => {\n                        this.context.groupsActions.addToGroup( groupID, layerID, elementPrototype, element.get('id') );\n                      });\n                    }\n                  });\n\n                  selectClick(e);\n                };\n\n                let isCurrentgroup = group.get('selected');\n                let shouldHighlight = isCurrentgroup;\n                let rowStyle = !shouldHighlight ? null : styleHoverColor;\n\n                let dimension = group.get('elements').reduce( ( sum, layer ) => {\n                  return sum + layer.reduce( ( lSum, elProt ) => lSum + elProt.size, 0 );\n                }, 0);\n\n                return (\n                  <tr\n                    key={groupID}\n                    style={rowStyle}\n                  >\n                    <td style={iconColStyle} title={this.context.translator.t('Toggle Group Visibility')}>\n                      <FaEye\n                        onClick={swapVisibility}\n                        style={!group.get('visible') ? styleEyeHidden : styleEyeVisible}\n                      />\n                    </td>\n                    <td style={iconColStyle} title={this.context.translator.t('Chain selected Elements to Group')}>\n                      <FaLink\n                        onClick={chainToGroup}\n                        style={!shouldHighlight ? styleEditButton : styleEditButtonHover}\n                      />\n                    </td>\n                    <td style={iconColStyle} title={this.context.translator.t('Un-chain all Group\\'s Elements and remove Group')}>\n                      <FaUnlink\n                        onClick={ e => this.context.groupsActions.removeGroup(groupID) }\n                        style={!shouldHighlight ? styleEditButton : styleEditButtonHover}\n                      />\n                    </td>\n                    <td style={iconColStyle} title={this.context.translator.t('Delete group and all Elements')}>\n                      <FaTrash\n                        onClick={ e => this.context.groupsActions.removeGroupAndDeleteElements(groupID) }\n                        style={!shouldHighlight ? styleEditButton : styleEditButtonHover}\n                      />\n                    </td>\n                    <td onClick={selectClick} style={{width:'0em', textAlign:'center'}}>\n                      { dimension }\n                    </td>\n                    <td onClick={selectClick}>\n                      {group.get('name')}\n                    </td>\n                  </tr>\n                );\n              })\n            }\n          </tbody>\n        </table> : null }\n\n        <table style={{width:'100%', marginTop: '0.1em'}}>\n          <tbody>\n            <tr>\n              <td\n                style={ !this.state.newEmptyHover ? newLayerLableStyle : newLayerLableHoverStyle }\n                onMouseOver={ () => this.setState({newEmptyHover: true}) }\n                onMouseOut={ () => this.setState({newEmptyHover: false}) }\n                onClick={ e => this.context.groupsActions.addGroup() }\n              >\n                <TiPlus />\n                <b style={styleAddLabel}>{this.context.translator.t('New Empty Group')}</b>\n              </td>\n              <td\n                style={ !this.state.newSelectedHover ? newLayerLableStyle : newLayerLableHoverStyle }\n                onMouseOver={ () => this.setState({newSelectedHover: true}) }\n                onMouseOut={ () => this.setState({newSelectedHover: false}) }\n                onClick={ e => this.context.groupsActions.addGroupFromSelected() }\n              >\n                <TiPlus />\n                <b style={styleAddLabel}>{this.context.translator.t('New Group from selected')}</b>\n              </td>\n            </tr>\n          </tbody>\n        </table>\n\n      </Panel>\n    )\n  }\n\n}\n\nPanelGroups.propTypes = {\n  mode: PropTypes.string.isRequired,\n  groups: PropTypes.object.isRequired,\n  layers: PropTypes.object.isRequired\n};\n\nPanelGroups.contextTypes = {\n  catalog: PropTypes.object.isRequired,\n  translator: PropTypes.object.isRequired,\n  itemsActions: PropTypes.object.isRequired,\n  linesActions: PropTypes.object.isRequired,\n  holesActions: PropTypes.object.isRequired,\n  groupsActions: PropTypes.object.isRequired,\n  projectActions: PropTypes.object.isRequired\n};\n","import FooterToggleButton from './footer-toggle-button';\nimport FooterContentButton from './footer-content-button';\nimport FooterBar from './footerbar';\n\nexport {\n  FooterToggleButton,\n  FooterContentButton,\n  FooterBar\n};\n\nexport default {\n  FooterToggleButton,\n  FooterContentButton,\n  FooterBar\n};\n","import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport If from '../../utils/react-if';\nimport FooterToggleButton from './footer-toggle-button';\nimport FooterContentButton from './footer-content-button';\nimport { SNAP_POINT, SNAP_LINE, SNAP_SEGMENT, SNAP_GRID, SNAP_GUIDE } from '../../utils/snap';\nimport { MODE_SNAPPING } from '../../constants';\nimport * as SharedStyle from '../../shared-style';\nimport { MdAddCircle, MdWarning } from 'react-icons/md';\nimport { VERSION } from '../../version';\n\nconst footerBarStyle = {\n  position: 'absolute',\n  bottom: 0,\n  lineHeight: '14px',\n  fontSize: '12px',\n  color: SharedStyle.COLORS.white,\n  backgroundColor: SharedStyle.SECONDARY_COLOR.alt,\n  padding: '3px 1em',\n  margin: 0,\n  boxSizing: 'border-box',\n  cursor: 'default',\n  userSelect: 'none',\n  zIndex: '9001'\n};\n\nexport const leftTextStyle = {\n  position: 'relative',\n  borderRight: '1px solid #FFF',\n  float: 'left',\n  padding: '0 1em',\n  display: 'inline-block'\n};\n\nexport const rightTextStyle = {\n  position: 'relative',\n  borderLeft: '1px solid #FFF',\n  float: 'right',\n  padding: '0 1em',\n  display: 'inline-block'\n};\n\nconst coordStyle = {\n  display: 'inline-block',\n  width: '6em',\n  margin: 0,\n  padding: 0\n};\n\nconst appMessageStyle = { borderBottom: '1px solid #555', lineHeight: '1.5em' };\n\nexport default class FooterBar extends Component {\n  constructor(props, context) {\n    super(props, context);\n    this.state = {};\n  }\n\n  render() {\n    let { state: globalState, width, height } = this.props;\n    let { translator, projectActions } = this.context;\n    let { x, y } = globalState.get('mouse').toJS();\n    let zoom = globalState.get('zoom');\n    let mode = globalState.get('mode');\n\n    let errors = globalState.get('errors').toArray();\n    let errorsJsx = errors.map((err, ind) =>\n      <div key={ind} style={appMessageStyle}>[ {(new Date(err.date)).toLocaleString()} ] {err.error}</div>\n    );\n    let errorLableStyle = errors.length ? { color: SharedStyle.MATERIAL_COLORS[500].red } : {};\n    let errorIconStyle = errors.length ? { transform: 'rotate(45deg)', color: SharedStyle.MATERIAL_COLORS[500].red } : { transform: 'rotate(45deg)' };\n\n    let warnings = globalState.get('warnings').toArray();\n    let warningsJsx = warnings.map((warn, ind) =>\n      <div key={ind} style={appMessageStyle}>[ {(new Date(warn.date)).toLocaleString()} ] {warn.warning}</div>\n    );\n    let warningLableStyle = warnings.length ? { color: SharedStyle.MATERIAL_COLORS[500].yellow } : {};\n    let warningIconStyle = warningLableStyle;\n\n    let updateSnapMask = (val) => projectActions.toggleSnap(globalState.snapMask.merge(val));\n\n    return (\n      <div style={{ ...footerBarStyle, width, height }}>\n\n        <If condition={MODE_SNAPPING.includes(mode)}>\n          <div style={leftTextStyle}>\n            <div title={translator.t('Mouse X Coordinate')} style={coordStyle}>X : {x.toFixed(3)}</div>\n            <div title={translator.t('Mouse Y Coordinate')} style={coordStyle}>Y : {y.toFixed(3)}</div>\n          </div>\n\n          <div style={leftTextStyle} title={translator.t('Scene Zoom Level')}>Zoom: {zoom.toFixed(3)}X</div>\n\n          <div style={leftTextStyle}>\n            <FooterToggleButton\n              state={this.state}\n              toggleOn={() => { updateSnapMask({ SNAP_POINT: true }); }}\n              toggleOff={() => { updateSnapMask({ SNAP_POINT: false }); }}\n              text=\"Snap PT\"\n              toggleState={globalState.snapMask.get(SNAP_POINT)}\n              title={translator.t('Snap to Point')}\n            />\n            <FooterToggleButton\n              state={this.state}\n              toggleOn={() => { updateSnapMask({ SNAP_LINE: true }); }}\n              toggleOff={() => { updateSnapMask({ SNAP_LINE: false }); }}\n              text=\"Snap LN\"\n              toggleState={globalState.snapMask.get(SNAP_LINE)}\n              title={translator.t('Snap to Line')}\n            />\n            <FooterToggleButton\n              state={this.state}\n              toggleOn={() => { updateSnapMask({ SNAP_SEGMENT: true }); }}\n              toggleOff={() => { updateSnapMask({ SNAP_SEGMENT: false }); }}\n              text=\"Snap SEG\"\n              toggleState={globalState.snapMask.get(SNAP_SEGMENT)}\n              title={translator.t('Snap to Segment')}\n            />\n            <FooterToggleButton\n              state={this.state}\n              toggleOn={() => { updateSnapMask({ SNAP_GRID: true }); }}\n              toggleOff={() => { updateSnapMask({ SNAP_GRID: false }); }}\n              text=\"Snap GRD\"\n              toggleState={globalState.snapMask.get(SNAP_GRID)}\n              title={translator.t('Snap to Grid')}\n            />\n            <FooterToggleButton\n              state={this.state}\n              toggleOn={() => { updateSnapMask({ SNAP_GUIDE: true }); }}\n              toggleOff={() => { updateSnapMask({ SNAP_GUIDE: false }); }}\n              text=\"Snap GDE\"\n              toggleState={globalState.snapMask.get(SNAP_GUIDE)}\n              title={translator.t('Snap to Guide')}\n            />\n          </div>\n        </If>\n\n        {this.props.footerbarComponents.map((Component, index) => <Component state={state} key={index} />)}\n\n        {\n          this.props.softwareSignature ?\n            <div\n              style={rightTextStyle}\n              title={this.props.softwareSignature + (this.props.softwareSignature.includes('React-Planner') ? '' : ` using React-Planner ${VERSION}`)}\n            >\n              {this.props.softwareSignature}\n            </div>\n            : null\n        }\n\n        <div style={rightTextStyle}>\n          <FooterContentButton\n            state={this.state}\n            icon={MdAddCircle}\n            iconStyle={errorIconStyle}\n            text={errors.length.toString()}\n            textStyle={errorLableStyle}\n            title={`Errors [ ${errors.length} ]`}\n            titleStyle={errorLableStyle}\n            content={[errorsJsx]}\n          />\n          <FooterContentButton\n            state={this.state}\n            icon={MdWarning}\n            iconStyle={warningIconStyle}\n            text={warnings.length.toString()}\n            textStyle={warningLableStyle}\n            title={`Warnings [ ${warnings.length} ]`}\n            titleStyle={warningLableStyle}\n            content={[warningsJsx]}\n          />\n        </div>\n\n      </div>\n    );\n  }\n}\n\nFooterBar.propTypes = {\n  state: PropTypes.object.isRequired,\n  footerbarComponents: PropTypes.array.isRequired,\n  width: PropTypes.number.isRequired,\n  height: PropTypes.number.isRequired,\n  softwareSignature: PropTypes.string\n};\n\nFooterBar.contextTypes = {\n  projectActions: PropTypes.object.isRequired,\n  viewer2DActions: PropTypes.object.isRequired,\n  // viewer3DActions: PropTypes.object.isRequired,\n  linesActions: PropTypes.object.isRequired,\n  holesActions: PropTypes.object.isRequired,\n  itemsActions: PropTypes.object.isRequired,\n  translator: PropTypes.object.isRequired,\n};\n","import * as TabsStyle from './tabs.css';\n\nexport {\n  TabsStyle\n};\n\nexport default {\n  TabsStyle\n};\n","var update = require(\"!../../node_modules/style-loader/lib/addStyleUrl.js\")(\n  require(\"!!../../node_modules/file-loader/dist/cjs.js!./tabs.css\")\n, {\"hmr\":true});\nif(module.hot) {\n  module.hot.accept(\"!!../../node_modules/file-loader/dist/cjs.js!./tabs.css\", function() {\n    update(require(\"!!../../node_modules/file-loader/dist/cjs.js!./tabs.css\"));\n  });\n\n  module.hot.dispose(function() { update(); });\n}","module.exports = __webpack_public_path__ + \"e500b4871b2c21b97e6d25cac92f917d.css\";","import Autosave from './autosave';\nimport Keyboard from './keyboard';\nimport ConsoleDebugger from './console-debugger';\n\nexport {\n  Autosave,\n  Keyboard,\n  ConsoleDebugger\n};\n\nexport default {\n  Autosave,\n  Keyboard,\n  ConsoleDebugger\n};\n","const localStorage = window.hasOwnProperty('localStorage') ? window.localStorage : false;\nimport { loadProject } from '../actions/project-actions';\n\nconst TIMEOUT_DELAY = 500;\n\nlet timeout = null;\n\nexport default function autosave(autosaveKey, delay) {\n\n  return (store, stateExtractor) => {\n\n    delay = delay || TIMEOUT_DELAY;\n\n    if (!autosaveKey) return;\n    if (!localStorage) return;\n\n    //revert\n    if (localStorage.getItem(autosaveKey) !== null) {\n      let data = localStorage.getItem(autosaveKey);\n      let json = JSON.parse(data);\n      store.dispatch(loadProject(json));\n    }\n\n    //update\n    store.subscribe(() => {\n      if (timeout) clearTimeout(timeout);\n      timeout = setTimeout(() => {\n        let state = stateExtractor(store.getState());\n        localStorage.setItem(autosaveKey, JSON.stringify(state.scene.toJS()));\n        /*let scene = state.sceneHistory.last;\n        if (scene) {\n          let json = JSON.stringify(scene.toJS());\n          localStorage.setItem(autosaveKey, json);\n        }*/\n      }, delay);\n    });\n  };\n}\n","import {\n  MODE_IDLE,\n  MODE_3D_FIRST_PERSON,\n  MODE_3D_VIEW,\n  MODE_SNAPPING,\n  KEYBOARD_BUTTON_CODE\n} from '../constants';\n\nimport {\n  rollback,\n  undo,\n  remove,\n  toggleSnap,\n  copyProperties,\n  pasteProperties,\n  setAlterateState\n} from '../actions/project-actions';\n\nexport default function keyboard() {\n\n  return (store, stateExtractor) => {\n\n    window.addEventListener('keydown', event => {\n\n      let state = stateExtractor(store.getState());\n      let mode = state.get('mode');\n\n      switch (event.keyCode) {\n        case KEYBOARD_BUTTON_CODE.BACKSPACE:\n        case KEYBOARD_BUTTON_CODE.DELETE:\n        {\n          if ([MODE_IDLE, MODE_3D_FIRST_PERSON, MODE_3D_VIEW].includes(mode))\n            store.dispatch(remove());\n          break;\n        }\n        case KEYBOARD_BUTTON_CODE.ESC:\n        {\n          store.dispatch(rollback());\n          break;\n        }\n        case KEYBOARD_BUTTON_CODE.Z:\n        {\n          if (event.getModifierState('Control') || event.getModifierState('Meta'))\n            store.dispatch(undo());\n          break;\n        }\n        case KEYBOARD_BUTTON_CODE.ALT:\n        {\n          if (MODE_SNAPPING.includes(mode))\n            store.dispatch(toggleSnap(state.snapMask.merge({\n              SNAP_POINT: false,\n              SNAP_LINE: false,\n              SNAP_SEGMENT: false,\n              SNAP_GRID : false,\n              SNAP_GUIDE : false,\n              tempSnapConfiguartion: state.snapMask.toJS()\n            })));\n          break;\n        }\n        case KEYBOARD_BUTTON_CODE.C:\n        {\n          let selectedLayer = state.getIn(['scene', 'selectedLayer']);\n          let selected = state.getIn(['scene', 'layers', selectedLayer, 'selected']);\n\n          if ( ( mode === MODE_IDLE || mode === MODE_3D_VIEW ) && (selected.holes.size || selected.areas.size || selected.items.size || selected.lines.size)) {\n            if (selected.holes.size) {\n              let hole = state.getIn(['scene', 'layers', selectedLayer, 'holes', selected.holes.get(0)]);\n              store.dispatch(copyProperties(hole.get('properties')));\n            }\n            else if (selected.areas.size) {\n              let area = state.getIn(['scene', 'layers', selectedLayer, 'areas', selected.areas.get(0)]);\n              store.dispatch(copyProperties(area.properties));\n            }\n            else if (selected.items.size) {\n              let item = state.getIn(['scene', 'layers', selectedLayer, 'items', selected.items.get(0)]);\n              store.dispatch(copyProperties(item.properties));\n            }\n            else if (selected.lines.size) {\n              let line = state.getIn(['scene', 'layers', selectedLayer, 'lines', selected.lines.get(0)]);\n              store.dispatch(copyProperties(line.properties));\n            }\n          }\n          break;\n        }\n        case KEYBOARD_BUTTON_CODE.V:\n        {\n          store.dispatch(pasteProperties());\n          break;\n        }\n        case KEYBOARD_BUTTON_CODE.CTRL:\n        {\n          store.dispatch(setAlterateState());\n          break;\n        }\n      }\n\n    });\n\n    window.addEventListener('keyup', event => {\n\n      let state = stateExtractor(store.getState());\n      let mode = state.get('mode');\n\n      switch (event.keyCode) {\n        case KEYBOARD_BUTTON_CODE.ALT:\n        {\n          if (MODE_SNAPPING.includes(mode))\n            store.dispatch(toggleSnap(state.snapMask.merge(state.snapMask.get('tempSnapConfiguartion'))));\n          break;\n        }\n        case KEYBOARD_BUTTON_CODE.CTRL:\n        {\n          store.dispatch(setAlterateState());\n          break;\n        }\n      }\n\n    });\n\n  }\n}\n","import actions from '../actions/export';\n\nexport default function consoleDebugger() {\n\n  return (store, stateExtractor) => {\n    window.ReactPlanner = {\n      ...actions,\n\n      getStore() {\n        return store;\n      },\n\n      getState() {\n        return stateExtractor(store.getState())\n      },\n\n      do(actions, delay = 300) {\n        actions = actions.reverse();\n        let dispatch = store.dispatch;\n        let dispatchAction = () => {\n          console.info(`There are other ${actions.length} actions on stack`);\n          if (actions.length === 0) return;\n          dispatch(actions.pop());\n          if (actions.length === 0) return;\n          setTimeout(dispatchAction, delay);\n        };\n        setTimeout(dispatchAction, 0);\n      }\n    };\n\n    console.groupCollapsed(\"ReactPlanner\");\n    console.info(\"ReactPlanner is ready\");\n    console.info(\"console.log(ReactPlanner)\");\n    console.log(window.ReactPlanner);\n    console.groupEnd();\n  }\n}\n","import WallFactory from './wall-factory';\nimport AreaFactory from './area-factory';\n\nexport {\n  WallFactory,\n  AreaFactory\n};\n\nexport default {\n  WallFactory,\n  AreaFactory\n};\n","import React from 'react';\nimport { buildWall, updatedWall } from './wall-factory-3d';\nimport * as SharedStyle from '../../shared-style';\nimport * as Geometry from '../../utils/geometry';\nimport Translator from '../../translator/translator';\n\nconst epsilon = 20;\nconst STYLE_TEXT = { textAnchor: 'middle' };\nconst STYLE_LINE = { stroke: SharedStyle.LINE_MESH_COLOR.selected };\nconst STYLE_RECT = { strokeWidth: 1, stroke: SharedStyle.LINE_MESH_COLOR.unselected, fill: 'url(#diagonalFill)' };\nconst STYLE_RECT_INVISIBLE = { strokeOpacity: 0.3, strokeWidth: 1, stroke: SharedStyle.LINE_MESH_COLOR.unselected, fill: 'url(#diagonalFillInvisible)' };\nconst STYLE_RECT_SELECTED = { ...STYLE_RECT, stroke: SharedStyle.LINE_MESH_COLOR.selected };\n\nlet translator = new Translator();\n\nexport default function WallFactory(name, info, textures) {\n\n  let wallElement = {\n    name,\n    prototype: 'lines',\n    info,\n    properties: {\n      height: {\n        label: translator.t('height'),\n        type: 'length-measure',\n        defaultValue: {\n          length: 300,\n        }\n      },\n      thickness: {\n        label: translator.t('thickness'),\n        type: 'length-measure',\n        defaultValue: {\n          length: 15\n        }\n      }\n    },\n\n    render2D: function (element, layer, scene) {\n      let { x: x1, y: y1 } = layer.vertices.get(element.vertices.get(0));\n      let { x: x2, y: y2 } = layer.vertices.get(element.vertices.get(1));\n\n      let length = Geometry.pointsDistance(x1, y1, x2, y2);\n      let length_5 = length / 5;\n\n      let thickness = element.getIn(['properties', 'thickness', 'length']);\n      let half_thickness = thickness / 2;\n      let half_thickness_eps = half_thickness + epsilon;\n      let char_height = 11;\n      let extra_epsilon = 5;\n      let textDistance = half_thickness + epsilon + extra_epsilon;\n\n      let fill = element.visible ? STYLE_RECT : STYLE_RECT_INVISIBLE;\n\n      return (element.selected) ?\n        <g>\n          <rect x=\"0\" y={-half_thickness} width={length} height={thickness} style={STYLE_RECT_SELECTED} />\n          <line x1={length_5} y1={-half_thickness_eps} x2={length_5} y2={half_thickness_eps} style={STYLE_LINE} />\n          <text x={length_5} y={textDistance + char_height} style={STYLE_TEXT}>A</text>\n          <text x={length_5} y={-textDistance} style={STYLE_TEXT}>B</text>\n        </g> :\n        <rect x=\"0\" y={-half_thickness} width={length} height={thickness} style={fill} />\n    },\n\n    render3D: function (element, layer, scene) {\n      return buildWall(element, layer, scene, textures);\n    },\n\n    updateRender3D: (element, layer, scene, mesh, oldElement, differences, selfDestroy, selfBuild) => {\n      return updatedWall(element, layer, scene, textures, mesh, oldElement, differences, selfDestroy, selfBuild);\n    }\n\n  };\n\n  if (textures && textures !== {}) {\n\n    let textureValues = { 'none': 'None' };\n\n    for (let textureName in textures) {\n      textureValues[textureName] = textures[textureName].name;\n    }\n\n    wallElement.properties.textureA = {\n      label: translator.t('texture') + ' A',\n      type: 'enum',\n      defaultValue: textureValues.bricks ? 'bricks' : 'none',\n      values: textureValues\n    };\n\n    wallElement.properties.textureB = {\n      label: translator.t('texture') + ' B',\n      type: 'enum',\n      defaultValue: textureValues.bricks ? 'bricks' : 'none',\n      values: textureValues\n    };\n\n  }\n\n  return wallElement;\n}\n","import {\n  TextureLoader,\n  Mesh,\n  RepeatWrapping,\n  Vector2,\n  BoxGeometry,\n  MeshBasicMaterial,\n  Group\n} from 'three';\n\nimport ThreeBSP from '../../utils/threeCSG.es6';\nimport {verticesDistance} from '../../utils/geometry';\nimport * as SharedStyle from '../../shared-style';\n\nconst halfPI = Math.PI / 2;\n\n/**\n * Apply a texture to a wall face\n * @param material: The material of the face\n * @param texture: The texture to load\n * @param length: The lenght of the face\n * @param height: The height of the face\n */\nconst applyTexture = (material, texture, length, height) => {\n  let loader = new TextureLoader();\n\n  if (texture) {\n    material.map = loader.load(texture.uri);\n    material.needsUpdate = true;\n    material.map.wrapS = RepeatWrapping;\n    material.map.wrapT = RepeatWrapping;\n    material.map.repeat.set(length * texture.lengthRepeatScale, height * texture.heightRepeatScale);\n\n    if (texture.normal) {\n      material.normalMap = loader.load(texture.normal.uri);\n      material.normalScale = new Vector2(texture.normal.normalScaleX, texture.normal.normalScaleY);\n      material.normalMap.wrapS = RepeatWrapping;\n      material.normalMap.wrapT = RepeatWrapping;\n      material.normalMap.repeat.set(length * texture.normal.lengthRepeatScale, height * texture.normal.heightRepeatScale);\n    }\n  }\n};\n\nexport function buildWall(element, layer, scene, textures)\n{\n  // Get the two vertices of the wall\n  let vertex0 = layer.vertices.get(element.vertices.get(0));\n  let vertex1 = layer.vertices.get(element.vertices.get(1));\n  let inverted = false;\n\n  // The first vertex is the smaller one\n  if (vertex0.x > vertex1.x) {\n    let app = vertex0;\n    vertex0 = vertex1;\n    vertex1 = app;\n    inverted = true;\n  }\n\n  // Get height and thickness of the wall converting them into the current scene units\n  let height = element.properties.getIn(['height', 'length']);\n  let thickness = element.properties.getIn(['thickness', 'length']);\n  let halfThickness = thickness / 2;\n  let faceThickness = 0.2;\n  let faceDistance = 1;\n\n  let distance = verticesDistance( vertex0, vertex1 );\n  let halfDistance = distance / 2;\n\n  let soulMaterial = new MeshBasicMaterial( {color: ( element.selected ? SharedStyle.MESH_SELECTED : 0xD3D3D3 )} );\n  let soul = new Mesh( new BoxGeometry(distance, height, thickness), soulMaterial );\n\n  let alpha = Math.asin((vertex1.y - vertex0.y) / (distance));\n\n  let sinAlpha = Math.sin(alpha);\n  let cosAlpha = Math.cos(alpha);\n\n  soul.position.y += height / 2;\n  soul.position.x += halfDistance * cosAlpha;\n  soul.position.z -= halfDistance * sinAlpha;\n\n  soul.rotation.y = alpha;\n\n  element.holes.forEach( holeID => {\n    let holeData = layer.holes.get(holeID);\n\n    let holeWidth = holeData.properties.getIn(['width', 'length']);\n    let holeHeight = holeData.properties.getIn(['height', 'length']);\n    let holeAltitude = holeData.properties.getIn(['altitude', 'length']);\n    let offset = inverted ? 1 - holeData.offset : holeData.offset;\n    let holeDistance = offset * distance;\n\n    let holeGeometry = new BoxGeometry( holeWidth, holeHeight, thickness );\n    let holeMesh = new Mesh( holeGeometry );\n\n    holeMesh.position.y += holeHeight / 2 + holeAltitude;\n    holeMesh.position.x += holeDistance * cosAlpha;\n    holeMesh.position.z -= holeDistance * sinAlpha;\n\n    holeMesh.rotation.y = alpha;\n\n    let wallBSP = new ThreeBSP( soul );\n    let holeBSP = new ThreeBSP( holeMesh );\n\n    let wallWithHoleBSP = wallBSP.subtract( holeBSP );\n    soul = wallWithHoleBSP.toMesh( soulMaterial );\n  });\n\n  soul.name = 'soul';\n\n  let frontMaterial = new MeshBasicMaterial();\n  let backMaterial = new MeshBasicMaterial();\n\n  applyTexture(frontMaterial, textures[element.properties.get('textureB')], distance, height);\n  applyTexture(backMaterial, textures[element.properties.get('textureA')], distance, height);\n\n  let scaleFactor = faceThickness / thickness;\n  let texturedFaceDistance = halfThickness + faceDistance;\n\n  let frontFace = soul.clone();\n  frontFace.material = frontMaterial;\n  frontFace.scale.set( 1, 1, scaleFactor );\n  frontFace.position.x += texturedFaceDistance * Math.cos(alpha - ( halfPI ) );\n  frontFace.position.z -= texturedFaceDistance * Math.sin(alpha - ( halfPI ) );\n  frontFace.name = 'frontFace';\n\n  let backFace = soul.clone();\n  backFace.material = backMaterial;\n  backFace.scale.set( 1, 1, scaleFactor );\n  backFace.position.x += texturedFaceDistance * Math.cos(alpha + ( halfPI ) );\n  backFace.position.z -= texturedFaceDistance * Math.sin(alpha + ( halfPI ) );\n  backFace.name = 'backFace';\n\n  let merged = new Group();\n  merged.add( soul, frontFace, backFace );\n\n  return Promise.resolve( merged );\n}\n\nexport function updatedWall( element, layer, scene, textures, mesh, oldElement, differences, selfDestroy, selfBuild ) {\n  let noPerf = () => { selfDestroy(); return selfBuild(); };\n\n  let soul = mesh.getObjectByName('soul');\n  let frontFace = mesh.getObjectByName('frontFace');\n  let backFace = mesh.getObjectByName('backFace');\n\n  if( differences[0] == 'selected' ) {\n    soul.material = new MeshBasicMaterial( {color: ( element.selected ? SharedStyle.MESH_SELECTED : 0xD3D3D3 )} );\n  }\n  else if( differences[0] == 'properties' ){\n\n    if( differences[1] == 'thickness' ){\n      let newThickness = element.getIn(['properties', 'thickness', 'length']);\n      let oldThickness = oldElement.getIn(['properties', 'thickness', 'length']);\n      let halfNewThickness = newThickness / 2;\n      let texturedFaceDistance = halfNewThickness + 1;\n      let originalThickness = oldThickness / soul.scale.z;\n      let alpha = soul.rotation.y;\n\n      let xTemp = texturedFaceDistance * Math.cos(alpha - ( halfPI ) );\n      let zTemp = texturedFaceDistance * Math.sin(alpha - ( halfPI ) );\n\n      soul.scale.set( 1, 1, ( newThickness / originalThickness ) );\n\n      frontFace.position.x = soul.position.x + ( xTemp );\n      frontFace.position.z = soul.position.z + ( zTemp );\n\n      backFace.position.x = soul.position.x - ( xTemp );\n      backFace.position.z = soul.position.z - ( zTemp );\n    }\n    else return noPerf();\n  }\n  else return noPerf();\n\n  return Promise.resolve(mesh);\n}\n","/*jshint esversion: 6 */\nimport * as THREE from 'three';\n\nconst EPSILON = 1e-5,\n    COPLANAR = 0,\n    FRONT = 1,\n    BACK = 2,\n    SPANNING = 3;\n\nexport default  class ThreeBSP {\n    constructor(geometry) {\n        // Convert THREE.Geometry to ThreeBSP\n        var i, _length_i,\n            face, vertex, faceVertexUvs, uvs,\n            polygon,\n            polygons = [],\n            tree;\n\n        this.Polygon = Polygon;\n        this.Vertex = Vertex;\n        this.Node = Node;\n        if (geometry instanceof THREE.Geometry) {\n            this.matrix = new THREE.Matrix4();\n        } else if (geometry instanceof THREE.Mesh) {\n            // #todo: add hierarchy support\n            geometry.updateMatrix();\n            this.matrix = geometry.matrix.clone();\n            geometry = geometry.geometry;\n        } else if (geometry instanceof Node) {\n            this.tree = geometry;\n            this.matrix = new THREE.Matrix4();\n            return this;\n        } else {\n            throw 'ThreeBSP: Given geometry is unsupported';\n        }\n\n        for (i = 0, _length_i = geometry.faces.length; i < _length_i; i++) {\n            face = geometry.faces[i];\n            faceVertexUvs = geometry.faceVertexUvs[0][i];\n            polygon = new Polygon();\n\n            if (face instanceof THREE.Face3) {\n                vertex = geometry.vertices[face.a];\n                uvs = faceVertexUvs ? new THREE.Vector2(faceVertexUvs[0].x, faceVertexUvs[0].y) : null;\n                vertex = new Vertex(vertex.x, vertex.y, vertex.z, face.vertexNormals[0], uvs);\n                vertex.applyMatrix4(this.matrix);\n                polygon.vertices.push(vertex);\n\n                vertex = geometry.vertices[face.b];\n                uvs = faceVertexUvs ? new THREE.Vector2(faceVertexUvs[1].x, faceVertexUvs[1].y) : null;\n                vertex = new Vertex(vertex.x, vertex.y, vertex.z, face.vertexNormals[1], uvs);\n                vertex.applyMatrix4(this.matrix);\n                polygon.vertices.push(vertex);\n\n                vertex = geometry.vertices[face.c];\n                uvs = faceVertexUvs ? new THREE.Vector2(faceVertexUvs[2].x, faceVertexUvs[2].y) : null;\n                vertex = new Vertex(vertex.x, vertex.y, vertex.z, face.vertexNormals[2], uvs);\n                vertex.applyMatrix4(this.matrix);\n                polygon.vertices.push(vertex);\n            } else if (typeof THREE.Face4) {\n                vertex = geometry.vertices[face.a];\n                uvs = faceVertexUvs ? new THREE.Vector2(faceVertexUvs[0].x, faceVertexUvs[0].y) : null;\n                vertex = new Vertex(vertex.x, vertex.y, vertex.z, face.vertexNormals[0], uvs);\n                vertex.applyMatrix4(this.matrix);\n                polygon.vertices.push(vertex);\n\n                vertex = geometry.vertices[face.b];\n                uvs = faceVertexUvs ? new THREE.Vector2(faceVertexUvs[1].x, faceVertexUvs[1].y) : null;\n                vertex = new Vertex(vertex.x, vertex.y, vertex.z, face.vertexNormals[1], uvs);\n                vertex.applyMatrix4(this.matrix);\n                polygon.vertices.push(vertex);\n\n                vertex = geometry.vertices[face.c];\n                uvs = faceVertexUvs ? new THREE.Vector2(faceVertexUvs[2].x, faceVertexUvs[2].y) : null;\n                vertex = new Vertex(vertex.x, vertex.y, vertex.z, face.vertexNormals[2], uvs);\n                vertex.applyMatrix4(this.matrix);\n                polygon.vertices.push(vertex);\n\n                vertex = geometry.vertices[face.d];\n                uvs = faceVertexUvs ? new THREE.Vector2(faceVertexUvs[3].x, faceVertexUvs[3].y) : null;\n                vertex = new Vertex(vertex.x, vertex.y, vertex.z, face.vertexNormals[3], uvs);\n                vertex.applyMatrix4(this.matrix);\n                polygon.vertices.push(vertex);\n            } else {\n                throw 'Invalid face type at index ' + i;\n            }\n\n            polygon.calculateProperties();\n            polygons.push(polygon);\n        }\n\n        this.tree = new Node(polygons);\n    }\n\n    subtract(other_tree) {\n        var a = this.tree.clone(),\n            b = other_tree.tree.clone();\n\n        a.invert();\n        a.clipTo(b);\n        b.clipTo(a);\n        b.invert();\n        b.clipTo(a);\n        b.invert();\n        a.build(b.allPolygons());\n        a.invert();\n        a = new ThreeBSP(a);\n        a.matrix = this.matrix;\n        return a;\n    }\n\n    union(other_tree) {\n        var a = this.tree.clone(),\n            b = other_tree.tree.clone();\n\n        a.clipTo(b);\n        b.clipTo(a);\n        b.invert();\n        b.clipTo(a);\n        b.invert();\n        a.build(b.allPolygons());\n        a = new ThreeBSP(a);\n        a.matrix = this.matrix;\n        return a;\n    }\n\n    intersect(other_tree) {\n        var a = this.tree.clone(),\n            b = other_tree.tree.clone();\n\n        a.invert();\n        b.clipTo(a);\n        b.invert();\n        a.clipTo(b);\n        b.clipTo(a);\n        a.build(b.allPolygons());\n        a.invert();\n        a = new ThreeBSP(a);\n        a.matrix = this.matrix;\n        return a;\n    }\n\n    toGeometry() {\n        var i, j,\n            matrix = new THREE.Matrix4().getInverse(this.matrix),\n            geometry = new THREE.Geometry(),\n            polygons = this.tree.allPolygons(),\n            polygon_count = polygons.length,\n            polygon, polygon_vertice_count,\n            vertice_dict = {},\n            vertex_idx_a, vertex_idx_b, vertex_idx_c,\n            vertex, face,\n            verticeUvs;\n\n        for (i = 0; i < polygon_count; i++) {\n            polygon = polygons[i];\n            polygon_vertice_count = polygon.vertices.length;\n\n            for (j = 2; j < polygon_vertice_count; j++) {\n                verticeUvs = [];\n\n                vertex = polygon.vertices[0];\n                verticeUvs.push(new THREE.Vector2(vertex.uv.x, vertex.uv.y));\n                vertex = new THREE.Vector3(vertex.x, vertex.y, vertex.z);\n                vertex.applyMatrix4(matrix);\n\n                if (typeof vertice_dict[vertex.x + ',' + vertex.y + ',' + vertex.z] !== 'undefined') {\n                    vertex_idx_a = vertice_dict[vertex.x + ',' + vertex.y + ',' + vertex.z];\n                } else {\n                    geometry.vertices.push(vertex);\n                    vertex_idx_a = vertice_dict[vertex.x + ',' + vertex.y + ',' + vertex.z] = geometry.vertices.length - 1;\n                }\n\n                vertex = polygon.vertices[j - 1];\n                verticeUvs.push(new THREE.Vector2(vertex.uv.x, vertex.uv.y));\n                vertex = new THREE.Vector3(vertex.x, vertex.y, vertex.z);\n                vertex.applyMatrix4(matrix);\n                if (typeof vertice_dict[vertex.x + ',' + vertex.y + ',' + vertex.z] !== 'undefined') {\n                    vertex_idx_b = vertice_dict[vertex.x + ',' + vertex.y + ',' + vertex.z];\n                } else {\n                    geometry.vertices.push(vertex);\n                    vertex_idx_b = vertice_dict[vertex.x + ',' + vertex.y + ',' + vertex.z] = geometry.vertices.length - 1;\n                }\n\n                vertex = polygon.vertices[j];\n                verticeUvs.push(new THREE.Vector2(vertex.uv.x, vertex.uv.y));\n                vertex = new THREE.Vector3(vertex.x, vertex.y, vertex.z);\n                vertex.applyMatrix4(matrix);\n                if (typeof vertice_dict[vertex.x + ',' + vertex.y + ',' + vertex.z] !== 'undefined') {\n                    vertex_idx_c = vertice_dict[vertex.x + ',' + vertex.y + ',' + vertex.z];\n                } else {\n                    geometry.vertices.push(vertex);\n                    vertex_idx_c = vertice_dict[vertex.x + ',' + vertex.y + ',' + vertex.z] = geometry.vertices.length - 1;\n                }\n\n                face = new THREE.Face3(\n                    vertex_idx_a,\n                    vertex_idx_b,\n                    vertex_idx_c,\n                    new THREE.Vector3(polygon.normal.x, polygon.normal.y, polygon.normal.z)\n                );\n\n                geometry.faces.push(face);\n                geometry.faceVertexUvs[0].push(verticeUvs);\n            }\n\n        }\n        return geometry;\n    }\n\n    toMesh (material) {\n        var geometry = this.toGeometry(),\n            mesh = new THREE.Mesh(geometry, material);\n\n        mesh.position.setFromMatrixPosition(this.matrix);\n        mesh.rotation.setFromRotationMatrix(this.matrix);\n\n        return mesh;\n    }\n}\nclass Polygon {\n    constructor(vertices, normal, w) {\n        if (!( vertices instanceof Array )) {\n            vertices = [];\n        }\n\n        this.vertices = vertices;\n        if (vertices.length > 0) {\n            this.calculateProperties();\n        } else {\n            this.normal = this.w = undefined;\n        }\n    }\n\n    calculateProperties() {\n        var a = this.vertices[0],\n            b = this.vertices[1],\n            c = this.vertices[2];\n\n        this.normal = b.clone().subtract(a).cross(\n            c.clone().subtract(a)\n        ).normalize();\n\n        this.w = this.normal.clone().dot(a);\n\n        return this;\n    }\n\n    clone() {\n        var i, vertice_count,\n            polygon = new Polygon();\n\n        for (i = 0, vertice_count = this.vertices.length; i < vertice_count; i++) {\n            polygon.vertices.push(this.vertices[i].clone());\n        }\n        polygon.calculateProperties();\n\n        return polygon;\n    }\n\n    flip() {\n        var i, vertices = [];\n\n        this.normal.multiplyScalar(-1);\n        this.w *= -1;\n\n        for (i = this.vertices.length - 1; i >= 0; i--) {\n            vertices.push(this.vertices[i]);\n        }\n        this.vertices = vertices;\n\n        return this;\n    }\n\n    classifyVertex(vertex) {\n        var side_value = this.normal.dot(vertex) - this.w;\n\n        if (side_value < -EPSILON) {\n            return BACK;\n        } else if (side_value > EPSILON) {\n            return FRONT;\n        } else {\n            return COPLANAR;\n        }\n    }\n\n    classifySide(polygon) {\n        var i, vertex, classification,\n            num_positive = 0,\n            num_negative = 0,\n            vertice_count = polygon.vertices.length;\n\n        for (i = 0; i < vertice_count; i++) {\n            vertex = polygon.vertices[i];\n            classification = this.classifyVertex(vertex);\n            if (classification === FRONT) {\n                num_positive++;\n            } else if (classification === BACK) {\n                num_negative++;\n            }\n        }\n\n        if (num_positive > 0 && num_negative === 0) {\n            return FRONT;\n        } else if (num_positive === 0 && num_negative > 0) {\n            return BACK;\n        } else if (num_positive === 0 && num_negative === 0) {\n            return COPLANAR;\n        } else {\n            return SPANNING;\n        }\n    }\n\n    splitPolygon(polygon, coplanar_front, coplanar_back, front, back) {\n        var classification = this.classifySide(polygon);\n\n        if (classification === COPLANAR) {\n\n            ( this.normal.dot(polygon.normal) > 0 ? coplanar_front : coplanar_back ).push(polygon);\n\n        } else if (classification === FRONT) {\n\n            front.push(polygon);\n\n        } else if (classification === BACK) {\n\n            back.push(polygon);\n\n        } else {\n\n            var vertice_count,\n                i, j, ti, tj, vi, vj,\n                t, v,\n                f = [],\n                b = [];\n\n            for (i = 0, vertice_count = polygon.vertices.length; i < vertice_count; i++) {\n\n                j = (i + 1) % vertice_count;\n                vi = polygon.vertices[i];\n                vj = polygon.vertices[j];\n                ti = this.classifyVertex(vi);\n                tj = this.classifyVertex(vj);\n\n                if (ti != BACK) f.push(vi);\n                if (ti != FRONT) b.push(vi);\n                if ((ti | tj) === SPANNING) {\n                    t = ( this.w - this.normal.dot(vi) ) / this.normal.dot(vj.clone().subtract(vi));\n                    v = vi.interpolate(vj, t);\n                    f.push(v);\n                    b.push(v);\n                }\n            }\n\n\n            if (f.length >= 3) front.push(new Polygon(f).calculateProperties());\n            if (b.length >= 3) back.push(new Polygon(b).calculateProperties());\n        }\n    }\n}\nclass Vertex {\n    constructor(x, y, z, normal, uv) {\n        this.x = x;\n        this.y = y;\n        this.z = z;\n        this.normal = normal || new THREE.Vector3();\n        this.uv = uv || new THREE.Vector2();\n    }\n\n    clone() {\n        return new Vertex(this.x, this.y, this.z, this.normal.clone(), this.uv.clone());\n    }\n\n    add(vertex) {\n        this.x += vertex.x;\n        this.y += vertex.y;\n        this.z += vertex.z;\n        return this;\n    }\n\n    subtract(vertex) {\n        this.x -= vertex.x;\n        this.y -= vertex.y;\n        this.z -= vertex.z;\n        return this;\n    }\n\n    multiplyScalar(scalar) {\n        this.x *= scalar;\n        this.y *= scalar;\n        this.z *= scalar;\n        return this;\n    }\n\n    cross(vertex) {\n        var x = this.x,\n            y = this.y,\n            z = this.z;\n\n        this.x = y * vertex.z - z * vertex.y;\n        this.y = z * vertex.x - x * vertex.z;\n        this.z = x * vertex.y - y * vertex.x;\n\n        return this;\n    }\n\n    normalize() {\n        var length = Math.sqrt(this.x * this.x + this.y * this.y + this.z * this.z);\n\n        this.x /= length;\n        this.y /= length;\n        this.z /= length;\n\n        return this;\n    }\n\n    dot(vertex) {\n        return this.x * vertex.x + this.y * vertex.y + this.z * vertex.z;\n    }\n\n    lerp(a, t) {\n        this.add(\n            a.clone().subtract(this).multiplyScalar(t)\n        );\n\n        this.normal.add(\n            a.normal.clone().sub(this.normal).multiplyScalar(t)\n        );\n\n        this.uv.add(\n            a.uv.clone().sub(this.uv).multiplyScalar(t)\n        );\n\n        return this;\n    }\n\n    interpolate(other, t) {\n        return this.clone().lerp(other, t);\n    }\n\n    applyMatrix4(m) {\n\n        // input: THREE.Matrix4 affine matrix\n\n        var x = this.x, y = this.y, z = this.z;\n\n        var e = m.elements;\n\n        this.x = e[0] * x + e[4] * y + e[8] * z + e[12];\n        this.y = e[1] * x + e[5] * y + e[9] * z + e[13];\n        this.z = e[2] * x + e[6] * y + e[10] * z + e[14];\n\n        return this;\n\n    }\n}\nclass Node {\n    constructor(polygons) {\n        var i, polygon_count,\n            front = [],\n            back = [];\n\n        this.polygons = [];\n        this.front = this.back = undefined;\n\n        if (!(polygons instanceof Array) || polygons.length === 0) return;\n\n        this.divider = polygons[0].clone();\n\n        for (i = 0, polygon_count = polygons.length; i < polygon_count; i++) {\n            this.divider.splitPolygon(polygons[i], this.polygons, this.polygons, front, back);\n        }\n\n        if (front.length > 0) {\n            this.front = new Node(front);\n        }\n\n        if (back.length > 0) {\n            this.back = new Node(back);\n        }\n    }\n\n    isConvex(polygons) {\n        var i, j;\n        for (i = 0; i < polygons.length; i++) {\n            for (j = 0; j < polygons.length; j++) {\n                if (i !== j && polygons[i].classifySide(polygons[j]) !== BACK) {\n                    return false;\n                }\n            }\n        }\n        return true;\n    }\n\n    build(polygons) {\n        var i, polygon_count,\n            front = [],\n            back = [];\n\n        if (!this.divider) {\n            this.divider = polygons[0].clone();\n        }\n\n        for (i = 0, polygon_count = polygons.length; i < polygon_count; i++) {\n            this.divider.splitPolygon(polygons[i], this.polygons, this.polygons, front, back);\n        }\n\n        if (front.length > 0) {\n            if (!this.front) this.front = new Node();\n            this.front.build(front);\n        }\n\n        if (back.length > 0) {\n            if (!this.back) this.back = new Node();\n            this.back.build(back);\n        }\n    }\n\n    allPolygons() {\n        var polygons = this.polygons.slice();\n        if (this.front) polygons = polygons.concat(this.front.allPolygons());\n        if (this.back) polygons = polygons.concat(this.back.allPolygons());\n        return polygons;\n    }\n\n    clone() {\n        var node = new Node();\n\n        node.divider = this.divider.clone();\n        node.polygons = this.polygons.map(function (polygon) {\n            return polygon.clone();\n        });\n        node.front = this.front && this.front.clone();\n        node.back = this.back && this.back.clone();\n\n        return node;\n    }\n\n    invert() {\n        var i, polygon_count, temp;\n\n        for (i = 0, polygon_count = this.polygons.length; i < polygon_count; i++) {\n            this.polygons[i].flip();\n        }\n\n        this.divider.flip();\n        if (this.front) this.front.invert();\n        if (this.back) this.back.invert();\n\n        temp = this.front;\n        this.front = this.back;\n        this.back = temp;\n\n        return this;\n    }\n\n    clipPolygons(polygons) {\n        var i, polygon_count,\n            front, back;\n\n        if (!this.divider) return polygons.slice();\n\n        front = [];\n        back = [];\n\n        for (i = 0, polygon_count = polygons.length; i < polygon_count; i++) {\n            this.divider.splitPolygon(polygons[i], front, back, front, back);\n        }\n\n        if (this.front) front = this.front.clipPolygons(front);\n        if (this.back) back = this.back.clipPolygons(back);\n        else back = [];\n\n        return front.concat(back);\n    }\n\n    clipTo(node) {\n        this.polygons = node.clipPolygons(this.polygons);\n        if (this.front) this.front.clipTo(node);\n        if (this.back) this.back.clipTo(node);\n    }\n}\n\nwindow.ThreeBSP = ThreeBSP;\n","import React from 'react';\nimport { createArea, updatedArea } from './area-factory-3d';\nimport * as SharedStyle from '../../shared-style';\nimport Translator from '../../translator/translator';\n\nlet translator = new Translator();\n\nexport default function AreaFactory(name, info, textures) {\n\n  let areaElement = {\n    name,\n    prototype: 'areas',\n    info: {\n      ...info,\n      visibility: {\n        catalog: false,\n        layerElementsVisible: false\n      }\n    },\n    properties: {\n      patternColor: {\n        label: translator.t('color'),\n        type: 'color',\n        defaultValue: SharedStyle.AREA_MESH_COLOR.unselected\n      },\n      thickness: {\n        label: translator.t('thickness'),\n        type: 'length-measure',\n        defaultValue: {\n          length: 0,\n        }\n      }\n    },\n    render2D: function (element, layer, scene) {\n      let path = '';\n\n      ///print area path\n      element.vertices.forEach((vertexID, ind) => {\n        let vertex = layer.vertices.get(vertexID);\n        path += (ind ? 'L' : 'M') + vertex.x + ' ' + vertex.y + ' ';\n      });\n\n      //add holes\n      element.holes.forEach(areaID => {\n        let area = layer.areas.get(areaID);\n\n        area.vertices.reverse().forEach((vertexID, ind) => {\n          let vertex = layer.vertices.get(vertexID);\n          path += (ind ? 'L' : 'M') + vertex.x + ' ' + vertex.y + ' ';\n        });\n\n      });\n\n      let fill = element.selected ? SharedStyle.AREA_MESH_COLOR.selected : element.properties.get('patternColor');\n\n      return (<path d={path} fill={fill} />);\n    },\n\n    render3D: function (element, layer, scene) {\n      return createArea(element, layer, scene, textures)\n    },\n\n    updateRender3D: (element, layer, scene, mesh, oldElement, differences, selfDestroy, selfBuild) => {\n      return updatedArea(element, layer, scene, textures, mesh, oldElement, differences, selfDestroy, selfBuild);\n    }\n\n  };\n\n  if (textures && textures !== {}) {\n\n    let textureValues = { 'none': 'None' };\n\n    for (let textureName in textures) {\n      textureValues[textureName] = textures[textureName].name\n    }\n\n    areaElement.properties.texture = {\n      label: translator.t('texture'),\n      type: 'enum',\n      defaultValue: 'none',\n      values: textureValues\n    };\n\n  }\n\n  return areaElement\n\n}\n","import {\n  Shape,\n  MeshPhongMaterial,\n  ShapeGeometry,\n  Box3,\n  TextureLoader,\n  BackSide,\n  FrontSide,\n  Object3D,\n  Mesh,\n  MeshBasicMaterial,\n  RepeatWrapping,\n  Vector2,\n  DoubleSide\n} from 'three';\nimport * as SharedStyle from '../../shared-style';\n\n/**\n * Apply a texture to a wall face\n * @param material: The material of the face\n * @param texture: The texture to load\n * @param length: The lenght of the face\n * @param height: The height of the face\n */\nconst applyTexture = (material, texture, length, height) => {\n  let loader = new TextureLoader();\n\n  if (texture) {\n    material.map = loader.load(texture.uri);\n    material.needsUpdate = true;\n    material.map.wrapS = RepeatWrapping;\n    material.map.wrapT = RepeatWrapping;\n    material.map.repeat.set(length * texture.lengthRepeatScale, height * texture.heightRepeatScale);\n\n    if (texture.normal) {\n      material.normalMap = loader.load(texture.normal.uri);\n      material.normalScale = new Vector2(texture.normal.normalScaleX, texture.normal.normalScaleY);\n      material.normalMap.wrapS = RepeatWrapping;\n      material.normalMap.wrapT = RepeatWrapping;\n      material.normalMap.repeat.set(length * texture.normal.lengthRepeatScale, height * texture.normal.heightRepeatScale);\n    }\n  }\n};\n\n/**\n * Function that assign UV coordinates to a geometry\n * @param geometry\n */\nconst assignUVs = (geometry) => {\n  geometry.computeBoundingBox();\n\n  let {min, max} = geometry.boundingBox;\n\n  let offset = new Vector2(0 - min.x, 0 - min.y);\n  let range = new Vector2(max.x - min.x, max.y - min.y);\n\n  geometry.faceVertexUvs[0] = geometry.faces.map((face) => {\n\n    let v1 = geometry.vertices[face.a];\n    let v2 = geometry.vertices[face.b];\n    let v3 = geometry.vertices[face.c];\n\n    return [\n      new Vector2((v1.x + offset.x) / range.x, (v1.y + offset.y) / range.y),\n      new Vector2((v2.x + offset.x) / range.x, (v2.y + offset.y) / range.y),\n      new Vector2((v3.x + offset.x) / range.x, (v3.y + offset.y) / range.y)\n    ];\n\n  });\n\n  geometry.uvsNeedUpdate = true;\n};\n\nexport function createArea(element, layer, scene, textures) {\n  let vertices = [];\n\n  element.vertices.forEach(vertexID => {\n    vertices.push(layer.vertices.get(vertexID));\n  });\n\n  let textureName = element.properties.get('texture');\n  let color = element.properties.get('patternColor');\n\n  if (element.selected) {\n    color = SharedStyle.AREA_MESH_COLOR.selected;\n  } else if (textureName && textureName !== 'none') {\n    color = SharedStyle.AREA_MESH_COLOR.unselected;\n  }\n\n  let shape = new Shape();\n  shape.moveTo(vertices[0].x, vertices[0].y);\n  for (let i = 1; i < vertices.length; i++) {\n    shape.lineTo(vertices[i].x, vertices[i].y);\n  }\n\n  let areaMaterial = new MeshPhongMaterial({side: DoubleSide, color});\n\n  /* Create holes for the area */\n  element.holes.forEach(holeID => {\n    let holeCoords = [];\n    layer.getIn(['areas', holeID, 'vertices']).forEach(vertexID => {\n      let {x, y} = layer.getIn(['vertices', vertexID]);\n      holeCoords.push([x, y]);\n    });\n    holeCoords = holeCoords.reverse();\n    let holeShape = createShape(holeCoords);\n    shape.holes.push(holeShape);\n  });\n\n  let shapeGeometry = new ShapeGeometry(shape);\n  assignUVs(shapeGeometry);\n\n  let boundingBox = new Box3().setFromObject(new Mesh(shapeGeometry, new MeshBasicMaterial()));\n\n  let width = boundingBox.max.x - boundingBox.min.x;\n  let height = boundingBox.max.y - boundingBox.min.y;\n\n  let texture = textures[textureName];\n\n  applyTexture(areaMaterial, texture, width, height);\n\n  let area = new Mesh(shapeGeometry, areaMaterial);\n\n  area.rotation.x -= Math.PI / 2;\n  area.name = 'floor';\n\n  return Promise.resolve(area);\n}\n\nexport function updatedArea( element, layer, scene, textures, mesh, oldElement, differences, selfDestroy, selfBuild ) {\n  let noPerf = () => { selfDestroy(); return selfBuild(); };\n  let floor = mesh.getObjectByName('floor');\n\n  if( differences[0] == 'selected' ) {\n    let color = element.selected ? SharedStyle.AREA_MESH_COLOR.selected : ( element.properties.get('patternColor') || SharedStyle.AREA_MESH_COLOR.unselected );\n    floor.material.color.set( color );\n  }\n  else if( differences[0] == 'properties' ){\n    if( differences[1] === 'texture' ) {\n      return noPerf();\n    }\n  }\n  else return noPerf();\n\n  return Promise.resolve(mesh);\n}\n\n/**\n * This function will create a shape given a list of coordinates\n * @param shapeCoords\n * @returns {Shape}\n */\nconst createShape = (shapeCoords) => {\n  let shape = new Shape();\n  shape.moveTo(shapeCoords[0][0], shapeCoords[0][1]);\n  for (let i = 1; i < shapeCoords.length; i++) {\n    shape.lineTo(shapeCoords[i][0], shapeCoords[i][1]);\n  }\n  return shape;\n};\n","import {ElementsFactories} from 'react-planner';\n\nlet info = {\n  title: 'area',\n  tag: ['area'],\n  description: 'Generic Room',\n  image: ''\n};\n\nlet textures = {\n  parquet: {\n    name: 'Parquet',\n    uri: require('./textures/parquet.jpg'),\n    lengthRepeatScale: 0.004,\n    heightRepeatScale: 0.004,\n  },\n  tile1: {\n    name: 'Tile1',\n    uri: require('./textures/tile1.jpg'),\n    lengthRepeatScale: 0.01,\n    heightRepeatScale: 0.01,\n  },\n  ceramic: {\n    name:'Ceramic Tile',\n    uri: require('./textures/ceramic-tile.jpg'),\n    lengthRepeatScale: 0.02,\n    heightRepeatScale: 0.02\n  },\n  strand_porcelain: {\n    name:'Strand Porcelain Tile',\n    uri: require('./textures/strand-porcelain.jpg'),\n    lengthRepeatScale: 0.02,\n    heightRepeatScale: 0.02\n  },\n  grass: {\n    name: 'Grass',\n    uri: require('./textures/grass.jpg'),\n    lengthRepeatScale: 0.01,\n    heightRepeatScale: 0.01,\n  }\n};\n\nexport default ElementsFactories.AreaFactory('area', info, textures);\n","module.exports = __webpack_public_path__ + \"catalog/areas/area/textures/parquet.jpg\";","module.exports = __webpack_public_path__ + \"catalog/areas/area/textures/tile1.jpg\";","module.exports = __webpack_public_path__ + \"catalog/areas/area/textures/ceramic-tile.jpg\";","module.exports = __webpack_public_path__ + \"catalog/areas/area/textures/strand-porcelain.jpg\";","module.exports = __webpack_public_path__ + \"catalog/areas/area/textures/grass.jpg\";","import {ElementsFactories} from 'react-planner';\n\nconst info = {\n  title: 'wall',\n  tag: ['wall'],\n  description: 'Wall with bricks or painted',\n  image: require('./wall.png'),\n  visibility: {\n    catalog: true,\n    layerElementsVisible: true\n  }\n};\n\nconst textures = {\n  bricks: {\n    name: 'Bricks',\n    uri: require('./textures/bricks.jpg'),\n    lengthRepeatScale: 0.01,\n    heightRepeatScale: 0.01,\n    normal: {\n      uri: require('./textures/bricks-normal.jpg'),\n      lengthRepeatScale: 0.01,\n      heightRepeatScale: 0.01,\n      normalScaleX: 0.8,\n      normalScaleY: 0.8\n    }\n  },\n  painted: {\n    name:'Painted',\n    uri: require('./textures/painted.jpg'),\n    lengthRepeatScale: 0.01,\n    heightRepeatScale: 0.01,\n    normal: {\n      uri: require('./textures/painted-normal.jpg'),\n      lengthRepeatScale: 0.01,\n      heightRepeatScale: 0.01,\n      normalScaleX: 0.4,\n      normalScaleY: 0.4\n    }\n  },\n};\n\nexport default ElementsFactories.WallFactory('wall', info, textures);\n\n","module.exports = __webpack_public_path__ + \"catalog/lines/wall/wall.png\";","module.exports = __webpack_public_path__ + \"catalog/lines/wall/textures/bricks.jpg\";","module.exports = __webpack_public_path__ + \"catalog/lines/wall/textures/bricks-normal.jpg\";","module.exports = __webpack_public_path__ + \"catalog/lines/wall/textures/painted.jpg\";","module.exports = __webpack_public_path__ + \"catalog/lines/wall/textures/painted-normal.jpg\";","import React from 'react';\nimport * as Three from 'three';\n\nconst black = new Three.MeshLambertMaterial({color: 0x000000});\nconst metalBlue = new Three.MeshLambertMaterial({color: 0xB7CEEC});\nconst grey = new Three.MeshLambertMaterial({color: 0xD2B06A});\nconst darkGrey = new Three.MeshLambertMaterial({color:0xFFEFCE});\n\nconst boxMaterials = [grey, grey, grey, grey,darkGrey,darkGrey];\n\nfunction makeDoor(width,height,thickness){\n\n  let door_double = new Three.Mesh();\n\n  let LongDoorGeometry = new Three.BoxGeometry(.75*width,height,thickness);\n  let longDoor = new Three.Mesh(LongDoorGeometry,boxMaterials);\n  longDoor.position.x -= width*.25 ;\n  door_double.add(longDoor);\n\n  let ShortDoorGeometry = new Three.BoxGeometry(.25*width,height,thickness);\n  let shortDoor = new Three.Mesh(ShortDoorGeometry,boxMaterials);\n  shortDoor.position.x += width*0.25;\n  shortDoor.position.z += thickness/10;\n  door_double.add(shortDoor);\n\n  let handle = makeHandle(width);\n  handle.position.set(width/20,height/40,thickness/2+thickness/10);\n  handle.rotation.z += Math.PI;\n  handle.rotation.x += Math.PI/2;\n  door_double.add(handle);\n\n  let handleBase = makeHandleBase();\n  handleBase.position.set(width/20,0,thickness/2);\n  handleBase.rotation.x = 0;\n  door_double.add(handleBase);\n\n  let handle2 = makeHandle(width);\n  handle2.position.set(width/20,height/40,-thickness/2-thickness/10);\n  handle2.rotation.z += Math.PI;\n  handle2.rotation.x -= Math.PI/2;\n  door_double.add(handle2);\n\n  let handleBase2 = makeHandleBase();\n  handleBase2.position.set(width/20,0,-thickness/2);\n  handleBase2.rotation.x = 0;\n  door_double.add(handleBase2);\n\n  return door_double\n}\n\n\nfunction makeHandle(width) {\n\n  let handle = new Three.Object3D();\n  let geometry_p1 = new Three.CylinderGeometry(width/100, width/100, width/32.5, Math.round(32));\n  let geometry_p2 = new Three.SphereGeometry(width/100, Math.round(32), Math.round(32));\n  let geometry_p3 = new Three.CylinderGeometry(width/100, width/100, width/14.5, Math.round(32));\n  let p1 = new Three.Mesh(geometry_p1, black);\n  let p2 = new Three.Mesh(geometry_p2, black);\n  let p3 = new Three.Mesh(geometry_p3, black);\n  let p4 = new Three.Mesh(geometry_p2, black);\n  p3.rotation.z = Math.PI / 2;\n  p3.position.x = width/14.5 / 2;\n  p2.position.y = -width/32.5 / 2;\n  p4.position.y = -width/14.5 / 2;\n  p3.add(p4);\n  p2.add(p3);\n  p1.add(p2);\n  handle.add(p1);\n\n  return handle;\n}\n\nfunction makeHandleBase() {\n\n  let handleBase = new Three.Object3D();\n  let geometryBase1 = new Three.BoxGeometry(7.6, 28, 2);\n  let geometryBase2 = new Three.CylinderGeometry(3.6, 3.6, 2, Math.round(32));\n  let lock = makeLock();\n  let handleBase1 = new Three.Mesh(geometryBase1, black);\n  let handleBase2 = new Three.Mesh(geometryBase2, black);\n  lock.rotation.x = Math.PI / 2;\n  lock.position.y = -3;\n  handleBase2.rotation.x = Math.PI / 2;\n  handleBase2.position.y = -3.3;\n  handleBase2.scale.z = 1.5;\n  handleBase1.add(lock);\n  handleBase1.add(handleBase2);\n  handleBase.add(handleBase1);\n\n  return handleBase;\n}\n\nfunction makeLock() {\n\n  let lock = new Three.Object3D();\n  let LockGeometry1 = new Three.CylinderGeometry(1.5, 1.5, 4, Math.round(32));\n  let lockGeometry2 = new Three.BoxGeometry(1.6, 4, 4);\n  let lockGeometry3 = new Three.BoxGeometry(1.4, 4.06, 0.36);\n  let lock_p1 = new Three.Mesh(LockGeometry1, metalBlue);\n  let lock_p2 = new Three.Mesh(lockGeometry2, metalBlue);\n  let lock_p3 = new Three.Mesh(lockGeometry3, grey);\n  lock_p2.position.z = 1;\n  lock_p1.add(lock_p2);\n  lock_p1.add(lock_p3);\n  lock.add(lock_p1);\n\n  return lock;\n}\n\nexport default {\n  name: 'double door',\n  prototype: 'holes',\n\n  info: {\n    tag: ['door'],\n    title: 'double door',\n    description: 'iron door',\n    image: require('./door_double.png')\n  },\n\n  properties: {\n    width: {\n      label: 'width',\n      type: 'length-measure',\n      defaultValue: {\n        length: 200,\n        unit: 'cm'\n      }\n    },\n    height: {\n      label: 'height',\n      type: 'length-measure',\n      defaultValue: {\n        length: 215,\n        unit: 'cm'\n      }\n    },\n    thickness: {\n      label: 'thickness',\n      type: 'length-measure',\n      defaultValue: {\n        length: 30,\n        unit: 'cm'\n      }\n    },\n    altitude: {\n      label:'altitude',\n      type: 'length-measure',\n      defaultValue: {\n        length: 0,\n        unit: 'cm'\n      }\n    },\n    flip_horizontal: {\n      label: 'flip',\n      type: 'checkbox',\n      defaultValue: false,\n      values: {\n        'none': false,\n        'yes':  true\n      }\n    }\n  },\n\n  render2D: function (element, layer, scene) {\n\n    const STYLE_HOLE_BASE = {stroke: '#ff0000', strokeWidth: '3px', fill: '#ff0000'};\n    const STYLE_HOLE_SELECTED = {stroke: '#ff0000', strokeWidth: '4px', fill: '#ff0000', cursor: 'move'};\n    const STYLE_ARC_BASE = {stroke: '#ff0000', strokeWidth: '3px', strokeDasharray: '5,5', fill: 'none'};\n    const STYLE_ARC_SELECTED = {stroke: '#ff0000', strokeWidth: '4px', strokeDasharray: '5,5', fill: 'none', cursor: 'move'};\n\n    let epsilon = 3;\n    let flip = element.properties.get('flip_horizontal');\n    let holeWidth = element.properties.get('width').get('length');\n    let holePath = `M${0} ${ -epsilon}  L${holeWidth} ${-epsilon}  L${holeWidth} ${epsilon}  L${0} ${epsilon}  z`;\n    let arcPath = `M${0},${0}  A${holeWidth/4},${holeWidth/4} 0 0,1 ${holeWidth/4},${holeWidth/4}`;\n    let arcPath2 =`M${0},${0}  A${holeWidth/2+holeWidth/4},${holeWidth/2+holeWidth/4} 0 0,0 ${holeWidth/2+holeWidth/4},${holeWidth/2+holeWidth/4}`;\n    let holeStyle = element.selected ? STYLE_HOLE_SELECTED : STYLE_HOLE_BASE;\n    let arcStyle = element.selected ? STYLE_ARC_SELECTED : STYLE_ARC_BASE;\n    let length = element.properties.get('width').get('length');\n\n\n    if(flip){\n      return (\n        <g transform={`translate(${-element.properties.get('width').get('length') / 2}, 0)`}>\n          <path key='1' d={arcPath} style={arcStyle} transform={`translate(${0},${-holeWidth/4})`}/>\n          <line key='2' x1={0}  y1={0 - epsilon} x2={0} y2={-holeWidth/4 - epsilon} style={holeStyle}/>\n          <path key='3' d={arcPath2} style={arcStyle} transform={`translate(${holeWidth},${-holeWidth/2-holeWidth/4}) rotate(90)`}/>\n          <line key='4' x1={holeWidth}  y1={0 - epsilon} x2={holeWidth} y2={-holeWidth/2 - holeWidth/4 - epsilon} style={holeStyle}/>\n          <path key='5' d={holePath} style={holeStyle}/>\n        </g>\n      )\n    }\n    else {\n      return (\n        <g transform={`translate(${-element.properties.get('width').get('length') / 2}, 0)`}>\n          <path key='1' d={arcPath} style={arcStyle} transform={`translate(${holeWidth},${holeWidth/4}) rotate(180)`}/>\n          <line key='2' x1={0}  y1={0 - epsilon} x2={0} y2={holeWidth/2 + holeWidth/4 - epsilon} style={holeStyle}/>\n          <path key='3' d={arcPath2} style={arcStyle} transform={`translate(${0},${holeWidth/2+holeWidth/4}) rotate(270)`}/>\n          <line key='4' x1={holeWidth}  y1={0 - epsilon} x2={holeWidth} y2={holeWidth/4 - epsilon} style={holeStyle}/>\n          <path key='5' d={holePath} style={holeStyle}/>\n        </g>\n      )\n    }\n  },\n\n  render3D: function (element, layer, scene) {\n\n    let flip = element.properties.get('flip_horizontal');\n    let width = element.properties.get('width').get('length');\n    let height = element.properties.get('height').get('length');\n    let thickness = element.properties.get('thickness').get('length');\n    let newAltitude = element.properties.get('altitude').get('length');\n\n    let door_double = new Three.Object3D();\n    door_double.add(makeDoor(width,height,thickness).clone(width,height,thickness));\n\n    let valuePosition = new Three.Box3().setFromObject(door_double);\n\n    let deltaX = Math.abs(valuePosition.max.x - valuePosition.min.x);\n    let deltaY = Math.abs(valuePosition.max.y - valuePosition.min.y);\n    let deltaZ = Math.abs(valuePosition.max.z - valuePosition.min.z);\n\n    if (element.selected) {\n      let bbox = new Three.BoxHelper(door_double, 0x99c3fb);\n      bbox.material.linewidth = 5;\n      bbox.renderOrder = 1000;\n      bbox.material.depthTest = false;\n      door_double.add(bbox);\n    }\n\n    if(flip) {\n      door_double.rotation.y += Math.PI;\n      door_double.position.x -= width/4;\n    }\n\n    door_double.position.y += newAltitude;\n    door_double.position.x += width/8;\n    door_double.scale.set( width / deltaX, height / deltaY,thickness / deltaZ);\n\n    return Promise.resolve(door_double);\n\n  }\n};\n\n","module.exports = __webpack_public_path__ + \"catalog/holes/door-double/door_double.png\";","import React from 'react';\nimport * as Three from 'three';\nimport {loadObjWithMaterial} from '../../utils/load-obj';\nimport path from 'path';\n\nlet cached3DDoor = null;\n\nconst STYLE_HOLE_BASE = {stroke: '#000', strokeWidth: '1px', fill: 'url(#diagonalFillInvisible)'};  // fill: #000\nconst STYLE_HOLE_SELECTED = {stroke: '#0096fd', strokeWidth: '1px', fill: '#0096fd', cursor: 'move'};\nconst STYLE_ARC_BASE = {stroke: '#000', strokeWidth: '1px', /*strokeDasharray: '5,5',*/ fill: 'none'};\nconst STYLE_ARC_SELECTED = {stroke: '#0096fd', strokeWidth: '1px', /*strokeDasharray: '5,5',*/ fill: 'none', cursor: 'move'};\nconst EPSILON = 3;\n\nexport default {\n  name: 'door',\n  prototype: 'holes',\n\n  info: {\n    title: 'door',\n    tag: ['door'],\n    description: 'Wooden door',\n    image: require('./door.png')\n  },\n\n  properties: {\n    width: {\n      label: 'Width',\n      type: 'length-measure',\n      defaultValue: {\n        length: 80\n      }\n    },\n    height: {\n      label: 'Height',\n      type: 'length-measure',\n      defaultValue: {\n        length: 215\n      }\n    },\n    altitude: {\n      label: 'Altitude',\n      type: 'length-measure',\n      defaultValue: {\n        length: 0\n      }\n    },\n    thickness: {\n      label: 'Thickness',\n      type: 'length-measure',\n      defaultValue: {\n        length: 20\n      }\n    },\n    flip_orizzontal: {\n      label: 'flip orizzontale',\n      type: 'checkbox',\n      defaultValue: false,\n      values: {\n        'none': false,\n        'yes':  true\n      }\n    }\n  },\n\n  render2D: function (element, layer, scene) {\n    let flip = element.properties.get('flip_orizzontal');\n    let holeWidth = element.properties.get('width').get('length');\n    let holePath = `M${0} ${ -EPSILON}  L${holeWidth} ${-EPSILON}  L${holeWidth} ${EPSILON}  L${0} ${EPSILON}  z`;\n    let arcPath = `M${0},${0}  A${holeWidth},${holeWidth} 0 0,1 ${holeWidth},${holeWidth}`;\n    let holeStyle = element.selected ? STYLE_HOLE_SELECTED : STYLE_HOLE_BASE;\n    let arcStyle = element.selected ? STYLE_ARC_SELECTED : STYLE_ARC_BASE;\n    let length = element.properties.get('width').get('length');\n\n    if(flip == false) {\n      return (\n        <g transform={`translate(${-length / 2}, 0)`}>\n          <path d={arcPath} style={arcStyle} transform={`translate(${0},${holeWidth}) scale(${1},${-1}) rotate(${0})`}/>\n          <line x1={0} y1={holeWidth - EPSILON} x2={0} y2={0 - 0} style={holeStyle} transform={`scale(${-1},${1})`}/>\n          <path d={holePath} style={holeStyle}/>\n        </g>\n      )\n    }\n    else{\n      return (\n        <g transform={`translate(${-length / 2}, 0)`}>\n          <path d={arcPath} style={arcStyle} transform={`translate(${0},${-holeWidth}) scale(${1},${1}) rotate(${0})`}/>\n          <line x1={0} y1={-holeWidth - EPSILON} x2={0} y2={0 - EPSILON} style={holeStyle} transform={`scale(${-1},${1})`}/>\n          <path d={holePath} style={holeStyle}/>\n        </g>\n      )\n    }\n  },\n\n  render3D: function (element, layer, scene) {\n    let onLoadItem = (object) => {\n      let boundingBox = new Three.Box3().setFromObject(object);\n\n      let initialWidth = boundingBox.max.x - boundingBox.min.x;\n      let initialHeight = boundingBox.max.y - boundingBox.min.y;\n      let initialThickness = boundingBox.max.z - boundingBox.min.z;\n\n      if (element.selected) {\n        let box = new Three.BoxHelper(object, 0x99c3fb);\n        box.material.linewidth = 2;\n        box.material.depthTest = false;\n        box.renderOrder = 1000;\n        object.add(box);\n      }\n\n      let width = element.properties.get('width').get('length');\n      let height = element.properties.get('height').get('length');\n      let thickness = element.properties.get('thickness').get('length');\n\n      object.scale.set(width / initialWidth, height / initialHeight,\n        thickness / initialThickness);\n\n      return object;\n    };\n\n    if(cached3DDoor) {\n      return Promise.resolve(onLoadItem(cached3DDoor.clone()));\n    }\n\n    let mtl = require('./door.mtl');\n    let obj = require('./door.obj');\n    let img = require('./texture.jpg');\n\n    return loadObjWithMaterial(mtl, obj, path.dirname(img) + '/')\n      .then(object => {\n        cached3DDoor = object;\n        return onLoadItem(cached3DDoor.clone())\n      })\n\n  }\n};\n","/**\n * Loads a Wavefront .mtl file specifying materials\n *\n * @author angelxuanchang\n */\n\nvar THREE = window.THREE || require('three');\nlet MTLLoader;\n\nMTLLoader = function( manager ) {\n\n\tthis.manager = ( manager !== undefined ) ? manager : THREE.DefaultLoadingManager;\n\n};\n\nObject.assign( MTLLoader.prototype, THREE.EventDispatcher.prototype, {\n\n\t/**\n\t * Loads and parses a MTL asset from a URL.\n\t *\n\t * @param {String} url - URL to the MTL file.\n\t * @param {Function} [onLoad] - Callback invoked with the loaded object.\n\t * @param {Function} [onProgress] - Callback for download progress.\n\t * @param {Function} [onError] - Callback for download errors.\n\t *\n\t * @see setPath setTexturePath\n\t *\n\t * @note In order for relative texture references to resolve correctly\n\t * you must call setPath and/or setTexturePath explicitly prior to load.\n\t */\n\tload: function ( url, onLoad, onProgress, onError ) {\n\n\t\tvar scope = this;\n\n\t\tvar loader = new THREE.FileLoader( this.manager );\n\t\tloader.setPath( this.path );\n\t\tloader.load( url, function ( text ) {\n\n\t\t\tonLoad( scope.parse( text ) );\n\n\t\t}, onProgress, onError );\n\n\t},\n\n\t/**\n\t * Set base path for resolving references.\n\t * If set this path will be prepended to each loaded and found reference.\n\t *\n\t * @see setTexturePath\n\t * @param {String} path\n\t *\n\t * @example\n\t *     mtlLoader.setPath( 'assets/obj/' );\n\t *     mtlLoader.load( 'my.mtl', ... );\n\t */\n\tsetPath: function ( path ) {\n\n\t\tthis.path = path;\n\n\t},\n\n\t/**\n\t * Set base path for resolving texture references.\n\t * If set this path will be prepended found texture reference.\n\t * If not set and setPath is, it will be used as texture base path.\n\t *\n\t * @see setPath\n\t * @param {String} path\n\t *\n\t * @example\n\t *     mtlLoader.setPath( 'assets/obj/' );\n\t *     mtlLoader.setTexturePath( 'assets/textures/' );\n\t *     mtlLoader.load( 'my.mtl', ... );\n\t */\n\tsetTexturePath: function( path ) {\n\n\t\tthis.texturePath = path;\n\n\t},\n\n\tsetBaseUrl: function( path ) {\n\n\t\tconsole.warn( 'THREE.MTLLoader: .setBaseUrl() is deprecated. Use .setTexturePath( path ) for texture path or .setPath( path ) for general base path instead.' );\n\n\t\tthis.setTexturePath( path );\n\n\t},\n\n\tsetCrossOrigin: function ( value ) {\n\n\t\tthis.crossOrigin = value;\n\n\t},\n\n\tsetMaterialOptions: function ( value ) {\n\n\t\tthis.materialOptions = value;\n\n\t},\n\n\t/**\n\t * Parses a MTL file.\n\t *\n\t * @param {String} text - Content of MTL file\n\t * @return {THREE.MTLLoader.MaterialCreator}\n\t *\n\t * @see setPath setTexturePath\n\t *\n\t * @note In order for relative texture references to resolve correctly\n\t * you must call setPath and/or setTexturePath explicitly prior to parse.\n\t */\n\tparse: function ( text ) {\n\n\t\tvar lines = text.split( '\\n' );\n\t\tvar info = {};\n\t\tvar delimiter_pattern = /\\s+/;\n\t\tvar materialsInfo = {};\n\n\t\tfor ( var i = 0; i < lines.length; i ++ ) {\n\n\t\t\tvar line = lines[ i ];\n\t\t\tline = line.trim();\n\n\t\t\tif ( line.length === 0 || line.charAt( 0 ) === '#' ) {\n\n\t\t\t\t// Blank line or comment ignore\n\t\t\t\tcontinue;\n\n\t\t\t}\n\n\t\t\tvar pos = line.indexOf( ' ' );\n\n\t\t\tvar key = ( pos >= 0 ) ? line.substring( 0, pos ) : line;\n\t\t\tkey = key.toLowerCase();\n\n\t\t\tvar value = ( pos >= 0 ) ? line.substring( pos + 1 ) : '';\n\t\t\tvalue = value.trim();\n\n\t\t\tif ( key === 'newmtl' ) {\n\n\t\t\t\t// New material\n\n\t\t\t\tinfo = { name: value };\n\t\t\t\tmaterialsInfo[ value ] = info;\n\n\t\t\t} else if ( info ) {\n\n\t\t\t\tif ( key === 'ka' || key === 'kd' || key === 'ks' ) {\n\n\t\t\t\t\tvar ss = value.split( delimiter_pattern, 3 );\n\t\t\t\t\tinfo[ key ] = [ parseFloat( ss[ 0 ] ), parseFloat( ss[ 1 ] ), parseFloat( ss[ 2 ] ) ];\n\n\t\t\t\t} else {\n\n\t\t\t\t\tinfo[ key ] = value;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\tvar materialCreator = new MTLLoader.MaterialCreator( this.texturePath || this.path, this.materialOptions );\n\t\tmaterialCreator.setCrossOrigin( this.crossOrigin );\n\t\tmaterialCreator.setManager( this.manager );\n\t\tmaterialCreator.setMaterials( materialsInfo );\n\t\treturn materialCreator;\n\n\t}\n\n} );\n\n/**\n * Create a new THREE-MTLLoader.MaterialCreator\n * @param baseUrl - Url relative to which textures are loaded\n * @param options - Set of options on how to construct the materials\n *                  side: Which side to apply the material\n *                        THREE.FrontSide (default), THREE.BackSide, THREE.DoubleSide\n *                  wrap: What type of wrapping to apply for textures\n *                        THREE.RepeatWrapping (default), THREE.ClampToEdgeWrapping, THREE.MirroredRepeatWrapping\n *                  normalizeRGB: RGBs need to be normalized to 0-1 from 0-255\n *                                Default: false, assumed to be already normalized\n *                  ignoreZeroRGBs: Ignore values of RGBs (Ka,Kd,Ks) that are all 0's\n *                                  Default: false\n * @constructor\n */\n\nMTLLoader.MaterialCreator = function( baseUrl, options ) {\n\n\tthis.baseUrl = baseUrl || '';\n\tthis.options = options;\n\tthis.materialsInfo = {};\n\tthis.materials = {};\n\tthis.materialsArray = [];\n\tthis.nameLookup = {};\n\n\tthis.side = ( this.options && this.options.side ) ? this.options.side : THREE.FrontSide;\n\tthis.wrap = ( this.options && this.options.wrap ) ? this.options.wrap : THREE.RepeatWrapping;\n\n};\n\nMTLLoader.MaterialCreator.prototype = {\n\n\tconstructor: MTLLoader.MaterialCreator,\n\n\tsetCrossOrigin: function ( value ) {\n\n\t\tthis.crossOrigin = value;\n\n\t},\n\n\tsetManager: function ( value ) {\n\n\t\tthis.manager = value;\n\n\t},\n\n\tsetMaterials: function( materialsInfo ) {\n\n\t\tthis.materialsInfo = this.convert( materialsInfo );\n\t\tthis.materials = {};\n\t\tthis.materialsArray = [];\n\t\tthis.nameLookup = {};\n\n\t},\n\n\tconvert: function( materialsInfo ) {\n\n\t\tif ( ! this.options ) return materialsInfo;\n\n\t\tvar converted = {};\n\n\t\tfor ( var mn in materialsInfo ) {\n\n\t\t\t// Convert materials info into normalized form based on options\n\n\t\t\tvar mat = materialsInfo[ mn ];\n\n\t\t\tvar covmat = {};\n\n\t\t\tconverted[ mn ] = covmat;\n\n\t\t\tfor ( var prop in mat ) {\n\n\t\t\t\tvar save = true;\n\t\t\t\tvar value = mat[ prop ];\n\t\t\t\tvar lprop = prop.toLowerCase();\n\n\t\t\t\tswitch ( lprop ) {\n\n\t\t\t\t\tcase 'kd':\n\t\t\t\t\tcase 'ka':\n\t\t\t\t\tcase 'ks':\n\n\t\t\t\t\t\t// Diffuse color (color under white light) using RGB values\n\n\t\t\t\t\t\tif ( this.options && this.options.normalizeRGB ) {\n\n\t\t\t\t\t\t\tvalue = [ value[ 0 ] / 255, value[ 1 ] / 255, value[ 2 ] / 255 ];\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif ( this.options && this.options.ignoreZeroRGBs ) {\n\n\t\t\t\t\t\t\tif ( value[ 0 ] === 0 && value[ 1 ] === 0 && value[ 2 ] === 0 ) {\n\n\t\t\t\t\t\t\t\t// ignore\n\n\t\t\t\t\t\t\t\tsave = false;\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tdefault:\n\n\t\t\t\t\t\tbreak;\n\t\t\t\t}\n\n\t\t\t\tif ( save ) {\n\n\t\t\t\t\tcovmat[ lprop ] = value;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn converted;\n\n\t},\n\n\tpreload: function () {\n\n\t\tfor ( var mn in this.materialsInfo ) {\n\n\t\t\tthis.create( mn );\n\n\t\t}\n\n\t},\n\n\tgetIndex: function( materialName ) {\n\n\t\treturn this.nameLookup[ materialName ];\n\n\t},\n\n\tgetAsArray: function() {\n\n\t\tvar index = 0;\n\n\t\tfor ( var mn in this.materialsInfo ) {\n\n\t\t\tthis.materialsArray[ index ] = this.create( mn );\n\t\t\tthis.nameLookup[ mn ] = index;\n\t\t\tindex ++;\n\n\t\t}\n\n\t\treturn this.materialsArray;\n\n\t},\n\n\tcreate: function ( materialName ) {\n\n\t\tif ( this.materials[ materialName ] === undefined ) {\n\n\t\t\tthis.createMaterial_( materialName );\n\n\t\t}\n\n\t\treturn this.materials[ materialName ];\n\n\t},\n\n\tcreateMaterial_: function ( materialName ) {\n\n\t\t// Create material\n\n\t\tvar mat = this.materialsInfo[ materialName ];\n\t\tvar params = {\n\n\t\t\tname: materialName,\n\t\t\tside: this.side\n\n\t\t};\n\n\t\tvar resolveURL = function ( baseUrl, url ) {\n\n\t\t\tif ( typeof url !== 'string' || url === '' )\n\t\t\t\treturn '';\n\n\t\t\t// Absolute URL\n\t\t\tif ( /^https?:\\/\\//i.test( url ) ) {\n\t\t\t\treturn url;\n\t\t\t}\n\n\t\t\treturn baseUrl + url;\n\t\t};\n\n\t\tfor ( var prop in mat ) {\n\n\t\t\tvar value = mat[ prop ];\n\n\t\t\tif ( value === '' ) continue;\n\n\t\t\tswitch ( prop.toLowerCase() ) {\n\n\t\t\t\t// Ns is material specular exponent\n\n\t\t\t\tcase 'kd':\n\n\t\t\t\t\t// Diffuse color (color under white light) using RGB values\n\n\t\t\t\t\tparams.color = new THREE.Color().fromArray( value );\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'ks':\n\n\t\t\t\t\t// Specular color (color when light is reflected from shiny surface) using RGB values\n\t\t\t\t\tparams.specular = new THREE.Color().fromArray( value );\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'map_kd':\n\n\t\t\t\t\t// Diffuse texture map\n\n\t\t\t\t\tif ( params.map ) break; // Keep the first encountered texture\n\n\t\t\t\t\tvar texParams = this.getTextureParams( value, params );\n\n\t\t\t\t\tparams.map = this.loadTexture( resolveURL( this.baseUrl, texParams.url ) );\n\t\t\t\t\tparams.map.repeat.copy( texParams.scale );\n\t\t\t\t\tparams.map.offset.copy( texParams.offset );\n\n\t\t\t\t\tparams.map.wrapS = this.wrap;\n\t\t\t\t\tparams.map.wrapT = this.wrap;\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'map_ks':\n\n\t\t\t\t\t// Specular map\n\n\t\t\t\t\tif ( params.specularMap ) break; // Keep the first encountered texture\n\n\t\t\t\t\tparams.specularMap = this.loadTexture( resolveURL( this.baseUrl, value ) );\n\t\t\t\t\tparams.specularMap.wrapS = this.wrap;\n\t\t\t\t\tparams.specularMap.wrapT = this.wrap;\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'ns':\n\n\t\t\t\t\t// The specular exponent (defines the focus of the specular highlight)\n\t\t\t\t\t// A high exponent results in a tight, concentrated highlight. Ns values normally range from 0 to 1000.\n\n\t\t\t\t\tparams.shininess = parseFloat( value );\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'd':\n\n\t\t\t\t\tif ( value < 1 ) {\n\n\t\t\t\t\t\tparams.opacity = value;\n\t\t\t\t\t\tparams.transparent = true;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'Tr':\n\n\t\t\t\t\tif ( value > 0 ) {\n\n\t\t\t\t\t\tparams.opacity = 1 - value;\n\t\t\t\t\t\tparams.transparent = true;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'map_bump':\n\t\t\t\tcase 'bump':\n\n\t\t\t\t\t// Bump texture map\n\n\t\t\t\t\tif ( params.bumpMap ) break; // Keep the first encountered texture\n\n\t\t\t\t\tvar texParams = this.getTextureParams( value, params );\n\n\t\t\t\t\tparams.bumpMap = this.loadTexture( resolveURL( this.baseUrl, texParams.url ) );\n\t\t\t\t\tparams.bumpMap.repeat.copy( texParams.scale );\n\t\t\t\t\tparams.bumpMap.offset.copy( texParams.offset );\n\n\t\t\t\t\tparams.bumpMap.wrapS = this.wrap;\n\t\t\t\t\tparams.bumpMap.wrapT = this.wrap;\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tdefault:\n\t\t\t\t\tbreak;\n\n\t\t\t}\n\n\t\t}\n\n\t\tthis.materials[ materialName ] = new THREE.MeshPhongMaterial( params );\n\t\treturn this.materials[ materialName ];\n\t},\n\n\tgetTextureParams: function( value, matParams ) {\n\n\t\tvar texParams = {\n\n\t\t\tscale: new THREE.Vector2( 1, 1 ),\n\t\t\toffset: new THREE.Vector2( 0, 0 ),\n\n\t\t };\n\n\t\tvar items = value.split(/\\s+/);\n\t\tvar pos;\n\n\t\tpos = items.indexOf('-bm');\n\t\tif (pos >= 0) {\n\n\t\t\tmatParams.bumpScale = parseFloat( items[pos+1] );\n\t\t\titems.splice( pos, 2 );\n\n\t\t}\n\n\t\tpos = items.indexOf('-s');\n\t\tif (pos >= 0) {\n\n\t\t\ttexParams.scale.set( parseFloat( items[pos+1] ), parseFloat( items[pos+2] ) );\n\t\t\titems.splice( pos, 4 ); // we expect 3 parameters here!\n\n\t\t}\n\n\t\tpos = items.indexOf('-o');\n\t\tif (pos >= 0) {\n\n\t\t\ttexParams.offset.set( parseFloat( items[pos+1] ), parseFloat( items[pos+2] ) );\n\t\t\titems.splice( pos, 4 ); // we expect 3 parameters here!\n\n\t\t}\n\n\t\ttexParams.url = items.join(' ').trim();\n\t\treturn texParams;\n\n\t},\n\n\tloadTexture: function ( url, mapping, onLoad, onProgress, onError ) {\n\n\t\tvar texture;\n\t\tvar loader = THREE.Loader.Handlers.get( url );\n\t\tvar manager = ( this.manager !== undefined ) ? this.manager : THREE.DefaultLoadingManager;\n\n\t\tif ( loader === null ) {\n\n\t\t\tloader = new THREE.TextureLoader( manager );\n\n\t\t}\n\n\t\tif ( loader.setCrossOrigin ) loader.setCrossOrigin( this.crossOrigin );\n\t\ttexture = loader.load( url, onLoad, onProgress, onError );\n\n\t\tif ( mapping !== undefined ) texture.mapping = mapping;\n\n\t\treturn texture;\n\n\t}\n\n};\n\nmodule.exports = MTLLoader;\n","/**\n * @author mrdoob / http://mrdoob.com/\n */\nvar THREE = window.THREE || require('three');\nlet OBJLoader;\nOBJLoader = (function () {\n  // o object_name | g group_name\n  var object_pattern = /^[og]\\s*(.+)?/;\n  // mtllib file_reference\n  var material_library_pattern = /^mtllib /;\n  // usemtl material_name\n  var material_use_pattern = /^usemtl /;\n  function ParserState() {\n    var state = {\n      objects: [],\n      object: {},\n      vertices: [],\n      normals: [],\n      colors: [],\n      uvs: [],\n      materialLibraries: [],\n      startObject: function (name, fromDeclaration) {\n        // If the current object (initial from reset) is not from a g/o declaration in the parsed\n        // file. We need to use it for the first parsed g/o to keep things in sync.\n        if (this.object && this.object.fromDeclaration === false) {\n          this.object.name = name;\n          this.object.fromDeclaration = (fromDeclaration !== false);\n          return;\n        }\n        var previousMaterial = (this.object && typeof this.object.currentMaterial === 'function' ? this.object.currentMaterial() : undefined);\n        if (this.object && typeof this.object._finalize === 'function') {\n          this.object._finalize(true);\n        }\n        this.object = {\n          name: name || '',\n          fromDeclaration: (fromDeclaration !== false),\n          geometry: {\n            vertices: [],\n            normals: [],\n            colors: [],\n            uvs: []\n          },\n          materials: [],\n          smooth: true,\n          startMaterial: function (name, libraries) {\n            var previous = this._finalize(false);\n            // New usemtl declaration overwrites an inherited material, except if faces were declared\n            // after the material, then it must be preserved for proper MultiMaterial continuation.\n            if (previous && (previous.inherited || previous.groupCount <= 0)) {\n              this.materials.splice(previous.index, 1);\n            }\n            var material = {\n              index: this.materials.length,\n              name: name || '',\n              mtllib: (Array.isArray(libraries) && libraries.length > 0 ? libraries[libraries.length - 1] : ''),\n              smooth: (previous !== undefined ? previous.smooth : this.smooth),\n              groupStart: (previous !== undefined ? previous.groupEnd : 0),\n              groupEnd: - 1,\n              groupCount: - 1,\n              inherited: false,\n              clone: function (index) {\n                var cloned = {\n                  index: (typeof index === 'number' ? index : this.index),\n                  name: this.name,\n                  mtllib: this.mtllib,\n                  smooth: this.smooth,\n                  groupStart: 0,\n                  groupEnd: - 1,\n                  groupCount: - 1,\n                  inherited: false\n                };\n                cloned.clone = this.clone.bind(cloned);\n                return cloned;\n              }\n            };\n            this.materials.push(material);\n            return material;\n          },\n          currentMaterial: function () {\n            if (this.materials.length > 0) {\n              return this.materials[this.materials.length - 1];\n            }\n            return undefined;\n          },\n          _finalize: function (end) {\n            var lastMultiMaterial = this.currentMaterial();\n            if (lastMultiMaterial && lastMultiMaterial.groupEnd === - 1) {\n              lastMultiMaterial.groupEnd = this.geometry.vertices.length / 3;\n              lastMultiMaterial.groupCount = lastMultiMaterial.groupEnd - lastMultiMaterial.groupStart;\n              lastMultiMaterial.inherited = false;\n            }\n            // Ignore objects tail materials if no face declarations followed them before a new o/g started.\n            if (end && this.materials.length > 1) {\n              for (var mi = this.materials.length - 1; mi >= 0; mi--) {\n                if (this.materials[mi].groupCount <= 0) {\n                  this.materials.splice(mi, 1);\n                }\n              }\n            }\n            // Guarantee at least one empty material, this makes the creation later more straight forward.\n            if (end && this.materials.length === 0) {\n              this.materials.push({\n                name: '',\n                smooth: this.smooth\n              });\n            }\n            return lastMultiMaterial;\n          }\n        };\n        // Inherit previous objects material.\n        // Spec tells us that a declared material must be set to all objects until a new material is declared.\n        // If a usemtl declaration is encountered while this new object is being parsed, it will\n        // overwrite the inherited material. Exception being that there was already face declarations\n        // to the inherited material, then it will be preserved for proper MultiMaterial continuation.\n        if (previousMaterial && previousMaterial.name && typeof previousMaterial.clone === 'function') {\n          var declared = previousMaterial.clone(0);\n          declared.inherited = true;\n          this.object.materials.push(declared);\n        }\n        this.objects.push(this.object);\n      },\n      finalize: function () {\n        if (this.object && typeof this.object._finalize === 'function') {\n          this.object._finalize(true);\n        }\n      },\n      parseVertexIndex: function (value, len) {\n        var index = parseInt(value, 10);\n        return (index >= 0 ? index - 1 : index + len / 3) * 3;\n      },\n      parseNormalIndex: function (value, len) {\n        var index = parseInt(value, 10);\n        return (index >= 0 ? index - 1 : index + len / 3) * 3;\n      },\n      parseUVIndex: function (value, len) {\n        var index = parseInt(value, 10);\n        return (index >= 0 ? index - 1 : index + len / 2) * 2;\n      },\n      addVertex: function (a, b, c) {\n        var src = this.vertices;\n        var dst = this.object.geometry.vertices;\n        dst.push(src[a + 0], src[a + 1], src[a + 2]);\n        dst.push(src[b + 0], src[b + 1], src[b + 2]);\n        dst.push(src[c + 0], src[c + 1], src[c + 2]);\n      },\n      addVertexPoint: function (a) {\n        var src = this.vertices;\n        var dst = this.object.geometry.vertices;\n        dst.push(src[a + 0], src[a + 1], src[a + 2]);\n      },\n      addVertexLine: function (a) {\n        var src = this.vertices;\n        var dst = this.object.geometry.vertices;\n        dst.push(src[a + 0], src[a + 1], src[a + 2]);\n      },\n      addNormal: function (a, b, c) {\n        var src = this.normals;\n        var dst = this.object.geometry.normals;\n        dst.push(src[a + 0], src[a + 1], src[a + 2]);\n        dst.push(src[b + 0], src[b + 1], src[b + 2]);\n        dst.push(src[c + 0], src[c + 1], src[c + 2]);\n      },\n      addColor: function (a, b, c) {\n        var src = this.colors;\n        var dst = this.object.geometry.colors;\n        dst.push(src[a + 0], src[a + 1], src[a + 2]);\n        dst.push(src[b + 0], src[b + 1], src[b + 2]);\n        dst.push(src[c + 0], src[c + 1], src[c + 2]);\n      },\n      addUV: function (a, b, c) {\n        var src = this.uvs;\n        var dst = this.object.geometry.uvs;\n        dst.push(src[a + 0], src[a + 1]);\n        dst.push(src[b + 0], src[b + 1]);\n        dst.push(src[c + 0], src[c + 1]);\n      },\n      addUVLine: function (a) {\n        var src = this.uvs;\n        var dst = this.object.geometry.uvs;\n        dst.push(src[a + 0], src[a + 1]);\n      },\n      addFace: function (a, b, c, ua, ub, uc, na, nb, nc) {\n        var vLen = this.vertices.length;\n        var ia = this.parseVertexIndex(a, vLen);\n        var ib = this.parseVertexIndex(b, vLen);\n        var ic = this.parseVertexIndex(c, vLen);\n        this.addVertex(ia, ib, ic);\n        if (ua !== undefined && ua !== '') {\n          var uvLen = this.uvs.length;\n          ia = this.parseUVIndex(ua, uvLen);\n          ib = this.parseUVIndex(ub, uvLen);\n          ic = this.parseUVIndex(uc, uvLen);\n          this.addUV(ia, ib, ic);\n        }\n        if (na !== undefined && na !== '') {\n          // Normals are many times the same. If so, skip function call and parseInt.\n          var nLen = this.normals.length;\n          ia = this.parseNormalIndex(na, nLen);\n          ib = na === nb ? ia : this.parseNormalIndex(nb, nLen);\n          ic = na === nc ? ia : this.parseNormalIndex(nc, nLen);\n          this.addNormal(ia, ib, ic);\n        }\n        if (this.colors.length > 0) {\n          this.addColor(ia, ib, ic);\n        }\n      },\n      addPointGeometry: function (vertices) {\n        this.object.geometry.type = 'Points';\n        var vLen = this.vertices.length;\n        for (var vi = 0, l = vertices.length; vi < l; vi++) {\n          this.addVertexPoint(this.parseVertexIndex(vertices[vi], vLen));\n        }\n      },\n      addLineGeometry: function (vertices, uvs) {\n        this.object.geometry.type = 'Line';\n        var vLen = this.vertices.length;\n        var uvLen = this.uvs.length;\n        for (var vi = 0, l = vertices.length; vi < l; vi++) {\n          this.addVertexLine(this.parseVertexIndex(vertices[vi], vLen));\n        }\n        for (var uvi = 0, l = uvs.length; uvi < l; uvi++) {\n          this.addUVLine(this.parseUVIndex(uvs[uvi], uvLen));\n        }\n      }\n    };\n    state.startObject('', false);\n    return state;\n  }\n  //\n  function OBJLoader(manager) {\n    this.manager = (manager !== undefined) ? manager : THREE.DefaultLoadingManager;\n    this.materials = null;\n  }\n  OBJLoader.prototype = {\n    constructor: OBJLoader,\n    load: function (url, onLoad, onProgress, onError) {\n      var scope = this;\n      var loader = new THREE.FileLoader(scope.manager);\n      loader.setPath(this.path);\n      loader.load(url, function (text) {\n        onLoad(scope.parse(text));\n      }, onProgress, onError);\n    },\n    setPath: function (value) {\n      this.path = value;\n    },\n    setMaterials: function (materials) {\n      this.materials = materials;\n      return this;\n    },\n    parse: function (text) {\n      console.time('OBJLoader');\n      var state = new ParserState();\n      if (text.indexOf('\\r\\n') !== - 1) {\n        // This is faster than String.split with regex that splits on both\n        text = text.replace(/\\r\\n/g, '\\n');\n      }\n      if (text.indexOf('\\\\\\n') !== - 1) {\n        // join lines separated by a line continuation character (\\)\n        text = text.replace(/\\\\\\n/g, '');\n      }\n      var lines = text.split('\\n');\n      var line = '', lineFirstChar = '';\n      var lineLength = 0;\n      var result = [];\n      // Faster to just trim left side of the line. Use if available.\n      var trimLeft = (typeof ''.trimLeft === 'function');\n      for (var i = 0, l = lines.length; i < l; i++) {\n        line = lines[i];\n        line = trimLeft ? line.trimLeft() : line.trim();\n        lineLength = line.length;\n        if (lineLength === 0) continue;\n        lineFirstChar = line.charAt(0);\n        // @todo invoke passed in handler if any\n        if (lineFirstChar === '#') continue;\n        if (lineFirstChar === 'v') {\n          var data = line.split(/\\s+/);\n          switch (data[0]) {\n            case 'v':\n              state.vertices.push(\n                parseFloat(data[1]),\n                parseFloat(data[2]),\n                parseFloat(data[3])\n              );\n              if (data.length === 8) {\n                state.colors.push(\n                  parseFloat(data[4]),\n                  parseFloat(data[5]),\n                  parseFloat(data[6])\n                );\n              }\n              break;\n            case 'vn':\n              state.normals.push(\n                parseFloat(data[1]),\n                parseFloat(data[2]),\n                parseFloat(data[3])\n              );\n              break;\n            case 'vt':\n              state.uvs.push(\n                parseFloat(data[1]),\n                parseFloat(data[2])\n              );\n              break;\n          }\n        } else if (lineFirstChar === 'f') {\n          var lineData = line.substr(1).trim();\n          var vertexData = lineData.split(/\\s+/);\n          var faceVertices = [];\n          // Parse the face vertex data into an easy to work with format\n          for (var j = 0, jl = vertexData.length; j < jl; j++) {\n            var vertex = vertexData[j];\n            if (vertex.length > 0) {\n              var vertexParts = vertex.split('/');\n              faceVertices.push(vertexParts);\n            }\n          }\n          // Draw an edge between the first vertex and all subsequent vertices to form an n-gon\n          var v1 = faceVertices[0];\n          for (var j = 1, jl = faceVertices.length - 1; j < jl; j++) {\n            var v2 = faceVertices[j];\n            var v3 = faceVertices[j + 1];\n            state.addFace(\n              v1[0], v2[0], v3[0],\n              v1[1], v2[1], v3[1],\n              v1[2], v2[2], v3[2]\n            );\n          }\n        } else if (lineFirstChar === 'l') {\n          var lineParts = line.substring(1).trim().split(\" \");\n          var lineVertices = [], lineUVs = [];\n          if (line.indexOf(\"/\") === - 1) {\n            lineVertices = lineParts;\n          } else {\n            for (var li = 0, llen = lineParts.length; li < llen; li++) {\n              var parts = lineParts[li].split(\"/\");\n              if (parts[0] !== \"\") lineVertices.push(parts[0]);\n              if (parts[1] !== \"\") lineUVs.push(parts[1]);\n            }\n          }\n          state.addLineGeometry(lineVertices, lineUVs);\n        } else if (lineFirstChar === 'p') {\n          var lineData = line.substr(1).trim();\n          var pointData = lineData.split(\" \");\n          state.addPointGeometry(pointData);\n        } else if ((result = object_pattern.exec(line)) !== null) {\n          // o object_name\n          // or\n          // g group_name\n          // WORKAROUND: https://bugs.chromium.org/p/v8/issues/detail?id=2869\n          // var name = result[ 0 ].substr( 1 ).trim();\n          var name = (\" \" + result[0].substr(1).trim()).substr(1);\n          state.startObject(name);\n        } else if (material_use_pattern.test(line)) {\n          // material\n          state.object.startMaterial(line.substring(7).trim(), state.materialLibraries);\n        } else if (material_library_pattern.test(line)) {\n          // mtl file\n          state.materialLibraries.push(line.substring(7).trim());\n        } else if (lineFirstChar === 's') {\n          result = line.split(' ');\n          // smooth shading\n          // @todo Handle files that have varying smooth values for a set of faces inside one geometry,\n          // but does not define a usemtl for each face set.\n          // This should be detected and a dummy material created (later MultiMaterial and geometry groups).\n          // This requires some care to not create extra material on each smooth value for \"normal\" obj files.\n          // where explicit usemtl defines geometry groups.\n          // Example asset: examples/models/obj/cerberus/Cerberus.obj\n\t\t\t\t\t/*\n\t\t\t\t\t * http://paulbourke.net/dataformats/obj/\n\t\t\t\t\t * or\n\t\t\t\t\t * http://www.cs.utah.edu/~boulos/cs3505/obj_spec.pdf\n\t\t\t\t\t *\n\t\t\t\t\t * From chapter \"Grouping\" Syntax explanation \"s group_number\":\n\t\t\t\t\t * \"group_number is the smoothing group number. To turn off smoothing groups, use a value of 0 or off.\n\t\t\t\t\t * Polygonal elements use group numbers to put elements in different smoothing groups. For free-form\n\t\t\t\t\t * surfaces, smoothing groups are either turned on or off; there is no difference between values greater\n\t\t\t\t\t * than 0.\"\n\t\t\t\t\t */\n          if (result.length > 1) {\n            var value = result[1].trim().toLowerCase();\n            state.object.smooth = (value !== '0' && value !== 'off');\n          } else {\n            // ZBrush can produce \"s\" lines #11707\n            state.object.smooth = true;\n          }\n          var material = state.object.currentMaterial();\n          if (material) material.smooth = state.object.smooth;\n        } else {\n          // Handle null terminated files without exception\n          if (line === '\\0') continue;\n          throw new Error('THREE.OBJLoader: Unexpected line: \"' + line + '\"');\n        }\n      }\n      state.finalize();\n      var container = new THREE.Group();\n      container.materialLibraries = [].concat(state.materialLibraries);\n      for (var i = 0, l = state.objects.length; i < l; i++) {\n        var object = state.objects[i];\n        var geometry = object.geometry;\n        var materials = object.materials;\n        var isLine = (geometry.type === 'Line');\n        var isPoints = (geometry.type === 'Points');\n        var hasVertexColors = false;\n        // Skip o/g line declarations that did not follow with any faces\n        if (geometry.vertices.length === 0) continue;\n        var buffergeometry = new THREE.BufferGeometry();\n        buffergeometry.addAttribute('position', new THREE.Float32BufferAttribute(geometry.vertices, 3));\n        if (geometry.normals.length > 0) {\n          buffergeometry.addAttribute('normal', new THREE.Float32BufferAttribute(geometry.normals, 3));\n        } else {\n          buffergeometry.computeVertexNormals();\n        }\n        if (geometry.colors.length > 0) {\n          hasVertexColors = true;\n          buffergeometry.addAttribute('color', new THREE.Float32BufferAttribute(geometry.colors, 3));\n        }\n        if (geometry.uvs.length > 0) {\n          buffergeometry.addAttribute('uv', new THREE.Float32BufferAttribute(geometry.uvs, 2));\n        }\n        // Create materials\n        var createdMaterials = [];\n        for (var mi = 0, miLen = materials.length; mi < miLen; mi++) {\n          var sourceMaterial = materials[mi];\n          var material = undefined;\n          if (this.materials !== null) {\n            material = this.materials.create(sourceMaterial.name);\n            // mtl etc. loaders probably can't create line materials correctly, copy properties to a line material.\n            if (isLine && material && !(material instanceof THREE.LineBasicMaterial)) {\n              var materialLine = new THREE.LineBasicMaterial();\n              materialLine.copy(material);\n              materialLine.lights = false; // TOFIX\n              material = materialLine;\n            } else if (isPoints && material && !(material instanceof THREE.PointsMaterial)) {\n              var materialPoints = new THREE.PointsMaterial({ size: 10, sizeAttenuation: false });\n              materialLine.copy(material);\n              material = materialPoints;\n            }\n          }\n          if (!material) {\n            if (isLine) {\n              material = new THREE.LineBasicMaterial();\n            } else if (isPoints) {\n              material = new THREE.PointsMaterial({ size: 1, sizeAttenuation: false });\n            } else {\n              material = new THREE.MeshPhongMaterial();\n            }\n            material.name = sourceMaterial.name;\n          }\n          material.flatShading = sourceMaterial.smooth ? false : true;\n          material.vertexColors = hasVertexColors ? THREE.VertexColors : THREE.NoColors;\n          createdMaterials.push(material);\n        }\n        // Create mesh\n        var mesh;\n        if (createdMaterials.length > 1) {\n          for (var mi = 0, miLen = materials.length; mi < miLen; mi++) {\n            var sourceMaterial = materials[mi];\n            buffergeometry.addGroup(sourceMaterial.groupStart, sourceMaterial.groupCount, mi);\n          }\n          if (isLine) {\n            mesh = new THREE.LineSegments(buffergeometry, createdMaterials);\n          } else if (isPoints) {\n            mesh = new THREE.Points(buffergeometry, createdMaterials);\n          } else {\n            mesh = new THREE.Mesh(buffergeometry, createdMaterials);\n          }\n        } else {\n          if (isLine) {\n            mesh = new THREE.LineSegments(buffergeometry, createdMaterials[0]);\n          } else if (isPoints) {\n            mesh = new THREE.Points(buffergeometry, createdMaterials[0]);\n          } else {\n            mesh = new THREE.Mesh(buffergeometry, createdMaterials[0]);\n          }\n        }\n        mesh.name = object.name;\n        container.add(mesh);\n      }\n      console.timeEnd('OBJLoader');\n      return container;\n    }\n  };\n  return OBJLoader;\n})();\nmodule.exports = OBJLoader;\n","module.exports = __webpack_public_path__ + \"catalog/holes/door/door.png\";","module.exports = __webpack_public_path__ + \"catalog/holes/door/door.mtl\";","module.exports = __webpack_public_path__ + \"catalog/holes/door/door.obj\";","module.exports = __webpack_public_path__ + \"catalog/holes/door/texture.jpg\";","import React from 'react';\nimport * as Three from 'three';\nimport path from 'path';\n\nexport default {\n  name: 'gate',\n  prototype: 'holes',\n\n  info: {\n    tag: ['gate'],\n    title: 'gate',\n    description: 'hole in the wall',\n    image: require('./gate.jpg')\n  },\n\n  properties: {\n    width: {\n      label: 'width',\n      type: 'length-measure',\n      defaultValue: {\n        length: 80\n      }\n    },\n    height: {\n      label: 'height',\n      type: 'length-measure',\n      defaultValue: {\n        length: 215\n      }\n    },\n    altitude: {\n      label: 'altitude',\n      type: 'length-measure',\n      defaultValue: {\n        length: 0\n      }\n    },\n    thickness: {\n      label: 'thickness',\n      type: 'length-measure',\n      defaultValue: {\n        length: 30\n      }\n    }\n  },\n\n  render2D: function (element, layer, scene) {\n    const STYLE_HOLE_BASE = {stroke: '#000', strokeWidth: '3px', fill: '#000'};\n    const STYLE_HOLE_SELECTED = {stroke: '#0096fd', strokeWidth: '4px', fill: '#0096fd', cursor: 'move'};\n    const STYLE_ARC_BASE = {stroke: '#000', strokeWidth: '3px', strokeDasharray: '5,5', fill: 'none'};\n    const STYLE_ARC_SELECTED = {\n      stroke: '#0096fd',\n      strokeWidth: '4px',\n      strokeDasharray: '5,5',\n      fill: 'none',\n      cursor: 'move'\n    };\n\n    let epsilon = 3;\n\n    let holeWidth = element.properties.get('width').get('length');\n    let holePath = `M${0} ${ -epsilon}  L${holeWidth} ${-epsilon}  L${holeWidth} ${epsilon}  L${0} ${epsilon}  z`;\n    let arcPath = `M${0},${0}  A${0},${0} 0 0,1 ${holeWidth},${0}`;\n    let holeStyle = element.selected ? STYLE_HOLE_SELECTED : STYLE_HOLE_BASE;\n    let arcStyle = element.selected ? STYLE_ARC_SELECTED : STYLE_ARC_BASE;\n    let length = element.properties.get('width').get('length');\n\n\n    return (\n      <g transform={`translate(${-length / 2}, 0)`}>\n        <line key='1' x1={0} y1={holeWidth/6 - epsilon} x2={0} y2={-holeWidth/6 + epsilon} style={holeStyle}\n              transform={`scale(${-1},${1})`}/>\n        <line key='2' x1={-holeWidth} y1={holeWidth/6 - epsilon} x2={-holeWidth} y2={-holeWidth/6 + epsilon} style={holeStyle}\n              transform={`scale(${-1},${1})`}/>\n        <path key='3' d={arcPath} style={arcStyle}/>\n      </g>\n    )\n  },\n\n  render3D: function (element, layer, scene) {\n\n    let object = new Three.Object3D();\n    return Promise.resolve(object);\n\n  }\n\n}\n\n","module.exports = __webpack_public_path__ + \"catalog/holes/gate/gate.jpg\";","import React from 'react';\nimport * as Three from 'three';\n\nconst black = new Three.MeshLambertMaterial({color : 0x000000});\nconst green = new Three.MeshLambertMaterial( {color : 0x348781});\nconst red = new Three.MeshLambertMaterial({color : 0xFF0000});\nconst turquoise = new Three.MeshLambertMaterial({color : 0x43C6DB,opacity :0.7,transparent: true});\nconst metalBlue = new Three.MeshLambertMaterial({color : 0xB7CEEC});\nconst darkGrey = new Three.MeshLambertMaterial({color : 0x313131});\nconst darkGrey2 = new Three.MeshLambertMaterial({color : 0x212121});\nconst metalBlueGrey = new Three.MeshLambertMaterial({color : 0x566D7E});\n\n\nfunction makePanicDoor() {\n\n  let panicDoorDouble = new Three.Mesh();\n  let doorLeft = makeDoorStructure();\n  let doorRight = makeDoorStructure();\n  let handle = makeHandle();\n  let doorLeftPivot = makePivot();\n  let doorRightPivot = makePivot();\n  let safetyHandleLeft = makeSafetyHandle();\n  let safetyHandleRight = makeSafetyHandle();\n  let lock = makeLock();\n  let doorLockLeft = makeDoorLock();\n  let doorLockRight = makeDoorLock();\n  lock.position.set(-0.05, -0.02, 0.03);\n  handle.position.set(-0.47 / 2, 0.85 / 2, -0.03);\n  doorLeftPivot.position.set(0.595 / 2, 0, -0.06 / 2);\n  doorRightPivot.position.set(0.6 / 2, 0, 0.077 / 2);\n  doorRight.rotation.y = Math.PI;\n  doorRight.position.set(-0.35 / 2 - 0.084, 0, 0.0043);\n  doorLeft.position.set(0.35 / 2 + 0.084, 0, -0.0043);\n  safetyHandleLeft.position.set(0, 0.4, 0.06 / 2);\n  safetyHandleRight.position.set(0, 0.4, -0.062 / 2);\n  handle.add(lock);\n  doorLeft.add(handle);\n  doorLeft.add(safetyHandleLeft);\n  doorRight.add(safetyHandleRight);\n  doorLeft.add(doorLeftPivot);\n  panicDoorDouble.add(doorLeft);\n  doorRight.add(doorRightPivot);\n  doorLeft.add(doorLockLeft);\n  doorRight.add(doorLockRight);\n  panicDoorDouble.add(doorRight);\n\n  return panicDoorDouble\n}\n\nfunction makeDoorLock() {\n\n  let block = new Three.Object3D();\n  let DoorLockGeometry1 = new Three.CylinderGeometry(0.012, 0.012, 1.905, Math.round(32));\n  let DoorLockGeometry2 = new Three.CylinderGeometry(0.007, 0.007, 1.907, Math.round(32));\n  let DoorLock1 = new Three.Mesh(DoorLockGeometry1, metalBlue);\n  let DoorLock2 = new Three.Mesh(DoorLockGeometry2, metalBlueGrey);\n  block.position.set(-0.275, 0.7 / 2, 0);\n  block.scale.x = 1 / 1.3;\n  DoorLock1.add(DoorLock2);\n  block.add(DoorLock1);\n\n  return block;\n}\n\nfunction makeLock() {\n\n  let mechanism = new Three.Object3D();\n  let BaseGeometry = new Three.BoxGeometry(0.01, 0.1, 0.02);\n  let FirstBlockGeometry = new Three.BoxGeometry(0.01, 0.02, 0.01);\n  let SecondBlockGeometry = new Three.BoxGeometry(0.006, 0.04, 0.008);\n  let base = new Three.Mesh(BaseGeometry, metalBlue);\n  let FirstBlock = new Three.Mesh(FirstBlockGeometry, metalBlueGrey);\n  let SecondBlock = new Three.Mesh(SecondBlockGeometry, metalBlueGrey);\n  FirstBlock.position.set(-0.008 / 2, 0.03, 0);\n  SecondBlock.position.y = -0.05;\n  FirstBlock.add(SecondBlock);\n  base.add(FirstBlock);\n  mechanism.add(base);\n\n  return mechanism;\n}\n\nfunction makeSafetyHandle() {\n\n  let handle = new Three.Object3D();\n  let handleSupportGeometry = new Three.BoxGeometry(0.5, 0.1, 0.005);\n  let PushButtonGeometry = new Three.CylinderGeometry(0.04, 0.04, 0.48, Math.round(32 ));\n  let PushButtonCoverGeometry = new Three.CylinderGeometry(0.042, 0.042, 0.01, Math.round(32 ));\n  let handleSupport = new Three.Mesh(handleSupportGeometry, black);\n  let pushButton = new Three.Mesh(PushButtonGeometry, red);\n  let pushButtonCover1 = new Three.Mesh(PushButtonCoverGeometry, black);\n  let pushButtonCover2 = new Three.Mesh(PushButtonCoverGeometry, black);\n  handleSupport.position.z = 0.005 / 2;\n  pushButton.rotation.z = Math.PI / 2;\n  pushButtonCover1.position.y = 0.48 / 2 + 0.01 / 2;\n  pushButtonCover2.position.y = -0.48 / 2 - 0.01 / 2;\n  pushButton.add(pushButtonCover1);\n  pushButton.add(pushButtonCover2);\n  handleSupport.add(pushButton);\n  handle.add(handleSupport);\n\n  return handle;\n}\n\nfunction makePivot() {\n\n  let DoorPivot = new Three.Object3D();\n  let DownPivotGeometry = new Three.CylinderGeometry(0.009, 0.009, 0.04, Math.round(32 ));\n  let UpPivotGeometry = new Three.CylinderGeometry(0.01, 0.01, 0.04, Math.round(32 ));\n  let downPivot1 = new Three.Mesh(DownPivotGeometry, green);\n  let upPivot1 = new Three.Mesh(UpPivotGeometry, green);\n  let downPivot2 = new Three.Mesh(DownPivotGeometry, green);\n  let upPivot2 = new Three.Mesh(UpPivotGeometry, green);\n  downPivot1.position.y = -0.4;\n  upPivot1.position.y = 0.04;\n  downPivot2.position.y = 1;\n  upPivot2.position.y = 0.04;\n  downPivot2.add(upPivot2);\n  downPivot1.add(upPivot1);\n  DoorPivot.add(downPivot2);\n  DoorPivot.add(downPivot1);\n\n  return DoorPivot;\n}\n\nfunction makeHandle() {\n\n  let handle = new Three.Object3D();\n  let handleBase = makeHandleBase();\n  let hilt = makeHilt();\n  hilt.rotation.x = Math.PI / 2;\n  hilt.position.set(0, 0.04, -0.03 / 2 - 0.01 / 2);\n  handle.add(handleBase);\n  handle.add(hilt);\n  handle.scale.set(1.1, 1.1, 1.1);\n\n  return handle;\n}\n\nfunction makeHilt() {\n\n  let hilt = new Three.Object3D();\n  let GeometryPiece1 = new Three.CylinderGeometry(0.01, 0.01, 0.03, Math.round(32 ));\n  let GeometryPiece2 = new Three.SphereGeometry(0.01, Math.round(32 ), Math.round(32 ));\n  let GeometryPiece3 = new Three.CylinderGeometry(0.01, 0.01, 0.07, Math.round(32 ));\n  let piece1 = new Three.Mesh(GeometryPiece1, black);\n  let piece2 = new Three.Mesh(GeometryPiece2, black);\n  let piece3 = new Three.Mesh(GeometryPiece3, black);\n  let piece4 = new Three.Mesh(GeometryPiece2, black);\n  piece3.rotation.z = Math.PI / 2;\n  piece3.position.x = 0.07 / 2;\n  piece2.position.y = -0.03 / 2;\n  piece4.position.y = -0.07 / 2;\n  piece3.add(piece4);\n  piece2.add(piece3);\n  piece1.add(piece2);\n  hilt.add(piece1);\n\n  return hilt;\n}\n\nfunction makeHandleBase() {\n\n  let base = new Three.Object3D();\n  let BaseGeometry1 = new Three.BoxGeometry(0.038, 0.14, 0.01);\n  let BaseGeometry2 = new Three.CylinderGeometry(0.023, 0.023, 0.01, Math.round(32 ));\n  let lock = makeLockKey();\n  let base1 = new Three.Mesh(BaseGeometry1, black);\n  let base2 = new Three.Mesh(BaseGeometry2, black);\n  lock.rotation.x = Math.PI / 2;\n  lock.position.y = -0.03;\n  base2.rotation.x = Math.PI / 2;\n  base2.position.y = -0.033;\n  base2.scale.z = 1.5;\n  base1.add(lock);\n  base1.add(base2);\n  base.add(base1);\n\n  return base;\n}\n\nfunction makeLockKey() {\n\n  let lock = new Three.Object3D();\n  let geometryLock1 = new Three.CylinderGeometry(0.005, 0.005, 0.02, Math.round(32 ));\n  let geometryLock2 = new Three.BoxGeometry(0.008, 0.02, 0.02);\n  let geometryLock3 = new Three.BoxGeometry(0.007, 0.0203, 0.0018);\n  let lockPiece1 = new Three.Mesh(geometryLock1, metalBlue);\n  let lockPiece2 = new Three.Mesh(geometryLock2, metalBlue);\n  let lockPiece3 = new Three.Mesh(geometryLock3, metalBlueGrey);\n  lockPiece2.position.z = 0.01;\n  lockPiece1.add(lockPiece2);\n  lockPiece1.add(lockPiece3);\n  lock.add(lockPiece1);\n\n  return lock;\n}\n\nfunction makeDoorStructure() {\n\n  let door = new Three.Object3D();\n  let lowBaseDoorGeometry = new Three.BoxGeometry(0.6,1.2,0.01);\n  let middleBaseDoorGeometry = new Three.BoxGeometry(0.2,0.7,0.01);\n  let highBaseDoorGeometry = new Three.BoxGeometry(0.2,0.2,0.01);\n  let BorderCoverDoorGeometry1 = new Three.CylinderGeometry(0.005,0.005,1.9,Math.round(32));\n  let BorderCoverDoorGeometry2 = new Three.BoxGeometry(0.03,1.9,0.01);\n  let MiddleDoorGeometry2 = new Three.BoxGeometry(0.2,0.7,0.06);\n  let MiddleDoorGeometry1 = new Three.BoxGeometry(0.19,0.7,0.06);\n  let HighDoorGeometry = new Three.BoxGeometry(0.2,0.2,0.06);\n  let glassGeometry = new Three.BoxGeometry(0.2,0.5,0.05);\n  let LowDoorGeometry = new Three.BoxGeometry(0.59,1.2,0.06);\n  let glassCoverVertical = new Three.BoxGeometry(0.01,0.52,0.064);\n  let glassCoverHorizontal = new Three.BoxGeometry(0.224,0.01,0.064);\n  let lowCoverDoor = new Three.Mesh( lowBaseDoorGeometry , green );\n  let middleDoor1 = new Three.Mesh( MiddleDoorGeometry1, green);\n  let middleDoor2 = new Three.Mesh( MiddleDoorGeometry2, green);\n  let baseDoor = new Three.Mesh( LowDoorGeometry, green );\n  let middleCoverDoor1 = new Three.Mesh( middleBaseDoorGeometry, green);\n  let middleCoverDoor2 = new Three.Mesh( middleBaseDoorGeometry, green);\n  let highCoverDoor = new Three.Mesh( highBaseDoorGeometry, green);\n  let highDoor = new Three.Mesh( HighDoorGeometry, green);\n  let borderCoverDoor1 = new Three.Mesh( BorderCoverDoorGeometry1, green);\n  let borderCoverDoor2 = new Three.Mesh( BorderCoverDoorGeometry2, green);\n  let glass = new Three.Mesh( glassGeometry, turquoise);\n  let glassVerticalCover1 = new Three.Mesh( glassCoverVertical, green);\n  let glassVerticalCover2 = new Three.Mesh( glassCoverVertical, green);\n  let glassHorizontalCover1 = new Three.Mesh( glassCoverHorizontal, green);\n  let glassHorizontalCover2 = new Three.Mesh( glassCoverHorizontal, green);\n  lowCoverDoor.position.set(-(0.6-0.59)/2,0,-0.05/2);\n  middleCoverDoor1.position.set(-0.2,1.2/2 +0.7/2,0);\n  middleCoverDoor2.position.set(0.2,1.2/2 +0.7/2,0);\n  highCoverDoor.position.set(0,(0.5 +0.2)/2,-0.05/2);\n  highDoor.position.set(0,(0.5 +0.2)/2,-0.05/2 +0.05/2);\n  glass.position.set(-0.01/2,1.2/2 +0.5/2,0);\n  middleDoor2.position.z =0.05/2;\n  middleDoor1.position.set(0.005,0,0.05/2);\n  borderCoverDoor1.position.set(-0.6/2,0.7/2,0);\n  glassVerticalCover1.position.x = 0.2/2 +0.014/2;\n  glassVerticalCover2.position.x =-0.2/2 -0.014/2;\n  glassHorizontalCover1.position.y = 0.5/2 +0.014/2;\n  glassHorizontalCover2.position.y =-0.5/2 -0.014/2;\n  borderCoverDoor2.position.set(0.02/2,0,-0.01/2 );\n  borderCoverDoor1.add(borderCoverDoor2);\n  glass.add(highCoverDoor);\n  glass.add(glassVerticalCover1);\n  glass.add(glassVerticalCover2);\n  glass.add(glassHorizontalCover1);\n  glass.add(glassHorizontalCover2);\n  glass.add(highCoverDoor);\n  glass.add(highDoor);\n  baseDoor.add(glass);\n  middleCoverDoor1.add(middleDoor1);\n  middleCoverDoor2.add(middleDoor2);\n  lowCoverDoor.add(borderCoverDoor1);\n  lowCoverDoor.add(middleCoverDoor1);\n  lowCoverDoor.add(middleCoverDoor2);\n  baseDoor.add(lowCoverDoor);\n  door.add(baseDoor);\n  door.scale.x = 0.9;\n\n  return door;\n}\n\nexport default {\n  name: 'double panic door',\n  prototype: 'holes',\n\n  info: {\n    tag: ['door'],\n    title: 'double panic door',\n    description: 'iron door',\n    image: require('./panicDoorDouble.png')\n  },\n\n  properties: {\n    width: {\n      label: 'width',\n      type: 'length-measure',\n      defaultValue: {\n        length: 200,\n        unit: 'cm'\n      }\n    },\n    height: {\n      label: 'height',\n      type: 'length-measure',\n      defaultValue: {\n        length: 215,\n        unit: 'cm'\n      }\n    },\n    thickness: {\n      label: 'thickness',\n      type: 'length-measure',\n      defaultValue: {\n        length: 30,\n        unit: 'cm'\n      }\n    },\n    altitude: {\n      label:'altitude',\n      type: 'length-measure',\n      defaultValue: {\n        length: 0,\n        unit: 'cm'\n      }\n    },\n    flip_horizontal: {\n      label: 'flip',\n      type: 'checkbox',\n      defaultValue: false,\n      values: {\n        'none': false,\n        'yes':  true\n      }\n    }\n  },\n\n  render2D: function (element, layer, scene) {\n\n    const STYLE_HOLE_BASE = {stroke: '#ff0000', strokeWidth: '3px', fill: '#ff0000'};\n    const STYLE_HOLE_SELECTED = {stroke: '#ff0000', strokeWidth: '4px', fill: '#ff0000', cursor: 'move'};\n    const STYLE_ARC_BASE = {stroke: '#ff0000', strokeWidth: '3px', strokeDasharray: '5,5', fill: 'none'};\n    const STYLE_ARC_SELECTED = {stroke: '#ff0000', strokeWidth: '4px', strokeDasharray: '5,5', fill: 'none', cursor: 'move'};\n\n    let epsilon = 3;\n    let flip = element.properties.get('flip_horizontal');\n    let holeWidth = element.properties.get('width').get('length');\n    let holePath = `M${0} ${ -epsilon}  L${holeWidth} ${-epsilon}  L${holeWidth} ${epsilon}  L${0} ${epsilon}  z`;\n    let arcPath = `M${0},${0}  A${holeWidth/2},${holeWidth/2} 0 0,1 ${holeWidth/2},${holeWidth/2}`;\n    let arcPath2 =`M${0},${0}  A${holeWidth/2},${holeWidth/2} 0 0,0 ${holeWidth/2},${holeWidth/2}`;\n    let holeStyle = element.selected ? STYLE_HOLE_SELECTED : STYLE_HOLE_BASE;\n    let arcStyle = element.selected ? STYLE_ARC_SELECTED : STYLE_ARC_BASE;\n    let length = element.properties.get('width').get('length');\n\n\n    if(flip){\n      return (\n        <g transform={`translate(${-element.properties.get('width').get('length') / 2}, 0)`}>\n          <path key='1' d={arcPath} style={arcStyle} transform={`translate(${0},${-holeWidth/2})`}/>\n          <line key='2' x1={0}  y1={0 - epsilon} x2={0} y2={-holeWidth/2 - epsilon} style={holeStyle}/>\n          <path key='3' d={arcPath2} style={arcStyle} transform={`translate(${holeWidth},${-holeWidth/2}) rotate(90)`}/>\n          <line key='4' x1={holeWidth}  y1={0 - epsilon} x2={holeWidth} y2={-holeWidth/2 - epsilon} style={holeStyle}/>\n          <path key='5' d={holePath} style={holeStyle}/>\n        </g>\n      )\n    }\n    else {\n        return (\n          <g transform={`translate(${-element.properties.get('width').get('length') / 2}, 0)`}>\n            <path key='1' d={arcPath} style={arcStyle} transform={`translate(${holeWidth},${holeWidth/2}) rotate(180)`}/>\n            <line key='2' x1={0}  y1={0 - epsilon} x2={0} y2={holeWidth/2 - epsilon} style={holeStyle}/>\n            <path key='3' d={arcPath2} style={arcStyle} transform={`translate(${0},${holeWidth/2}) rotate(270)`}/>\n            <line key='4' x1={holeWidth}  y1={0 - epsilon} x2={holeWidth} y2={holeWidth/2 - epsilon} style={holeStyle}/>\n            <path key='5' d={holePath} style={holeStyle}/>\n          </g>\n        )\n    }\n  },\n\n  render3D: function (element, layer, scene) {\n\n    let flip = element.properties.get('flip_horizontal');\n    let width = element.properties.get('width').get('length');\n    let height = element.properties.get('height').get('length');\n    let thickness = element.properties.get('thickness').get('length');\n    let newAltitude = element.properties.get('altitude').get('length');\n\n    let panicDoorDouble = new Three.Object3D();\n    panicDoorDouble.add(makePanicDoor().clone());\n\n    let valuePosition = new Three.Box3().setFromObject(panicDoorDouble);\n\n    let deltaX = Math.abs(valuePosition.max.x - valuePosition.min.x);\n    let deltaY = Math.abs(valuePosition.max.y - valuePosition.min.y);\n    let deltaZ = Math.abs(valuePosition.max.z - valuePosition.min.z);\n\n    if (element.selected) {\n      let boundingBox = new Three.BoxHelper(panicDoorDouble, 0x99c3fb);\n      boundingBox.material.linewidth = 5;\n      boundingBox.renderOrder = 1000;\n      boundingBox.material.depthTest = false;\n      panicDoorDouble.add(boundingBox);\n    }\n\n    if(flip)\n      panicDoorDouble.rotation.y+=Math.PI;\n\n    panicDoorDouble.position.y+= newAltitude;\n    panicDoorDouble.scale.set( width / deltaX, height / deltaY,thickness / deltaZ);\n\n    return Promise.resolve(panicDoorDouble);\n\n  }\n};\n","module.exports = __webpack_public_path__ + \"catalog/holes/panic-door-double/panicDoorDouble.png\";","import React from 'react';\nimport * as Three from 'three';\n\nconst black = new Three.MeshLambertMaterial({color : 0x000000});\nconst green = new Three.MeshLambertMaterial( {color : 0x348781});\nconst red = new Three.MeshLambertMaterial({color : 0xFF0000});\nconst turquoise = new Three.MeshLambertMaterial({color : 0x43C6DB,opacity :0.7,transparent: true});\nconst metalBlue = new Three.MeshLambertMaterial({color : 0xB7CEEC});\nconst darkGrey = new Three.MeshLambertMaterial({color : 0x313131});\nconst darkGrey2 = new Three.MeshLambertMaterial({color : 0x212121});\nconst metalBlueGrey = new Three.MeshLambertMaterial({color : 0x566D7E});\n\nlet flip_value;\nlet handleSide_value;\n\nfunction makePanicDoor(handleSide) {\n\n  let panicDoor = new Three.Mesh();\n  let leftDoor = makeDoorStructure();\n  let handle = makeHandle(handleSide);\n  let leftDoorPivot = makePivot();\n  let rightDoorPivot = makePivot();\n  let safetyHandleLeft = makeSafetyHandle();\n  let safetyHandleRight = makeSafetyHandle();\n  let hilt = makeLock();\n  let doorLock = makeDoorLock();\n  hilt.position.set(-0.05,-0.02,0.03);\n  handle.position.set(-0.47/2,0.85/2,-0.03);\n\n  if(handleSide) {\n    leftDoorPivot.position.set(0.595 / 2, 0, -0.06 / 2);\n  }\n  else {\n    leftDoorPivot.position.set(-0.595 / 2, 0, -0.06 / 2);\n  }\n  rightDoorPivot.position.set(0.6/2 ,0,0.077/2);\n  safetyHandleLeft.position.set(0,0.4,0.06/2);\n  safetyHandleRight.position.set(0,0.4,-0.062/2);\n  handle.add(hilt);\n  leftDoor.add(handle);\n  leftDoor.add(safetyHandleLeft);\n  leftDoor.add(leftDoorPivot);\n  panicDoor.add(leftDoor);\n  leftDoor.add(doorLock);\n\n  return panicDoor\n}\n\nfunction makeDoorLock () {\n\n  let DoorLock = new Three.Object3D();\n  let doorLockGeometry1 = new Three.CylinderGeometry(0.012,0.012,1.905,Math.round(32));\n  let doorLockGeometry2 = new Three.CylinderGeometry(0.007,0.007,1.907,Math.round(32));\n  let doorLock1 = new Three.Mesh( doorLockGeometry1, metalBlue);\n  let doorLock2 = new Three.Mesh( doorLockGeometry2, metalBlueGrey);\n  DoorLock.position.set(-0.275,0.7/2,0);\n  DoorLock.scale.x =1/1.3;\n  doorLock1.add(doorLock2);\n  DoorLock.add(doorLock1);\n  return DoorLock;\n}\n\nfunction makeLock () {\n\n  let mechanism = new Three.Object3D();\n  let BaseGeometry = new Three.BoxGeometry(0.01,0.1,0.02);\n  let PieceGeometry1 = new Three.BoxGeometry(0.01,0.02,0.01);\n  let PieceGeometry2 = new Three.BoxGeometry(0.006,0.04,0.008);\n  let base = new Three.Mesh( BaseGeometry, metalBlue);\n  let piece1 = new Three.Mesh( PieceGeometry1, metalBlueGrey);\n  let piece2 = new Three.Mesh( PieceGeometry2, metalBlueGrey);\n  piece1.position.set(-0.008/2,0.03,0);\n  piece2.position.y =-0.05;\n  piece1.add(piece2);\n  base.add(piece1);\n  mechanism.add(base);\n\n  return mechanism;\n}\n\nfunction makeSafetyHandle () {\n\n  let handle = new Three.Object3D();\n  let HandleSupportGeometry = new Three.BoxGeometry(0.5,0.1,0.005);\n  let PushGeometry = new Three.CylinderGeometry(0.04,0.04,0.48,Math.round(32));\n  let CoverPushGeometry = new Three.CylinderGeometry(0.042,0.042,0.01,Math.round(32));\n  let handleSupport = new Three.Mesh( HandleSupportGeometry, black);\n  let PushButton = new Three.Mesh( PushGeometry, red);\n  let CoverPush1 = new Three.Mesh( CoverPushGeometry, black);\n  let CoverPush2 = new Three.Mesh( CoverPushGeometry, black);\n  handleSupport.position.z =0.005/2;\n  PushButton.rotation.z =Math.PI/2;\n  CoverPush1.position.y =0.48/2 +0.01/2;\n  CoverPush2.position.y =-0.48/2 -0.01/2;\n  PushButton.add(CoverPush1);\n  PushButton.add(CoverPush2);\n  handleSupport.add(PushButton);\n  handle.add(handleSupport);\n\n  return handle;\n}\n\nfunction makePivot () {\n\n  let DoorPivot = new Three.Object3D();\n  let DownPivotGeometry = new Three.CylinderGeometry(0.009,0.009,0.04,Math.round(32));\n  let UpPivotGeometry = new Three.CylinderGeometry(0.01,0.01,0.04,Math.round(32));\n  let downPivot1 = new Three.Mesh( DownPivotGeometry, green);\n  let upPivot1 = new Three.Mesh( UpPivotGeometry, green);\n  let downPivot2 = new Three.Mesh( DownPivotGeometry, green);\n  let upPivot2 = new Three.Mesh( UpPivotGeometry, green);\n  downPivot1.position.y =-0.4;\n  upPivot1.position.y =0.04;\n  downPivot2.position.y =1;\n  upPivot2.position.y =0.04;\n  downPivot2.add(upPivot2);\n  downPivot1.add(upPivot1);\n  DoorPivot.add(downPivot2);\n  DoorPivot.add(downPivot1);\n\n  return DoorPivot;\n}\n\nfunction makeHandle (handleSide_value) {\n\n  let handle = new Three.Object3D();\n  let handleBase = makeHandleBase(handleSide_value);\n  let hilt = makeHilt();\n  hilt.rotation.x = Math.PI / 2;\n\n  if(handleSide_value) {\n    hilt.position.set(0, 0.04, -0.03 / 2 - 0.01 / 2);\n  }\n  else {\n    hilt.position.set(0.4, 0.04, -0.03 / 2 - 0.01 / 2);\n    hilt.rotation.y = Math.PI ;\n  }\n  handle.add(handleBase);\n  handle.add(hilt);\n  handle.scale.set(1.1, 1.1, 1.1);\n  return handle;\n}\n\nfunction makeHilt () {\n\n  let hilt = new Three.Object3D();\n  let Geometry_p1 = new Three.CylinderGeometry(0.01,0.01,0.03,Math.round(32));\n  let Geometry_p2 = new Three.SphereGeometry(0.01,Math.round(32),Math.round(32));\n  let Geometry_p3 = new Three.CylinderGeometry(0.01,0.01,0.07,Math.round(32));\n  let piece1 = new Three.Mesh( Geometry_p1, black);\n  let piece2 = new Three.Mesh( Geometry_p2, black);\n  let piece3 = new Three.Mesh( Geometry_p3, black);\n  let piece4 = new Three.Mesh( Geometry_p2, black);\n  piece3.rotation.z =Math.PI/2;\n  piece3.position.x =0.07/2;\n  piece2.position.y =-0.03/2;\n  piece4.position.y =-0.07/2;\n  piece3.add(piece4);\n  piece2.add(piece3);\n  piece1.add(piece2);\n  hilt.add(piece1);\n\n  return hilt;\n}\n\nfunction makeHandleBase (handleSide_value) {\n  let base = new Three.Object3D();\n  let BaseGeometry1 = new Three.BoxGeometry(0.038,0.14,0.01);\n  let BaseGeometry2 = new Three.CylinderGeometry(0.023,0.023,0.01,Math.round(32));\n  let lock = makeLockKey();\n  let base1 = new Three.Mesh( BaseGeometry1, black);\n  let base2 = new Three.Mesh( BaseGeometry2, black);\n  lock.rotation.x = Math.PI/2;\n  base2.rotation.x =Math.PI/2;\n  lock.position.y = -0.03;\n  base2.position.y = -0.033;\n  if(!handleSide_value)\n    base1.position.x = 0.4;\n  base2.scale.z =1.5;\n  base1.add(lock);\n  base1.add(base2);\n  base.add(base1);\n  return base;\n}\n\nfunction makeLockKey () {\n\n  let Lock = new Three.Object3D();\n  let geometry1 = new Three.CylinderGeometry(0.005,0.005,0.02,Math.round(32));\n  let geometry2 = new Three.BoxGeometry(0.008,0.02,0.02);\n  let geometry3 = new Three.BoxGeometry(0.007,0.0203,0.0018);\n  let LockPiece1 = new Three.Mesh( geometry1, metalBlue);\n  let LockPiece2 = new Three.Mesh( geometry2, metalBlue);\n  let LockPiece3 = new Three.Mesh( geometry3, metalBlueGrey );\n  LockPiece2.position.z = 0.01;\n  LockPiece1.add(LockPiece2);\n  LockPiece1.add(LockPiece3);\n  Lock.add(LockPiece1);\n\n  return Lock;\n}\n\nfunction makeDoorStructure () {\n\n  let door = new Three.Object3D();\n  let lowBaseDoorGeometry = new Three.BoxGeometry(0.6,1.2,0.01);\n  let middleBaseDoorGeometry = new Three.BoxGeometry(0.2,0.7,0.01);\n  let highBaseDoorGeometry = new Three.BoxGeometry(0.2,0.2,0.01);\n  let BorderCoverDoorGeometry1 = new Three.CylinderGeometry(0.005,0.005,1.9,Math.round(32));\n  let BorderCoverDoorGeometry2 = new Three.BoxGeometry(0.03,1.9,0.01);\n  let MiddleDoorGeometry2 = new Three.BoxGeometry(0.2,0.7,0.06);\n  let MiddleDoorGeometry1 = new Three.BoxGeometry(0.19,0.7,0.06);\n  let HighDoorGeometry = new Three.BoxGeometry(0.2,0.2,0.06);\n  let glassGeometry = new Three.BoxGeometry(0.2,0.5,0.05);\n  let LowDoorGeometry = new Three.BoxGeometry(0.59,1.2,0.06);\n  let glassCoverVertical = new Three.BoxGeometry(0.01,0.52,0.064);\n  let glassCoverHorizontal = new Three.BoxGeometry(0.224,0.01,0.064);\n  let lowCoverDoor = new Three.Mesh( lowBaseDoorGeometry , green );\n  let middleDoor1 = new Three.Mesh( MiddleDoorGeometry1, green);\n  let middleDoor2 = new Three.Mesh( MiddleDoorGeometry2, green);\n  let baseDoor = new Three.Mesh( LowDoorGeometry, green );\n  let middleCoverDoor1 = new Three.Mesh( middleBaseDoorGeometry, green);\n  let middleCoverDoor2 = new Three.Mesh( middleBaseDoorGeometry, green);\n  let highCoverDoor = new Three.Mesh( highBaseDoorGeometry, green);\n  let highDoor = new Three.Mesh( HighDoorGeometry, green);\n  let borderCoverDoor1 = new Three.Mesh( BorderCoverDoorGeometry1, green);\n  let borderCoverDoor2 = new Three.Mesh( BorderCoverDoorGeometry2, green);\n  let glass = new Three.Mesh( glassGeometry, turquoise);\n  let glassVerticalCover1 = new Three.Mesh( glassCoverVertical, green);\n  let glassVerticalCover2 = new Three.Mesh( glassCoverVertical, green);\n  let glassHorizontalCover1 = new Three.Mesh( glassCoverHorizontal, green);\n  let glassHorizontalCover2 = new Three.Mesh( glassCoverHorizontal, green);\n  lowCoverDoor.position.set(-(0.6-0.59)/2,0,-0.05/2);\n  middleCoverDoor1.position.set(-0.2,1.2/2 +0.7/2,0);\n  middleCoverDoor2.position.set(0.2,1.2/2 +0.7/2,0);\n  highCoverDoor.position.set(0,(0.5 +0.2)/2,-0.05/2);\n  highDoor.position.set(0,(0.5 +0.2)/2,-0.05/2 +0.05/2);\n  glass.position.set(-0.01/2,1.2/2 +0.5/2,0);\n  middleDoor2.position.z =0.05/2;\n  middleDoor1.position.set(0.005,0,0.05/2);\n  borderCoverDoor1.position.set(-0.6/2,0.7/2,0);\n  glassVerticalCover1.position.x = 0.2/2 +0.014/2;\n  glassVerticalCover2.position.x =-0.2/2 -0.014/2;\n  glassHorizontalCover1.position.y = 0.5/2 +0.014/2;\n  glassHorizontalCover2.position.y =-0.5/2 -0.014/2;\n  borderCoverDoor2.position.set(0.02/2,0,-0.01/2 );\n  borderCoverDoor1.add(borderCoverDoor2);\n  glass.add(highCoverDoor);\n  glass.add(glassVerticalCover1);\n  glass.add(glassVerticalCover2);\n  glass.add(glassHorizontalCover1);\n  glass.add(glassHorizontalCover2);\n  glass.add(highCoverDoor);\n  glass.add(highDoor);\n  baseDoor.add(glass);\n  middleCoverDoor1.add(middleDoor1);\n  middleCoverDoor2.add(middleDoor2);\n  lowCoverDoor.add(borderCoverDoor1);\n  lowCoverDoor.add(middleCoverDoor1);\n  lowCoverDoor.add(middleCoverDoor2);\n  baseDoor.add(lowCoverDoor);\n  door.add(baseDoor);\n  door.scale.x = 1.3;\n  return door;\n}\n\nexport default {\n  name: 'panic door',\n  prototype: 'holes',\n\n  info: {\n    tag: ['door'],\n    title: 'panic door',\n    description: 'iron door',\n    image: require('./panicDoor.png')\n  },\n\n  properties: {\n    width: {\n      label: 'width',\n      type: 'length-measure',\n      defaultValue: {\n        length: 100,\n        unit: 'cm'\n      }\n    },\n    height: {\n      label: 'height',\n      type: 'length-measure',\n      defaultValue: {\n        length: 215,\n        unit: 'cm'\n      }\n    },\n    thickness: {\n      label: 'thickness',\n      type: 'length-measure',\n      defaultValue: {\n        length: 30,\n        unit: 'cm'\n      }\n    },\n    altitude: {\n      label: 'altitude',\n      type: 'length-measure',\n      defaultValue: {\n        length: 0,\n        unit: 'cm'\n      }\n    },\n    flip_horizontal: {\n      label: 'horizontal flip',\n      type: 'checkbox',\n      defaultValue: 'none',\n      values: {\n        'none': 'none',\n        'yes':  'yes'\n      }\n    },\n    flip_vertical: {\n      label: 'vertical flip',\n      type: 'checkbox',\n      defaultValue: 'right',\n      values: {\n        'right': 'right',\n        'left':  'left'\n      }\n    },\n  },\n\n\n  render2D: function (element, layer, scene) {\n\n    const STYLE_HOLE_BASE = {stroke: '#ff0000', strokeWidth: '3px', fill: '#ff0000'};\n    const STYLE_HOLE_SELECTED = {stroke: '#ff0000', strokeWidth: '4px', fill: '#ff0000', cursor: 'move'};\n    const STYLE_ARC_BASE = {stroke: '#ff0000', strokeWidth: '3px', strokeDasharray: '5,5', fill: 'none'};\n    const STYLE_ARC_SELECTED = {stroke: '#ff0000', strokeWidth: '4px', strokeDasharray: '5,5', fill: 'none', cursor: 'move'};\n\n    let epsilon = 3;\n\n    let flip = element.properties.get('flip_horizontal');\n    let handleSide = element.properties.get('flip_vertical');\n    let holeWidth = element.properties.get('width').get('length');\n    let holePath = `M${0} ${ -epsilon}  L${holeWidth} ${-epsilon}  L${holeWidth} ${epsilon}  L${0} ${epsilon}  z`;\n    let arcPath = `M${0},${0}  A${holeWidth},${holeWidth} 0 0,1 ${holeWidth},${holeWidth}`;\n    let holeStyle = element.selected ? STYLE_HOLE_SELECTED : STYLE_HOLE_BASE;\n    let arcStyle = element.selected ? STYLE_ARC_SELECTED : STYLE_ARC_BASE;\n    let length = element.properties.get('width').get('length');\n\n    let scaleX, scaleY;\n    let rotateAngle;\n    let tX, tY;\n    let pX1, pX2, pY1, pY2;\n\n    flip ? flip_value = 'yes' : flip_value = 'none';\n    handleSide ? handleSide_value = 'right' : handleSide_value = 'left';\n\n    if(flip_value === 'yes') {\n      scaleX = 1;\n      if (handleSide_value === 'right') {\n        tX = holeWidth;\n        tY = -holeWidth;\n        pX1 = -holeWidth;\n        pY1 = 0;\n        pX2 = -holeWidth;\n        pY2 = holeWidth;\n        rotateAngle = 180;\n        scaleY = -1;\n      }\n      else {\n        tX = 0;\n        tY = -holeWidth;\n        pX1 = 0;\n        pY1 = 0;\n        pX2 = 0;\n        pY2 = -holeWidth;\n        scaleY = 1;\n        rotateAngle = 0;\n      }\n    }\n    else if (flip_value === 'none') {\n      scaleX = -1;\n      if (handleSide_value === 'left') {\n        tX = holeWidth;\n        tY = 0;\n        pX1 = 0;\n        pY1 = 0;\n        pX2 = 0;\n        pY2 = -holeWidth;\n        rotateAngle = -90;\n        scaleY = -1;\n      }\n      else{\n        tX = 0;\n        tY = 0;\n        pX1 = holeWidth;\n        pY1 = 0;\n        pX2 = holeWidth;\n        pY2 = holeWidth;\n        rotateAngle = 90;\n        scaleY = 1;\n      }\n    }\n\n      return (\n        <g transform={`translate(${-element.properties.get('width').get('length') / 2}, 0)`}>\n          <path key='1' d={arcPath} style={arcStyle}\n                transform={`translate(${tX},${tY}) scale(${scaleX},${scaleY}) rotate(${rotateAngle})`}/>\n          <line key='2' x1={pX1} y1={pY1 - epsilon} x2={pX2} y2={pY2 - epsilon} style={holeStyle}\n                transform={`scale(${-scaleX},${scaleY})`}/>\n          <path key='5' d={holePath} style={holeStyle}/>\n        </g>\n\n      );\n  },\n\n  render3D: function (element, layer, scene) {\n\n    let flip = element.properties.get('flip_horizontal');\n    let handleSide = element.properties.get('flip_vertical');\n    let width = element.properties.get('width').get('length');\n    let height = element.properties.get('height').get('length');\n    let thickness = element.properties.get('thickness').get('length');\n    let newAltitude = element.properties.get('altitude').get('length');\n\n    let panicDoor = new Three.Object3D();\n    panicDoor.add(makePanicDoor(handleSide).clone());\n\n    if (element.selected) {\n      let boundingBox = new Three.BoxHelper(panicDoor, 0x99c3fb);\n      boundingBox.material.linewidth = 5;\n      boundingBox.renderOrder = 1000;\n      boundingBox.material.depthTest = false;\n      panicDoor.add(boundingBox);\n    }\n\n    let valuePosition = new Three.Box3().setFromObject(panicDoor);\n\n    let deltaX = Math.abs(valuePosition.max.x - valuePosition.min.x);\n    let deltaY = Math.abs(valuePosition.max.y - valuePosition.min.y);\n    let deltaZ = Math.abs(valuePosition.max.z - valuePosition.min.z);\n\n    if(flip)\n      panicDoor.rotation.y += Math.PI;\n\n    panicDoor.position.y+= newAltitude;\n    panicDoor.scale.set(width / deltaX, height / deltaY, thickness / deltaZ);\n\n    return Promise.resolve(panicDoor);\n\n  }\n};\n","module.exports = __webpack_public_path__ + \"catalog/holes/panic-door/panicDoor.png\";","import React from 'react';\nimport * as Three from 'three';\nimport {loadObjWithMaterial} from '../../utils/load-obj';\nimport path from 'path';\n\nlet cached3DWindow = null;\n\nexport default {\n  name: \"sash window\",\n  prototype: \"holes\",\n\n  info: {\n    title: \"sash window\",\n    tag: ['window'],\n    description: \"Sash window\",\n    image: require('./window.png')\n  },\n\n  properties: {\n    width: {\n      label: \"Width\",\n      type: \"length-measure\",\n      defaultValue: {\n        length: 90\n      }\n    },\n    height: {\n      label: \"Height\",\n      type: \"length-measure\",\n      defaultValue: {\n        length: 100\n      }\n    },\n    altitude: {\n      label: \"Altitude\",\n      type: \"length-measure\",\n      defaultValue: {\n        length: 90\n      }\n    },\n    thickness: {\n      label: \"Thickness\",\n      type: \"length-measure\",\n      defaultValue: {\n        length: 10\n      }\n    }\n  },\n\n  render2D: function (element, layer, scene) {\n    const STYLE_HOLE_BASE = {stroke: \"#000\", strokeWidth: \"3px\", fill: \"#000\"};\n    const STYLE_HOLE_SELECTED = {stroke: \"#0096fd\", strokeWidth: \"3px\", fill: \"#0096fd\", cursor: \"move\"};\n    //let line = layer.lines.get(hole.line);\n    //let epsilon = line.properties.get('thickness') / 2;\n\n    let epsilon = 3;\n\n    let holeWidth = element.properties.get('width').get('length');\n    let holePath = `M${0} ${ -epsilon}  L${holeWidth} ${-epsilon}  L${holeWidth} ${epsilon}  L${0} ${epsilon}  z`;\n    let holeStyle = element.selected ? STYLE_HOLE_SELECTED : STYLE_HOLE_BASE;\n    let length = element.properties.get('width').get('length');\n    return (\n      <g transform={`translate(${-length / 2}, 0)`}>\n        <path key=\"1\" d={holePath} style={holeStyle}/>\n        <line key=\"2\" x1={holeWidth / 2} y1={-10 - epsilon} x2={holeWidth / 2} y2={10 + epsilon} style={holeStyle}/>\n      </g>\n    );\n  },\n\n  render3D: function (element, layer, scene) {\n    let onLoadItem = (object) => {\n      let boundingBox = new Three.Box3().setFromObject(object);\n\n      let initialWidth = boundingBox.max.x - boundingBox.min.x;\n      let initialHeight = boundingBox.max.y - boundingBox.min.y;\n      let initialThickness = boundingBox.max.z - boundingBox.min.z;\n\n      if (element.selected) {\n        let box = new Three.BoxHelper(object, 0x99c3fb);\n        box.material.linewidth = 2;\n        box.material.depthTest = false;\n        box.renderOrder = 1000;\n        object.add(box);\n      }\n\n      let width = element.properties.get('width').get('length');\n      let height = element.properties.get('height').get('length');\n      let thickness = element.properties.get('thickness').get('length');\n\n      object.scale.set(width / initialWidth, height / initialHeight,\n        thickness / initialThickness);\n\n      return object;\n    };\n\n    if(cached3DWindow) {\n      return Promise.resolve(onLoadItem(cached3DWindow.clone()));\n    }\n\n    let mtl = require('./sash-window.mtl');\n    let obj = require('./sash-window.obj');\n    let img = require('./texture.png');\n\n    return loadObjWithMaterial(mtl, obj, path.dirname(img) + '/')\n      .then(object => {\n        cached3DWindow = object;\n        return onLoadItem(cached3DWindow.clone());\n      })\n  }\n};\n","module.exports = __webpack_public_path__ + \"catalog/holes/sash-window/window.png\";","module.exports = __webpack_public_path__ + \"catalog/holes/sash-window/sash-window.mtl\";","module.exports = __webpack_public_path__ + \"catalog/holes/sash-window/sash-window.obj\";","module.exports = __webpack_public_path__ + \"catalog/holes/sash-window/texture.png\";","import React from 'react';\nimport * as Three from 'three';\n\nconst grey = new Three.MeshLambertMaterial({color: 0x3f3f3f});\nconst white = new Three.MeshLambertMaterial({color: 0xffffff, transparent:true, opacity:0.5});\nconst black = new Three.MeshLambertMaterial({color: 0x000000});\n\nfunction makeDoor(handleSide) {\n\n  let slidingDoor = new Three.Mesh();\n\n  let doorShape = new Three.Shape();\n  doorShape.moveTo( 1, 2 );\n  doorShape.lineTo( 0, 2);\n  doorShape.lineTo( 0, 0);\n  doorShape.lineTo( 1, 0);\n\n  let doorHole = new Three.Path();\n  doorHole.moveTo(.65, 1.75 );\n  doorHole.lineTo(.35, 1.75);\n  doorHole.lineTo(.35, 1.25);\n  doorHole.lineTo(.65, 1.25);\n  doorShape.holes.push( doorHole );\n\n  let extrudeSettings = {\n    steps: 2,\n    depth: 0.05,\n    bevelEnabled: false,\n    bevelThickness: 1,\n    bevelSize: 1,\n    bevelSegments: 1\n  };\n\n  let geometry = new Three.ExtrudeGeometry( doorShape, extrudeSettings );\n  let door = new Three.Mesh( geometry, grey ) ;\n  if(handleSide === 'right')\n    door.position.set(-1,0,0);\n  else\n    door.position.set(0,0,0);\n  slidingDoor.add(door);\n\n  let doorGeometry = new Three.BoxGeometry(1,2,0.05);\n  let door2 = new Three.Mesh(doorGeometry,grey);\n  if (handleSide === 'right')\n    door2.position.set(1.5,1,0.065);\n  else\n    door2.position.set(-.5,1,0.065);\n  door.add(door2);\n\n  let barGeometry = new Three.BoxGeometry(2,0.1,0.1);\n  let doorBar = new Three.Mesh(barGeometry,grey);\n  doorBar.position.set(-0,2.07,0.05);\n  slidingDoor.add(doorBar);\n\n  let glassGeometry = new Three.BoxGeometry(0.3,0.5,0.05);\n  let glass = new Three.Mesh(glassGeometry,white);\n  glass.position.set(0.5,1.5,0.025);\n  door.add(glass);\n\n  let HandleGeometry1 = new Three.CylinderGeometry(0.051,0.051,0.0625,80,80,true);\n  black.side=Three.DoubleSide;\n  let handle_p1 = new Three.Mesh(HandleGeometry1,black);\n  handle_p1.position.set(0.2,1,0.025);\n  handle_p1.rotation.x=Math.PI/2;\n  door.add(handle_p1);\n\n  let HandleGeometry2 = new Three.BoxGeometry(0.1,0.02,0.0625);\n  let handle_p2 = new Three.Mesh( HandleGeometry2,black  );\n  handle_p2.position.set(0.2,1,0.025);\n  door.add(handle_p2);\n\n  if (handleSide === 'left'){\n    handle_p1.position.x=0.8;\n    handle_p2.position.x=0.8;\n  }\n\n  return slidingDoor\n}\n\nexport default {\n  name: 'sliding door',\n  prototype: 'holes',\n\n  info: {\n    tag: ['door'],\n    title: 'sliding door',\n    description: 'iron door',\n    image: require('./slidingDoor.png')\n  },\n\n  properties: {\n    width: {\n      label: 'width',\n      type: 'length-measure',\n      defaultValue: {\n        length: 200,\n        unit: 'cm'\n      }\n    },\n    height: {\n      label: 'height',\n      type: 'length-measure',\n      defaultValue: {\n        length: 215,\n        unit: 'cm'\n      }\n    },\n    thickness: {\n      label: 'thickness',\n      type: 'length-measure',\n      defaultValue: {\n        length: 30,\n        unit: 'cm'\n      }\n    },\n    altitude: {\n      label: 'altitude',\n      type: 'length-measure',\n      defaultValue: {\n        length: 0,\n        unit: 'cm'\n      }\n    },\n    flip_horizontal: {\n      label: 'horizontal flip',\n      type: 'checkbox',\n      defaultValue: 'none',\n      values: {\n        'none': 'none',\n        'yes':  'yes'\n      }\n    },\n    flip_vertical: {\n      label: 'vertical flip',\n      type: 'checkbox',\n      defaultValue: 'right',\n      values: {\n        'right': 'right',\n        'left':  'left'\n      }\n    }\n  },\n\n  render2D: function (element, layer, scene) {\n\n    const STYLE_HOLE_BASE = {stroke: '#000', strokeWidth: '14px', fill: '#000'};\n    const STYLE_HOLE_BASE2 = {stroke: '#000', strokeWidth: '16px', fill: '#000'};\n    const STYLE_HOLE_SELECTED = {stroke: '#0096fd', strokeWidth: '14px', fill: '#0096fd', cursor: 'move'};\n\n    let epsilon = 3;\n    let flip = element.properties.get('flip_horizontal');\n    let handleSide = element.properties.get('flip_vertical');\n    let holeWidth = element.properties.get('width').get('length');\n    let holeStyle = element.selected ? STYLE_HOLE_SELECTED : STYLE_HOLE_BASE;\n    let holeStyle2 = element.selected ? STYLE_HOLE_SELECTED : STYLE_HOLE_BASE2;\n    let length = element.properties.get('width').get('length');\n\n    let scaleX, scaleY;\n    let scaleX2, scaleY2;\n    let pX1, pX2;\n\n    flip ? flip = 'yes' : flip = 'none';\n    handleSide ? handleSide = 'right' : handleSide = 'left';\n\n    if(flip === 'yes') {\n      scaleX = 1;\n      if (handleSide === 'right') {\n        pX1 = 0;\n        pX2 = holeWidth/2;\n        scaleY = -1;\n      }\n      else {\n        pX1 = holeWidth/2;\n        pX2 = holeWidth;\n        scaleY = -1;\n      }\n    }\n    else {\n      scaleX = 1;\n      if (handleSide === 'right') {\n        pX1 = holeWidth/2;\n        pX2 = holeWidth;\n        scaleY = 1;\n      }\n      else {\n        pX1 = 0;\n        pX2 = holeWidth/2;\n        scaleY = 1;\n      }\n\n    }\n      return (\n        <g transform={`translate(${-element.properties.get('width').get('length') / 2}, 0)`}>\n          <line key='1' x1='0' y1={0 - epsilon} x2={holeWidth} y2={0 - epsilon} style={holeStyle}\n                transform={`scale(${scaleX},${scaleY})`}/>\n          <line key='2' x1={pX1} y1={5 - epsilon} x2={pX2} y2={5 - epsilon} style={holeStyle2}\n                transform={`scale(${scaleX},${scaleY})`}/>\n          <line key='3' x1={holeWidth} y1={0 - epsilon} x2={holeWidth} y2={15 + epsilon} style={holeStyle2}\n                transform={`scale(${scaleX},${scaleY})`}/>\n          <line key='4' x1='0' y1={0 - epsilon} x2='0' y2={15 + epsilon} style={holeStyle2}\n                transform={`scale(${scaleX},${scaleY})`}/>\n        </g>\n      )\n  },\n\n  render3D: function (element, layer, scene) {\n\n    let flip = element.properties.get('flip_horizontal');\n    let handleSide = element.properties.get('flip_vertical');\n    let width = element.properties.get('width').get('length');\n    let height = element.properties.get('height').get('length');\n    let thickness = element.properties.get('thickness').get('length');\n    let newAltitude = element.properties.get('altitude').get('length');\n\n    flip ? flip = 'yes' : flip = 'none';\n    handleSide ? handleSide = 'right' : handleSide = 'left';\n\n    let slidingDoor = new Three.Object3D();\n    slidingDoor.add(makeDoor(handleSide).clone());\n\n    let valuePosition = new Three.Box3().setFromObject(slidingDoor);\n\n    let deltaX = Math.abs(valuePosition.max.x - valuePosition.min.x);\n    let deltaY = Math.abs(valuePosition.max.y - valuePosition.min.y);\n    let deltaZ = Math.abs(valuePosition.max.z - valuePosition.min.z);\n\n    if (element.selected) {\n      let boundingBox = new Three.BoxHelper(slidingDoor, 0x99c3fb);\n      boundingBox.material.linewidth = 5;\n      boundingBox.renderOrder = 1000;\n      boundingBox.material.depthTest = false;\n      slidingDoor.add(boundingBox);\n    }\n\n    if(flip === 'yes')\n      slidingDoor.rotation.y += Math.PI;\n\n    slidingDoor.position.y+= newAltitude;\n    slidingDoor.scale.set(width / deltaX, height / deltaY, thickness / deltaZ);\n\n    return Promise.resolve(slidingDoor);\n\n  }\n};\n","module.exports = __webpack_public_path__ + \"catalog/holes/sliding-door/slidingDoor.png\";","import React from 'react';\nimport * as Three from 'three';\nimport {loadObjWithMaterial} from '../../utils/load-obj';\nimport path from 'path';\n\nlet cached3DWindow = null;\n\nexport default {\n  name: 'venetian-blind-window',\n  prototype: 'holes',\n\n  info: {\n    tag: ['Window'],\n    title: 'Venetian Blind Window',\n    description: 'Venetian Blind Window',\n    image: require('./venetian.jpg')\n  },\n\n  properties: {\n    width: {\n      label: 'Width',\n      type: 'length-measure',\n      defaultValue: {\n        length: 90\n      }\n    },\n    height: {\n      label: 'Height',\n      type: 'length-measure',\n      defaultValue: {\n        length: 100\n      }\n    },\n    altitude: {\n      label: 'Altitude',\n      type: 'length-measure',\n      defaultValue: {\n        length: 90\n      }\n    },\n    thickness: {\n      label: 'Thickness',\n      type: 'length-measure',\n      defaultValue: {\n        length: 10\n      }\n    },\n    flip: {\n      label: 'Flip',\n      type: 'checkbox',\n      defaultValue: 'false',\n    },\n  },\n\n  render2D: function (element, layer, scene) {\n\n    const STYLE_HOLE_BASE = {stroke: '#000', strokeWidth: '3px', fill: '#000'};\n    const STYLE_HOLE_SELECTED = {stroke: '#0096fd', strokeWidth: '3px', fill: '#0096fd', cursor: 'move'};\n\n    let epsilon = 3;\n\n    let holeWidth = element.properties.get('width').get('length');\n    let holePath = `M${0} ${ -epsilon}  L${holeWidth} ${-epsilon}  L${holeWidth} ${epsilon}  L${0} ${epsilon}  z`;\n    let holeStyle = element.selected ? STYLE_HOLE_SELECTED : STYLE_HOLE_BASE;\n    let length = element.properties.get('width').get('length');\n    return (\n      <g transform={`translate(${-length / 2}, 0)`}>\n        <path key='1' d={holePath} style={holeStyle}/>\n        <line key='2' x1={holeWidth / 2} y1={-10 - epsilon} x2={holeWidth / 2} y2={10 + epsilon} style={holeStyle}/>\n      </g>\n    );\n  },\n\n  render3D: function (element, layer, scene) {\n\n    let width = element.properties.get('width').get('length');\n    let height = element.properties.get('height').get('length');\n    let thickness = element.properties.get('thickness').get('length');\n    let flip = element.properties.get('flip');\n\n    let onLoadItem = (object) => {\n\n      let venetian = new Three.Object3D();\n\n      let boundingBox = new Three.Box3().setFromObject(object);\n\n      let initialWidth = boundingBox.max.x - boundingBox.min.x;\n      let initialHeight = boundingBox.max.y - boundingBox.min.y;\n      let initialThickness = boundingBox.max.z - boundingBox.min.z;\n\n      if (element.selected) {\n        let box = new Three.BoxHelper(object, 0x99c3fb);\n        box.material.linewidth = 2;\n        box.material.depthTest = false;\n        box.renderOrder = 1000;\n        object.add(box);\n      }\n\n      let width = element.properties.get('width').get('length');\n      let height = element.properties.get('height').get('length');\n      let thickness = element.properties.get('thickness').get('length');\n\n      object.scale.set(width / initialWidth, height / initialHeight,\n         thickness/2 / initialThickness);\n\n      venetian.add(object);\n      venetian.add(createTenda());\n\n      if(flip === true)\n        venetian.rotation.y += Math.PI;\n\n      return venetian;\n    };\n\n    if(cached3DWindow) {\n      return Promise.resolve(onLoadItem(cached3DWindow.clone()));;\n    }\n\n    let mtl = require('./venetian.mtl');\n    let obj = require('./venetian.obj');\n    let img = require('./texture.png');\n\n    return loadObjWithMaterial(mtl, obj, path.dirname(img) + '/')\n      .then(object => {\n        cached3DWindow = object;\n        return onLoadItem(cached3DWindow.clone());\n      });\n\n    function createTenda() {\n\n      var venetian = new Three.Object3D();\n\n      //colors\n      var white = new Three.MeshLambertMaterial( {color: 0xffffff, opacity:0.5, transparent:true} );\n      var grey = new Three.MeshLambertMaterial( {color: 0xCCCCCC} );\n\n      var roundedRectShape = new Three.Shape();\n\n      var x=0;\n      var y=0;\n      var width=1;\n      var height=18;\n      var radius=0.25;\n\n      roundedRectShape.moveTo( x, y + radius );\n      roundedRectShape.lineTo( x, y + height - radius );\n      roundedRectShape.quadraticCurveTo( x, y + height, x + radius, y + height );\n      roundedRectShape.lineTo( x + width - radius, y + height) ;\n      roundedRectShape.quadraticCurveTo( x + width, y + height, x + width, y + height - radius );\n      roundedRectShape.lineTo( x + width, y + radius );\n      roundedRectShape.quadraticCurveTo( x + width, y, x + width - radius, y );\n      roundedRectShape.lineTo( x + radius, y );\n      roundedRectShape.quadraticCurveTo( x, y, x, y + radius );\n\n      var holePath1 = new Three.Path();\n      holePath1.moveTo( 0.5, 0.6 );\n      holePath1.arc(0, .7, .15 ,0, Math.PI,false);\n      holePath1.arc(0.15, -.09, .15 ,Math.PI,0,false);\n      roundedRectShape.holes.push( holePath1 );\n\n      var holePath2 = new Three.Path();\n      holePath2.moveTo( 0.5, 4.6 );\n      holePath2.arc(0, .7, .15 ,0, Math.PI,false);\n      holePath2.arc(0.15, -.09, .15 ,Math.PI,0,false);\n      roundedRectShape.holes.push( holePath2 );\n\n      var holePath3 = new Three.Path();\n      holePath3.moveTo( 0.5, 8.6 );\n      holePath3.arc(0, .7, .15 ,0, Math.PI,false);\n      holePath3.arc(0.15, -.09, .15 ,Math.PI,0,false);\n      roundedRectShape.holes.push( holePath3 );\n\n      var holePath4 = new Three.Path();\n      holePath4.moveTo( 0.5, 12.6 );\n      holePath4.arc(0, .7, .15 ,0, Math.PI,false);\n      holePath4.arc(0.15, -.09, .15 ,Math.PI,0,false);\n      roundedRectShape.holes.push( holePath4 );\n\n      var holePath5 = new Three.Path();\n      holePath5.moveTo( 0.5, 16.6 );\n      holePath5.arc(0, .7, .15 ,0, Math.PI,false);\n      holePath5.arc(0.15, -.09, .15 ,Math.PI,0,false);\n      roundedRectShape.holes.push( holePath5 );\n\n      var extrudeSettings = {\n        steps: 1,\n        depth: 0.2,\n        bevelEnabled: false,\n        bevelThickness: .4,\n        bevelSize: .4,\n        bevelSegments: 1\n      };\n\n\n      for (var i = 0; i < 25; i+=.7) {\n        var geometry = new Three.ExtrudeGeometry( roundedRectShape, extrudeSettings );\n        var mesh = new Three.Mesh( geometry, grey ) ;\n        mesh.position.set(0,i,0.86);\n        mesh.rotation.z+=Math.PI/2;\n        mesh.rotation.x+=-Math.PI/2;\n        venetian.add(mesh);\n\n      }\n\n      for (var j = -1.25; j > -19; j+=-4) {\n\n        var geometry1 = new Three.CylinderGeometry( 0.105, 0.105, 26, 32 );\n        var tubo = new Three.Mesh(geometry1,white);\n        tubo.position.set(j,12.5,.35);\n        venetian.add(tubo);\n\n      }\n\n      var roundedRectShape2 = new Three.Shape();\n\n      var x1=0;\n      var y1=0;\n      var width1=1;\n      var height1=18;\n      var radius1=0.25;\n\n      roundedRectShape2.moveTo( x1, y1 + radius1 );\n      roundedRectShape2.lineTo( x1, y1 + height1 - radius1 );\n      roundedRectShape2.quadraticCurveTo( x1, y1 + height1, x1 + radius1, y1 + height1 );\n      roundedRectShape2.lineTo( x1 + width1 - radius1, y1 + height1) ;\n      roundedRectShape2.quadraticCurveTo( x1 + width1, y1 + height1, x1 + width1, y1 + height1 - radius1 );\n      roundedRectShape2.lineTo( x1 + width1, y1 + radius1 );\n      roundedRectShape2.quadraticCurveTo( x1 + width1, y1, x1 + width1 - radius1, y1 );\n      roundedRectShape2.lineTo( x1 + radius1, y1 );\n      roundedRectShape2.quadraticCurveTo( x1, y1, x1, y1 + radius1 );\n\n      var extrudeSettings2 = {\n        steps: 1,\n        depth: 0.4,\n        bevelEnabled: false,\n        bevelThickness: .4,\n        bevelSize: .4,\n        bevelSegments: 1\n      };\n\n\n      for (var k = -.5; k < 27; k+=26) {\n        var geometry2 = new Three.ExtrudeGeometry( roundedRectShape2, extrudeSettings2 );\n        var mesh2 = new Three.Mesh( geometry2, grey ) ;\n        mesh2.position.set(0,k,1);\n        mesh2.rotation.z+=Math.PI/2;\n        mesh2.rotation.x+=-Math.PI/2;\n        venetian.add(mesh2);\n      }\n\n\n      let valueObject = new Three.Box3().setFromObject(venetian);\n\n      let deltaX = Math.abs(valueObject.max.x - valueObject.min.x);\n      let deltaY = Math.abs(valueObject.max.y - valueObject.min.y);\n      let deltaZ = Math.abs(valueObject.max.z - valueObject.min.z);\n\n       venetian.position.x+=width1/.025;\n       venetian.position.y+=-height1/.4;\n       venetian.scale.set(5.2*width1 / deltaZ, 5.45*height1 / deltaY, 2.5*thickness / deltaX);\n\n\n      return venetian;\n    }\n  }\n\n};\n","module.exports = __webpack_public_path__ + \"catalog/holes/venetian-blind-window/venetian.jpg\";","module.exports = __webpack_public_path__ + \"catalog/holes/venetian-blind-window/venetian.mtl\";","module.exports = __webpack_public_path__ + \"catalog/holes/venetian-blind-window/venetian.obj\";","module.exports = __webpack_public_path__ + \"catalog/holes/venetian-blind-window/texture.png\";","import React from 'react';\nimport * as Three from 'three';\nimport { loadObjWithMaterial } from '../../utils/load-obj';\nimport path from 'path';\n\nlet cached3DWindow = null;\n\nconst STYLE_HOLE_BASE = { stroke: '#000', strokeWidth: '3px', fill: '#000' };\nconst STYLE_HOLE_SELECTED = { stroke: '#0096fd', strokeWidth: '3px', fill: '#0096fd', cursor: 'move' };\nconst EPSILON = 3;\n\nexport default {\n  name: 'window-curtain',\n  prototype: 'holes',\n\n  info: {\n    tag: ['Finestre'],\n    title: 'Curtain window',\n    description: 'Curtain window',\n    image: require('./window-curtain.jpg')\n  },\n\n  properties: {\n    width: {\n      label: 'width',\n      type: 'length-measure',\n      defaultValue: {\n        length: 90\n      }\n    },\n    height: {\n      label: 'height',\n      type: 'length-measure',\n      defaultValue: {\n        length: 100\n      }\n    },\n    altitude: {\n      label: 'altitudine',\n      type: 'length-measure',\n      defaultValue: {\n        length: 90\n      }\n    },\n    thickness: {\n      label: 'spessore',\n      type: 'length-measure',\n      defaultValue: {\n        length: 10\n      }\n    },\n    flip: {\n      label: 'flip',\n      type: 'checkbox',\n      defaultValue: 'none',\n      values: {\n        'none': 'none',\n        'yes': 'yes'\n      }\n    },\n  },\n\n  render2D: function (element, layer, scene) {\n    let holeWidth = element.properties.get('width').get('length');\n    let holePath = `M${0} ${-EPSILON}  L${holeWidth} ${-EPSILON}  L${holeWidth} ${EPSILON}  L${0} ${EPSILON}  z`;\n    let holeStyle = element.selected ? STYLE_HOLE_SELECTED : STYLE_HOLE_BASE;\n    let length = element.properties.get('width').get('length');\n    return (\n      <g transform={`translate(${-length / 2}, 0)`}>\n        <path key='1' d={holePath} style={holeStyle} />\n        <line key='2' x1={holeWidth / 2} y1={-10 - EPSILON} x2={holeWidth / 2} y2={10 + EPSILON} style={holeStyle} />\n      </g>\n    );\n  },\n\n  render3D: function (element, layer, scene) {\n\n    let width = element.properties.get('width').get('length');\n    let height = element.properties.get('height').get('length');\n    let thickness = element.properties.get('thickness').get('length');\n    let flip = element.properties.get('flip');\n\n    let onLoadItem = (object) => {\n\n      let window = new Three.Object3D();\n\n      let boundingBox = new Three.Box3().setFromObject(object);\n\n      let initialWidth = boundingBox.max.x - boundingBox.min.x;\n      let initialHeight = boundingBox.max.y - boundingBox.min.y;\n      let initialThickness = boundingBox.max.z - boundingBox.min.z;\n\n      if (element.selected) {\n        let box = new Three.BoxHelper(object, 0x99c3fb);\n        box.material.linewidth = 2;\n        box.material.depthTest = false;\n        box.renderOrder = 1000;\n        object.add(box);\n      }\n\n      let width = element.properties.get('width').get('length');\n      let height = element.properties.get('height').get('length');\n      let thickness = element.properties.get('thickness').get('length');\n\n      object.scale.set(width / initialWidth, height / initialHeight,\n        thickness / 2 / initialThickness);\n\n      window.add(object);\n      window.add(createTenda());\n\n      if (flip === true)\n        window.rotation.y += Math.PI;\n\n      return window;\n    };\n\n    if (cached3DWindow) {\n      return Promise.resolve(onLoadItem(cached3DWindow.clone()));\n    }\n\n    let mtl = require('./window.mtl');\n    let obj = require('./window.obj');\n    let img = require('./texture.png');\n\n    return loadObjWithMaterial(mtl, obj, path.dirname(img) + '/')\n      .then(object => {\n        cached3DWindow = object;\n        return onLoadItem(cached3DWindow.clone());\n      });\n\n    function createTenda() {\n\n      let radialWave = function (u, v) {\n        let r = 10;\n        let x = Math.sin(u) * 3 * r;\n        let z = Math.sin(v / 2) * 2 * r;\n        let y = (Math.sin(u * 2 * Math.PI) + Math.cos(v * 2 * Math.PI)) * .5;\n\n        return new Three.Vector3(x, y, z);\n      };\n\n      //color\n      let white = new Three.MeshLambertMaterial({ color: 0xeae6ca });\n\n      let Tenda = new Three.Object3D();\n\n      let mesh = createMesh(new Three.ParametricGeometry(radialWave, 20, 20));\n      mesh.rotation.x += Math.PI / 2;\n      mesh.rotation.y += Math.PI / 2;\n      mesh.position.y += 3.1;\n      mesh.position.x += .05;\n      mesh.scale.set(.125, .125, .125);\n\n      let mesh2 = mesh.clone();\n      mesh2.rotation.x += Math.PI;\n      mesh2.position.set(1.4, 0, 0.06);\n\n      Tenda.add(mesh);\n      Tenda.add(mesh2);\n\n      for (let i = -.7; i > -3.4; i -= .45) {\n        let geometry = new Three.TorusGeometry(.08, .016, 32, 32, 2 * Math.PI);\n        let torus = new Three.Mesh(geometry, white);\n\n        if (i == -1.15)\n          torus.position.set(i, 3.14, .045);\n        else if (i == -2.5)\n          torus.position.set(i, 3.14, -.01);\n        else\n          torus.position.set(i, 3.14, .04);\n        torus.rotation.y += Math.PI / 2;\n        Tenda.add(torus);\n      }\n\n      let geometryAsta = new Three.CylinderGeometry(0.02, 0.02, 1.25, 32);\n      let asta = new Three.Mesh(geometryAsta, white);\n      asta.position.set(-1.1, 3.18, 0.02);\n      asta.rotation.z += Math.PI / 2;\n      Tenda.add(asta);\n\n      let asta2 = asta.clone();\n      asta2.position.set(-2.5, 3.18, 0.02);\n      Tenda.add(asta2);\n\n      let geometrySphereUp = new Three.SphereGeometry(0.04, 32, 32);\n      let sphere = new Three.Mesh(geometrySphereUp, white);\n      sphere.position.set(-.5, 3.18, 0.02);\n      sphere.rotation.x += Math.PI / 2;\n      sphere.scale.set(0.8, 1, 1);\n      Tenda.add(sphere);\n\n      let sphere2 = sphere.clone();\n      sphere2.position.x += -1.2;\n      Tenda.add(sphere2);\n\n      let sphere3 = sphere.clone();\n      sphere3.position.x += -1.4;\n      Tenda.add(sphere3);\n\n      let sphere4 = sphere.clone();\n      sphere4.position.x += -2.6;\n      Tenda.add(sphere4);\n\n      let valueObject = new Three.Box3().setFromObject(Tenda);\n\n      let deltaX = Math.abs(valueObject.max.x - valueObject.min.x);\n      let deltaY = Math.abs(valueObject.max.y - valueObject.min.y);\n      let deltaZ = Math.abs(valueObject.max.z - valueObject.min.z);\n\n      Tenda.position.x += width / 1.48;\n      Tenda.position.y += -height / 2.1;\n      Tenda.position.z += thickness / 1024;\n      Tenda.scale.set(width / deltaX, height / deltaY, thickness / deltaZ);\n\n      return Tenda;\n    }\n\n    function createMesh(geom) {\n      geom.applyMatrix(new Three.Matrix4().makeTranslation(-25, 0, -25));\n      let meshMaterial = new Three.MeshLambertMaterial({ color: 0xffffff, opacity: 0.9, transparent: true });\n      meshMaterial.side = Three.DoubleSide;\n\n      let plane = new Three.Mesh(geom, meshMaterial);\n      return plane;\n    }\n\n  }\n\n};\n","module.exports = __webpack_public_path__ + \"catalog/holes/window-curtain/window-curtain.jpg\";","module.exports = __webpack_public_path__ + \"catalog/holes/window-curtain/window.mtl\";","module.exports = __webpack_public_path__ + \"catalog/holes/window-curtain/window.obj\";","module.exports = __webpack_public_path__ + \"catalog/holes/window-curtain/texture.png\";","import React from 'react';\nimport * as Three from 'three';\nimport {loadObjWithMaterial} from '../../utils/load-obj';\nimport path from 'path';\n\nlet cached3DWindow = null;\n\nexport default {\n  name: \"window\",\n  prototype: \"holes\",\n\n  info: {\n    title: \"window\",\n    tag: ['window'],\n    description: \"Window\",\n    image: require('./window.png')\n  },\n\n  properties: {\n    width: {\n      label: \"Width\",\n      type: \"length-measure\",\n      defaultValue: {\n        length: 90\n      }\n    },\n    height: {\n      label: \"Height\",\n      type: \"length-measure\",\n      defaultValue: {\n        length: 100\n      }\n    },\n    altitude: {\n      label: \"Altitude\",\n      type: \"length-measure\",\n      defaultValue: {\n        length: 90\n      }\n    },\n    thickness: {\n      label: \"Thickness\",\n      type: \"length-measure\",\n      defaultValue: {\n        length: 10\n      }\n    }\n  },\n\n  render2D: function (element, layer, scene) {\n    const STYLE_HOLE_BASE = {stroke: \"#000\", strokeWidth: \"3px\", fill: \"#000\"};\n    const STYLE_HOLE_SELECTED = {stroke: \"#0096fd\", strokeWidth: \"3px\", fill: \"#0096fd\", cursor: \"move\"};\n    //let line = layer.lines.get(hole.line);\n    //let epsilon = line.properties.get('thickness') / 2;\n\n    let epsilon = 3;\n\n    let holeWidth = element.properties.get('width').get('length');\n    let holePath = `M${0} ${ -epsilon}  L${holeWidth} ${-epsilon}  L${holeWidth} ${epsilon}  L${0} ${epsilon}  z`;\n    let holeStyle = element.selected ? STYLE_HOLE_SELECTED : STYLE_HOLE_BASE;\n    let length = element.properties.get('width').get('length');\n    return (\n      <g transform={`translate(${-length / 2}, 0)`}>\n        <path key=\"1\" d={holePath} style={holeStyle}/>\n        <line key=\"2\" x1={holeWidth / 2} y1={-10 - epsilon} x2={holeWidth / 2} y2={10 + epsilon} style={holeStyle}/>\n      </g>\n    );\n  },\n\n  render3D: function (element, layer, scene) {\n    let onLoadItem = (object) => {\n      let boundingBox = new Three.Box3().setFromObject(object);\n\n      let initialWidth = boundingBox.max.x - boundingBox.min.x;\n      let initialHeight = boundingBox.max.y - boundingBox.min.y;\n      let initialThickness = boundingBox.max.z - boundingBox.min.z;\n\n      if (element.selected) {\n        let box = new Three.BoxHelper(object, 0x99c3fb);\n        box.material.linewidth = 2;\n        box.material.depthTest = false;\n        box.renderOrder = 1000;\n        object.add(box);\n      }\n\n      let width = element.properties.get('width').get('length');\n      let height = element.properties.get('height').get('length');\n      let thickness = element.properties.get('thickness').get('length');\n\n      object.scale.set(width / initialWidth, height / initialHeight,\n        thickness / initialThickness);\n\n      return object;\n    };\n\n    if(cached3DWindow) {\n      return Promise.resolve(onLoadItem(cached3DWindow.clone()));\n    }\n\n    let mtl = require('./window.mtl');\n    let obj = require('./window.obj');\n    let img = require('./texture.png');\n\n    return loadObjWithMaterial(mtl, obj, path.dirname(img) + '/')\n      .then(object => {\n        cached3DWindow = object;\n        return onLoadItem(cached3DWindow.clone())\n      })\n  }\n};\n","module.exports = __webpack_public_path__ + \"catalog/holes/window/window.png\";","module.exports = __webpack_public_path__ + \"catalog/holes/window/window.mtl\";","module.exports = __webpack_public_path__ + \"catalog/holes/window/window.obj\";","module.exports = __webpack_public_path__ + \"catalog/holes/window/texture.png\";","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { MdCamera } from 'react-icons/md'\nimport {ReactPlannerComponents, ReactPlannerConstants} from 'react-planner';\n\nconst {\n  MODE_IDLE,\n  MODE_2D_ZOOM_IN,\n  MODE_2D_ZOOM_OUT,\n  MODE_2D_PAN,\n  MODE_WAITING_DRAWING_LINE,\n  MODE_DRAGGING_LINE,\n  MODE_DRAGGING_VERTEX,\n  MODE_DRAGGING_ITEM,\n  MODE_DRAWING_LINE,\n  MODE_DRAWING_HOLE,\n  MODE_DRAWING_ITEM,\n  MODE_DRAGGING_HOLE,\n  MODE_ROTATING_ITEM,\n  MODE_3D_FIRST_PERSON,\n  MODE_3D_VIEW\n} = ReactPlannerConstants;\n\nconst { ToolbarButton } = ReactPlannerComponents.ToolbarComponents;\n\nexport default function ToolbarScreenshotButton({mode}, {translator}) {\n\n  let imageBrowserDownload = imageUri => {\n    let fileOutputLink = document.createElement('a');\n\n    let filename = 'output' + Date.now() + '.png';\n    filename = window.prompt('Insert output filename', filename);\n    if (!filename) return;\n\n    fileOutputLink.setAttribute('download', filename);\n    fileOutputLink.href = imageUri;\n    fileOutputLink.style.display = 'none';\n    document.body.appendChild(fileOutputLink);\n    fileOutputLink.click();\n    document.body.removeChild(fileOutputLink);\n  };\n\n\n  let saveScreenshotToFile = event => {\n    event.preventDefault();\n    let canvas = document.getElementsByTagName('canvas')[0];\n    imageBrowserDownload(canvas.toDataURL());\n  };\n\n  let saveSVGScreenshotToFile = event => {\n    event.preventDefault();\n\n    // First of all I need the svg content of the viewer\n    let svgElements = document.getElementsByTagName('svg');\n\n    // I get the element with max width (which is the viewer)\n    let maxWidthSVGElement = svgElements[0];\n    for (let i = 1; i < svgElements.length; i++) {\n      if (svgElements[i].width.baseVal.value > maxWidthSVGElement.width.baseVal.value) {\n        maxWidthSVGElement = svgElements[i];\n      }\n    }\n\n    let serializer = new XMLSerializer();\n\n    let img = new Image;\n    let logo = new Image;\n\n    // I create the new canvas to draw\n    let canvas = document.createElement('canvas');\n    let ctx = canvas.getContext('2d');\n\n    // Set width and height for the new canvas\n    let heightAtt = document.createAttribute('height');\n    heightAtt.value = maxWidthSVGElement.height.baseVal.value;\n    canvas.setAttributeNode(heightAtt);\n\n    let widthAtt = document.createAttribute('width');\n    widthAtt.value = maxWidthSVGElement.width.baseVal.value;\n    canvas.setAttributeNode(widthAtt);\n\n    ctx.fillStyle = 'white';\n    ctx.fillRect(0, 0, canvas.width, canvas.height);\n\n    img.crossOrigin = 'anonymous';\n    img.src = `data:image/svg+xml;base64,${window.btoa(serializer.serializeToString(maxWidthSVGElement))}`;\n\n    logo.crossOrigin = 'anonymous';\n    logo.src = 'https://media.istockphoto.com/photos/orange-picture-id185284489?k=6&m=185284489&s=612x612&w=0&h=x_w4oMnanMTQ5KtSNjSNDdiVaSrlxM4om-3PQTIzFaY=';\n\n    img.onload = () => {\n      console.log('BASE');\n      ctx.drawImage(img, 0, 0, maxWidthSVGElement.width.baseVal.value, maxWidthSVGElement.height.baseVal.value);\n      //imageBrowserDownload(canvas.toDataURL());\n    };\n\n    logo.onload = () => {\n      console.log('ORANGE');\n      ctx.drawImage(logo, 0, 0, 10, 20);\n      imageBrowserDownload(canvas.toDataURL());\n    };\n\n  };\n\n  if ([MODE_3D_FIRST_PERSON, MODE_3D_VIEW].includes(mode)) {\n    return (\n      <ToolbarButton active={false} tooltip={translator.t('Get Screenshot')} onClick={saveScreenshotToFile}>\n        <MdCamera/>\n      </ToolbarButton>\n    );\n  }\n\n  if ([MODE_IDLE,\n      MODE_2D_ZOOM_IN,\n      MODE_2D_ZOOM_OUT,\n      MODE_2D_PAN,\n      MODE_WAITING_DRAWING_LINE,\n      MODE_DRAGGING_LINE,\n      MODE_DRAGGING_VERTEX,\n      MODE_DRAGGING_ITEM,\n      MODE_DRAWING_LINE,\n      MODE_DRAWING_HOLE,\n      MODE_DRAWING_ITEM,\n      MODE_DRAGGING_HOLE,\n      MODE_ROTATING_ITEM].includes(mode)) {\n\n    return (\n      <ToolbarButton active={false} tooltip={translator.t('Get Screenshot')} onClick={saveSVGScreenshotToFile}>\n        <MdCamera/>\n      </ToolbarButton>\n    );\n  }\n\n  return null;\n\n}\n\nToolbarScreenshotButton.propTypes = {\n  mode: PropTypes.string.isRequired,\n};\n\nToolbarScreenshotButton.contextTypes = {\n  translator: PropTypes.object.isRequired,\n};\n"],"sourceRoot":""}